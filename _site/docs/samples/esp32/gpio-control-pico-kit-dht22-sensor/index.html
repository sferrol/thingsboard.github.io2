







<!Doctype html>
<html id="docs" class="">







<head>
    <meta charset="utf-8">
    <meta name="cf-2fa-verify" content="a08672380de15e9">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    
    <title>ESP32 Pico Kit GPIO control and DHT22 sensor monitor using ThingsBoard Arduino SDK | ThingsBoard Community Edition</title>
    <!-- Begin Jekyll SEO tag v2.7.1 -->
<meta name="generator" content="Jekyll v3.9.0" />
<meta property="og:title" content="ESP32 Pico Kit GPIO control and DHT22 sensor monitor using ThingsBoard Arduino SDK" />
<meta name="author" content="thingsboard" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="ThingsBoard IoT Platform sample for ESP32 Pico Kit GPIO control and temperature/humidity monitor using ThingsBoard Arduino SDK" />
<meta property="og:description" content="ThingsBoard IoT Platform sample for ESP32 Pico Kit GPIO control and temperature/humidity monitor using ThingsBoard Arduino SDK" />
<link rel="canonical" href="http://0.0.0.0:4002/docs/samples/esp32/gpio-control-pico-kit-dht22-sensor/" />
<meta property="og:url" content="http://0.0.0.0:4002/docs/samples/esp32/gpio-control-pico-kit-dht22-sensor/" />
<meta property="og:site_name" content="ThingsBoard" />
<meta property="og:image" content="http://0.0.0.0:4002/images/thingsboard_logo.png" />
<meta name="twitter:card" content="summary_large_image" />
<meta property="twitter:image" content="http://0.0.0.0:4002/images/thingsboard_logo.png" />
<meta property="twitter:title" content="ESP32 Pico Kit GPIO control and DHT22 sensor monitor using ThingsBoard Arduino SDK" />
<meta name="twitter:site" content="@thingsboard" />
<meta name="twitter:creator" content="@thingsboard" />
<script type="application/ld+json">
{"url":"http://0.0.0.0:4002/docs/samples/esp32/gpio-control-pico-kit-dht22-sensor/","publisher":{"@type":"Organization","logo":{"@type":"ImageObject","url":"http://0.0.0.0:4002/images/thingsboard_logo.png"},"name":"thingsboard"},"author":{"@type":"Person","name":"thingsboard"},"image":{"twitter":"/images/thingsboard_logo.png","facebook":"/images/thingsboard_logo.png","url":"http://0.0.0.0:4002/images/thingsboard_logo.png","@type":"imageObject"},"description":"ThingsBoard IoT Platform sample for ESP32 Pico Kit GPIO control and temperature/humidity monitor using ThingsBoard Arduino SDK","@type":"WebPage","headline":"ESP32 Pico Kit GPIO control and DHT22 sensor monitor using ThingsBoard Arduino SDK","@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->

    
    
    <meta name="twitter:description" content="ThingsBoard IoT Platform sample for ESP32 Pico Kit GPIO control and temperature/humidity monitor using ThingsBoard Arduino SDK"/>
    
    
    <link rel="shortcut icon" type="image/png" href="/images/favicon.png">
    <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Poppins:300,400,500,600,700" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.5.2/animate.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
          integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    <link rel="stylesheet" href="/css/styles.css">
    <script async defer src="https://buttons.github.io/buttons.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/qs/6.7.0/qs.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gifffer/1.5.0/gifffer.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/clipboard@1/dist/clipboard.min.js"></script>
    <script type="text/javascript">
        window.onload = function() {
            Gifffer();
        }
    </script>
    <script type="text/javascript">
        /*! loadCSS. [c]2017 Filament Group, Inc. MIT License */
        !function (a) {
            "use strict";
            var b = function (b, c, d) {
                function e(a) {
                    return h.body ? a() : void setTimeout(function () {
                        e(a)
                    })
                }

                function f() {
                    i.addEventListener && i.removeEventListener("load", f), i.media = d || "all"
                }

                var g, h = a.document, i = h.createElement("link");
                if (c) g = c; else {
                    var j = (h.body || h.getElementsByTagName("head")[0]).childNodes;
                    g = j[j.length - 1]
                }
                var k = h.styleSheets;
                i.rel = "stylesheet", i.href = b, i.media = "only x", e(function () {
                    g.parentNode.insertBefore(i, c ? g : g.nextSibling)
                });
                var l = function (a) {
                    for (var b = i.href, c = k.length; c--;) if (k[c].href === b) return a();
                    setTimeout(function () {
                        l(a)
                    })
                };
                return i.addEventListener && i.addEventListener("load", f), i.onloadcssdefined = l, l(f), i
            };
            "undefined" != typeof exports ? exports.loadCSS = b : a.loadCSS = b
        }("undefined" != typeof global ? global : this);

        /*! onloadCSS. (onload callback for loadCSS) [c]2017 Filament Group, Inc. MIT License */
        function onloadCSS(a, b) {
            function c() {
                !d && b && (d = !0, b.call(a))
            }

            var d;
            a.addEventListener && a.addEventListener("load", c), a.attachEvent && a.attachEvent("onload", c), "isApplicationInstalled" in navigator && "onloadcssdefined" in a && a.onloadcssdefined(c)
        }
    </script>
    <script type="text/javascript">

        function jqueryDefer(method) {
            if (window.jQuery) {
                method();
            } else {
                setTimeout(function () {
                    jqueryDefer(method)
                }, 50);
            }
        }

        function jqueryUiDefer(method) {
            if (window.jQuery && window.jQuery.ui) {
                method();
            } else {
                setTimeout(function () {
                    jqueryUiDefer(method)
                }, 50);
            }
        }

        window.vis = (function () {
            var stateKey,
                eventKey,
                keys = {
                    hidden: "visibilitychange",
                    webkitHidden: "webkitvisibilitychange",
                    mozHidden: "mozvisibilitychange",
                    msHidden: "msvisibilitychange"
                };
            for (stateKey in keys) {
                if (stateKey in document) {
                    eventKey = keys[stateKey];
                    break;
                }
            }
            return function (c) {
                if (c) document.addEventListener(eventKey, c);
                return !document[stateKey];
            }
        })();

        function loadScript(src, callback) {
            var s, r, t;
            r = false;
            s = document.createElement('script');
            s.type = 'text/javascript';
            s.src = src;
            s.onload = s.onreadystatechange = function () {
                if (!r && (!this.readyState || this.readyState == 'complete')) {
                    r = true;
                    if (callback) {
                        callback();
                    }
                }
            };
            t = document.getElementsByTagName('script')[0];
            t.parentNode.insertBefore(s, t);
        }

        function loadCssAsync(src, callback) {
            var stylesheet = loadCSS(src);
            if (callback) {
                onloadCSS(stylesheet, callback);
            }
        }

        function loadNextScript(index, scriptsList, completeCallback) {
            if (index < scriptsList.length) {
                var script = scriptsList[index];
                if (script.type === 'script') {
                    loadScript(script.src, function () {
                        if (script.callback) {
                            script.callback();
                        }
                        index++;
                        loadNextScript(index, scriptsList, completeCallback);
                    });
                } else if (script.type === 'css') {
                    loadCssAsync(script.src, function () {
                        index++;
                        loadNextScript(index, scriptsList, completeCallback);
                    });
                }
            } else if (completeCallback) {
                completeCallback();
            }
        }

        var initialScriptsList = [
            {src: '/js/jquery-2.2.0.min.js', type: 'script'},
            {src: '/css/jquery-ui.min.css', type: 'css'},
            {src: '/js/jquery-ui.min.js', type: 'script'},
            {src: '/js/jquery.vide.js', type: 'script'},
            {src: '/js/script.js', type: 'script'},
            {src: '/css/photoswipe.css', type: 'css'},
            {src: '/css/default-skin/default-skin.css', type: 'css'},
            {src: '/js/photoswipe.min.js', type: 'script'},
            {src: '/js/photoswipe-ui-default.min.js', type: 'script'}
        ];

        loadNextScript(0, initialScriptsList);

        jqueryDefer(function () {
            (function ($, win) {
                $.fn.inViewport = function (cb) {
                    return this.each(function (i, el) {
                        function visPx() {
                            var H = $(this).height(),
                                r = el.getBoundingClientRect(), t = r.top, b = r.bottom;
                            var result = cb.call(el, Math.max(0, t > 0 ? H - t : (b < H ? b : H)));
                            if (result) {
                                $(win).off("resize scroll", visPx);
                            }
                        }

                        visPx();
                        $(win).on("resize scroll", visPx);
                    });
                };
            }(jQuery, window));
        });

        function inViewportDefer(method) {
            if (window.jQuery && $.fn.inViewport) {
                method();
            } else {
                setTimeout(function () {
                    inViewportDefer(method)
                }, 50);
            }
        }

    </script>
    <script type="text/javascript">
        function _gaLt(event) {
            /* If GA is blocked or not loaded, or not main|middle|touch click then don't track */
            if (!ga.hasOwnProperty("loaded") || ga.loaded != true || (event.which != 1 && event.which != 2)) {
                return;
            }
            var el = event.srcElement || event.target;

            while (el && (typeof el.tagName == 'undefined' || el.tagName.toLowerCase() != 'a' || !el.href)) {
                el = el.parentNode;
            }
            if (el && el.href) {
                var link = el.href;
                if ((link.indexOf(location.host) == -1 || link.indexOf('.' + location.host) > 0) && !link.match(/^javascript\:/i)) {
                    var target = (el.target && !el.target.match(/^_(self|parent|top)$/i)) ? el.target : false;
                    if (event.ctrlKey || event.shiftKey || event.metaKey || event.which == 2) {
                        target = "_blank";
                    }

                    var hbrun = false; // tracker has not yet run
                    var hitBack = function () {
                        if (hbrun) return;
                        hbrun = true;
                        window.location.href = link;
                    };

                    if (target) {
                        ga(
                            "send", "event", "Outgoing Links", link,
                            document.location.pathname + document.location.search
                        );
                    } else {
                        event.preventDefault ? event.preventDefault() : event.returnValue = !1;
                        ga(
                            "send", "event", "Outgoing Links", link,
                            document.location.pathname + document.location.search, {
                                "hitCallback": hitBack
                            }
                        );

                        setTimeout(hitBack, 1000);
                    }
                }
            }
        }

        var _w = window;
        var _gaLtEvt = ("ontouchstart" in _w) ? "click" : "mousedown";
        _w.addEventListener ? _w.addEventListener("load", function () {
                document.body.addEventListener(_gaLtEvt, _gaLt, !1)
            }, !1)
            : _w.attachEvent && _w.attachEvent("onload", function () {
            document.body.attachEvent("on" + _gaLtEvt, _gaLt)
        });
    </script>
    <script>
        (function (i, s, o, g, r, a, m) {
            i['GoogleAnalyticsObject'] = r;
            i[r] = i[r] || function () {
                (i[r].q = i[r].q || []).push(arguments)
            }, i[r].l = 1 * new Date();
            a = s.createElement(o),
                m = s.getElementsByTagName(o)[0];
            a.async = 1;
            a.src = g;
            m.parentNode.insertBefore(a, m)
        })(window, document, 'script', '//www.google-analytics.com/analytics.js', 'ga');

        ga('create', 'UA-88383331-1', 'auto');
        ga('send', 'pageview');
    </script>
    <script>
        function Burger() {
            var header = $('header');
            var body = $('body');
            if (header.hasClass('opened-burger')) {
                header.removeClass('opened-burger');
                let subMenus = $('nav.head-menu > ul > li > div.centered-sub > ul.sub-menu');
                subMenus.removeClass('open-sub');
                body.css('overflow', '');
            } else {
                header.addClass('opened-burger');
                body.css('overflow', 'hidden');
            }
        }
    </script>
    <script>

        jqueryDefer(function () {
            let menuElement = $('nav.head-menu > ul');
            let submenuContainer = $('nav.head-menu > div.sub-menu-container');
            let menuItems = $('nav.head-menu > ul > li');
            let indicator = $('nav.head-menu > ul > div.indicator');
            let subMenuActive = false;
            menuElement.on('mouseleave', function (event) {
                if (!$(event.relatedTarget).parents('div.sub-menu-container').length) {
                    subMenuActive = false;
                    submenuContainer.removeClass('active bounds-transition');
                    menuItems.removeClass('active');
                    indicator.removeClass('left-transition');
                }
            });
            submenuContainer.on('mouseleave', function (event) {
                if (!$(event.relatedTarget).parents('nav.head-menu > ul').length) {
                    subMenuActive = false;
                    submenuContainer.removeClass('active bounds-transition');
                    menuItems.removeClass('active');
                    indicator.removeClass('left-transition');
                }
            });
            menuItems.each(function() {
                let item = $( this );
                let subMenuId = item.attr('data-submenu-id');
                item.on('mouseenter', function () {
                    let submenus = $('nav.head-menu > div.sub-menu-container > div');
                    submenus.css('display', 'none');
                    menuItems.removeClass('active');
                    item.addClass('active');
                    let targetSubMenu = $('nav.head-menu > div.sub-menu-container > div#'+subMenuId);
                    targetSubMenu.css('display', 'block');
                    submenuContainer.css('overflow', 'visible');
                    let left = item.position().left + (item.outerWidth() - targetSubMenu.outerWidth()) / 2;
                    submenuContainer.css('left', left + 'px');
                    if (!subMenuActive) {
                        submenuContainer.addClass('active');
                        subMenuActive = true;
                    } else {
                        submenuContainer.addClass('bounds-transition');
                        indicator.addClass('left-transition');
                    }
                    indicator.css('left', item.position().left);
                    indicator.css('width', item.outerWidth());
                    submenuContainer.css('height', targetSubMenu.outerHeight() + 'px');
                    submenuContainer.css('width', targetSubMenu.outerWidth() + 'px');
                    submenuContainer.css('overflow', 'hidden');
                });
            });

            let isMobile = $('button.burger').css('display') === 'block';
            if (isMobile) {
                initMobileSubmenu();
            }

            $(window).resize(function(){
                let newIsMobile = $('button.burger').css('display') === 'block';
                if (isMobile !== newIsMobile) {
                    isMobile = newIsMobile;
                    if (isMobile) {
                        initMobileSubmenu();
                    } else {
                        restoreDesktopSubmenu();
                    }
                }
            });

            // Products selector

            
            let productsSelector = $('.products-selector');
            $(window).click(function(e) {
                if (productsSelector[0].contains(e.target)) {
                    if (productsSelector.hasClass('active')) {
                        productsSelector.removeClass('active');
                    } else {
                        productsSelector.addClass('active');
                    }
                } else {
                    productsSelector.removeClass('active');
                }
            });
            

            // Rogue line numbers fix (don't show line numbers for 1 row)
            $( document ).ready(function() {
                $('.rouge-gutter.gl').each(function() {
                    var lineNumbers = $(this).children('.lineno');
                    if (lineNumbers.text() === '1\n') {
                        $(this).css('display', 'none');
                    }
                });
            });
        });

        function initMobileSubmenu() {

            var header = $('header');
            if (header.hasClass('opened-burger')) {
                var body = $('body');
                body.css('overflow', 'hidden');
            }

            let targetSubMenus = $('nav.head-menu > div.sub-menu-container > div');
            targetSubMenus.css('display', 'block');
            let submenuContainer = $('nav.head-menu > div.sub-menu-container');
            submenuContainer.removeClass('active');
            submenuContainer.css('display', 'none');

            targetSubMenus.each(function() {
                let subMenu = $( this );
                let subMenuId = subMenu.attr('id');
                let parent = $('nav.head-menu > ul > li.'+subMenuId);
                parent.append(subMenu);
            });
        }

        function restoreDesktopSubmenu() {
            var body = $('body');
            body.css('overflow', '');
            let targetSubMenus = $('nav.head-menu > ul > li > div');
            let submenuContainer = $('nav.head-menu > div.sub-menu-container');
            submenuContainer.removeClass('active');
            submenuContainer.css('display', 'block');
            let menuItems = $('nav.head-menu > ul > li');
            menuItems.removeClass('active');
            targetSubMenus.each(function() {
                let subMenu = $( this );
                submenuContainer.append(subMenu);
            });
        }

        function listburg(subMenuId) {
            let isMobile = $('button.burger').css('display') === 'block';
            if (isMobile) {
                let targetSubMenu = $('nav.head-menu > ul > li > div.centered-sub#'+subMenuId+' > ul.sub-menu');
                let isOpen = targetSubMenu.hasClass('open-sub');
                let subMenus = $('nav.head-menu > ul > li > div.centered-sub > ul.sub-menu');
                subMenus.removeClass('open-sub');
                if (!isOpen) {
                    targetSubMenu.addClass('open-sub');
                }
            }
        }
    </script>
</head>
<body>

<div class="products-selector">
    <img src="/images/thingsboard-cm-icon.svg"/>
    <div class="product-info">
        <div class="product-title">
            Community Edition
        </div>
        <div class="product-description">
            ThingsBoard Documentation
        </div>
    </div>
    <div class="products">
        
        

    
        
        


        
    


        <a href="/docs/paas/" class="product">Cloud</a>
        
        

    
        
        


        
    


        <a href="/docs/pe/" class="product">Professional Edition</a>
        
        

    
        
        


        
            
        
    


        <a href="/docs/samples/esp32/gpio-control-pico-kit-dht22-sensor/" class="product active">Community Edition</a>
        
        

    


        <a href="/docs/edge/" class="product">Edge</a>
        
        

    


        <a href="/docs/iot-gateway/" class="product">IoT Gateway</a>
        
        

    


        <a href="/products/license-server/" class="product">License Server</a>
        
        

    


        <a href="/docs/trendz/" class="product">Trendz Analytics</a>
        
    </div>
</div>

<header>
    <div class="logo-burger">
        
        <button onclick="Burger()" class="burger"></button>
        <div id="githubButtonContainer">
            <a class="github-button" href="https://github.com/thingsboard/thingsboard" data-show-count="true"
               aria-label="Star thingsboard/thingsboard on GitHub">Star</a>
        </div>
    </div>
    <nav class="head-menu">
        <ul>
            <li class="nav-products" data-submenu-id="nav-products">
                <a onclick="listburg('nav-products')">Products</a>
            </li>
            <li class="nav-services" data-submenu-id="nav-services">
                <a onclick="listburg('nav-services')">Services</a>
            </li>
            
            <li class="nav-cases" data-submenu-id="nav-cases">
                <a onclick="listburg('nav-cases')">Use Cases</a>
            </li>
            <li class="nav-customers" data-submenu-id="nav-customers">
                <a onclick="listburg('nav-customers')">Customers</a>
            </li>
            <li class="nav-company" data-submenu-id="nav-company">
                <a onclick="listburg('nav-company')">Company</a>
            </li>
            <div class="indicator"><div class="head-arrow"></div><div class="line"></div><div class="sub-background"></div></div>
        </ul>
        <div class="sub-menu-container">
            <div id="nav-products" class="centered-sub">
                <ul class="sub-menu products">
                    <div class="sub-groups">
                        <div class="group">
                            <p class="group-name">IoT platforms</p>
                            <a class="cloud-lnk" href="/products/paas/">
                                <img src="/images/thingsboard-c-icon.svg">
                                <div class="sub-text">
                                    <h1>Cloud</h1>
                                    <p>Platform as a service</p>
                                </div>
                            </a>
                            <a class="prof-lnk" href="/products/thingsboard-pe/">
                                <img src="/images/thingsboard-p-icon.svg">
                                <div class="sub-text">
                                    <h1>Professional Edition</h1>
                                    <p>Advanced IoT platform</p>
                                </div>
                            </a>
                            <a class="com-lnk" href="/">
                                <img src="/images/thingsboard-cm-icon.svg">
                                <div class="sub-text">
                                    <h1>Community Edition</h1>
                                    <p>Open source platform</p>
                                </div>
                            </a>
                        </div>
                        <div class="group">
                            <p class="group-name">Product ecosystem</p>
                            <a class="edge-lnk" href="/products/thingsboard-edge/">
                                <img src="/images/thingsboard-e-icon.svg">
                                <div class="sub-text">
                                    <h1>Edge</h1>
                                    <p>Edge computing</p>
                                </div>
                            </a>
                            <a class="gateway-lnk" href="/docs/iot-gateway/what-is-iot-gateway/">
                                <img src="/images/gateway-icon.svg">
                                <div class="sub-text">
                                    <h1>IoT Gateway</h1>
                                    <p>Connect legacy protocols</p>
                                </div>
                            </a>
                            <a class="license-lnk" href="/products/license-server/">
                                <img src="/images/license-icon.svg">
                                <div class="sub-text">
                                    <h1>License Server</h1>
                                    <p>Billing solution</p>
                                </div>
                            </a>
                            <a class="trendz-lnk" href="/products/trendz/">
                                <img src="/images/trendz-icon.svg">
                                <div class="sub-text">
                                    <h1>Trendz Analytics</h1>
                                    <p>Data analytics and Prediction</p>
                                </div>
                            </a>
                        </div>
                    </div>
                </ul>
            </div>
            <div id="nav-services" class="centered-sub">
                <ul class="sub-menu services">
                    <a href="/docs/services/support/">
                        <img src="/images/support-icon.svg">
                        <div class="sub-text">
                            <h1>Support</h1>
                            <p>Support packages</p>
                        </div>
                    </a>
                    <a href="/docs/services/trainings/">
                        <img src="/images/train-icon.svg">
                        <div class="sub-text">
                            <h1>Trainings</h1>
                            <p>ThingsBoard education courses</p>
                        </div>
                    </a>
                    <a href="/docs/services/consulting/">
                        <img src="/images/prof-icon.svg">
                        <div class="sub-text">
                            <h1>Professional services</h1>
                            <p>Development of solutions by the ThingsBoard team</p>
                        </div>
                    </a>
                </ul>
            </div>
            
            <div id="nav-cases" class="centered-sub">
                <ul class="sub-menu cases">
                    <a href="/smart-metering/">
                        <img src="/images/case-met-icon.svg">
                        <div class="sub-text">
                            <h1>Smart Metering</h1>
                            <p>Collection, analysis and visualization of data from meters</p>
                        </div>
                    </a>
                    <a href="/smart-energy/">
                        <img src="/images/case-eng-icon.svg">
                        <div class="sub-text">
                            <h1>Smart Energy</h1>
                            <p>Energy monitoring and efficiency analysis</p>
                        </div>
                    </a>
                    <a href="/smart-farming/">
                        <img src="/images/case-fam-icon.svg">
                        <div class="sub-text">
                            <h1>Smart Farming</h1>
                            <p>Monitoring of indoor conditions and plant growth characteristics</p>
                        </div>
                    </a>
                    <a href="/fleet-tracking/">
                        <img src="/images/case-trk-icon.svg">
                        <div class="sub-text">
                            <h1>Fleet Tracking</h1>
                            <p>Fleet tracking and fleet management</p>
                        </div>
                    </a>
                </ul>
            </div>
            <div id="nav-customers" class="centered-sub">
                <ul class="sub-menu customers">
                    <div class="sub-groups">
                        <div class="group">
                            <a class="small-link" href="/industries/smart-energy/">
                                <img src="/images/se-s-icon.svg">
                                <div class="sub-text">
                                    <h1>Smart Energy</h1>
                                </div>
                            </a>
                            <a class="small-link" href="/industries/agriculture/">
                                <img src="/images/agr-s-icon.svg">
                                <div class="sub-text">
                                    <h1>Agriculture</h1>
                                </div>
                            </a>
                            <a class="small-link" href="/industries/smart-buildings/">
                                <img src="/images/sb-s-icon.svg">
                                <div class="sub-text">
                                    <h1>Smart Buildings</h1>
                                </div>
                            </a>
                        </div>
                        <div class="group">
                            <a class="small-link" href="/industries/smart-city/">
                                <img src="/images/sc-s-icon.svg">
                                <div class="sub-text">
                                    <h1>Smart City</h1>
                                </div>
                            </a>
                            <a class="small-link" href="/industries/telecom/">
                                <img src="/images/tel-s-icon.svg">
                                <div class="sub-text">
                                    <h1>Telecom</h1>
                                </div>
                            </a>
                            <a class="small-link" href="/industries/industry40/">
                                <img src="/images/in-s-icon.svg">
                                <div class="sub-text">
                                    <h1>Industry 4.0</h1>
                                </div>
                            </a>
                        </div>
                    </div>
                </ul>
            </div>
            <div id="nav-company" class="centered-sub">
                <ul class="sub-menu about">
                    <div class="sub-groups">
                        <div class="group">
                            <a class="small-link" href="/company/">
                                <img src="/images/about-s-icon.svg">
                                <div class="sub-text">
                                    <h1>Our Company</h1>
                                </div>
                            </a>
                            <a class="small-link" href="/docs/contact-us/">
                                <img src="/images/contact-s-icon.svg">
                                <div class="sub-text">
                                    <h1>Contact Us</h1>
                                </div>
                            </a>
                            <a class="small-link" href="/careers/">
                                <img src="/images/careers-s-icon.svg">
                                <div class="sub-text">
                                    <h1>Careers</h1>
                                </div>
                            </a>
                        </div>
                        <div class="group">
                            <a class="small-link" href="/mediakit/">
                                <img src="/images/media-s-icon.svg">
                                <div class="sub-text">
                                    <h1>Media Kit</h1>
                                </div>
                            </a>
                            <a class="small-link" href="https://blog.thingsboard.io/">
                                <img src="/images/blog-s-icon.svg">
                                <div class="sub-text">
                                    <h1>Blog</h1>
                                </div>
                            </a>
                        </div>
                    </div>
                    <div class="bottom-group">
                        <a class="small-link" href="/partners/hardware/">
                            <img src="/images/hard-s-icon.svg">
                            <div class="sub-text">
                                <h1>Hardware partners</h1>
                            </div>
                        </a>
                        <a class="small-link" href="/partners/distributors/">
                            <img src="/images/dis-s-icon.svg">
                            <div class="sub-text">
                                <h1>Distributors</h1>
                            </div>
                        </a>
                    </div>
                </ul>
            </div>
        </div>
    </nav>
    <div>
        <a href="/installations/" class="n-button try">Try it now</a>
        <a href="/pricing/" class="n-button price">Pricing</a>
    </div>
</header>


<div id="searchBox">
    <input type="text" id="search" placeholder="Search" onkeydown="if (event.keyCode==13) window.location.replace('/docs/search/?q=' + this.value)">
    <button class="searchButton"></button>
</div>

<!--  HERO  -->
<section id="hero">
  <div id="hero-content">
    <div id="vendorStrip">
      <div id="docsList">
          <ul>
            
              
              
              
              <li>
                  <a href="/docs/getting-started-guides/helloworld/" >Getting Started</a>
                  
              </li>
            
              
              
              
              <li>
                  <a href="/docs/" >Documentation</a>
                  
              </li>
            
              
              
              
              <li>
                  <a href="/docs/guides/" >Guides</a>
                  
              </li>
            
              
              
              
              <li>
                  <a href="/docs/user-guide/install/installation-options/" >Installation</a>
                  
              </li>
            
              
              
              
              <li>
                  <a href="/docs/reference/" >Architecture</a>
                  
              </li>
            
              
              
              
              <li>
                  <a href="/docs/api/" >API</a>
                  
              </li>
            
              
              
              
              <li>
                  <a href="/docs/faq/" >FAQ</a>
                  
              </li>
            
          </ul>
          <div id="docsBreadcrumbs">
              
                <span class="item">ESP32 Pico Kit GPIO control and DHT22 sensor monitor using ThingsBoard Arduino SDK</span>
              
          </div>
      </div>
    </div>
  </div>
</section>
<div id="docsNav">
    <div class="docItems">
        
            
            
                <a class="toc" href="/docs/getting-started-guides/helloworld/" >Getting Started</a>
            
        
            
            
                <a class="toc" href="/docs/" >Documentation</a>
            
        
            
            
                <a class="toc" href="/docs/guides/" >Guides</a>
            
        
            
            
                <a class="toc" href="/docs/user-guide/install/installation-options/" >Installation</a>
            
        
            
            
                <a class="toc" href="/docs/reference/" >Architecture</a>
            
        
            
            
                <a class="toc" href="/docs/api/" >API</a>
            
        
            
            
                <a class="toc" href="/docs/faq/" >FAQ</a>
            
        
    </div>
</div>








<section id="encyclopedia">
  
  <div id="docsContent" class="noToc hasTocContent">
      <div id="table-of-contents">
          
              <h4>On this page</h4>
          
      </div>
      <div id="top-spacer"></div>
      <h1>ESP32 Pico Kit GPIO control and DHT22 sensor monitor using ThingsBoard Arduino SDK</h1>
      <div id="content">
          <ul id="markdown-toc">
  <li><a href="#introduction" id="markdown-toc-introduction">Introduction</a></li>
  <li><a href="#list-of-hardware" id="markdown-toc-list-of-hardware">List of hardware</a></li>
  <li><a href="#wiring" id="markdown-toc-wiring">Wiring</a>    <ul>
      <li><a href="#dht22-connection" id="markdown-toc-dht22-connection">DHT22 connection</a></li>
      <li><a href="#leds-connection" id="markdown-toc-leds-connection">LEDs connection</a></li>
      <li><a href="#connection-diagram" id="markdown-toc-connection-diagram">Connection diagram</a></li>
    </ul>
  </li>
  <li><a href="#device-provisioning" id="markdown-toc-device-provisioning">Device provisioning</a></li>
  <li><a href="#provision-your-dashboard" id="markdown-toc-provision-your-dashboard">Provision your dashboard</a></li>
  <li><a href="#creating-esp32-firmware" id="markdown-toc-creating-esp32-firmware">Creating ESP32 firmware</a>    <ul>
      <li><a href="#esp32-and-arduino-ide-setup" id="markdown-toc-esp32-and-arduino-ide-setup">ESP32 and Arduino IDE setup</a></li>
      <li><a href="#install-arduino-thingsboard-sdk" id="markdown-toc-install-arduino-thingsboard-sdk">Install Arduino ThingsBoard SDK</a></li>
      <li><a href="#install-esp32-dht22-driver" id="markdown-toc-install-esp32-dht22-driver">Install ESP32 DHT22 driver</a></li>
      <li><a href="#connect-esp32-pico-to-pc" id="markdown-toc-connect-esp32-pico-to-pc">Connect ESP32 Pico to PC</a></li>
      <li><a href="#prepare-and-upload-sketch" id="markdown-toc-prepare-and-upload-sketch">Prepare and upload sketch</a></li>
    </ul>
  </li>
  <li><a href="#troubleshooting" id="markdown-toc-troubleshooting">Troubleshooting</a></li>
  <li><a href="#data-visualization-and-gpio-control" id="markdown-toc-data-visualization-and-gpio-control">Data visualization and GPIO control</a></li>
  <li><a href="#see-also" id="markdown-toc-see-also">See also</a></li>
  <li><a href="#your-feedback" id="markdown-toc-your-feedback">Your feedback</a></li>
  <li><a href="#next-steps" id="markdown-toc-next-steps">Next steps</a></li>
</ul>

<h2 id="introduction">Introduction</h2>

<p>ThingsBoard is an open-source server-side platform that allows you to monitor and control IoT devices.
It is free for both personal and commercial usage and you can deploy it anywhere. 
If this is your first experience with the platform we recommend to review 
<a href="/docs/getting-started-guides/what-is-thingsboard/">what-is-thingsboard</a> page and <a href="/docs/getting-started-guides/helloworld/">getting-started</a> guide.</p>

<p><a href="https://www.espressif.com/en/products/hardware/esp32/overview">ESP32</a> is a series of low-cost, low-power system-on-a-chip microcontrollers with integrated self-contained Wi-Fi and dual-mode Bluetooth. ESP32 is a successor of ESP8266 chip.</p>

<p>This sample application will allow you to control GPIO of your ESP32 device using ThingsBoard web UI and display humidity/temperature data from DHT22 sensor. We will observe GPIO control using LEDs connected to the pins. The purpose of this application is to demonstrate ThingsBoard <a href="/docs/user-guide/rpc/">RPC capabilities</a> and ThingsBoard <a href="/docs/user-guide/telemetry/">Telemetry</a>.</p>

<p>The application that is running on ESP32 is written using ThingsBoard Arduino SDK which is quite simple and easy to understand.</p>

<p>Current GPIO state and GPIO control widget is visualized using built-in customizable dashboard.</p>

<p>Once you complete this sample/tutorial, you will see your sensor data on the following dashboard.</p>

<p><img src="/images/samples/esp32/gpio-temperature/dashboard.png" alt="image" /></p>

<h2 id="list-of-hardware">List of hardware</h2>

<ul>
  <li><a href="https://www.espressif.com/en/products/hardware/development-boards">ESP32 Pico Kit board</a>.</li>
</ul>

<p><img src="https://docs.espressif.com/projects/esp-idf/en/latest/_images/esp32-pico-kit-v4.1-layout.jpg" alt="image" /></p>

<ul>
  <li><a href="https://www.aliexpress.com/item/1pcs-DHT22-digital-temperature-and-humidity-sensor-Temperature-and-humidity-module-AM2302-replace-SHT11-SHT15/32316036161.html">DHT22 sensor</a></li>
</ul>

<p><img src="/images/samples/arduino/temperature/dht22-pinout.png" alt="image" /></p>

<ul>
  <li>6 LEDs</li>
  <li>6 Resistors in range between 68Ω and 100Ω</li>
  <li>Breadboard</li>
  <li>Micro-USB cable</li>
</ul>

<h2 id="wiring">Wiring</h2>

<h3 id="dht22-connection">DHT22 connection</h3>

<table>
  <thead>
    <tr>
      <th>Pin</th>
      <th>Connect to</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>DHT22 VCC</td>
      <td>Pico 5V</td>
    </tr>
    <tr>
      <td>DHT22 DATA</td>
      <td>Pico 33</td>
    </tr>
  </tbody>
</table>

<h3 id="leds-connection">LEDs connection</h3>

<table>
  <thead>
    <tr>
      <th>Pin</th>
      <th>Connect to</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>LED1 Anode</td>
      <td>Pico 32 trough resistor (68Ω - 100Ω)</td>
    </tr>
    <tr>
      <td>LED2 Anode</td>
      <td>Pico 26 trough resistor (68Ω - 100Ω)</td>
    </tr>
    <tr>
      <td>LED3 Anode</td>
      <td>Pico 25 trough resistor (68Ω - 100Ω)</td>
    </tr>
    <tr>
      <td>LED4 Anode</td>
      <td>Pico 19 trough resistor (68Ω - 100Ω)</td>
    </tr>
    <tr>
      <td>LED5 Anode</td>
      <td>Pico 22 trough resistor (68Ω - 100Ω)</td>
    </tr>
    <tr>
      <td>LED6 Anode</td>
      <td>Pico 21 trough resistor (68Ω - 100Ω)</td>
    </tr>
    <tr>
      <td>All LEDs cathodes</td>
      <td>Pico Ground</td>
    </tr>
  </tbody>
</table>

<h3 id="connection-diagram">Connection diagram</h3>

<p>The following picture summarizes the connections for this project:</p>

<p><img src="/images/samples/esp32/gpio-temperature/wiring.png" alt="image" /></p>

<h2 id="device-provisioning">Device provisioning</h2>

<p>This step contains instructions that are necessary to connect your device to ThingsBoard.</p>

<p>Open ThingsBoard Web UI (http://localhost:8080) in browser and login as tenant administrator.
If you loaded the demo data during TB installation, the next credentials can be used:</p>

<ul>
  <li>login: tenant@thingsboard.org</li>
  <li>password: tenant</li>
</ul>

<p>Go to “Devices” section. Click “+” button and create a device with the name “ESP32 Pico Device”. Set “Device type” to “default”.</p>

<p><img src="/images/samples/esp32/gpio-temperature/device.png" alt="image" /></p>

<p>Once device created, open its details and click “Manage credentials”.</p>

<p>Copy auto-generated access token from the “Access token” field. Please save this device token. It will be referred to later as <strong>$ACCESS_TOKEN</strong>.</p>

<p><img src="/images/samples/esp32/gpio-temperature/credentials.png" alt="image" /></p>

<h2 id="provision-your-dashboard">Provision your dashboard</h2>

<p>Download the dashboard file using this <a href="/docs/samples/esp32/resources/esp32-dht22-temp-and-gpio-dashboard.json"><strong>link</strong></a>.
Use import/export <a href="/docs/user-guide/ui/dashboards/#dashboard-importexport"><strong>instructions</strong></a> to import the dashboard to your ThingsBoard instance.</p>

<h2 id="creating-esp32-firmware">Creating ESP32 firmware</h2>

<p>Easiest way to program ESP32 Pico Kit is to use Arduino IDE. Following sections are describing that approach.</p>

<h3 id="esp32-and-arduino-ide-setup">ESP32 and Arduino IDE setup</h3>

<p>First you will need Arduino IDE and all related software installed.</p>

<p>Download and install <a href="https://www.arduino.cc/en/Main/Software">Arduino IDE</a>.</p>

<p>The Pico board support must be added to Arduino IDE before any program can be built and flashed into ESP32. To do so, install ESP32 package as described below:</p>

<ol>
  <li>
    <p>Open Arduino IDE.</p>
  </li>
  <li>
    <p>Open <strong>File -&gt; Preferences</strong> menu, and add a board manager URLs</p>

    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre>https://dl.espressif.com/dl/package_esp32_index.json,http://arduino.esp8266.com/stable/package_esp8266com_index.json
</pre></td></tr></tbody></table></code></pre></div>    </div>

    <p>into <strong>Additional Boards Manager URL</strong> field, as shown below:</p>

    <p><img src="/images/samples/esp32/gpio-temperature/add-esp32-url.png" alt="image" /></p>
  </li>
  <li>
    <p>Select <strong>Tools -&gt; Board… -&gt; Board manager</strong> menu.</p>
  </li>
  <li>
    <p>Enter <strong>ESP32</strong> in the search field. Click <strong>Install</strong></p>

    <p><img src="/images/samples/esp32/gpio-temperature/install-esp32-arduino.png" alt="image" /></p>
  </li>
</ol>

<h3 id="install-arduino-thingsboard-sdk">Install Arduino ThingsBoard SDK</h3>

<p>To simplify application development, install the ThingsBoard Arduino SDK and its dependencies from standard Arduino library repository:</p>

<ol>
  <li>
    <p>Proceed to <strong>Sketch -&gt; Include Library…</strong> submenu. Select <strong>Manage Libraries</strong>.</p>
  </li>
  <li>
    <p>Find and install <strong>ThingsBoard Arduino SDK</strong>, <strong>PubSubClient by Nick O’Leary</strong> and <strong>ArduinoHttpClient</strong> libraries.</p>

    <p><img src="/images/samples/esp32/gpio-temperature/install-thingsboard-arduino.png" alt="image" />
<img src="/images/samples/esp32/gpio-temperature/install-pubsubclient-arduino.png" alt="image" />
<img src="/images/samples/esp32/gpio-temperature/install-arduinohttpclient-arduino.png" alt="image" /></p>
  </li>
  <li>
    <p>Install <strong>ArduinoJSON</strong> library <strong>v6.9.1</strong> or higher. <span style="color:red">Avoid installing beta releases of the ArduinoJson library</span>.</p>

    <p><img src="/images/samples/esp32/gpio-temperature/do-not-use-beta-version-arduinojson.png" alt="image" /></p>
  </li>
</ol>

<p>From now on, you can use ThingsBoard SDK right from Arduino IDE.</p>

<h3 id="install-esp32-dht22-driver">Install ESP32 DHT22 driver</h3>

<p>DHT22 sensor, connected to the ESP32 requires a special driver. To install it, proceed as follows:</p>

<ol>
  <li>
    <p>Click on “Sketch” menu. Open “Include Library…” submenu. Select “Manage Libraries”.</p>
  </li>
  <li>
    <p>Type “ESP DHT22” in the search field.</p>
  </li>
  <li>
    <p>Click install on “DHT22 Sensor Library for ESPx”, as shown below:</p>

    <p><img src="/images/samples/esp32/gpio-temperature/install-esp32-dht22-arduino.png" alt="image" /></p>
  </li>
</ol>

<h3 id="connect-esp32-pico-to-pc">Connect ESP32 Pico to PC</h3>

<p>ESP32 Pico Kit does not require a sophisticated connection. Just plug micro-USB cable into PC and Pico, this should be enough.</p>

<h3 id="prepare-and-upload-sketch">Prepare and upload sketch</h3>

<p>Download and open <strong>esp32-dht-gpio.ino</strong> sketch.</p>

<p><strong>Note</strong> You need to edit following constants and variables in the sketch:</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">WIFI_AP</code> - name of your access point</li>
  <li><code class="language-plaintext highlighter-rouge">WIFI_PASSWORD</code> - access point password</li>
  <li><code class="language-plaintext highlighter-rouge">TOKEN</code> - the <strong>$ACCESS_TOKEN</strong> from ThingsBoard configuration step.</li>
  <li><code class="language-plaintext highlighter-rouge">THINGSBOARD_SERVER</code> - ThingsBoard HOST/IP address that is accessible within your wifi network. Specify <code class="language-plaintext highlighter-rouge">demo.thingsboard.io</code> if you are using <a href="https://demo.thingsboard.io/">live demo</a> server.</li>
</ul>

<script>
  jqueryUiDefer(initTabs);
  function initTabs() {
    $(function(){
        $("#arduino-sketch").tabs();
    });
  }
</script>

<div id="arduino-sketch" class="docs-tabs">
  <div class="ui-tabs-scrollbox">
    <ul>
      <li><a href="#esp32-dht-gpio">esp32-dht-gpio.ino</a></li>
    </ul>
  </div>
  <div id="esp32-dht-gpio">
    <table class="includecode">
<tr><td>
<div class="language-c copy-code highlighter-rouge" id="resources/esp32-dht-gpio.ino"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
153
154
155
156
157
158
159
160
161
162
163
164
165
166
167
168
169
170
171
172
173
174
175
176
177
178
179
180
181
182
183
184
185
186
187
188
189
190
191
192
193
194
195
196
197
198
199
200
201
202
203
204
205
206
207
208
209
210
211
212
213
214
215
216
217
218
219
220
221
222
223
224
225
226
227
228
229
230
231
232
233
234
</pre></td><td class="rouge-code"><pre><span class="cp">#include &lt;DHTesp.h&gt;         // DHT for ESP32 library
#include &lt;WiFi.h&gt;           // WiFi control for ESP32
#include &lt;ThingsBoard.h&gt;    // ThingsBoard SDK
</span>
<span class="c1">// Helper macro to calculate array size</span>
<span class="cp">#define COUNT_OF(x) ((sizeof(x)/sizeof(0[x])) / ((size_t)(!(sizeof(x) % sizeof(0[x])))))
</span>
<span class="c1">// WiFi access point</span>
<span class="cp">#define WIFI_AP_NAME        "WIFI_AP"
</span><span class="c1">// WiFi password</span>
<span class="cp">#define WIFI_PASSWORD       "WIFI_PASSWORD"
</span>
<span class="c1">// See https://thingsboard.io/docs/getting-started-guides/helloworld/ </span>
<span class="c1">// to understand how to obtain an access token</span>
<span class="cp">#define TOKEN               "TOKEN"
</span><span class="c1">// ThingsBoard server instance.</span>
<span class="cp">#define THINGSBOARD_SERVER  "demo.thingsboard.io"
</span>
<span class="c1">// Baud rate for debug serial</span>
<span class="cp">#define SERIAL_DEBUG_BAUD    115200
</span>
<span class="c1">// Initialize ThingsBoard client</span>
<span class="n">WiFiClient</span> <span class="n">espClient</span><span class="p">;</span>
<span class="c1">// Initialize ThingsBoard instance</span>
<span class="n">ThingsBoard</span> <span class="nf">tb</span><span class="p">(</span><span class="n">espClient</span><span class="p">);</span>
<span class="c1">// the Wifi radio's status</span>
<span class="kt">int</span> <span class="n">status</span> <span class="o">=</span> <span class="n">WL_IDLE_STATUS</span><span class="p">;</span>

<span class="c1">// Array with LEDs that should be lit up one by one</span>
<span class="kt">uint8_t</span> <span class="n">leds_cycling</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span> <span class="mi">25</span><span class="p">,</span> <span class="mi">26</span><span class="p">,</span> <span class="mi">32</span> <span class="p">};</span>
<span class="c1">// Array with LEDs that should be controlled from ThingsBoard, one by one</span>
<span class="kt">uint8_t</span> <span class="n">leds_control</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span> <span class="mi">19</span><span class="p">,</span> <span class="mi">22</span><span class="p">,</span> <span class="mi">21</span> <span class="p">};</span>

<span class="c1">// DHT object</span>
<span class="n">DHTesp</span> <span class="n">dht</span><span class="p">;</span>
<span class="c1">// ESP32 pin used to query DHT22</span>
<span class="cp">#define DHT_PIN 33
</span>
<span class="c1">// Main application loop delay</span>
<span class="kt">int</span> <span class="n">quant</span> <span class="o">=</span> <span class="mi">20</span><span class="p">;</span>

<span class="c1">// Initial period of LED cycling.</span>
<span class="kt">int</span> <span class="n">led_delay</span> <span class="o">=</span> <span class="mi">1000</span><span class="p">;</span>
<span class="c1">// Period of sending a temperature/humidity data.</span>
<span class="kt">int</span> <span class="n">send_delay</span> <span class="o">=</span> <span class="mi">2000</span><span class="p">;</span>

<span class="c1">// Time passed after LED was turned ON, milliseconds.</span>
<span class="kt">int</span> <span class="n">led_passed</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
<span class="c1">// Time passed after temperature/humidity data was sent, milliseconds.</span>
<span class="kt">int</span> <span class="n">send_passed</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

<span class="c1">// Set to true if application is subscribed for the RPC messages.</span>
<span class="n">bool</span> <span class="n">subscribed</span> <span class="o">=</span> <span class="nb">false</span><span class="p">;</span>
<span class="c1">// LED number that is currenlty ON.</span>
<span class="kt">int</span> <span class="n">current_led</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

<span class="c1">// Processes function for RPC call "setValue"</span>
<span class="c1">// RPC_Data is a JSON variant, that can be queried using operator[]</span>
<span class="c1">// See https://arduinojson.org/v5/api/jsonvariant/subscript/ for more details</span>
<span class="n">RPC_Response</span> <span class="nf">processDelayChange</span><span class="p">(</span><span class="k">const</span> <span class="n">RPC_Data</span> <span class="o">&amp;</span><span class="n">data</span><span class="p">)</span>
<span class="p">{</span>
  <span class="n">Serial</span><span class="p">.</span><span class="n">println</span><span class="p">(</span><span class="s">"Received the set delay RPC method"</span><span class="p">);</span>

  <span class="c1">// Process data</span>

  <span class="n">led_delay</span> <span class="o">=</span> <span class="n">data</span><span class="p">;</span>

  <span class="n">Serial</span><span class="p">.</span><span class="n">print</span><span class="p">(</span><span class="s">"Set new delay: "</span><span class="p">);</span>
  <span class="n">Serial</span><span class="p">.</span><span class="n">println</span><span class="p">(</span><span class="n">led_delay</span><span class="p">);</span>

  <span class="k">return</span> <span class="n">RPC_Response</span><span class="p">(</span><span class="nb">NULL</span><span class="p">,</span> <span class="n">led_delay</span><span class="p">);</span>
<span class="p">}</span>

<span class="c1">// Processes function for RPC call "getValue"</span>
<span class="c1">// RPC_Data is a JSON variant, that can be queried using operator[]</span>
<span class="c1">// See https://arduinojson.org/v5/api/jsonvariant/subscript/ for more details</span>
<span class="n">RPC_Response</span> <span class="nf">processGetDelay</span><span class="p">(</span><span class="k">const</span> <span class="n">RPC_Data</span> <span class="o">&amp;</span><span class="n">data</span><span class="p">)</span>
<span class="p">{</span>
  <span class="n">Serial</span><span class="p">.</span><span class="n">println</span><span class="p">(</span><span class="s">"Received the get value method"</span><span class="p">);</span>

  <span class="k">return</span> <span class="n">RPC_Response</span><span class="p">(</span><span class="nb">NULL</span><span class="p">,</span> <span class="n">led_delay</span><span class="p">);</span>
<span class="p">}</span>

<span class="c1">// Processes function for RPC call "setGpioStatus"</span>
<span class="c1">// RPC_Data is a JSON variant, that can be queried using operator[]</span>
<span class="c1">// See https://arduinojson.org/v5/api/jsonvariant/subscript/ for more details</span>
<span class="n">RPC_Response</span> <span class="nf">processSetGpioState</span><span class="p">(</span><span class="k">const</span> <span class="n">RPC_Data</span> <span class="o">&amp;</span><span class="n">data</span><span class="p">)</span>
<span class="p">{</span>
  <span class="n">Serial</span><span class="p">.</span><span class="n">println</span><span class="p">(</span><span class="s">"Received the set GPIO RPC method"</span><span class="p">);</span>

  <span class="kt">int</span> <span class="n">pin</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s">"pin"</span><span class="p">];</span>
  <span class="n">bool</span> <span class="n">enabled</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s">"enabled"</span><span class="p">];</span>

  <span class="k">if</span> <span class="p">(</span><span class="n">pin</span> <span class="o">&lt;</span> <span class="n">COUNT_OF</span><span class="p">(</span><span class="n">leds_control</span><span class="p">))</span> <span class="p">{</span>
    <span class="n">Serial</span><span class="p">.</span><span class="n">print</span><span class="p">(</span><span class="s">"Setting LED "</span><span class="p">);</span>
    <span class="n">Serial</span><span class="p">.</span><span class="n">print</span><span class="p">(</span><span class="n">pin</span><span class="p">);</span>
    <span class="n">Serial</span><span class="p">.</span><span class="n">print</span><span class="p">(</span><span class="s">" to state "</span><span class="p">);</span>
    <span class="n">Serial</span><span class="p">.</span><span class="n">println</span><span class="p">(</span><span class="n">enabled</span><span class="p">);</span>

    <span class="n">digitalWrite</span><span class="p">(</span><span class="n">leds_control</span><span class="p">[</span><span class="n">pin</span><span class="p">],</span> <span class="n">enabled</span><span class="p">);</span>
  <span class="p">}</span>

  <span class="k">return</span> <span class="n">RPC_Response</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="s">"pin"</span><span class="p">],</span> <span class="p">(</span><span class="n">bool</span><span class="p">)</span><span class="n">data</span><span class="p">[</span><span class="s">"enabled"</span><span class="p">]);</span>
<span class="p">}</span>

<span class="c1">// RPC handlers</span>
<span class="n">RPC_Callback</span> <span class="n">callbacks</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span>
  <span class="p">{</span> <span class="s">"setValue"</span><span class="p">,</span>         <span class="n">processDelayChange</span> <span class="p">},</span>
  <span class="p">{</span> <span class="s">"getValue"</span><span class="p">,</span>         <span class="n">processGetDelay</span> <span class="p">},</span>
  <span class="p">{</span> <span class="s">"setGpioStatus"</span><span class="p">,</span>    <span class="n">processSetGpioState</span> <span class="p">},</span>
<span class="p">};</span>

<span class="c1">// Setup an application</span>
<span class="kt">void</span> <span class="nf">setup</span><span class="p">()</span> <span class="p">{</span>
  <span class="c1">// Initialize serial for debugging</span>
  <span class="n">Serial</span><span class="p">.</span><span class="n">begin</span><span class="p">(</span><span class="n">SERIAL_DEBUG_BAUD</span><span class="p">);</span>
  <span class="n">WiFi</span><span class="p">.</span><span class="n">begin</span><span class="p">(</span><span class="n">WIFI_AP_NAME</span><span class="p">,</span> <span class="n">WIFI_PASSWORD</span><span class="p">);</span>
  <span class="n">InitWiFi</span><span class="p">();</span>

  <span class="c1">// Pinconfig</span>

  <span class="k">for</span> <span class="p">(</span><span class="kt">size_t</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">COUNT_OF</span><span class="p">(</span><span class="n">leds_cycling</span><span class="p">);</span> <span class="o">++</span><span class="n">i</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">pinMode</span><span class="p">(</span><span class="n">leds_cycling</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">OUTPUT</span><span class="p">);</span>
  <span class="p">}</span>

  <span class="k">for</span> <span class="p">(</span><span class="kt">size_t</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">COUNT_OF</span><span class="p">(</span><span class="n">leds_control</span><span class="p">);</span> <span class="o">++</span><span class="n">i</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">pinMode</span><span class="p">(</span><span class="n">leds_control</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">OUTPUT</span><span class="p">);</span>
  <span class="p">}</span>

  <span class="c1">// Initialize temperature sensor</span>
  <span class="n">dht</span><span class="p">.</span><span class="n">setup</span><span class="p">(</span><span class="n">DHT_PIN</span><span class="p">,</span> <span class="n">DHTesp</span><span class="o">::</span><span class="n">DHT22</span><span class="p">);</span>
<span class="p">}</span>

<span class="c1">// Main application loop</span>
<span class="kt">void</span> <span class="nf">loop</span><span class="p">()</span> <span class="p">{</span>
  <span class="n">delay</span><span class="p">(</span><span class="n">quant</span><span class="p">);</span>

  <span class="n">led_passed</span> <span class="o">+=</span> <span class="n">quant</span><span class="p">;</span>
  <span class="n">send_passed</span> <span class="o">+=</span> <span class="n">quant</span><span class="p">;</span>

  <span class="c1">// Check if next LED should be lit up</span>
  <span class="k">if</span> <span class="p">(</span><span class="n">led_passed</span> <span class="o">&gt;</span> <span class="n">led_delay</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// Turn off current LED</span>
    <span class="n">digitalWrite</span><span class="p">(</span><span class="n">leds_cycling</span><span class="p">[</span><span class="n">current_led</span><span class="p">],</span> <span class="n">LOW</span><span class="p">);</span>
    <span class="n">led_passed</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
    <span class="n">current_led</span> <span class="o">=</span> <span class="n">current_led</span> <span class="o">&gt;=</span> <span class="mi">2</span> <span class="o">?</span> <span class="mi">0</span> <span class="o">:</span> <span class="p">(</span><span class="n">current_led</span> <span class="o">+</span> <span class="mi">1</span><span class="p">);</span>
    <span class="c1">// Turn on next LED in a row</span>
    <span class="n">digitalWrite</span><span class="p">(</span><span class="n">leds_cycling</span><span class="p">[</span><span class="n">current_led</span><span class="p">],</span> <span class="n">HIGH</span><span class="p">);</span>
  <span class="p">}</span>

  <span class="c1">// Reconnect to WiFi, if needed</span>
  <span class="k">if</span> <span class="p">(</span><span class="n">WiFi</span><span class="p">.</span><span class="n">status</span><span class="p">()</span> <span class="o">!=</span> <span class="n">WL_CONNECTED</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">reconnect</span><span class="p">();</span>
    <span class="k">return</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="c1">// Reconnect to ThingsBoard, if needed</span>
  <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">tb</span><span class="p">.</span><span class="n">connected</span><span class="p">())</span> <span class="p">{</span>
    <span class="n">subscribed</span> <span class="o">=</span> <span class="nb">false</span><span class="p">;</span>

    <span class="c1">// Connect to the ThingsBoard</span>
    <span class="n">Serial</span><span class="p">.</span><span class="n">print</span><span class="p">(</span><span class="s">"Connecting to: "</span><span class="p">);</span>
    <span class="n">Serial</span><span class="p">.</span><span class="n">print</span><span class="p">(</span><span class="n">THINGSBOARD_SERVER</span><span class="p">);</span>
    <span class="n">Serial</span><span class="p">.</span><span class="n">print</span><span class="p">(</span><span class="s">" with token "</span><span class="p">);</span>
    <span class="n">Serial</span><span class="p">.</span><span class="n">println</span><span class="p">(</span><span class="n">TOKEN</span><span class="p">);</span>
    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">tb</span><span class="p">.</span><span class="n">connect</span><span class="p">(</span><span class="n">THINGSBOARD_SERVER</span><span class="p">,</span> <span class="n">TOKEN</span><span class="p">))</span> <span class="p">{</span>
      <span class="n">Serial</span><span class="p">.</span><span class="n">println</span><span class="p">(</span><span class="s">"Failed to connect"</span><span class="p">);</span>
      <span class="k">return</span><span class="p">;</span>
    <span class="p">}</span>
  <span class="p">}</span>

  <span class="c1">// Subscribe for RPC, if needed</span>
  <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">subscribed</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">Serial</span><span class="p">.</span><span class="n">println</span><span class="p">(</span><span class="s">"Subscribing for RPC..."</span><span class="p">);</span>

    <span class="c1">// Perform a subscription. All consequent data processing will happen in</span>
    <span class="c1">// callbacks as denoted by callbacks[] array.</span>
    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">tb</span><span class="p">.</span><span class="n">RPC_Subscribe</span><span class="p">(</span><span class="n">callbacks</span><span class="p">,</span> <span class="n">COUNT_OF</span><span class="p">(</span><span class="n">callbacks</span><span class="p">)))</span> <span class="p">{</span>
      <span class="n">Serial</span><span class="p">.</span><span class="n">println</span><span class="p">(</span><span class="s">"Failed to subscribe for RPC"</span><span class="p">);</span>
      <span class="k">return</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="n">Serial</span><span class="p">.</span><span class="n">println</span><span class="p">(</span><span class="s">"Subscribe done"</span><span class="p">);</span>
    <span class="n">subscribed</span> <span class="o">=</span> <span class="nb">true</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="c1">// Check if it is a time to send DHT22 temperature and humidity</span>
  <span class="k">if</span> <span class="p">(</span><span class="n">send_passed</span> <span class="o">&gt;</span> <span class="n">send_delay</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">Serial</span><span class="p">.</span><span class="n">println</span><span class="p">(</span><span class="s">"Sending data..."</span><span class="p">);</span>

    <span class="c1">// Uploads new telemetry to ThingsBoard using MQTT. </span>
    <span class="c1">// See https://thingsboard.io/docs/reference/mqtt-api/#telemetry-upload-api </span>
    <span class="c1">// for more details</span>

    <span class="n">TempAndHumidity</span> <span class="n">lastValues</span> <span class="o">=</span> <span class="n">dht</span><span class="p">.</span><span class="n">getTempAndHumidity</span><span class="p">();</span>    
    <span class="k">if</span> <span class="p">(</span><span class="n">isnan</span><span class="p">(</span><span class="n">lastValues</span><span class="p">.</span><span class="n">humidity</span><span class="p">)</span> <span class="o">||</span> <span class="n">isnan</span><span class="p">(</span><span class="n">lastValues</span><span class="p">.</span><span class="n">temperature</span><span class="p">))</span> <span class="p">{</span>
      <span class="n">Serial</span><span class="p">.</span><span class="n">println</span><span class="p">(</span><span class="s">"Failed to read from DHT sensor!"</span><span class="p">);</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
      <span class="n">tb</span><span class="p">.</span><span class="n">sendTelemetryFloat</span><span class="p">(</span><span class="s">"temperature"</span><span class="p">,</span> <span class="n">lastValues</span><span class="p">.</span><span class="n">temperature</span><span class="p">);</span>
      <span class="n">tb</span><span class="p">.</span><span class="n">sendTelemetryFloat</span><span class="p">(</span><span class="s">"humidity"</span><span class="p">,</span> <span class="n">lastValues</span><span class="p">.</span><span class="n">humidity</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="n">send_passed</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="c1">// Process messages</span>
  <span class="n">tb</span><span class="p">.</span><span class="n">loop</span><span class="p">();</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="nf">InitWiFi</span><span class="p">()</span>
<span class="p">{</span>
  <span class="n">Serial</span><span class="p">.</span><span class="n">println</span><span class="p">(</span><span class="s">"Connecting to AP ..."</span><span class="p">);</span>
  <span class="c1">// attempt to connect to WiFi network</span>

  <span class="n">WiFi</span><span class="p">.</span><span class="n">begin</span><span class="p">(</span><span class="n">WIFI_AP_NAME</span><span class="p">,</span> <span class="n">WIFI_PASSWORD</span><span class="p">);</span>
  <span class="k">while</span> <span class="p">(</span><span class="n">WiFi</span><span class="p">.</span><span class="n">status</span><span class="p">()</span> <span class="o">!=</span> <span class="n">WL_CONNECTED</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">delay</span><span class="p">(</span><span class="mi">500</span><span class="p">);</span>
    <span class="n">Serial</span><span class="p">.</span><span class="n">print</span><span class="p">(</span><span class="s">"."</span><span class="p">);</span>
  <span class="p">}</span>
  <span class="n">Serial</span><span class="p">.</span><span class="n">println</span><span class="p">(</span><span class="s">"Connected to AP"</span><span class="p">);</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="nf">reconnect</span><span class="p">()</span> <span class="p">{</span>
  <span class="c1">// Loop until we're reconnected</span>
  <span class="n">status</span> <span class="o">=</span> <span class="n">WiFi</span><span class="p">.</span><span class="n">status</span><span class="p">();</span>
  <span class="k">if</span> <span class="p">(</span> <span class="n">status</span> <span class="o">!=</span> <span class="n">WL_CONNECTED</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">WiFi</span><span class="p">.</span><span class="n">begin</span><span class="p">(</span><span class="n">WIFI_AP_NAME</span><span class="p">,</span> <span class="n">WIFI_PASSWORD</span><span class="p">);</span>
    <span class="k">while</span> <span class="p">(</span><span class="n">WiFi</span><span class="p">.</span><span class="n">status</span><span class="p">()</span> <span class="o">!=</span> <span class="n">WL_CONNECTED</span><span class="p">)</span> <span class="p">{</span>
      <span class="n">delay</span><span class="p">(</span><span class="mi">500</span><span class="p">);</span>
      <span class="n">Serial</span><span class="p">.</span><span class="n">print</span><span class="p">(</span><span class="s">"."</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="n">Serial</span><span class="p">.</span><span class="n">println</span><span class="p">(</span><span class="s">"Connected to AP"</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre></div></div>
</td></tr></table>
  </div>
</div>

<h2 id="troubleshooting">Troubleshooting</h2>

<p>In order to to perform troubleshooting, you must check ESP32 Pico logs. For that, simply open <strong>Serial Monitor</strong> in the Arduino IDE.</p>

<h2 id="data-visualization-and-gpio-control">Data visualization and GPIO control</h2>

<p>Finally, open ThingsBoard Web UI. You can access this dashboard by logging in as a tenant administrator.</p>

<p>In case of local installation (if the demo data was added during TB installation):</p>

<ul>
  <li>login: tenant@thingsboard.org</li>
  <li>password: tenant</li>
</ul>

<p>In case of live-demo server:</p>

<ul>
  <li>login: your live-demo username (email)</li>
  <li>password: your live-demo password</li>
</ul>

<p>See <strong><a href="/docs/user-guide/live-demo/">live-demo</a></strong> page for more details how to get your account.</p>

<p>Go to <strong>“Devices”</strong> section and locate <strong>“ESP32 Pico Device”</strong>, open device details and switch to <strong>“Latest telemetry”</strong> tab.
If all is configured correctly you should be able to see latest values of <em>“temperature”</em> and <em>“humidity”</em> in the table.</p>

<p><img src="/images/samples/esp32/gpio-temperature/telemetry.png" alt="image" /></p>

<p>After, open <strong>“Dashboards”</strong> section then locate and open <strong>“ESP32 Pico Dashboard”</strong>.
As a result, you will see a time-series chart displaying temperature and humidity level (similar to dashboard image in the introduction).</p>

<p>You should also observe a GPIO control for your device. It consists of two widgets: one is for controlling LED blink speed (in milliseconds) and second for turning individual LEDs on and off.</p>

<p>You can switch status of GPIOs using control panel. As a result, you will see LEDs status change on the device. To control LED blink speed, simply turn a knob and observe a speed change.</p>

<h2 id="see-also">See also</h2>

<p>Browse other <a href="/docs/samples">samples</a> or explore guides related to main ThingsBoard features:</p>

<ul>
  <li><a href="/docs/user-guide/attributes/">Device attributes</a> - how to use device attributes.</li>
  <li><a href="/docs/user-guide/telemetry/">Telemetry data collection</a> - how to collect telemetry data.</li>
  <li><a href="/docs/user-guide/rpc/">Using RPC capabilities</a> - how to send commands to/from devices.</li>
  <li><a href="/docs/user-guide/rule-engine/">Rule Engine</a> - how to use rule engine to analyze data from devices.</li>
  <li><a href="/docs/user-guide/visualization/">Data Visualization</a> - how to visualize collected data.</li>
</ul>

<h2 id="your-feedback">Your feedback</h2>

<p>Don’t hesitate to star ThingsBoard on <strong><a href="https://github.com/thingsboard/thingsboard">github</a></strong> to help us spread the word.
If you have any questions about this sample - post it on the <strong><a href="https://github.com/thingsboard/thingsboard/issues">issues</a></strong>.</p>

<div id="share"></div>
<script>
    jqueryDefer(initSocials);
    function initSocials() {
        var scriptsList = [
            {src: 'https://cdn.jsdelivr.net/jquery.jssocials/1.4.0/jssocials.css', type: 'css'},
            {src: 'https://cdn.jsdelivr.net/jquery.jssocials/1.4.0/jssocials-theme-flat.css', type: 'css'},
            {src: 'https://cdn.jsdelivr.net/jquery.jssocials/1.4.0/jssocials.min.js', type: 'script'}
        ];
        loadNextScript(0, scriptsList,
                function() {
                    $("#share").jsSocials({
                        shares: ["email", "twitter", "facebook", "googleplus", "linkedin", "pinterest", "stumbleupon", "whatsapp", "telegram"],
                        showLabel: false,
                        showCount: false
                    });
                }
        );
    }
</script>

<h2 id="next-steps">Next steps</h2>

<ul>
  <li>
    <p><a href="/docs/guides#AnchorIDGettingStartedGuides">Getting started guides</a> - These guides provide quick overview of main ThingsBoard features. Designed to be completed in 15-30 minutes.</p>
  </li>
  <li>
    <p><a href="/docs/user-guide/install/installation-options/">Installation guides</a> - Learn how to setup ThingsBoard on various available operating systems.</p>
  </li>
  <li>
    <p><a href="/docs/guides#AnchorIDConnectYourDevice">Connect your device</a> - Learn how to connect devices based on your connectivity technology or solution.</p>
  </li>
  <li>
    <p><a href="/docs/guides#AnchorIDDataVisualization">Data visualization</a> - These guides contain instructions how to configure complex ThingsBoard dashboards.</p>
  </li>
  <li>
    <p><a href="/docs/guides#AnchorIDDataProcessing">Data processing &amp; actions</a> - Learn how to use ThingsBoard Rule Engine.</p>
  </li>
  <li>
    <p><a href="/docs/guides#AnchorIDDataAnalytics">IoT Data analytics</a> - Learn how to use rule engine to perform basic analytics tasks.</p>
  </li>
  <li>
    <p><a href="/docs/guides#AnchorIDAdvancedFeatures">Advanced features</a> - Learn about advanced ThingsBoard features.</p>
  </li>
  <li>
    <p><a href="/docs/guides#AnchorIDContribution">Contribution and Development</a> - Learn about contribution and development in ThingsBoard.</p>
  </li>
</ul>

<p><br /></p>


      </div>
      <footer>
	<main class="light-text">
		<div class="newsletterSubsContainer">
            <script type="text/javascript">
                function subscribeForNewsletter(event) {
                    event.stopPropagation();
                    var script_tag = document.createElement('script');
                    script_tag.setAttribute("type", "text/javascript");
                    script_tag.setAttribute("src", "https://static.mailerlite.com/js/w/webforms.min.js?v28bf44f740701752bfc6767bc7e171d4");
                    document.getElementsByTagName("head")[0].appendChild(script_tag);
                    $(event.target).css('display', 'none');
                    $('#mlb2-7341216').css('display', 'block');
                }
            </script>
            <button class="n-button price subscribe" onClick="subscribeForNewsletter(event)">Sign up for ThingsBoard news</button>
            <div id="mlb2-7341216" class="ml-subscribe-form ml-subscribe-form-7341216" style="display: none;">
<!--            <div id="mlb2-7341216" class="ml-subscribe-form ml-subscribe-form-7341216" style="display: block;">-->
                <div class="ml-vertical-align-center">
                    <div class="subscribe-form ml-block-success" style="display: none;">
                        <div class="form-section">
                            <p>Thank you for your interest in ThingsBoard!<br/>Have a great day!</p>
                        </div>
                    </div>
                    <form class="ml-block-form" action="https://static.mailerlite.com/webforms/submit/r9r9x7" data-id="708170" data-code="r9r9x7" method="POST" target="_blank">
                        <div class="subscribe-form horizontal">
                            <div class="form-section horizontal">
                                <div class="form-group ml-field-email ml-validate-required ml-validate-email">
                                    <input type="email" name="fields[email]" class="form-control" placeholder="Email address*" value="" autocomplete="email" x-autocompletetype="email" spellcheck="false" autocapitalize="off" autocorrect="off">
                                </div>
                            </div>
                            <input type="hidden" name="ml-submit" value="1">
                            <div class="form-section horizontal ml-button-position">
                                <button class="primary n-button price subscribe" type="submit">
                                    Subscribe
                                </button>
                                <button disabled="disabled" style="display: none;" type="button" class="n-button loading">
                                    <img src="https://static.mailerlite.com/images/rolling@2x.gif" width="20" height="20" style="width: 20px; height: 20px;">
                                </button>
                            </div>
                            <p>By subscribing you agree to receive newsletters from ThingsBoard, Inc.</p>
                        </div>
                    </form>
                </div>
            </div>
		</div>

        <hr>

        <div class="deeper">
            <a href="/" class="footer-logo"></a>
            <nav>
                <a href="/docs/getting-started-guides/helloworld/">Get Started</a>
                <a href="/docs/">Documentation</a>
                <a href="/iot-use-cases/">Use cases</a>
                <a href="https://blog.thingsboard.io/">Blog</a>
                <a href="/docs/services/">Services</a>
                <a href="/docs/contact-us/">Contact us</a>
            </nav>
        </div>

        <div class="deepmost">
            <div class="copyright">&copy; 2021 The ThingsBoard Authors</div>
            <div class="social">
                <a href="https://github.com/thingsboard/thingsboard" class="github"></a>
                <a href="https://gitter.im/thingsboard/chat" class="gitter"></a>
                <a href="https://www.youtube.com/thingsboard" class="youtube"></a>
                <a href="http://stackoverflow.com/questions/tagged/thingsboard" class="stack-overflow"></a>
                <a href="https://groups.google.com/forum/#!forum/thingsboard" class="mailing-list"></a>
                <a href="https://www.facebook.com/thingsboard" class="facebook"></a>
                <a href="https://twitter.com/thingsboard" class="twitter"></a>
            </div>
        </div>
	</main>
</footer>

  </div>
</section>

<style>
  .cse .gsc-control-cse, .gsc-control-cse {
    padding: 0;
  }
  .gsc-control-cse table, .gsc-control-cse-en table {
    margin:0px !important;
  }
  .gsc-above-wrapper-area {
    border-bottom: 0;
  }
</style>
<script>
    jqueryDefer(function () {
        $(document).on('selectionchange',function() {
        // $(document).mouseup(function () {
            $('.clipboard-btn').removeClass('noChars');
            var selectedChars = getSelectedText();
            // $('#numberChars').html(selectedChars.length);
            if (selectedChars == 0) {
                $('.clipboard-btn').addClass('noChars');
            }
        });
    });
    function getSelectedText() {
        var text;
        if (window.getSelection) {
            text = window.getSelection().toString();
        } else if (document.getSelection) {
            text = document.getSelection();
        } else if (document.selection) {
            text = document.selection.createRange().text;
        }
        return text;
    }
</script>
<script>
    jqueryDefer(function () {
        $(document).ready(function () {
            var allCodeBlocksElements = $(".copy-code");
            allCodeBlocksElements.each(function (i) {
                var codeBlock = $(this);
                if (!codeBlock.hasClass('highlighter-rouge')) {
                    codeBlock = codeBlock.find('.highlighter-rouge');
                }
                codeBlock.each(function () {
                    var block = codeBlock.find('pre.highlight > code .rouge-code');
                    var currentId = "codeblock" + (i + 1);
                    block.attr('id', currentId);
                    var clipButton = $('<button class="clipboard-btn" data-clipboard-target="#' + currentId + '"><p>Copy to clipboard</p><div><img src="/images/copy-code-icon.svg" alt="Copy to clipboard"></div></button>');
                    $(this).append(clipButton);
                    var troyan = codeBlock.find('pre.highlight');
                    var Tooltip = $('<div class="customTooltip"><div class="tooltipText">Copied!</div></div>');
                    troyan.append(Tooltip);
                    troyan.addClass('clipboard-btn');
                    troyan.attr('data-clipboard-target', "#" + currentId);
                    troyan.on('mouseleave', clearTooltip);
                    troyan.on('blur', clearTooltip);
                    troyan.on('click', function(e) {
                        var el = $(e.currentTarget);
                        if (el.hasClass('showTool')) {
                            clearTooltip(e);
                            troyan.attr('data-skip-tooltip', "true");
                        }
                    });
                });
            });

            var clipboard = new Clipboard('.noChars');
            clipboard.on('success', function (e) {
                $('.clipboard-btn').removeClass('noChars');
                e.clearSelection();
                var trigger = e.trigger;
                if (!$(trigger).attr('data-skip-tooltip')) {
                    showTooltip(e.trigger, 'Copied!');
                } else {
                    $(trigger).removeAttr('data-skip-tooltip');
                }
            });

            $('#search').focus(
                function(){
                    $(this).parent('#searchBox').addClass('focused');
                }).blur(
                function(){
                    $(this).parent('#searchBox').removeClass('focused');
                });

            $('#searchBox .searchButton').click(function () {
                var value = $('#search').val();
                window.location.replace('/docs/search/?q=' + value);
            });

            $('#docsBreadcrumbs').click(function () {
                if ($(this).hasClass('active')) {
                    $(this).removeClass('active');
                    $('#docsNav').removeClass('active');
                    $('#searchBox').removeClass('visible');
                } else {
                    $(this).addClass('active');
                    $('#docsNav').addClass('active');
                    $('#searchBox').addClass('visible');
                }
            });
        });

        function clearTooltip(e) {
            var el = $(e.currentTarget);
            el.removeClass('showTool');
            el.attr('aria-label', null);
        }

        function showTooltip(elem, msg) {
            var el = $(elem);
            el.addClass('showTool');
            el.attr('aria-label', msg);
        }
    });
</script>

<script>
    jqueryDefer(function () {
        var markdownTocs = null;
        var contentAnchors = [];
        var activeAnchor = null;
        var firstAnchor = null;
        var lastAnchor = null;

        function updatePositions() {
            contentAnchors = [];
            markdownTocs.each(function (i) {
                var tocAnchor = $(this).children('a');
                var href = tocAnchor.attr('href');
                var contentAnchor = $('div#content ' + href);
                var top = Math.floor(contentAnchor.offset().top);
                var bottom;
                if (i < markdownTocs.length - 1) {
                    var nextHref = $(markdownTocs[i + 1]).children('a').attr('href');
                    var nextContentAnchor = $('div#content ' + nextHref);
                    bottom = Math.floor(nextContentAnchor.offset().top);
                } else {
                    bottom = $('div#content').offset().top + $('div#content').innerHeight();
                }
                var contentAnchorInfo = {anchor: contentAnchor, toc: $(this), top: top, bottom: bottom, href: href};
                contentAnchors.push(contentAnchorInfo);
                if (i === 0) {
                    firstAnchor = contentAnchorInfo;
                }
                if (i === markdownTocs.length - 1) {
                    lastAnchor = contentAnchorInfo;
                }
            });
        }

        function findActiveContentToc() {
            var top = $(window).scrollTop();
            var bottom = top + $(window).height();
            if (bottom === $('#encyclopedia').offset().top + $('#encyclopedia').innerHeight()) {
                return lastAnchor;
            } else {
                bottom -= 154;
                for (var i = 0; i < contentAnchors.length; i++) {
                    var contentAnchor = contentAnchors[i];
                    if (contentAnchor.top <= bottom &&
                        contentAnchor.bottom > top) {
                        return contentAnchor;
                    }
                }
            }
            return firstAnchor;
        }

        function updateActiveToc(init) {
            updatePositions();
            var newActiveAnchor = findActiveContentToc();
            if (!activeAnchor || newActiveAnchor.href !== activeAnchor.href) {
                activeAnchor = newActiveAnchor;
                markdownTocs.removeClass('active');
                activeAnchor.toc.addClass('active');
                var tocTop = $('#table-of-contents').scrollTop() + 100;
                var tocBottom = tocTop + $('#table-of-contents').innerHeight() - 200;
                var activeTocTop = activeAnchor.toc.position().top;
                var activeTocBottom = activeTocTop + activeAnchor.toc.children(':first').height();
                if (tocTop > activeTocTop) {
                    activeAnchor.toc[0].scrollIntoView();
                    $('#table-of-contents')[0].scrollTop -= 100;
                } else if (tocBottom < activeTocBottom) {
                    activeAnchor.toc[0].scrollIntoView();
                    $('#table-of-contents')[0].scrollTop += init ? -100 : 100;
                }
            }
        }
        $( document ).ready(function() {
            var tocs = $('#content > ul#markdown-toc');
            var tableOfContents = $('#table-of-contents');
            tableOfContents.append(tocs);
            markdownTocs = $('#table-of-contents ul#markdown-toc li').filter(function() {
                var tocAnchor = $(this).children('a');
                var href = tocAnchor.attr('href');
                if (!href.startsWith('#')) {
                    return false;
                } else {
                    var contentAnchor = $('div#content ' + href);
                    return contentAnchor.length > 0;
                }
            });
            updateActiveToc(true);
        });

        $(document).on("scroll", function() {
            updateActiveToc(false);
        });

    });
</script>

</body>
</html>

