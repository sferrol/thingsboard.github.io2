







<!Doctype html>
<html id="docs" class="">







<head>
    <meta charset="utf-8">
    <meta name="cf-2fa-verify" content="a08672380de15e9">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    
    <title>SODAQ Universal Tracker telemetry upload | ThingsBoard Professional Edition</title>
    <!-- Begin Jekyll SEO tag v2.7.1 -->
<meta name="generator" content="Jekyll v3.9.0" />
<meta property="og:title" content="SODAQ Universal Tracker telemetry upload" />
<meta name="author" content="thingsboard" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="SODAQ Universal Tracker telemetry upload" />
<meta property="og:description" content="SODAQ Universal Tracker telemetry upload" />
<link rel="canonical" href="http://0.0.0.0:4002/docs/samples/sodaq/sodaq/" />
<meta property="og:url" content="http://0.0.0.0:4002/docs/samples/sodaq/sodaq/" />
<meta property="og:site_name" content="ThingsBoard" />
<meta property="og:image" content="http://0.0.0.0:4002/images/thingsboard_logo.png" />
<meta name="twitter:card" content="summary_large_image" />
<meta property="twitter:image" content="http://0.0.0.0:4002/images/thingsboard_logo.png" />
<meta property="twitter:title" content="SODAQ Universal Tracker telemetry upload" />
<meta name="twitter:site" content="@thingsboard" />
<meta name="twitter:creator" content="@thingsboard" />
<script type="application/ld+json">
{"url":"http://0.0.0.0:4002/docs/samples/sodaq/sodaq/","publisher":{"@type":"Organization","logo":{"@type":"ImageObject","url":"http://0.0.0.0:4002/images/thingsboard_logo.png"},"name":"thingsboard"},"author":{"@type":"Person","name":"thingsboard"},"image":{"twitter":"/images/thingsboard_logo.png","facebook":"/images/thingsboard_logo.png","url":"http://0.0.0.0:4002/images/thingsboard_logo.png","@type":"imageObject"},"description":"SODAQ Universal Tracker telemetry upload","@type":"WebPage","headline":"SODAQ Universal Tracker telemetry upload","@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->

    
    
    <meta name="twitter:description" content="SODAQ Universal Tracker telemetry upload"/>
    
    
    <link rel="shortcut icon" type="image/png" href="/images/favicon.png">
    <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Poppins:300,400,500,600,700" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.5.2/animate.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
          integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    <link rel="stylesheet" href="/css/styles.css">
    <script async defer src="https://buttons.github.io/buttons.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/qs/6.7.0/qs.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gifffer/1.5.0/gifffer.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/clipboard@1/dist/clipboard.min.js"></script>
    <script type="text/javascript">
        window.onload = function() {
            Gifffer();
        }
    </script>
    <script type="text/javascript">
        /*! loadCSS. [c]2017 Filament Group, Inc. MIT License */
        !function (a) {
            "use strict";
            var b = function (b, c, d) {
                function e(a) {
                    return h.body ? a() : void setTimeout(function () {
                        e(a)
                    })
                }

                function f() {
                    i.addEventListener && i.removeEventListener("load", f), i.media = d || "all"
                }

                var g, h = a.document, i = h.createElement("link");
                if (c) g = c; else {
                    var j = (h.body || h.getElementsByTagName("head")[0]).childNodes;
                    g = j[j.length - 1]
                }
                var k = h.styleSheets;
                i.rel = "stylesheet", i.href = b, i.media = "only x", e(function () {
                    g.parentNode.insertBefore(i, c ? g : g.nextSibling)
                });
                var l = function (a) {
                    for (var b = i.href, c = k.length; c--;) if (k[c].href === b) return a();
                    setTimeout(function () {
                        l(a)
                    })
                };
                return i.addEventListener && i.addEventListener("load", f), i.onloadcssdefined = l, l(f), i
            };
            "undefined" != typeof exports ? exports.loadCSS = b : a.loadCSS = b
        }("undefined" != typeof global ? global : this);

        /*! onloadCSS. (onload callback for loadCSS) [c]2017 Filament Group, Inc. MIT License */
        function onloadCSS(a, b) {
            function c() {
                !d && b && (d = !0, b.call(a))
            }

            var d;
            a.addEventListener && a.addEventListener("load", c), a.attachEvent && a.attachEvent("onload", c), "isApplicationInstalled" in navigator && "onloadcssdefined" in a && a.onloadcssdefined(c)
        }
    </script>
    <script type="text/javascript">

        function jqueryDefer(method) {
            if (window.jQuery) {
                method();
            } else {
                setTimeout(function () {
                    jqueryDefer(method)
                }, 50);
            }
        }

        function jqueryUiDefer(method) {
            if (window.jQuery && window.jQuery.ui) {
                method();
            } else {
                setTimeout(function () {
                    jqueryUiDefer(method)
                }, 50);
            }
        }

        window.vis = (function () {
            var stateKey,
                eventKey,
                keys = {
                    hidden: "visibilitychange",
                    webkitHidden: "webkitvisibilitychange",
                    mozHidden: "mozvisibilitychange",
                    msHidden: "msvisibilitychange"
                };
            for (stateKey in keys) {
                if (stateKey in document) {
                    eventKey = keys[stateKey];
                    break;
                }
            }
            return function (c) {
                if (c) document.addEventListener(eventKey, c);
                return !document[stateKey];
            }
        })();

        function loadScript(src, callback) {
            var s, r, t;
            r = false;
            s = document.createElement('script');
            s.type = 'text/javascript';
            s.src = src;
            s.onload = s.onreadystatechange = function () {
                if (!r && (!this.readyState || this.readyState == 'complete')) {
                    r = true;
                    if (callback) {
                        callback();
                    }
                }
            };
            t = document.getElementsByTagName('script')[0];
            t.parentNode.insertBefore(s, t);
        }

        function loadCssAsync(src, callback) {
            var stylesheet = loadCSS(src);
            if (callback) {
                onloadCSS(stylesheet, callback);
            }
        }

        function loadNextScript(index, scriptsList, completeCallback) {
            if (index < scriptsList.length) {
                var script = scriptsList[index];
                if (script.type === 'script') {
                    loadScript(script.src, function () {
                        if (script.callback) {
                            script.callback();
                        }
                        index++;
                        loadNextScript(index, scriptsList, completeCallback);
                    });
                } else if (script.type === 'css') {
                    loadCssAsync(script.src, function () {
                        index++;
                        loadNextScript(index, scriptsList, completeCallback);
                    });
                }
            } else if (completeCallback) {
                completeCallback();
            }
        }

        var initialScriptsList = [
            {src: '/js/jquery-2.2.0.min.js', type: 'script'},
            {src: '/css/jquery-ui.min.css', type: 'css'},
            {src: '/js/jquery-ui.min.js', type: 'script'},
            {src: '/js/jquery.vide.js', type: 'script'},
            {src: '/js/script.js', type: 'script'},
            {src: '/css/photoswipe.css', type: 'css'},
            {src: '/css/default-skin/default-skin.css', type: 'css'},
            {src: '/js/photoswipe.min.js', type: 'script'},
            {src: '/js/photoswipe-ui-default.min.js', type: 'script'}
        ];

        loadNextScript(0, initialScriptsList);

        jqueryDefer(function () {
            (function ($, win) {
                $.fn.inViewport = function (cb) {
                    return this.each(function (i, el) {
                        function visPx() {
                            var H = $(this).height(),
                                r = el.getBoundingClientRect(), t = r.top, b = r.bottom;
                            var result = cb.call(el, Math.max(0, t > 0 ? H - t : (b < H ? b : H)));
                            if (result) {
                                $(win).off("resize scroll", visPx);
                            }
                        }

                        visPx();
                        $(win).on("resize scroll", visPx);
                    });
                };
            }(jQuery, window));
        });

        function inViewportDefer(method) {
            if (window.jQuery && $.fn.inViewport) {
                method();
            } else {
                setTimeout(function () {
                    inViewportDefer(method)
                }, 50);
            }
        }

    </script>
    <script type="text/javascript">
        function _gaLt(event) {
            /* If GA is blocked or not loaded, or not main|middle|touch click then don't track */
            if (!ga.hasOwnProperty("loaded") || ga.loaded != true || (event.which != 1 && event.which != 2)) {
                return;
            }
            var el = event.srcElement || event.target;

            while (el && (typeof el.tagName == 'undefined' || el.tagName.toLowerCase() != 'a' || !el.href)) {
                el = el.parentNode;
            }
            if (el && el.href) {
                var link = el.href;
                if ((link.indexOf(location.host) == -1 || link.indexOf('.' + location.host) > 0) && !link.match(/^javascript\:/i)) {
                    var target = (el.target && !el.target.match(/^_(self|parent|top)$/i)) ? el.target : false;
                    if (event.ctrlKey || event.shiftKey || event.metaKey || event.which == 2) {
                        target = "_blank";
                    }

                    var hbrun = false; // tracker has not yet run
                    var hitBack = function () {
                        if (hbrun) return;
                        hbrun = true;
                        window.location.href = link;
                    };

                    if (target) {
                        ga(
                            "send", "event", "Outgoing Links", link,
                            document.location.pathname + document.location.search
                        );
                    } else {
                        event.preventDefault ? event.preventDefault() : event.returnValue = !1;
                        ga(
                            "send", "event", "Outgoing Links", link,
                            document.location.pathname + document.location.search, {
                                "hitCallback": hitBack
                            }
                        );

                        setTimeout(hitBack, 1000);
                    }
                }
            }
        }

        var _w = window;
        var _gaLtEvt = ("ontouchstart" in _w) ? "click" : "mousedown";
        _w.addEventListener ? _w.addEventListener("load", function () {
                document.body.addEventListener(_gaLtEvt, _gaLt, !1)
            }, !1)
            : _w.attachEvent && _w.attachEvent("onload", function () {
            document.body.attachEvent("on" + _gaLtEvt, _gaLt)
        });
    </script>
    <script>
        (function (i, s, o, g, r, a, m) {
            i['GoogleAnalyticsObject'] = r;
            i[r] = i[r] || function () {
                (i[r].q = i[r].q || []).push(arguments)
            }, i[r].l = 1 * new Date();
            a = s.createElement(o),
                m = s.getElementsByTagName(o)[0];
            a.async = 1;
            a.src = g;
            m.parentNode.insertBefore(a, m)
        })(window, document, 'script', '//www.google-analytics.com/analytics.js', 'ga');

        ga('create', 'UA-88383331-1', 'auto');
        ga('send', 'pageview');
    </script>
    <script>
        function Burger() {
            var header = $('header');
            var body = $('body');
            if (header.hasClass('opened-burger')) {
                header.removeClass('opened-burger');
                let subMenus = $('nav.head-menu > ul > li > div.centered-sub > ul.sub-menu');
                subMenus.removeClass('open-sub');
                body.css('overflow', '');
            } else {
                header.addClass('opened-burger');
                body.css('overflow', 'hidden');
            }
        }
    </script>
    <script>

        jqueryDefer(function () {
            let menuElement = $('nav.head-menu > ul');
            let submenuContainer = $('nav.head-menu > div.sub-menu-container');
            let menuItems = $('nav.head-menu > ul > li');
            let indicator = $('nav.head-menu > ul > div.indicator');
            let subMenuActive = false;
            menuElement.on('mouseleave', function (event) {
                if (!$(event.relatedTarget).parents('div.sub-menu-container').length) {
                    subMenuActive = false;
                    submenuContainer.removeClass('active bounds-transition');
                    menuItems.removeClass('active');
                    indicator.removeClass('left-transition');
                }
            });
            submenuContainer.on('mouseleave', function (event) {
                if (!$(event.relatedTarget).parents('nav.head-menu > ul').length) {
                    subMenuActive = false;
                    submenuContainer.removeClass('active bounds-transition');
                    menuItems.removeClass('active');
                    indicator.removeClass('left-transition');
                }
            });
            menuItems.each(function() {
                let item = $( this );
                let subMenuId = item.attr('data-submenu-id');
                item.on('mouseenter', function () {
                    let submenus = $('nav.head-menu > div.sub-menu-container > div');
                    submenus.css('display', 'none');
                    menuItems.removeClass('active');
                    item.addClass('active');
                    let targetSubMenu = $('nav.head-menu > div.sub-menu-container > div#'+subMenuId);
                    targetSubMenu.css('display', 'block');
                    submenuContainer.css('overflow', 'visible');
                    let left = item.position().left + (item.outerWidth() - targetSubMenu.outerWidth()) / 2;
                    submenuContainer.css('left', left + 'px');
                    if (!subMenuActive) {
                        submenuContainer.addClass('active');
                        subMenuActive = true;
                    } else {
                        submenuContainer.addClass('bounds-transition');
                        indicator.addClass('left-transition');
                    }
                    indicator.css('left', item.position().left);
                    indicator.css('width', item.outerWidth());
                    submenuContainer.css('height', targetSubMenu.outerHeight() + 'px');
                    submenuContainer.css('width', targetSubMenu.outerWidth() + 'px');
                    submenuContainer.css('overflow', 'hidden');
                });
            });

            let isMobile = $('button.burger').css('display') === 'block';
            if (isMobile) {
                initMobileSubmenu();
            }

            $(window).resize(function(){
                let newIsMobile = $('button.burger').css('display') === 'block';
                if (isMobile !== newIsMobile) {
                    isMobile = newIsMobile;
                    if (isMobile) {
                        initMobileSubmenu();
                    } else {
                        restoreDesktopSubmenu();
                    }
                }
            });

            // Products selector

            
            let productsSelector = $('.products-selector');
            $(window).click(function(e) {
                if (productsSelector[0].contains(e.target)) {
                    if (productsSelector.hasClass('active')) {
                        productsSelector.removeClass('active');
                    } else {
                        productsSelector.addClass('active');
                    }
                } else {
                    productsSelector.removeClass('active');
                }
            });
            

            // Rogue line numbers fix (don't show line numbers for 1 row)
            $( document ).ready(function() {
                $('.rouge-gutter.gl').each(function() {
                    var lineNumbers = $(this).children('.lineno');
                    if (lineNumbers.text() === '1\n') {
                        $(this).css('display', 'none');
                    }
                });
            });
        });

        function initMobileSubmenu() {

            var header = $('header');
            if (header.hasClass('opened-burger')) {
                var body = $('body');
                body.css('overflow', 'hidden');
            }

            let targetSubMenus = $('nav.head-menu > div.sub-menu-container > div');
            targetSubMenus.css('display', 'block');
            let submenuContainer = $('nav.head-menu > div.sub-menu-container');
            submenuContainer.removeClass('active');
            submenuContainer.css('display', 'none');

            targetSubMenus.each(function() {
                let subMenu = $( this );
                let subMenuId = subMenu.attr('id');
                let parent = $('nav.head-menu > ul > li.'+subMenuId);
                parent.append(subMenu);
            });
        }

        function restoreDesktopSubmenu() {
            var body = $('body');
            body.css('overflow', '');
            let targetSubMenus = $('nav.head-menu > ul > li > div');
            let submenuContainer = $('nav.head-menu > div.sub-menu-container');
            submenuContainer.removeClass('active');
            submenuContainer.css('display', 'block');
            let menuItems = $('nav.head-menu > ul > li');
            menuItems.removeClass('active');
            targetSubMenus.each(function() {
                let subMenu = $( this );
                submenuContainer.append(subMenu);
            });
        }

        function listburg(subMenuId) {
            let isMobile = $('button.burger').css('display') === 'block';
            if (isMobile) {
                let targetSubMenu = $('nav.head-menu > ul > li > div.centered-sub#'+subMenuId+' > ul.sub-menu');
                let isOpen = targetSubMenu.hasClass('open-sub');
                let subMenus = $('nav.head-menu > ul > li > div.centered-sub > ul.sub-menu');
                subMenus.removeClass('open-sub');
                if (!isOpen) {
                    targetSubMenu.addClass('open-sub');
                }
            }
        }
    </script>
</head>
<body>

<div class="products-selector">
    <img src="/images/thingsboard-p-icon.svg"/>
    <div class="product-info">
        <div class="product-title">
            Professional Edition
        </div>
        <div class="product-description">
            ThingsBoard Documentation
        </div>
    </div>
    <div class="products">
        
        

    
        
        


        
    


        <a href="/docs/paas/" class="product">Cloud</a>
        
        

    
        
        


        
    


        <a href="/docs/pe/" class="product active">Professional Edition</a>
        
        

    
        
        


        
    


        <a href="/docs/" class="product">Community Edition</a>
        
        

    


        <a href="/docs/edge/" class="product">Edge</a>
        
        

    


        <a href="/docs/iot-gateway/" class="product">IoT Gateway</a>
        
        

    


        <a href="/products/license-server/" class="product">License Server</a>
        
        

    


        <a href="/docs/trendz/" class="product">Trendz Analytics</a>
        
    </div>
</div>

<header>
    <div class="logo-burger">
        
        <button onclick="Burger()" class="burger"></button>
        <div id="githubButtonContainer">
            <a class="github-button" href="https://github.com/thingsboard/thingsboard" data-show-count="true"
               aria-label="Star thingsboard/thingsboard on GitHub">Star</a>
        </div>
    </div>
    <nav class="head-menu">
        <ul>
            <li class="nav-products" data-submenu-id="nav-products">
                <a onclick="listburg('nav-products')">Products</a>
            </li>
            <li class="nav-services" data-submenu-id="nav-services">
                <a onclick="listburg('nav-services')">Services</a>
            </li>
            
            <li class="nav-cases" data-submenu-id="nav-cases">
                <a onclick="listburg('nav-cases')">Use Cases</a>
            </li>
            <li class="nav-customers" data-submenu-id="nav-customers">
                <a onclick="listburg('nav-customers')">Customers</a>
            </li>
            <li class="nav-company" data-submenu-id="nav-company">
                <a onclick="listburg('nav-company')">Company</a>
            </li>
            <div class="indicator"><div class="head-arrow"></div><div class="line"></div><div class="sub-background"></div></div>
        </ul>
        <div class="sub-menu-container">
            <div id="nav-products" class="centered-sub">
                <ul class="sub-menu products">
                    <div class="sub-groups">
                        <div class="group">
                            <p class="group-name">IoT platforms</p>
                            <a class="cloud-lnk" href="/products/paas/">
                                <img src="/images/thingsboard-c-icon.svg">
                                <div class="sub-text">
                                    <h1>Cloud</h1>
                                    <p>Platform as a service</p>
                                </div>
                            </a>
                            <a class="prof-lnk" href="/products/thingsboard-pe/">
                                <img src="/images/thingsboard-p-icon.svg">
                                <div class="sub-text">
                                    <h1>Professional Edition</h1>
                                    <p>Advanced IoT platform</p>
                                </div>
                            </a>
                            <a class="com-lnk" href="/">
                                <img src="/images/thingsboard-cm-icon.svg">
                                <div class="sub-text">
                                    <h1>Community Edition</h1>
                                    <p>Open source platform</p>
                                </div>
                            </a>
                        </div>
                        <div class="group">
                            <p class="group-name">Product ecosystem</p>
                            <a class="edge-lnk" href="/products/thingsboard-edge/">
                                <img src="/images/thingsboard-e-icon.svg">
                                <div class="sub-text">
                                    <h1>Edge</h1>
                                    <p>Edge computing</p>
                                </div>
                            </a>
                            <a class="gateway-lnk" href="/docs/iot-gateway/what-is-iot-gateway/">
                                <img src="/images/gateway-icon.svg">
                                <div class="sub-text">
                                    <h1>IoT Gateway</h1>
                                    <p>Connect legacy protocols</p>
                                </div>
                            </a>
                            <a class="license-lnk" href="/products/license-server/">
                                <img src="/images/license-icon.svg">
                                <div class="sub-text">
                                    <h1>License Server</h1>
                                    <p>Billing solution</p>
                                </div>
                            </a>
                            <a class="trendz-lnk" href="/products/trendz/">
                                <img src="/images/trendz-icon.svg">
                                <div class="sub-text">
                                    <h1>Trendz Analytics</h1>
                                    <p>Data analytics and Prediction</p>
                                </div>
                            </a>
                        </div>
                    </div>
                </ul>
            </div>
            <div id="nav-services" class="centered-sub">
                <ul class="sub-menu services">
                    <a href="/docs/services/support/">
                        <img src="/images/support-icon.svg">
                        <div class="sub-text">
                            <h1>Support</h1>
                            <p>Support packages</p>
                        </div>
                    </a>
                    <a href="/docs/services/trainings/">
                        <img src="/images/train-icon.svg">
                        <div class="sub-text">
                            <h1>Trainings</h1>
                            <p>ThingsBoard education courses</p>
                        </div>
                    </a>
                    <a href="/docs/services/consulting/">
                        <img src="/images/prof-icon.svg">
                        <div class="sub-text">
                            <h1>Professional services</h1>
                            <p>Development of solutions by the ThingsBoard team</p>
                        </div>
                    </a>
                </ul>
            </div>
            
            <div id="nav-cases" class="centered-sub">
                <ul class="sub-menu cases">
                    <a href="/smart-metering/">
                        <img src="/images/case-met-icon.svg">
                        <div class="sub-text">
                            <h1>Smart Metering</h1>
                            <p>Collection, analysis and visualization of data from meters</p>
                        </div>
                    </a>
                    <a href="/smart-energy/">
                        <img src="/images/case-eng-icon.svg">
                        <div class="sub-text">
                            <h1>Smart Energy</h1>
                            <p>Energy monitoring and efficiency analysis</p>
                        </div>
                    </a>
                    <a href="/smart-farming/">
                        <img src="/images/case-fam-icon.svg">
                        <div class="sub-text">
                            <h1>Smart Farming</h1>
                            <p>Monitoring of indoor conditions and plant growth characteristics</p>
                        </div>
                    </a>
                    <a href="/fleet-tracking/">
                        <img src="/images/case-trk-icon.svg">
                        <div class="sub-text">
                            <h1>Fleet Tracking</h1>
                            <p>Fleet tracking and fleet management</p>
                        </div>
                    </a>
                </ul>
            </div>
            <div id="nav-customers" class="centered-sub">
                <ul class="sub-menu customers">
                    <div class="sub-groups">
                        <div class="group">
                            <a class="small-link" href="/industries/smart-energy/">
                                <img src="/images/se-s-icon.svg">
                                <div class="sub-text">
                                    <h1>Smart Energy</h1>
                                </div>
                            </a>
                            <a class="small-link" href="/industries/agriculture/">
                                <img src="/images/agr-s-icon.svg">
                                <div class="sub-text">
                                    <h1>Agriculture</h1>
                                </div>
                            </a>
                            <a class="small-link" href="/industries/smart-buildings/">
                                <img src="/images/sb-s-icon.svg">
                                <div class="sub-text">
                                    <h1>Smart Buildings</h1>
                                </div>
                            </a>
                        </div>
                        <div class="group">
                            <a class="small-link" href="/industries/smart-city/">
                                <img src="/images/sc-s-icon.svg">
                                <div class="sub-text">
                                    <h1>Smart City</h1>
                                </div>
                            </a>
                            <a class="small-link" href="/industries/telecom/">
                                <img src="/images/tel-s-icon.svg">
                                <div class="sub-text">
                                    <h1>Telecom</h1>
                                </div>
                            </a>
                            <a class="small-link" href="/industries/industry40/">
                                <img src="/images/in-s-icon.svg">
                                <div class="sub-text">
                                    <h1>Industry 4.0</h1>
                                </div>
                            </a>
                        </div>
                    </div>
                </ul>
            </div>
            <div id="nav-company" class="centered-sub">
                <ul class="sub-menu about">
                    <div class="sub-groups">
                        <div class="group">
                            <a class="small-link" href="/company/">
                                <img src="/images/about-s-icon.svg">
                                <div class="sub-text">
                                    <h1>Our Company</h1>
                                </div>
                            </a>
                            <a class="small-link" href="/docs/contact-us/">
                                <img src="/images/contact-s-icon.svg">
                                <div class="sub-text">
                                    <h1>Contact Us</h1>
                                </div>
                            </a>
                            <a class="small-link" href="/careers/">
                                <img src="/images/careers-s-icon.svg">
                                <div class="sub-text">
                                    <h1>Careers</h1>
                                </div>
                            </a>
                        </div>
                        <div class="group">
                            <a class="small-link" href="/mediakit/">
                                <img src="/images/media-s-icon.svg">
                                <div class="sub-text">
                                    <h1>Media Kit</h1>
                                </div>
                            </a>
                            <a class="small-link" href="https://blog.thingsboard.io/">
                                <img src="/images/blog-s-icon.svg">
                                <div class="sub-text">
                                    <h1>Blog</h1>
                                </div>
                            </a>
                        </div>
                    </div>
                    <div class="bottom-group">
                        <a class="small-link" href="/partners/hardware/">
                            <img src="/images/hard-s-icon.svg">
                            <div class="sub-text">
                                <h1>Hardware partners</h1>
                            </div>
                        </a>
                        <a class="small-link" href="/partners/distributors/">
                            <img src="/images/dis-s-icon.svg">
                            <div class="sub-text">
                                <h1>Distributors</h1>
                            </div>
                        </a>
                    </div>
                </ul>
            </div>
        </div>
    </nav>
    <div>
        <a href="/installations/" class="n-button try">Try it now</a>
        <a href="/pricing/" class="n-button price">Pricing</a>
    </div>
</header>


<div id="searchBox">
    <input type="text" id="search" placeholder="Search" onkeydown="if (event.keyCode==13) window.location.replace('/docs/pe/search/?q=' + this.value)">
    <button class="searchButton"></button>
</div>

<!--  HERO  -->
<section id="hero">
  <div id="hero-content">
    <div id="vendorStrip">
      <div id="docsList">
          <ul>
            
              
              
              
              <li>
                  <a href="/docs/getting-started-guides/helloworld-pe/" >Getting Started</a>
                  
              </li>
            
              
              
              
              <li>
                  <a href="/docs/pe/" >Documentation</a>
                  
              </li>
            
              
              
              
              <li>
                  <a href="/docs/pe/guides/" >Guides</a>
                  
              </li>
            
              
              
              
              <li>
                  <a href="/docs/user-guide/install/pe/installation-options/" >Installation</a>
                  
              </li>
            
              
              
              
              <li>
                  <a href="/docs/pe/reference/" >Architecture</a>
                  
              </li>
            
              
              
              
              <li>
                  <a href="/docs/pe/api/" >API</a>
                  
              </li>
            
              
              
              
              <li>
                  <a href="/docs/pe/faq/" >FAQ</a>
                  
              </li>
            
          </ul>
          <div id="docsBreadcrumbs">
              
                <span class="item">SODAQ Universal Tracker telemetry upload</span>
              
          </div>
      </div>
    </div>
  </div>
</section>
<div id="docsNav">
    <div class="docItems">
        
            
            
                <a class="toc" href="/docs/getting-started-guides/helloworld-pe/" >Getting Started</a>
            
        
            
            
                <a class="toc" href="/docs/pe/" >Documentation</a>
            
        
            
            
                <a class="toc" href="/docs/pe/guides/" >Guides</a>
            
        
            
            
                <a class="toc" href="/docs/user-guide/install/pe/installation-options/" >Installation</a>
            
        
            
            
                <a class="toc" href="/docs/pe/reference/" >Architecture</a>
            
        
            
            
                <a class="toc" href="/docs/pe/api/" >API</a>
            
        
            
            
                <a class="toc" href="/docs/pe/faq/" >FAQ</a>
            
        
    </div>
</div>








<section id="encyclopedia">
  
  <div id="docsContent" class="noToc hasTocContent">
      <div id="table-of-contents">
          
              <h4>On this page</h4>
          
      </div>
      <div id="top-spacer"></div>
      <h1>SODAQ Universal Tracker telemetry upload</h1>
      <div id="content">
          
<div class="info-banner">
<img src="/images/doc-info-icon.svg" />   <div>
    <div class="info-title">
ThingsBoard PE Feature
    </div>
    <p>Only <a href="/products/thingsboard-pe/"><strong>Professional Edition</strong></a> supports <strong>Platform Integrations</strong> feature.<br /> Use <a href="https://thingsboard.cloud/signup"><strong>ThingsBoard Cloud</strong></a> or <a href="/docs/user-guide/install/pe/installation-options/"><strong>install</strong></a> your own platform instance.</p>
  </div>
</div>

<p>This guide contains step-by-step instruction how to connect your SODAQ NB-IoT boards to ThingsBoard Professional Edition (PE) through the T-Mobile NB IoT network. 
We will use free ThingsBoard PE demo server <a href="https://thingsboard.cloud/signup">thingsboard.cloud</a> in this guide. 
This guide will be useful for anyone who wants to connect their SODAQ NB-IoT boards or other hardware to T-Mobile NB IoT network.</p>

<ul id="markdown-toc">
  <li><a href="#prerequisites" id="markdown-toc-prerequisites">Prerequisites</a></li>
  <li><a href="#integration-overview" id="markdown-toc-integration-overview">Integration overview</a></li>
  <li><a href="#step-1-data-converter-configuration" id="markdown-toc-step-1-data-converter-configuration">Step 1. Data Converter configuration</a></li>
  <li><a href="#step-2-integration-configuration" id="markdown-toc-step-2-integration-configuration">Step 2. Integration configuration</a></li>
  <li><a href="#step-3-post-telemetry-and-verify-the-integration-configuration" id="markdown-toc-step-3-post-telemetry-and-verify-the-integration-configuration">Step 3: Post telemetry and verify the Integration configuration</a></li>
  <li><a href="#step-4-t-mobile-nb-iot-platform-callback-configuration" id="markdown-toc-step-4-t-mobile-nb-iot-platform-callback-configuration">Step 4: T-Mobile NB-IoT Platform Callback configuration</a></li>
  <li><a href="#step-5-check-integration-debug-events" id="markdown-toc-step-5-check-integration-debug-events">Step 5: Check Integration Debug Events</a></li>
  <li><a href="#step-6-rule-chain-import" id="markdown-toc-step-6-rule-chain-import">Step 6: Rule chain import</a></li>
  <li><a href="#step-7-demo-dashboard-import" id="markdown-toc-step-7-demo-dashboard-import">Step 7: Demo dashboard import</a></li>
  <li><a href="#advanced-configuration-optional" id="markdown-toc-advanced-configuration-optional">Advanced Configuration (Optional)</a>    <ul>
      <li><a href="#security" id="markdown-toc-security">Security</a></li>
      <li><a href="#message-flow" id="markdown-toc-message-flow">Message flow</a>        <ul>
          <li><a href="#configuring-the-rule-chain" id="markdown-toc-configuring-the-rule-chain">Configuring the Rule Chain</a>            <ul>
              <li><a href="#create-new-tracker-alarms-rule-chain" id="markdown-toc-create-new-tracker-alarms-rule-chain">Create new <strong>Tracker Alarms</strong> Rule Chain</a></li>
              <li><a href="#adding-the-required-nodes" id="markdown-toc-adding-the-required-nodes">Adding the required nodes</a></li>
              <li><a href="#node-a-originator-attributes" id="markdown-toc-node-a-originator-attributes">Node A: <strong>Originator attributes</strong></a></li>
              <li><a href="#node-b-filter-script" id="markdown-toc-node-b-filter-script">Node B: <strong>Filter Script</strong></a></li>
              <li><a href="#node-f-create-alarm" id="markdown-toc-node-f-create-alarm">Node F: <strong>Create alarm</strong></a></li>
              <li><a href="#node-h-clear-alarm" id="markdown-toc-node-h-clear-alarm">Node H: <strong>Clear Alarm</strong></a></li>
            </ul>
          </li>
          <li><a href="#modify-root-rule-chain" id="markdown-toc-modify-root-rule-chain">Modify Root Rule Chain</a>            <ul>
              <li><a href="#node-a-filter-script" id="markdown-toc-node-a-filter-script">Node A: <strong>Filter Script</strong></a></li>
              <li><a href="#node-o-rule-chain" id="markdown-toc-node-o-rule-chain">Node O: <strong>Rule Chain</strong></a></li>
            </ul>
          </li>
        </ul>
      </li>
    </ul>
  </li>
  <li><a href="#next-steps" id="markdown-toc-next-steps">Next steps</a></li>
</ul>

<h2 id="prerequisites">Prerequisites</h2>

<p>We assume you have at least one of SODAQ NB-IoT Trackers in your lab that is already connected to your T-Mobile IoT network. 
We also assume you already have a ThingsBoard PE server or free demo account. 
Otherwise, you can register for a 30-days free demo account here: <a href="https://thingsboard.cloud/signup">thingsboard.cloud</a>.</p>

<p>We expect you to have a very basic knowledge about ThingsBoard, so we do recommend to complete the <a href="/docs/getting-started-guides/helloworld/">Getting Started</a> guide.</p>

<h2 id="integration-overview">Integration overview</h2>

<p>ThingsBoard Platform Integrations feature allows pushing data from various platforms and connectivity solutions to ThingsBoard. 
We will use “T-Mobile IoT CDP” platform integration to consume data from T-Mobile NB IoT Network and automatically register devices in ThingsBoard.
Besides configuring the integration, we will also set up ThingsBoard to decode incoming data, store it in the database, visualize on the dashboard and generate alarms based on configurable thresholds.</p>

<p><img data-gifffer="/images/samples/sodaq/demo-dashboard.gif" /></p>

<h2 id="step-1-data-converter-configuration">Step 1. Data Converter configuration</h2>

<p>In order to create an <a href="/docs/user-guide/integrations">Integration</a>, we should create the <a href="/docs/user-guide/integrations/#uplink-data-converter">Uplink Data Converter</a> first. 
The converter will decode incoming telemetry payload data from T-Mobile NB IoT that contains in encoded hex string to human readable, simplified ThingsBoard data format.</p>

<ul>
  <li>Input data from T-Mobile NB IoT Platform looks like this:</li>
</ul>

<figure class="highlight">
  <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
</pre></td><td class="rouge-code"><pre><span class="o">{</span>
    <span class="s2">"reports"</span>: <span class="o">[{</span>
        <span class="s2">"serialNumber"</span>: <span class="s2">"IMEI:0123456789"</span>,
        <span class="s2">"timestamp"</span>: 1547035621977,
        <span class="s2">"subscriptionId"</span>: <span class="s2">"43524b52-b924-40f0-91f0-e7fa71dca87b"</span>,
        <span class="s2">"resourcePath"</span>: <span class="s2">"uplinkMsg/0/data"</span>,
        <span class="s2">"value"</span>: <span class="s2">"010145292a2bfbfc0000000000000000e6e3355c751a879de31e6535d10306005600d00402"</span>
    <span class="o">}]</span>
<span class="o">}</span>
</pre></td></tr></tbody></table></code></pre></div>  </div>
</figure>

<ul>
  <li>After decoding output data will look like this:</li>
</ul>

<figure class="highlight">
  <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
</pre></td><td class="rouge-code"><pre><span class="o">{</span>
    <span class="s2">"deviceName"</span>: <span class="s2">"0123456789"</span>,
    <span class="s2">"deviceType"</span>: <span class="s2">"tracker"</span>,
    <span class="s2">"telemetry"</span>: <span class="o">[{</span>
        <span class="s2">"ts"</span>: 1547035622000,
        <span class="s2">"values"</span>: <span class="o">{</span>
            <span class="s2">"batteryVoltage"</span>: 4.17,
            <span class="s2">"temperature"</span>: 26,
            <span class="s2">"latitude"</span>: 51.8233479,
            <span class="s2">"longitude"</span>: 6.4042341,
            <span class="s2">"altitude"</span>: 6,
            <span class="s2">"speed"</span>: 86,
            <span class="s2">"satellitesObserved"</span>: 208,
            <span class="s2">"timetToFirstFix"</span>: 4
        <span class="o">}</span>
    <span class="o">}]</span>
<span class="o">}</span>
</pre></td></tr></tbody></table></code></pre></div>  </div>
</figure>

<p>Few things to notice:</p>

<ul>
  <li>The IMEI from the incoming message will become the Device Name in ThingsBoard;</li>
  <li>ThingsBoard will automatically create a device with type “tracker” and name equal to IMEI;</li>
  <li>
    <p>Timestamp and sensor readings are decoded from incoming hex string.</p>
  </li>
  <li>The following table shows the first byte position, and the number of bytes for each encoded field that includes in the incoming hex string:</li>
</ul>

<table style="width: 22%">
  <thead>
      <tr>
          <td><b>Field</b></td><td><b>First Byte</b></td><td><b>Byte length</b></td>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>ts</td>
          <td>16</td>
          <td>4</td>
      </tr>
      <tr>
          <td>batteryVoltage</td>
          <td>20</td>
          <td>1</td>
      </tr>
      <tr>
          <td>temperature</td>
          <td>21</td>
          <td>1</td>
      </tr>
      <tr>
          <td>latitude</td>
          <td>22</td>
          <td>4</td>
      </tr>
      <tr>
          <td>longitude</td>
          <td>26</td>
          <td>4</td>
      </tr>
      <tr>
          <td>altitude</td>
          <td>30</td>
          <td>2</td>
      </tr>
      <tr>
          <td>speed</td>
          <td>32</td>
          <td>2</td>
      </tr>
      <tr>
          <td>satellitesObserved</td>
          <td>35</td>
          <td>1</td>
      </tr>
      <tr>
          <td>timetToFirstFix</td>
          <td>36</td>
          <td>1</td>
      </tr>
   </tbody>
</table>

<ul>
  <li>
    <p>Go to <strong>Data Converters</strong> -&gt; <strong>Add new Data Converter</strong> -&gt; <strong>Import Converter</strong></p>
  </li>
  <li>
    <p>Import following json file: <a href="/sodaq/sodaq-uplink-data-converter.json"><strong>SODAQ Uplink data converter</strong></a> (left click on the link and then ‘Ctrl+S’ to download) 
as described on the following screencast:</p>
  </li>
</ul>

<p><img data-gifffer="/images/samples/sodaq/import-and-test-converter.gif" /></p>

<h2 id="step-2-integration-configuration">Step 2. Integration configuration</h2>

<ul>
  <li>Create new integration and copy-paste the HTTP Endpoint URL from the integration window based on the screencast below:</li>
</ul>

<p><img data-gifffer="/images/samples/sodaq/import-integration.gif" /></p>

<ul>
  <li>Fill in the fields with the input data shown in the following table:</li>
</ul>

<table style="width: 50%">
  <thead>
      <tr>
          <td><b>Field</b></td><td><b>Input Data</b></td>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>Name</td>
          <td>SODAQ Integration</td>
      </tr>
      <tr>
          <td>Type</td>
          <td>T-Mobile – IoT CDP</td>
      </tr>
      <tr>
          <td>Debug mode</td>
          <td>True</td>
      </tr>
      <tr>
          <td>Uplink data converter</td>
          <td>SODAQ Uplink data converter</td>
      </tr>
      <tr>
          <td>Downlink data converter</td>
          <td>(empty)</td>
      </tr>
      <tr>
          <td>Base URL</td>
          <td>https://THINGSBOARD_URL</td>
      </tr>
      <tr>
          <td>HTTP endpoint URL</td>
          <td>https://THINGSBOARD_URL/api/v1/integrations/tmobile_iot_cdp/$ROUTING_KEY</td>
      </tr>
   </tbody>
</table>

<ul>
  <li>After filling all fields click the <strong>ADD</strong> button.</li>
</ul>

<h2 id="step-3-post-telemetry-and-verify-the-integration-configuration">Step 3: Post telemetry and verify the Integration configuration</h2>

<p>Before we rush to T-Mobile IoT platform configuration, let’s make sure ThingsBoard is properly configured using simple cURL command.
We will be simulating message from the T-Mobile IoT platform using command below. 
Please note that we will use the HTTP Endpoint URL from a Step 2.</p>

<p>For this we will need to copy HTTP endpoint URL from the <strong>SODAQ</strong> Integration.</p>

<p><img src="/images/samples/sodaq/http-endpoint-url.png" alt="image" /></p>

<p>Download the attached json <a href="/docs/user-guide/rule-engine-2-0/tutorials/resources/telemetry-data.json"><strong>file</strong></a> with telemetry data and execute the following command:</p>

<figure class="highlight">
  <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre></td><td class="rouge-code"><pre>curl <span class="nt">-v</span> <span class="nt">-X</span> POST <span class="nt">-d</span> @telemetry-data.json <span class="nv">$HTTP_ENDPOINT_URL</span> <span class="nt">--header</span> <span class="s2">"Content-Type:application/json"</span>

<span class="k">**</span>you need to replace <span class="nv">$HTTP_ENDPOINT_URL</span> with actual HTTP endpoint URL<span class="k">**</span>
</pre></td></tr></tbody></table></code></pre></div>  </div>
</figure>

<p>Device should be created:</p>

<p><img data-gifffer="/images/samples/sodaq/validate-integration.gif" /></p>

<p>Now you can delete this dummy device if needed.</p>

<h2 id="step-4-t-mobile-nb-iot-platform-callback-configuration">Step 4: T-Mobile NB-IoT Platform Callback configuration</h2>

<p>Use HTTP endpoint URL from Step 2 to configure T-Mobile Platform to push data to this URL. See image below for reference.</p>

<p><img src="/images/samples/sodaq/tmobile-configration.png" alt="image" /></p>

<h2 id="step-5-check-integration-debug-events">Step 5: Check Integration Debug Events</h2>

<p>Navigate to Integration Debug Events, similar to Step 3 and double check that data from real devices arrives and is processed successfully. 
Please note that it may take some time (up to 30 minutes based on our experience) for new message to start arriving.</p>

<h2 id="step-6-rule-chain-import">Step 6: Rule chain import</h2>

<p>In this tutorial, we modified our <strong>Root Rule Chain</strong> and also created Rule Chain <strong>Tracker Alarms</strong>. 
The idea is to forward all incoming telemetry, once it is saved to the database, to <strong>Tracker Alarms</strong> rule chain. 
This rule chain lookup individual alarm threshold parameters for each tracker. User is able to configure those parameters in the dashboard.</p>

<p><br /> 
Download the attached json <a href="/docs/user-guide/resources/sodaq/tracker-alarms.json"><strong>file</strong></a> for the <strong>Tracker Alarms</strong> chain.
<br />
<br />The following screencast will show how to import and configure rule chains:</p>

<p><img data-gifffer="/images/samples/sodaq/configure-rule-chains.gif" />
<br /></p>

<h2 id="step-7-demo-dashboard-import">Step 7: Demo dashboard import</h2>

<p>Download and import attached json <a href="/sodaq/sodaq-dashboard.json"><strong>file</strong></a> with a dashboard from this tutorial.</p>

<p><br />The following screencast will show how to import the dashboard:</p>

<p><img data-gifffer="/images/samples/sodaq/import-dashboard.gif" />
<br /></p>

<p>After Dashboard creation navigate to Tracker details state to sets the limit values, namely:</p>

<ul>
  <li>Max Speed</li>
  <li>Min Voltage</li>
  <li>Min Temperature</li>
  <li>Max Temperature</li>
</ul>

<p>Once Rule chains and Dashboard set up you can trigger device to post the real data and verify that Integration and Rule chains work as expected.
Advanced configuration guide below demonstrates step-by-step instruction how to configure the rule chains and how they actually work. 
This steps are optional and we recommend to navigate to <a href="#next-steps">Next Steps</a> for beginners.</p>

<h2 id="advanced-configuration-optional">Advanced Configuration (Optional)</h2>

<h3 id="security">Security</h3>

<p>Note that you can add additional HTTP headers with some unique parameters for security. 
For example, you can add “MY-INTEGRATION-AUTH-HEADER” with some random string value to both Integration configuration (Step 2) and T-Mobile configuration (Step 4). 
Obviously, those headers should match for data flow to work properly.</p>

<h3 id="message-flow">Message flow</h3>

<p>In this section, we explain the purpose of each node in this tutorial:</p>

<ul>
  <li>Node A: <a href="/docs/user-guide/rule-engine-2-0/enrichment-nodes/#originator-attributes"><strong>Originator attributes</strong></a> node.
    <ul>
      <li>This node add Message Originator Attributes (client\shared\server scope) and Latest Telemetry value into Message Metadata.</li>
    </ul>
  </li>
  <li>Node <strong>B, C, D, E</strong>: <a href="/docs/user-guide/rule-engine-2-0/filter-nodes/#script-filter-node"><strong>Filter Script</strong></a> nodes.
    <ul>
      <li>These nodes with different threshold test scripts. The particular script will return ** true ** if the condition is executed, otherwise, it will return ** false ** “.- Node B: <a href="/docs/user-guide/rule-engine-2-0/action-nodes/#create-alarm-node"><strong>Create alarm</strong></a> node.</li>
    </ul>
  </li>
  <li>Node <strong>F, H, G, L</strong>: <a href="/docs/user-guide/rule-engine-2-0/action-nodes/#create-alarm-node"><strong>Create alarm</strong></a> nodes.
    <ul>
      <li>Creates or Updates an alarm if the specific published telemetry is not at expected range (filter script node returns True).</li>
    </ul>
  </li>
  <li>Node <strong>G, I, K, M</strong>: <a href="/docs/user-guide/rule-engine-2-0/action-nodes/#clear-alarm-node"><strong>Clear alarm</strong></a> node.
    <ul>
      <li>Clears alarm if it exists in case if the specific published telemetry is in an expected range (filter script node returns False).</li>
    </ul>
  </li>
  <li>Node <strong>O</strong>: <strong>Rule Chain</strong> node.
    <ul>
      <li>Forwards incoming Message to specified Rule Chain <strong>Create &amp; Clear Alarms</strong>.</li>
    </ul>
  </li>
</ul>

<p><br /></p>

<h4 id="configuring-the-rule-chain">Configuring the Rule Chain</h4>

<p>In this tutorial, we modified our <strong>Root Rule Chain</strong> and also created Rule Chain <strong>Tracker Alarms</strong></p>

<p><br />The following screenshots show how the above Rule Chains should look like:</p>

<ul>
  <li><strong>Tracker Alarms:</strong></li>
</ul>

<p><img src="/images/samples/sodaq/tracker-alarms.png" alt="image" /></p>

<ul>
  <li><strong>Root Rule Chain:</strong></li>
</ul>

<p><img src="/images/samples/sodaq/root-rule-chain.png" alt="image" /></p>

<p><br /></p>

<p>Download the attached json <a href="/sodaq/tracker-alarms.json"><strong>file</strong></a> for the <strong>Tracker Alarms</strong> chain.
<br />
<br /></p>

<p>The following sections shows you how to create <strong>Tracker Alarms</strong> chain from scratch and modify <strong>Root Rule Chain</strong>.</p>

<h5 id="create-new-tracker-alarms-rule-chain">Create new <strong>Tracker Alarms</strong> Rule Chain</h5>

<p>Go to <strong>Rule Chains</strong> -&gt; <strong>Add new Rule Chain</strong></p>

<p>Configuration:</p>

<ul>
  <li>Name : <strong>Tracker Alarms</strong></li>
</ul>

<p><img src="/images/samples/sodaq/add-chain.png" alt="image" /></p>

<p>New Rule Chain is created. Press <strong>Edit</strong> button and to configure it.</p>

<h5 id="adding-the-required-nodes">Adding the required nodes</h5>

<p>In this rule chain, you will create 13 nodes as it will be explained in the following sections:</p>

<h5 id="node-a-originator-attributes">Node A: <strong>Originator attributes</strong></h5>
<ul>
  <li>
    <p>Add the <strong>Originator attributes</strong> node and connect it to <strong>Input</strong> node.<br />
This node will be used for taking shared scope attributes of the message originator that will be setts directly from the Dashboard.</p>
  </li>
  <li>
    <p>Fill in the fields with the input data shown in the following table:</p>
  </li>
</ul>

<table style="width: 30%">
   <thead>
       <tr>
        <td>Field</td>
        <td>Input Data </td>
       </tr>
   </thead>
   <tbody>
       <tr>
            <td>Name</td>
            <td>Fetch Limit telemetry</td>
       </tr>
       <tr>
            <td>Shared attributes</td>
            <td>maxTemperature</td>
       </tr>      
       <tr>
            <td>Shared attributes</td>
            <td>minTemperature</td>
       </tr>      
       <tr>
            <td>Shared attributes</td>
            <td>maxSpeed</td>
       </tr>      
       <tr>
            <td>Shared attributes</td>
            <td>minVoltage</td>
       </tr>      
   </tbody>
 </table>

<h5 id="node-b-filter-script">Node B: <strong>Filter Script</strong></h5>
<ul>
  <li>Add the <strong>Filter Script</strong> node and connect it to the <strong>Originator attributes</strong> node with a relation type <strong>Success</strong>.
 <br />This node will verify: “if the temperature less than max temperature value” using the following script:</li>
</ul>

<figure class="highlight">
  <div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre><span class="k">return</span> <span class="nx">msg</span><span class="p">.</span><span class="nx">temperature</span> <span class="o">&gt;</span> <span class="nx">metadata</span><span class="p">.</span><span class="nx">shared_maxTemperature</span>
</pre></td></tr></tbody></table></code></pre></div>  </div>
</figure>

<p>If the temperature more than max value the script will return <strong>true</strong>, otherwise <strong>false</strong> will be returned.</p>

<ul>
  <li>Enter the Name field as <strong>Validate Max temperature</strong>.</li>
</ul>

<p><img src="/images/samples/sodaq/validate-max-temperature.png" alt="image" /></p>

<p>Rule Nodes C, D, and E have the same configuration that has the above-mentioned rule node.
<br />Paste the JS script code shown in the following table to the corresponding Rule Nodes:</p>

<table style="width: 60%">
   <thead>
       <tr>
        <td style="font-size: 15px;">Rule Node</td>
        <td style="font-size: 15px;">Script Code</td>
       </tr>
   </thead>
   <tbody>
       <tr>
            <td style="font-size: 15px;">C: Validate Min temperature</td>
            <td><code>return msg.temperature &lt; metadata.shared_minTemperature;</code></td>
       </tr>      
       <tr>
            <td style="font-size: 15px;">D: Validate Max speed</td>
            <td><code>return msg.speed &gt; metadata.shared_maxSpeed;</code></td>
       </tr>      
       <tr>
            <td style="font-size: 15px;">E: Validate Min voltage</td>
            <td><code>return msg.batteryVoltage &lt; metadata.shared_minVoltage;</code></td>
       </tr>      
   </tbody>
 </table>

<h5 id="node-f-create-alarm">Node F: <strong>Create alarm</strong></h5>
<ul>
  <li>
    <p>Add the <strong>Create alarm</strong> node and connect it to the <strong>Filter Script</strong> node with a relation type <strong>True</strong>. <br />
This node loads the latest Alarm with configured Alarm Type for Message Originator<br /> if the published temperature more than <strong>maxTemperature</strong> value (filter script node returns True).</p>
  </li>
  <li>
    <p>Enter the Name field as <strong>Max Temperature</strong> and the Alarm type as <strong>Max Temperature</strong>.</p>
  </li>
  <li>
    <p><strong>Alarm Details</strong> function:</p>
  </li>
</ul>

<figure class="highlight">
  <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
</pre></td><td class="rouge-code"><pre>var details <span class="o">=</span> <span class="o">{}</span><span class="p">;</span>
details.value <span class="o">=</span> msg.temperature<span class="p">;</span>
<span class="k">if</span> <span class="o">(</span>metadata.prevAlarmDetails<span class="o">)</span> <span class="o">{</span>
    details <span class="o">=</span> JSON.parse<span class="o">(</span>metadata.prevAlarmDetails<span class="o">)</span><span class="p">;</span>
<span class="o">}</span>
<span class="k">return </span>details<span class="p">;</span>
</pre></td></tr></tbody></table></code></pre></div>  </div>
</figure>

<p><img src="/images/samples/sodaq/create-alarm.png" alt="image" /></p>

<p>Rule Nodes H, J, and L have the same configuration that has the above-mentioned rule node.
<br />Paste the Alarm Type shown in the following table to the corresponding Rule Nodes:</p>

<table style="width: 100%">
   <thead>
       <tr>
        <td style="font-size: 15px;">Rule Node</td>
        <td style="font-size: 15px;">Alarm Type</td>
        <td style="font-size: 15px;">Script Code</td>
       </tr>
   </thead>
   <tbody>
       <tr>
            <td style="font-size: 15px;">H: Min temperature</td>
            <td><code>Min temperature</code></td>
            <td><code>var details = {};
                      details.value = msg.temperature;
                      if (metadata.prevAlarmDetails) {
                          details = JSON.parse(metadata.prevAlarmDetails);
                      }
                      return details;</code></td>
       </tr>      
       <tr>
            <td style="font-size: 15px;">J: Max Speed</td>
            <td><code>Max Speed</code></td>
            <td><code>var details = {};
                      details.value = msg.speed;
                      if (metadata.prevAlarmDetails) {
                          details = JSON.parse(metadata.prevAlarmDetails);
                      }
                      return details;</code></td>
       </tr>      
       <tr>
            <td style="font-size: 15px;">L: Min Voltage</td>
            <td><code>Min Voltage</code></td>
            <td><code>var details = {};
                      details.value = msg.batteryVoltage;
                      if (metadata.prevAlarmDetails) {
                          details = JSON.parse(metadata.prevAlarmDetails);
                      }
                      return details;</code></td>
       </tr>      
   </tbody>
 </table>

<h5 id="node-h-clear-alarm">Node H: <strong>Clear Alarm</strong></h5>
<ul>
  <li>
    <p>Add the <strong>Clear Alarm</strong> node and connect it to the <strong>Filter Script</strong> node with a relation type <strong>False</strong>. <br />
This node loads the latest Alarm with configured Alarm Type for Message Originator<br /> and Clears alarm if it exists in case if the published temperature less than <strong>maxTemperature</strong> value (script node returns False).</p>
  </li>
  <li>
    <p>Enter the Name field as <strong>Clear Alarm</strong> and the Alarm type as <strong>Max Temperature</strong>.</p>
  </li>
  <li>
    <p><strong>Alarm Details</strong> function:</p>
  </li>
</ul>

<figure class="highlight">
  <div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
</pre></td><td class="rouge-code"><pre><span class="kd">var</span> <span class="nx">details</span> <span class="o">=</span> <span class="p">{};</span>
<span class="k">if</span> <span class="p">(</span><span class="nx">metadata</span><span class="p">.</span><span class="nx">prevAlarmDetails</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">details</span> <span class="o">=</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="nx">metadata</span><span class="p">.</span><span class="nx">prevAlarmDetails</span><span class="p">);</span>
<span class="p">}</span>
<span class="nx">details</span><span class="p">.</span><span class="nx">clearedValue</span> <span class="o">=</span> <span class="nx">msg</span><span class="p">.</span><span class="nx">temperature</span><span class="p">;</span>
<span class="k">return</span> <span class="nx">details</span><span class="p">;</span>
</pre></td></tr></tbody></table></code></pre></div>  </div>
</figure>

<p><img src="/images/samples/sodaq/clear-alarm.png" alt="image" /></p>

<p>Rule Nodes I, K and M have the same configuration that has the above-mentioned rule node.
<br />Paste the Alarm Type shown in the following table to the corresponding Rule Nodes:</p>

<table style="width: 80%">
   <thead>
       <tr>
        <td style="font-size: 15px;">Rule Node</td>
        <td style="font-size: 15px;">Alarm Type</td>
        <td style="font-size: 15px;">Script Code</td>
       </tr>
   </thead>
   <tbody>
       <tr>
            <td style="font-size: 15px;">G: Min temperature</td>
            <td><code>Min temperature</code></td>
            <td><code>var details = {};
                      if (metadata.prevAlarmDetails) {
                          details = JSON.parse(metadata.prevAlarmDetails);
                      }
                      details.clearedValue = msg.temperature;
                      return details;</code>
            </td>
       </tr>      
       <tr>
            <td style="font-size: 15px;">I: Max Speed</td>
            <td><code>Max Speed</code></td>
            <td><code>var details = {};
                      if (metadata.prevAlarmDetails) {
                          details = JSON.parse(metadata.prevAlarmDetails);
                      }
                      details.clearedValue = msg.speed;
                      return details;</code>
            </td>
       </tr>      
       <tr>
            <td style="font-size: 15px;">K: Min Voltage</td>
            <td><code>Min Voltage</code></td>
            <td><code>var details = {};
                      if (metadata.prevAlarmDetails) {
                          details = JSON.parse(metadata.prevAlarmDetails);
                      }
                      details.clearedValue = msg.batteryVoltage;
                      return details;</code>
            </td>
       </tr>      
   </tbody>
 </table>

<h4 id="modify-root-rule-chain">Modify Root Rule Chain</h4>

<p>The initial Root Rule Chain has been modified by adding the following node:</p>

<h5 id="node-a-filter-script">Node A: <strong>Filter Script</strong></h5>
<ul>
  <li>Add the <strong>Filter Script</strong> node and connect it to the <strong>Save Timeseries</strong> node with a relation type <strong>Success</strong>.
 <br />This node will check that message originator type is correct using the following script:</li>
</ul>

<figure class="highlight">
  <div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre><span class="k">return</span> <span class="nx">metadata</span><span class="p">.</span><span class="nx">deviceType</span> <span class="o">===</span> <span class="dl">'</span><span class="s1">tracker</span><span class="dl">'</span><span class="p">;</span>
</pre></td></tr></tbody></table></code></pre></div>  </div>
</figure>

<ul>
  <li>Enter the Name field as <strong>Tracker filter</strong>.</li>
</ul>

<p><img src="/images/samples/sodaq/tracker-filter.png" alt="image" /></p>

<h5 id="node-o-rule-chain">Node O: <strong>Rule Chain</strong></h5>
<ul>
  <li>
    <p>Add the <strong>Rule Chain</strong> node and connect it to the <strong>Filter Script</strong> node with a relation type <strong>True</strong>. <br />
This node forwards incoming Message to specified Rule Chain <strong>Tracker Alarms</strong>.</p>
  </li>
  <li>
    <p>Enter the Name field as <strong>Tracker Alarms</strong>.</p>
  </li>
</ul>

<p><img src="/images/samples/sodaq/rule-chain-node.png" alt="image" /></p>

<h2 id="next-steps">Next steps</h2>

<ul>
  <li>
    <p><a href="/docs/guides#AnchorIDGettingStartedGuides">Getting started guides</a> - These guides provide quick overview of main ThingsBoard features. Designed to be completed in 15-30 minutes.</p>
  </li>
  <li>
    <p><a href="/docs/user-guide/install/installation-options/">Installation guides</a> - Learn how to setup ThingsBoard on various available operating systems.</p>
  </li>
  <li>
    <p><a href="/docs/guides#AnchorIDConnectYourDevice">Connect your device</a> - Learn how to connect devices based on your connectivity technology or solution.</p>
  </li>
  <li>
    <p><a href="/docs/guides#AnchorIDDataVisualization">Data visualization</a> - These guides contain instructions how to configure complex ThingsBoard dashboards.</p>
  </li>
  <li>
    <p><a href="/docs/guides#AnchorIDDataProcessing">Data processing &amp; actions</a> - Learn how to use ThingsBoard Rule Engine.</p>
  </li>
  <li>
    <p><a href="/docs/guides#AnchorIDDataAnalytics">IoT Data analytics</a> - Learn how to use rule engine to perform basic analytics tasks.</p>
  </li>
  <li>
    <p><a href="/docs/guides#AnchorIDAdvancedFeatures">Advanced features</a> - Learn about advanced ThingsBoard features.</p>
  </li>
  <li>
    <p><a href="/docs/guides#AnchorIDContribution">Contribution and Development</a> - Learn about contribution and development in ThingsBoard.</p>
  </li>
</ul>

<p><br /></p>


      </div>
      <footer>
	<main class="light-text">
		<div class="newsletterSubsContainer">
            <script type="text/javascript">
                function subscribeForNewsletter(event) {
                    event.stopPropagation();
                    var script_tag = document.createElement('script');
                    script_tag.setAttribute("type", "text/javascript");
                    script_tag.setAttribute("src", "https://static.mailerlite.com/js/w/webforms.min.js?v28bf44f740701752bfc6767bc7e171d4");
                    document.getElementsByTagName("head")[0].appendChild(script_tag);
                    $(event.target).css('display', 'none');
                    $('#mlb2-7341216').css('display', 'block');
                }
            </script>
            <button class="n-button price subscribe" onClick="subscribeForNewsletter(event)">Sign up for ThingsBoard news</button>
            <div id="mlb2-7341216" class="ml-subscribe-form ml-subscribe-form-7341216" style="display: none;">
<!--            <div id="mlb2-7341216" class="ml-subscribe-form ml-subscribe-form-7341216" style="display: block;">-->
                <div class="ml-vertical-align-center">
                    <div class="subscribe-form ml-block-success" style="display: none;">
                        <div class="form-section">
                            <p>Thank you for your interest in ThingsBoard!<br/>Have a great day!</p>
                        </div>
                    </div>
                    <form class="ml-block-form" action="https://static.mailerlite.com/webforms/submit/r9r9x7" data-id="708170" data-code="r9r9x7" method="POST" target="_blank">
                        <div class="subscribe-form horizontal">
                            <div class="form-section horizontal">
                                <div class="form-group ml-field-email ml-validate-required ml-validate-email">
                                    <input type="email" name="fields[email]" class="form-control" placeholder="Email address*" value="" autocomplete="email" x-autocompletetype="email" spellcheck="false" autocapitalize="off" autocorrect="off">
                                </div>
                            </div>
                            <input type="hidden" name="ml-submit" value="1">
                            <div class="form-section horizontal ml-button-position">
                                <button class="primary n-button price subscribe" type="submit">
                                    Subscribe
                                </button>
                                <button disabled="disabled" style="display: none;" type="button" class="n-button loading">
                                    <img src="https://static.mailerlite.com/images/rolling@2x.gif" width="20" height="20" style="width: 20px; height: 20px;">
                                </button>
                            </div>
                            <p>By subscribing you agree to receive newsletters from ThingsBoard, Inc.</p>
                        </div>
                    </form>
                </div>
            </div>
		</div>

        <hr>

        <div class="deeper">
            <a href="/" class="footer-logo"></a>
            <nav>
                <a href="/docs/getting-started-guides/helloworld/">Get Started</a>
                <a href="/docs/">Documentation</a>
                <a href="/iot-use-cases/">Use cases</a>
                <a href="https://blog.thingsboard.io/">Blog</a>
                <a href="/docs/services/">Services</a>
                <a href="/docs/contact-us/">Contact us</a>
            </nav>
        </div>

        <div class="deepmost">
            <div class="copyright">&copy; 2021 The ThingsBoard Authors</div>
            <div class="social">
                <a href="https://github.com/thingsboard/thingsboard" class="github"></a>
                <a href="https://gitter.im/thingsboard/chat" class="gitter"></a>
                <a href="https://www.youtube.com/thingsboard" class="youtube"></a>
                <a href="http://stackoverflow.com/questions/tagged/thingsboard" class="stack-overflow"></a>
                <a href="https://groups.google.com/forum/#!forum/thingsboard" class="mailing-list"></a>
                <a href="https://www.facebook.com/thingsboard" class="facebook"></a>
                <a href="https://twitter.com/thingsboard" class="twitter"></a>
            </div>
        </div>
	</main>
</footer>

  </div>
</section>

<style>
  .cse .gsc-control-cse, .gsc-control-cse {
    padding: 0;
  }
  .gsc-control-cse table, .gsc-control-cse-en table {
    margin:0px !important;
  }
  .gsc-above-wrapper-area {
    border-bottom: 0;
  }
</style>
<script>
    jqueryDefer(function () {
        $(document).on('selectionchange',function() {
        // $(document).mouseup(function () {
            $('.clipboard-btn').removeClass('noChars');
            var selectedChars = getSelectedText();
            // $('#numberChars').html(selectedChars.length);
            if (selectedChars == 0) {
                $('.clipboard-btn').addClass('noChars');
            }
        });
    });
    function getSelectedText() {
        var text;
        if (window.getSelection) {
            text = window.getSelection().toString();
        } else if (document.getSelection) {
            text = document.getSelection();
        } else if (document.selection) {
            text = document.selection.createRange().text;
        }
        return text;
    }
</script>
<script>
    jqueryDefer(function () {
        $(document).ready(function () {
            var allCodeBlocksElements = $(".copy-code");
            allCodeBlocksElements.each(function (i) {
                var codeBlock = $(this);
                if (!codeBlock.hasClass('highlighter-rouge')) {
                    codeBlock = codeBlock.find('.highlighter-rouge');
                }
                codeBlock.each(function () {
                    var block = codeBlock.find('pre.highlight > code .rouge-code');
                    var currentId = "codeblock" + (i + 1);
                    block.attr('id', currentId);
                    var clipButton = $('<button class="clipboard-btn" data-clipboard-target="#' + currentId + '"><p>Copy to clipboard</p><div><img src="/images/copy-code-icon.svg" alt="Copy to clipboard"></div></button>');
                    $(this).append(clipButton);
                    var troyan = codeBlock.find('pre.highlight');
                    var Tooltip = $('<div class="customTooltip"><div class="tooltipText">Copied!</div></div>');
                    troyan.append(Tooltip);
                    troyan.addClass('clipboard-btn');
                    troyan.attr('data-clipboard-target', "#" + currentId);
                    troyan.on('mouseleave', clearTooltip);
                    troyan.on('blur', clearTooltip);
                    troyan.on('click', function(e) {
                        var el = $(e.currentTarget);
                        if (el.hasClass('showTool')) {
                            clearTooltip(e);
                            troyan.attr('data-skip-tooltip', "true");
                        }
                    });
                });
            });

            var clipboard = new Clipboard('.noChars');
            clipboard.on('success', function (e) {
                $('.clipboard-btn').removeClass('noChars');
                e.clearSelection();
                var trigger = e.trigger;
                if (!$(trigger).attr('data-skip-tooltip')) {
                    showTooltip(e.trigger, 'Copied!');
                } else {
                    $(trigger).removeAttr('data-skip-tooltip');
                }
            });

            $('#search').focus(
                function(){
                    $(this).parent('#searchBox').addClass('focused');
                }).blur(
                function(){
                    $(this).parent('#searchBox').removeClass('focused');
                });

            $('#searchBox .searchButton').click(function () {
                var value = $('#search').val();
                window.location.replace('/docs/pe/search/?q=' + value);
            });

            $('#docsBreadcrumbs').click(function () {
                if ($(this).hasClass('active')) {
                    $(this).removeClass('active');
                    $('#docsNav').removeClass('active');
                    $('#searchBox').removeClass('visible');
                } else {
                    $(this).addClass('active');
                    $('#docsNav').addClass('active');
                    $('#searchBox').addClass('visible');
                }
            });
        });

        function clearTooltip(e) {
            var el = $(e.currentTarget);
            el.removeClass('showTool');
            el.attr('aria-label', null);
        }

        function showTooltip(elem, msg) {
            var el = $(elem);
            el.addClass('showTool');
            el.attr('aria-label', msg);
        }
    });
</script>

<script>
    jqueryDefer(function () {
        var markdownTocs = null;
        var contentAnchors = [];
        var activeAnchor = null;
        var firstAnchor = null;
        var lastAnchor = null;

        function updatePositions() {
            contentAnchors = [];
            markdownTocs.each(function (i) {
                var tocAnchor = $(this).children('a');
                var href = tocAnchor.attr('href');
                var contentAnchor = $('div#content ' + href);
                var top = Math.floor(contentAnchor.offset().top);
                var bottom;
                if (i < markdownTocs.length - 1) {
                    var nextHref = $(markdownTocs[i + 1]).children('a').attr('href');
                    var nextContentAnchor = $('div#content ' + nextHref);
                    bottom = Math.floor(nextContentAnchor.offset().top);
                } else {
                    bottom = $('div#content').offset().top + $('div#content').innerHeight();
                }
                var contentAnchorInfo = {anchor: contentAnchor, toc: $(this), top: top, bottom: bottom, href: href};
                contentAnchors.push(contentAnchorInfo);
                if (i === 0) {
                    firstAnchor = contentAnchorInfo;
                }
                if (i === markdownTocs.length - 1) {
                    lastAnchor = contentAnchorInfo;
                }
            });
        }

        function findActiveContentToc() {
            var top = $(window).scrollTop();
            var bottom = top + $(window).height();
            if (bottom === $('#encyclopedia').offset().top + $('#encyclopedia').innerHeight()) {
                return lastAnchor;
            } else {
                bottom -= 154;
                for (var i = 0; i < contentAnchors.length; i++) {
                    var contentAnchor = contentAnchors[i];
                    if (contentAnchor.top <= bottom &&
                        contentAnchor.bottom > top) {
                        return contentAnchor;
                    }
                }
            }
            return firstAnchor;
        }

        function updateActiveToc(init) {
            updatePositions();
            var newActiveAnchor = findActiveContentToc();
            if (!activeAnchor || newActiveAnchor.href !== activeAnchor.href) {
                activeAnchor = newActiveAnchor;
                markdownTocs.removeClass('active');
                activeAnchor.toc.addClass('active');
                var tocTop = $('#table-of-contents').scrollTop() + 100;
                var tocBottom = tocTop + $('#table-of-contents').innerHeight() - 200;
                var activeTocTop = activeAnchor.toc.position().top;
                var activeTocBottom = activeTocTop + activeAnchor.toc.children(':first').height();
                if (tocTop > activeTocTop) {
                    activeAnchor.toc[0].scrollIntoView();
                    $('#table-of-contents')[0].scrollTop -= 100;
                } else if (tocBottom < activeTocBottom) {
                    activeAnchor.toc[0].scrollIntoView();
                    $('#table-of-contents')[0].scrollTop += init ? -100 : 100;
                }
            }
        }
        $( document ).ready(function() {
            var tocs = $('#content > ul#markdown-toc');
            var tableOfContents = $('#table-of-contents');
            tableOfContents.append(tocs);
            markdownTocs = $('#table-of-contents ul#markdown-toc li').filter(function() {
                var tocAnchor = $(this).children('a');
                var href = tocAnchor.attr('href');
                if (!href.startsWith('#')) {
                    return false;
                } else {
                    var contentAnchor = $('div#content ' + href);
                    return contentAnchor.length > 0;
                }
            });
            updateActiveToc(true);
        });

        $(document).on("scroll", function() {
            updateActiveToc(false);
        });

    });
</script>

</body>
</html>

