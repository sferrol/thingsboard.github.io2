







<!Doctype html>
<html id="docs" class="Guides">







<head>
    <meta charset="utf-8">
    <meta name="cf-2fa-verify" content="a08672380de15e9">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    
    <title>Humidity and temperature upload over HTTP using Arduino UNO, SIM808 Shield and HTU21D sensor | ThingsBoard Community Edition</title>
    <!-- Begin Jekyll SEO tag v2.7.1 -->
<meta name="generator" content="Jekyll v3.9.0" />
<meta property="og:title" content="Humidity and temperature upload over HTTP using Arduino UNO, SIM808 Shield and HTU21D sensor" />
<meta name="author" content="thingsboard" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="ThingsBoard IoT Platform sample for humidity and temperature data upload over HTTP using Arduino UNO, SIM808 GSM shield and HTU21D sensor." />
<meta property="og:description" content="ThingsBoard IoT Platform sample for humidity and temperature data upload over HTTP using Arduino UNO, SIM808 GSM shield and HTU21D sensor." />
<link rel="canonical" href="http://0.0.0.0:4002/docs/samples/arduino/sim808-htu21d/" />
<meta property="og:url" content="http://0.0.0.0:4002/docs/samples/arduino/sim808-htu21d/" />
<meta property="og:site_name" content="ThingsBoard" />
<meta property="og:image" content="http://0.0.0.0:4002/images/thingsboard_logo.png" />
<meta name="twitter:card" content="summary_large_image" />
<meta property="twitter:image" content="http://0.0.0.0:4002/images/thingsboard_logo.png" />
<meta property="twitter:title" content="Humidity and temperature upload over HTTP using Arduino UNO, SIM808 Shield and HTU21D sensor" />
<meta name="twitter:site" content="@thingsboard" />
<meta name="twitter:creator" content="@thingsboard" />
<script type="application/ld+json">
{"url":"http://0.0.0.0:4002/docs/samples/arduino/sim808-htu21d/","publisher":{"@type":"Organization","logo":{"@type":"ImageObject","url":"http://0.0.0.0:4002/images/thingsboard_logo.png"},"name":"thingsboard"},"author":{"@type":"Person","name":"thingsboard"},"image":{"twitter":"/images/thingsboard_logo.png","facebook":"/images/thingsboard_logo.png","url":"http://0.0.0.0:4002/images/thingsboard_logo.png","@type":"imageObject"},"description":"ThingsBoard IoT Platform sample for humidity and temperature data upload over HTTP using Arduino UNO, SIM808 GSM shield and HTU21D sensor.","@type":"WebPage","headline":"Humidity and temperature upload over HTTP using Arduino UNO, SIM808 Shield and HTU21D sensor","@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->

    
    
    <meta name="twitter:description" content="ThingsBoard IoT Platform sample for humidity and temperature data upload over HTTP using Arduino UNO, SIM808 GSM shield and HTU21D sensor."/>
    
    
    <link rel="shortcut icon" type="image/png" href="/images/favicon.png">
    <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Poppins:300,400,500,600,700" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.5.2/animate.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
          integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    <link rel="stylesheet" href="/css/styles.css">
    <script async defer src="https://buttons.github.io/buttons.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/qs/6.7.0/qs.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gifffer/1.5.0/gifffer.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/clipboard@1/dist/clipboard.min.js"></script>
    <script type="text/javascript">
        window.onload = function() {
            Gifffer();
        }
    </script>
    <script type="text/javascript">
        /*! loadCSS. [c]2017 Filament Group, Inc. MIT License */
        !function (a) {
            "use strict";
            var b = function (b, c, d) {
                function e(a) {
                    return h.body ? a() : void setTimeout(function () {
                        e(a)
                    })
                }

                function f() {
                    i.addEventListener && i.removeEventListener("load", f), i.media = d || "all"
                }

                var g, h = a.document, i = h.createElement("link");
                if (c) g = c; else {
                    var j = (h.body || h.getElementsByTagName("head")[0]).childNodes;
                    g = j[j.length - 1]
                }
                var k = h.styleSheets;
                i.rel = "stylesheet", i.href = b, i.media = "only x", e(function () {
                    g.parentNode.insertBefore(i, c ? g : g.nextSibling)
                });
                var l = function (a) {
                    for (var b = i.href, c = k.length; c--;) if (k[c].href === b) return a();
                    setTimeout(function () {
                        l(a)
                    })
                };
                return i.addEventListener && i.addEventListener("load", f), i.onloadcssdefined = l, l(f), i
            };
            "undefined" != typeof exports ? exports.loadCSS = b : a.loadCSS = b
        }("undefined" != typeof global ? global : this);

        /*! onloadCSS. (onload callback for loadCSS) [c]2017 Filament Group, Inc. MIT License */
        function onloadCSS(a, b) {
            function c() {
                !d && b && (d = !0, b.call(a))
            }

            var d;
            a.addEventListener && a.addEventListener("load", c), a.attachEvent && a.attachEvent("onload", c), "isApplicationInstalled" in navigator && "onloadcssdefined" in a && a.onloadcssdefined(c)
        }
    </script>
    <script type="text/javascript">

        function jqueryDefer(method) {
            if (window.jQuery) {
                method();
            } else {
                setTimeout(function () {
                    jqueryDefer(method)
                }, 50);
            }
        }

        function jqueryUiDefer(method) {
            if (window.jQuery && window.jQuery.ui) {
                method();
            } else {
                setTimeout(function () {
                    jqueryUiDefer(method)
                }, 50);
            }
        }

        window.vis = (function () {
            var stateKey,
                eventKey,
                keys = {
                    hidden: "visibilitychange",
                    webkitHidden: "webkitvisibilitychange",
                    mozHidden: "mozvisibilitychange",
                    msHidden: "msvisibilitychange"
                };
            for (stateKey in keys) {
                if (stateKey in document) {
                    eventKey = keys[stateKey];
                    break;
                }
            }
            return function (c) {
                if (c) document.addEventListener(eventKey, c);
                return !document[stateKey];
            }
        })();

        function loadScript(src, callback) {
            var s, r, t;
            r = false;
            s = document.createElement('script');
            s.type = 'text/javascript';
            s.src = src;
            s.onload = s.onreadystatechange = function () {
                if (!r && (!this.readyState || this.readyState == 'complete')) {
                    r = true;
                    if (callback) {
                        callback();
                    }
                }
            };
            t = document.getElementsByTagName('script')[0];
            t.parentNode.insertBefore(s, t);
        }

        function loadCssAsync(src, callback) {
            var stylesheet = loadCSS(src);
            if (callback) {
                onloadCSS(stylesheet, callback);
            }
        }

        function loadNextScript(index, scriptsList, completeCallback) {
            if (index < scriptsList.length) {
                var script = scriptsList[index];
                if (script.type === 'script') {
                    loadScript(script.src, function () {
                        if (script.callback) {
                            script.callback();
                        }
                        index++;
                        loadNextScript(index, scriptsList, completeCallback);
                    });
                } else if (script.type === 'css') {
                    loadCssAsync(script.src, function () {
                        index++;
                        loadNextScript(index, scriptsList, completeCallback);
                    });
                }
            } else if (completeCallback) {
                completeCallback();
            }
        }

        var initialScriptsList = [
            {src: '/js/jquery-2.2.0.min.js', type: 'script'},
            {src: '/css/jquery-ui.min.css', type: 'css'},
            {src: '/js/jquery-ui.min.js', type: 'script'},
            {src: '/js/jquery.vide.js', type: 'script'},
            {src: '/js/script.js', type: 'script'},
            {src: '/css/photoswipe.css', type: 'css'},
            {src: '/css/default-skin/default-skin.css', type: 'css'},
            {src: '/js/photoswipe.min.js', type: 'script'},
            {src: '/js/photoswipe-ui-default.min.js', type: 'script'}
        ];

        loadNextScript(0, initialScriptsList);

        jqueryDefer(function () {
            (function ($, win) {
                $.fn.inViewport = function (cb) {
                    return this.each(function (i, el) {
                        function visPx() {
                            var H = $(this).height(),
                                r = el.getBoundingClientRect(), t = r.top, b = r.bottom;
                            var result = cb.call(el, Math.max(0, t > 0 ? H - t : (b < H ? b : H)));
                            if (result) {
                                $(win).off("resize scroll", visPx);
                            }
                        }

                        visPx();
                        $(win).on("resize scroll", visPx);
                    });
                };
            }(jQuery, window));
        });

        function inViewportDefer(method) {
            if (window.jQuery && $.fn.inViewport) {
                method();
            } else {
                setTimeout(function () {
                    inViewportDefer(method)
                }, 50);
            }
        }

    </script>
    <script type="text/javascript">
        function _gaLt(event) {
            /* If GA is blocked or not loaded, or not main|middle|touch click then don't track */
            if (!ga.hasOwnProperty("loaded") || ga.loaded != true || (event.which != 1 && event.which != 2)) {
                return;
            }
            var el = event.srcElement || event.target;

            while (el && (typeof el.tagName == 'undefined' || el.tagName.toLowerCase() != 'a' || !el.href)) {
                el = el.parentNode;
            }
            if (el && el.href) {
                var link = el.href;
                if ((link.indexOf(location.host) == -1 || link.indexOf('.' + location.host) > 0) && !link.match(/^javascript\:/i)) {
                    var target = (el.target && !el.target.match(/^_(self|parent|top)$/i)) ? el.target : false;
                    if (event.ctrlKey || event.shiftKey || event.metaKey || event.which == 2) {
                        target = "_blank";
                    }

                    var hbrun = false; // tracker has not yet run
                    var hitBack = function () {
                        if (hbrun) return;
                        hbrun = true;
                        window.location.href = link;
                    };

                    if (target) {
                        ga(
                            "send", "event", "Outgoing Links", link,
                            document.location.pathname + document.location.search
                        );
                    } else {
                        event.preventDefault ? event.preventDefault() : event.returnValue = !1;
                        ga(
                            "send", "event", "Outgoing Links", link,
                            document.location.pathname + document.location.search, {
                                "hitCallback": hitBack
                            }
                        );

                        setTimeout(hitBack, 1000);
                    }
                }
            }
        }

        var _w = window;
        var _gaLtEvt = ("ontouchstart" in _w) ? "click" : "mousedown";
        _w.addEventListener ? _w.addEventListener("load", function () {
                document.body.addEventListener(_gaLtEvt, _gaLt, !1)
            }, !1)
            : _w.attachEvent && _w.attachEvent("onload", function () {
            document.body.attachEvent("on" + _gaLtEvt, _gaLt)
        });
    </script>
    <script>
        (function (i, s, o, g, r, a, m) {
            i['GoogleAnalyticsObject'] = r;
            i[r] = i[r] || function () {
                (i[r].q = i[r].q || []).push(arguments)
            }, i[r].l = 1 * new Date();
            a = s.createElement(o),
                m = s.getElementsByTagName(o)[0];
            a.async = 1;
            a.src = g;
            m.parentNode.insertBefore(a, m)
        })(window, document, 'script', '//www.google-analytics.com/analytics.js', 'ga');

        ga('create', 'UA-88383331-1', 'auto');
        ga('send', 'pageview');
    </script>
    <script>
        function Burger() {
            var header = $('header');
            var body = $('body');
            if (header.hasClass('opened-burger')) {
                header.removeClass('opened-burger');
                let subMenus = $('nav.head-menu > ul > li > div.centered-sub > ul.sub-menu');
                subMenus.removeClass('open-sub');
                body.css('overflow', '');
            } else {
                header.addClass('opened-burger');
                body.css('overflow', 'hidden');
            }
        }
    </script>
    <script>

        jqueryDefer(function () {
            let menuElement = $('nav.head-menu > ul');
            let submenuContainer = $('nav.head-menu > div.sub-menu-container');
            let menuItems = $('nav.head-menu > ul > li');
            let indicator = $('nav.head-menu > ul > div.indicator');
            let subMenuActive = false;
            menuElement.on('mouseleave', function (event) {
                if (!$(event.relatedTarget).parents('div.sub-menu-container').length) {
                    subMenuActive = false;
                    submenuContainer.removeClass('active bounds-transition');
                    menuItems.removeClass('active');
                    indicator.removeClass('left-transition');
                }
            });
            submenuContainer.on('mouseleave', function (event) {
                if (!$(event.relatedTarget).parents('nav.head-menu > ul').length) {
                    subMenuActive = false;
                    submenuContainer.removeClass('active bounds-transition');
                    menuItems.removeClass('active');
                    indicator.removeClass('left-transition');
                }
            });
            menuItems.each(function() {
                let item = $( this );
                let subMenuId = item.attr('data-submenu-id');
                item.on('mouseenter', function () {
                    let submenus = $('nav.head-menu > div.sub-menu-container > div');
                    submenus.css('display', 'none');
                    menuItems.removeClass('active');
                    item.addClass('active');
                    let targetSubMenu = $('nav.head-menu > div.sub-menu-container > div#'+subMenuId);
                    targetSubMenu.css('display', 'block');
                    submenuContainer.css('overflow', 'visible');
                    let left = item.position().left + (item.outerWidth() - targetSubMenu.outerWidth()) / 2;
                    submenuContainer.css('left', left + 'px');
                    if (!subMenuActive) {
                        submenuContainer.addClass('active');
                        subMenuActive = true;
                    } else {
                        submenuContainer.addClass('bounds-transition');
                        indicator.addClass('left-transition');
                    }
                    indicator.css('left', item.position().left);
                    indicator.css('width', item.outerWidth());
                    submenuContainer.css('height', targetSubMenu.outerHeight() + 'px');
                    submenuContainer.css('width', targetSubMenu.outerWidth() + 'px');
                    submenuContainer.css('overflow', 'hidden');
                });
            });

            let isMobile = $('button.burger').css('display') === 'block';
            if (isMobile) {
                initMobileSubmenu();
            }

            $(window).resize(function(){
                let newIsMobile = $('button.burger').css('display') === 'block';
                if (isMobile !== newIsMobile) {
                    isMobile = newIsMobile;
                    if (isMobile) {
                        initMobileSubmenu();
                    } else {
                        restoreDesktopSubmenu();
                    }
                }
            });

            // Products selector

            
            let productsSelector = $('.products-selector');
            $(window).click(function(e) {
                if (productsSelector[0].contains(e.target)) {
                    if (productsSelector.hasClass('active')) {
                        productsSelector.removeClass('active');
                    } else {
                        productsSelector.addClass('active');
                    }
                } else {
                    productsSelector.removeClass('active');
                }
            });
            

            // Rogue line numbers fix (don't show line numbers for 1 row)
            $( document ).ready(function() {
                $('.rouge-gutter.gl').each(function() {
                    var lineNumbers = $(this).children('.lineno');
                    if (lineNumbers.text() === '1\n') {
                        $(this).css('display', 'none');
                    }
                });
            });
        });

        function initMobileSubmenu() {

            var header = $('header');
            if (header.hasClass('opened-burger')) {
                var body = $('body');
                body.css('overflow', 'hidden');
            }

            let targetSubMenus = $('nav.head-menu > div.sub-menu-container > div');
            targetSubMenus.css('display', 'block');
            let submenuContainer = $('nav.head-menu > div.sub-menu-container');
            submenuContainer.removeClass('active');
            submenuContainer.css('display', 'none');

            targetSubMenus.each(function() {
                let subMenu = $( this );
                let subMenuId = subMenu.attr('id');
                let parent = $('nav.head-menu > ul > li.'+subMenuId);
                parent.append(subMenu);
            });
        }

        function restoreDesktopSubmenu() {
            var body = $('body');
            body.css('overflow', '');
            let targetSubMenus = $('nav.head-menu > ul > li > div');
            let submenuContainer = $('nav.head-menu > div.sub-menu-container');
            submenuContainer.removeClass('active');
            submenuContainer.css('display', 'block');
            let menuItems = $('nav.head-menu > ul > li');
            menuItems.removeClass('active');
            targetSubMenus.each(function() {
                let subMenu = $( this );
                submenuContainer.append(subMenu);
            });
        }

        function listburg(subMenuId) {
            let isMobile = $('button.burger').css('display') === 'block';
            if (isMobile) {
                let targetSubMenu = $('nav.head-menu > ul > li > div.centered-sub#'+subMenuId+' > ul.sub-menu');
                let isOpen = targetSubMenu.hasClass('open-sub');
                let subMenus = $('nav.head-menu > ul > li > div.centered-sub > ul.sub-menu');
                subMenus.removeClass('open-sub');
                if (!isOpen) {
                    targetSubMenu.addClass('open-sub');
                }
            }
        }
    </script>
</head>
<body>

<div class="products-selector">
    <img src="/images/thingsboard-cm-icon.svg"/>
    <div class="product-info">
        <div class="product-title">
            Community Edition
        </div>
        <div class="product-description">
            ThingsBoard Documentation
        </div>
    </div>
    <div class="products">
        
        

    
        
        


        
    


        <a href="/docs/paas/" class="product">Cloud</a>
        
        

    
        
        


        
    


        <a href="/docs/pe/" class="product">Professional Edition</a>
        
        

    
        
        


        
            
        
    


        <a href="/docs/samples/arduino/sim808-htu21d/" class="product active">Community Edition</a>
        
        

    


        <a href="/docs/edge/" class="product">Edge</a>
        
        

    


        <a href="/docs/iot-gateway/" class="product">IoT Gateway</a>
        
        

    


        <a href="/products/license-server/" class="product">License Server</a>
        
        

    


        <a href="/docs/trendz/" class="product">Trendz Analytics</a>
        
    </div>
</div>

<header>
    <div class="logo-burger">
        
        <button onclick="Burger()" class="burger"></button>
        <div id="githubButtonContainer">
            <a class="github-button" href="https://github.com/thingsboard/thingsboard" data-show-count="true"
               aria-label="Star thingsboard/thingsboard on GitHub">Star</a>
        </div>
    </div>
    <nav class="head-menu">
        <ul>
            <li class="nav-products" data-submenu-id="nav-products">
                <a onclick="listburg('nav-products')">Products</a>
            </li>
            <li class="nav-services" data-submenu-id="nav-services">
                <a onclick="listburg('nav-services')">Services</a>
            </li>
            
            <li class="nav-cases" data-submenu-id="nav-cases">
                <a onclick="listburg('nav-cases')">Use Cases</a>
            </li>
            <li class="nav-customers" data-submenu-id="nav-customers">
                <a onclick="listburg('nav-customers')">Customers</a>
            </li>
            <li class="nav-company" data-submenu-id="nav-company">
                <a onclick="listburg('nav-company')">Company</a>
            </li>
            <div class="indicator"><div class="head-arrow"></div><div class="line"></div><div class="sub-background"></div></div>
        </ul>
        <div class="sub-menu-container">
            <div id="nav-products" class="centered-sub">
                <ul class="sub-menu products">
                    <div class="sub-groups">
                        <div class="group">
                            <p class="group-name">IoT platforms</p>
                            <a class="cloud-lnk" href="/products/paas/">
                                <img src="/images/thingsboard-c-icon.svg">
                                <div class="sub-text">
                                    <h1>Cloud</h1>
                                    <p>Platform as a service</p>
                                </div>
                            </a>
                            <a class="prof-lnk" href="/products/thingsboard-pe/">
                                <img src="/images/thingsboard-p-icon.svg">
                                <div class="sub-text">
                                    <h1>Professional Edition</h1>
                                    <p>Advanced IoT platform</p>
                                </div>
                            </a>
                            <a class="com-lnk" href="/">
                                <img src="/images/thingsboard-cm-icon.svg">
                                <div class="sub-text">
                                    <h1>Community Edition</h1>
                                    <p>Open source platform</p>
                                </div>
                            </a>
                        </div>
                        <div class="group">
                            <p class="group-name">Product ecosystem</p>
                            <a class="edge-lnk" href="/products/thingsboard-edge/">
                                <img src="/images/thingsboard-e-icon.svg">
                                <div class="sub-text">
                                    <h1>Edge</h1>
                                    <p>Edge computing</p>
                                </div>
                            </a>
                            <a class="gateway-lnk" href="/docs/iot-gateway/what-is-iot-gateway/">
                                <img src="/images/gateway-icon.svg">
                                <div class="sub-text">
                                    <h1>IoT Gateway</h1>
                                    <p>Connect legacy protocols</p>
                                </div>
                            </a>
                            <a class="license-lnk" href="/products/license-server/">
                                <img src="/images/license-icon.svg">
                                <div class="sub-text">
                                    <h1>License Server</h1>
                                    <p>Billing solution</p>
                                </div>
                            </a>
                            <a class="trendz-lnk" href="/products/trendz/">
                                <img src="/images/trendz-icon.svg">
                                <div class="sub-text">
                                    <h1>Trendz Analytics</h1>
                                    <p>Data analytics and Prediction</p>
                                </div>
                            </a>
                        </div>
                    </div>
                </ul>
            </div>
            <div id="nav-services" class="centered-sub">
                <ul class="sub-menu services">
                    <a href="/docs/services/support/">
                        <img src="/images/support-icon.svg">
                        <div class="sub-text">
                            <h1>Support</h1>
                            <p>Support packages</p>
                        </div>
                    </a>
                    <a href="/docs/services/trainings/">
                        <img src="/images/train-icon.svg">
                        <div class="sub-text">
                            <h1>Trainings</h1>
                            <p>ThingsBoard education courses</p>
                        </div>
                    </a>
                    <a href="/docs/services/consulting/">
                        <img src="/images/prof-icon.svg">
                        <div class="sub-text">
                            <h1>Professional services</h1>
                            <p>Development of solutions by the ThingsBoard team</p>
                        </div>
                    </a>
                </ul>
            </div>
            
            <div id="nav-cases" class="centered-sub">
                <ul class="sub-menu cases">
                    <a href="/smart-metering/">
                        <img src="/images/case-met-icon.svg">
                        <div class="sub-text">
                            <h1>Smart Metering</h1>
                            <p>Collection, analysis and visualization of data from meters</p>
                        </div>
                    </a>
                    <a href="/smart-energy/">
                        <img src="/images/case-eng-icon.svg">
                        <div class="sub-text">
                            <h1>Smart Energy</h1>
                            <p>Energy monitoring and efficiency analysis</p>
                        </div>
                    </a>
                    <a href="/smart-farming/">
                        <img src="/images/case-fam-icon.svg">
                        <div class="sub-text">
                            <h1>Smart Farming</h1>
                            <p>Monitoring of indoor conditions and plant growth characteristics</p>
                        </div>
                    </a>
                    <a href="/fleet-tracking/">
                        <img src="/images/case-trk-icon.svg">
                        <div class="sub-text">
                            <h1>Fleet Tracking</h1>
                            <p>Fleet tracking and fleet management</p>
                        </div>
                    </a>
                </ul>
            </div>
            <div id="nav-customers" class="centered-sub">
                <ul class="sub-menu customers">
                    <div class="sub-groups">
                        <div class="group">
                            <a class="small-link" href="/industries/smart-energy/">
                                <img src="/images/se-s-icon.svg">
                                <div class="sub-text">
                                    <h1>Smart Energy</h1>
                                </div>
                            </a>
                            <a class="small-link" href="/industries/agriculture/">
                                <img src="/images/agr-s-icon.svg">
                                <div class="sub-text">
                                    <h1>Agriculture</h1>
                                </div>
                            </a>
                            <a class="small-link" href="/industries/smart-buildings/">
                                <img src="/images/sb-s-icon.svg">
                                <div class="sub-text">
                                    <h1>Smart Buildings</h1>
                                </div>
                            </a>
                        </div>
                        <div class="group">
                            <a class="small-link" href="/industries/smart-city/">
                                <img src="/images/sc-s-icon.svg">
                                <div class="sub-text">
                                    <h1>Smart City</h1>
                                </div>
                            </a>
                            <a class="small-link" href="/industries/telecom/">
                                <img src="/images/tel-s-icon.svg">
                                <div class="sub-text">
                                    <h1>Telecom</h1>
                                </div>
                            </a>
                            <a class="small-link" href="/industries/industry40/">
                                <img src="/images/in-s-icon.svg">
                                <div class="sub-text">
                                    <h1>Industry 4.0</h1>
                                </div>
                            </a>
                        </div>
                    </div>
                </ul>
            </div>
            <div id="nav-company" class="centered-sub">
                <ul class="sub-menu about">
                    <div class="sub-groups">
                        <div class="group">
                            <a class="small-link" href="/company/">
                                <img src="/images/about-s-icon.svg">
                                <div class="sub-text">
                                    <h1>Our Company</h1>
                                </div>
                            </a>
                            <a class="small-link" href="/docs/contact-us/">
                                <img src="/images/contact-s-icon.svg">
                                <div class="sub-text">
                                    <h1>Contact Us</h1>
                                </div>
                            </a>
                            <a class="small-link" href="/careers/">
                                <img src="/images/careers-s-icon.svg">
                                <div class="sub-text">
                                    <h1>Careers</h1>
                                </div>
                            </a>
                        </div>
                        <div class="group">
                            <a class="small-link" href="/mediakit/">
                                <img src="/images/media-s-icon.svg">
                                <div class="sub-text">
                                    <h1>Media Kit</h1>
                                </div>
                            </a>
                            <a class="small-link" href="https://blog.thingsboard.io/">
                                <img src="/images/blog-s-icon.svg">
                                <div class="sub-text">
                                    <h1>Blog</h1>
                                </div>
                            </a>
                        </div>
                    </div>
                    <div class="bottom-group">
                        <a class="small-link" href="/partners/hardware/">
                            <img src="/images/hard-s-icon.svg">
                            <div class="sub-text">
                                <h1>Hardware partners</h1>
                            </div>
                        </a>
                        <a class="small-link" href="/partners/distributors/">
                            <img src="/images/dis-s-icon.svg">
                            <div class="sub-text">
                                <h1>Distributors</h1>
                            </div>
                        </a>
                    </div>
                </ul>
            </div>
        </div>
    </nav>
    <div>
        <a href="/installations/" class="n-button try">Try it now</a>
        <a href="/pricing/" class="n-button price">Pricing</a>
    </div>
</header>


<div id="searchBox">
    <input type="text" id="search" placeholder="Search" onkeydown="if (event.keyCode==13) window.location.replace('/docs/search/?q=' + this.value)">
    <button class="searchButton"></button>
</div>

<!--  HERO  -->
<section id="hero">
  <div id="hero-content">
    <div id="vendorStrip">
      <div id="docsList">
          <ul>
            
              
              
              
              <li>
                  <a href="/docs/getting-started-guides/helloworld/" >Getting Started</a>
                  
              </li>
            
              
              
              
              <li>
                  <a href="/docs/" >Documentation</a>
                  
              </li>
            
              
              
              
              <li>
                  <a href="/docs/guides/" class="YAH">Guides</a>
                  
                     <div class="indicator"><div class="head-arrow"></div><div class="line"></div><div class="sub-background"></div></div>
                  
              </li>
            
              
              
              
              <li>
                  <a href="/docs/user-guide/install/installation-options/" >Installation</a>
                  
              </li>
            
              
              
              
              <li>
                  <a href="/docs/reference/" >Architecture</a>
                  
              </li>
            
              
              
              
              <li>
                  <a href="/docs/api/" >API</a>
                  
              </li>
            
              
              
              
              <li>
                  <a href="/docs/faq/" >FAQ</a>
                  
              </li>
            
          </ul>
          <div id="docsBreadcrumbs">
              
                  
                  
                  
                  
                      
                  
                      
                         
                         
                         
    
        
        
        
    

    

    

    

    

    

    

    


        
            
        
    

    
        
        
        
    

    

    

    

    


        
            
        
    

    
        
        
        
    


        
            
        
    


                         
                            
                         
                      
                  
                      
                  
                      
                  
                      
                  
                      
                  
                      
                         
                         
                         
    
        
        
        
    

    

    
        
        
        

        
            

                         
                            
                  
                    <span class="item">Guides</span>
                    
                        <span class="divider">></span>
                    
                  
                    <span class="item">Hardware samples</span>
                    
                        <span class="divider">></span>
                    
                  
                    <span class="item">Arduino</span>
                    
                        <span class="divider">></span>
                    
                  
                    <span class="item">Humidity and temperature upload over HTTP using Arduino UNO, SIM808 Shield and HTU21D sensor</span>
                    
                  
              
          </div>
      </div>
    </div>
  </div>
</section>
<div id="docsNav">
    <div class="docItems">
        
            
            
                <a class="toc" href="/docs/getting-started-guides/helloworld/" >Getting Started</a>
            
        
            
            
                <a class="toc" href="/docs/" >Documentation</a>
            
        
            
            
                <div class="pi-accordion">
                    


<a class="item" data-title="Guides" href="/docs/guides/"></a>


<div class="item" data-title="Tutorials">
  <div class="container">


<div class="item" data-title="Basics">
  <div class="container">


<a class="item" data-title="Validate incoming telemetry" href="/docs/user-guide/rule-engine-2-0/tutorials/validate-incoming-telemetry/"></a>


<a class="item" data-title="Transform incoming telemetry" href="/docs/user-guide/rule-engine-2-0/tutorials/transform-incoming-telemetry/"></a>


<a class="item" data-title="Transform telemetry using previous record" href="/docs/user-guide/rule-engine-2-0/tutorials/transform-telemetry-using-previous-record/"></a>


<a class="item" data-title="Create Alarm when the Device is offline" href="/docs/user-guide/rule-engine-2-0/tutorials/create-inactivity-alarm/"></a>


<a class="item" data-title="Create & Clear Alarms" href="/docs/user-guide/rule-engine-2-0/tutorials/create-clear-alarms/"></a>


<a class="item" data-title="Send Email v2" href="/docs/user-guide/rule-engine-2-0/tutorials/send-email/"></a>


<a class="item" data-title="Using queues for synchronization" href="/docs/user-guide/rule-engine-2-5/tutorials/queues-for-synchronization/"></a>


<a class="item" data-title="Using queues for message reprocessing" href="/docs/user-guide/rule-engine-2-5/tutorials/queues-for-message-reprocessing/"></a>
  </div>
</div>


<div class="item" data-title="Advanced">
  <div class="container">


<a class="item" data-title="Check Relation between Entities" href="/docs/user-guide/rule-engine-2-0/tutorials/check-relation-tutorial/"></a>


<a class="item" data-title="RPC Reply With data from Related Device" href="/docs/user-guide/rule-engine-2-0/tutorials/rpc-reply-tutorial/"></a>


<a class="item" data-title="RPC Request to Related Device" href="/docs/user-guide/rule-engine-2-0/tutorials/rpc-request-tutorial/"></a>


<a class="item" data-title="Create & Clear Alarms" href="/docs/user-guide/rule-engine-2-0/tutorials/create-clear-alarms/"></a>


<a class="item" data-title="Send Email To Customer" href="/docs/user-guide/rule-engine-2-0/tutorials/send-email/"></a>
  </div>
</div>


<div class="item" data-title="PE">
  <div class="container">


<a class="item" data-title="Add & remove devices from groups dynamically" href="/docs/user-guide/rule-engine-2-0/tutorials/add-devices-to-group/"></a>
  </div>
</div>
  </div>
</div>


<a class="item" data-title="Video Tutorials" href="/docs/iot-video-tutorials/"></a>


<a class="item" data-title="Samples" href="/docs/samples/"></a>


<a class="item" data-title="Live Demo Server" href="/docs/user-guide/live-demo/"></a>


<a class="item" data-title="Local Demo Account" href="/docs/samples/demo-account/"></a>


<div class="item" data-title="Hardware samples">
  <div class="container">


<div class="item" data-title="Arduino">
  <div class="container">


<a class="item" data-title="Arduino overview" href="/docs/samples/arduino/"></a>


<a class="item" data-title="Temperature upload over MQTT using Arduino UNO, ESP8266 and DHT22 sensor" href="/docs/samples/arduino/temperature/"></a>


<a class="item" data-title="Humidity and temperature upload over HTTP using Arduino UNO, SIM808 Shield and HTU21D sensor" href="/docs/samples/arduino/sim808-htu21d/"></a>
  </div>
</div>


<div class="item" data-title="ESP8266">
  <div class="container">


<a class="item" data-title="ESP8266 overview" href="/docs/samples/esp8266/"></a>


<a class="item" data-title="Temperature upload over MQTT using ESP8266 and DHT22 sensor" href="/docs/samples/esp8266/temperature/"></a>


<a class="item" data-title="ESP8266 GPIO control over MQTT using ThingsBoard" href="/docs/samples/esp8266/gpio/"></a>
  </div>
</div>


<div class="item" data-title="NodeMCU">
  <div class="container">


<a class="item" data-title="NodeMCU overview" href="/docs/samples/nodemcu/"></a>


<a class="item" data-title="Temperature upload over MQTT using NodeMCU and DHT11 sensor" href="/docs/samples/nodemcu/temperature/"></a>
  </div>
</div>


<div class="item" data-title="Raspberry Pi">
  <div class="container">


<a class="item" data-title="Raspberry Pi overview" href="/docs/samples/raspberry/"></a>


<a class="item" data-title="Raspberry Pi GPIO control over MQTT using ThingsBoard" href="/docs/samples/raspberry/gpio/"></a>


<a class="item" data-title="Raspberry Pi GPIO control using Android Things and ThingsBoard" href="/docs/samples/raspberry/gpio-android-things/"></a>


<a class="item" data-title="Temperature upload over MQTT using Raspberry Pi and DHT22 sensor" href="/docs/samples/raspberry/temperature/"></a>
  </div>
</div>


<div class="item" data-title="LinkIt ONE">
  <div class="container">


<a class="item" data-title="LinkIt ONE overview" href="/docs/samples/linkit-one/"></a>


<a class="item" data-title="GPS data upload and visualization using LinkIt ONE and ThingsBoard" href="/docs/samples/linkit-one/gps/"></a>
  </div>
</div>
  </div>
</div>
                </div>
            
        
            
            
                <a class="toc" href="/docs/user-guide/install/installation-options/" >Installation</a>
            
        
            
            
                <a class="toc" href="/docs/reference/" >Architecture</a>
            
        
            
            
                <a class="toc" href="/docs/api/" >API</a>
            
        
            
            
                <a class="toc" href="/docs/faq/" >FAQ</a>
            
        
    </div>
</div>








<section id="encyclopedia">
  
  <div id="docsContent" class="noToc hasTocContent">
      <div id="table-of-contents">
          
              <h4>On this page</h4>
          
      </div>
      <div id="top-spacer"></div>
      <h1>Humidity and temperature upload over HTTP using Arduino UNO, SIM808 Shield and HTU21D sensor</h1>
      <div id="content">
          <ul id="markdown-toc">
  <li><a href="#introduction" id="markdown-toc-introduction">Introduction</a></li>
  <li><a href="#prerequisites" id="markdown-toc-prerequisites">Prerequisites</a></li>
  <li><a href="#list-of-hardware" id="markdown-toc-list-of-hardware">List of hardware</a></li>
  <li><a href="#wiring" id="markdown-toc-wiring">Wiring</a>    <ul>
      <li><a href="#sim808-shield-connection" id="markdown-toc-sim808-shield-connection">SIM808 shield connection</a></li>
      <li><a href="#htu21d-connection" id="markdown-toc-htu21d-connection">HTU21D connection</a></li>
    </ul>
  </li>
  <li><a href="#complete-wiring" id="markdown-toc-complete-wiring">Complete wiring</a>    <ul>
      <li><a href="#device-provisioning" id="markdown-toc-device-provisioning">Device provisioning</a></li>
      <li><a href="#provision-your-dashboard" id="markdown-toc-provision-your-dashboard">Provision your dashboard</a></li>
      <li><a href="#creating-arduino-firmware" id="markdown-toc-creating-arduino-firmware">Creating Arduino firmware</a>        <ul>
          <li><a href="#step-1-arduino-uno-and-arduino-ide-setup" id="markdown-toc-step-1-arduino-uno-and-arduino-ide-setup">Step 1. Arduino UNO and Arduino IDE setup.</a></li>
          <li><a href="#step-2-install-arduino-thingsboard-sdk-and-dependencies" id="markdown-toc-step-2-install-arduino-thingsboard-sdk-and-dependencies">Step 2. Install Arduino ThingsBoard SDK and dependencies</a></li>
          <li><a href="#step-3-install-htu21d-library" id="markdown-toc-step-3-install-htu21d-library">Step 3. Install HTU21D library</a></li>
          <li><a href="#step-4-install-sim808-driver" id="markdown-toc-step-4-install-sim808-driver">Step 4. Install SIM808 driver</a></li>
          <li><a href="#step-5-prepare-and-upload-a-sketch" id="markdown-toc-step-5-prepare-and-upload-a-sketch">Step 5. Prepare and upload a sketch.</a></li>
        </ul>
      </li>
      <li><a href="#troubleshooting" id="markdown-toc-troubleshooting">Troubleshooting</a></li>
      <li><a href="#data-visualization" id="markdown-toc-data-visualization">Data visualization</a></li>
    </ul>
  </li>
</ul>

<h2 id="introduction">Introduction</h2>

<p>ThingsBoard is an open-source server-side platform that allows you to monitor and control IoT devices.
It is free for both personal and commercial usage and you can deploy it anywhere. 
If this is your first experience with the platform we recommend to review 
<a href="/docs/getting-started-guides/what-is-thingsboard/">what-is-thingsboard</a> page and <a href="/docs/getting-started-guides/helloworld/">getting-started</a> guide.</p>

<p>This sample application performs collection of humidity and temperature values produced by <a href="https://www.sparkfun.com/products/13763">HTU21D sensor</a> and further visualization on the real-time web dashboard.
Collected data is pushed via HTTP to ThingsBoard server for storage and visualization.
The purpose of this application is to demonstrate ThingsBoard <a href="/docs/user-guide/telemetry/">data collection API</a> and <a href="/docs/user-guide/visualization/">visualization capabilities</a>.</p>

<p>The HTU21D sensor is connected to <a href="https://en.wikipedia.org/wiki/Arduino">Arduino UNO</a>.
Arduino UNO connects to the Internet using <a href="https://www.elecrow.com/wiki/index.php?title=SIM808_GPRS/GSM%2BGPS_Shield_v1.1">SIM808 GSM shield</a>.
Arduino UNO pushes data to ThingsBoard server via HTTP protocol by using <a href="https://github.com/thingsboard/ThingsBoard-Arduino-MQTT-SDK">Arduino ThingsBoard SDK</a>.
Data is visualized using built-in customizable dashboard.
The application that is running on Arduino UNO is written using Arduino SDK which is quite simple and easy to understand.</p>

<p>Once you complete this sample/tutorial, you will see your sensor data on the following dashboard.</p>

<p><img src="/images/samples/arduino/sim808-htu21d/dashboard.png" alt="image" /></p>

<h2 id="prerequisites">Prerequisites</h2>

<p>You will need to have ThingsBoard server up and running. 
The easiest way is to use <a href="https://demo.thingsboard.io/signup">Live Demo</a> server.</p>

<p>The alternative option is to install ThingsBoard using <a href="/docs/user-guide/install/installation-options/">Installation Guide</a>. 
<strong>Windows</strong> users should follow this <a href="/docs/user-guide/install/docker-windows/">guide</a>. <strong>Linux</strong> users that have docker installed should execute the following commands:</p>

<div class="language-plaintext copy-code highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre></td><td class="rouge-code"><pre>mkdir -p ~/.mytb-data &amp;&amp; sudo chown -R 799:799 ~/.mytb-data
mkdir -p ~/.mytb-logs &amp;&amp; sudo chown -R 799:799 ~/.mytb-logs
docker run -it -p 9090:9090 -p 7070:7070 -p 1883:1883 -p 5683-5688:5683-5688/udp -v ~/.mytb-data:/data \
-v ~/.mytb-logs:/var/log/thingsboard --name mytb --restart always thingsboard/tb-postgres

</pre></td></tr></tbody></table></code></pre></div></div>

<p>These commands install ThingsBoard and load demo data and accounts.</p>

<p>ThingsBoard UI will be available using the URL: <a href="http://localhost:8080">http://localhost:8080</a>.
You may use username <strong>tenant@thingsboard.org</strong> and password <strong>tenant</strong>. 
More info about demo accounts is available <a href="/docs/samples/demo-account/">here</a>.</p>

<h2 id="list-of-hardware">List of hardware</h2>

<ul>
  <li>
    <p><a href="https://store.arduino.cc/product/GBX00066">Arduino UNO</a></p>

    <p><img src="/images/samples/arduino/sim808-htu21d/arduino-uno-pinout.png" alt="image" /></p>
  </li>
  <li>
    <p><a href="https://www.sparkfun.com/products/13763">HTU21D sensor</a></p>

    <p><img src="/images/samples/arduino/sim808-htu21d/htu21d.jpg" alt="image" /></p>
  </li>
  <li>
    <p><a href="https://www.elecrow.com/wiki/index.php?title=SIM808_GPRS/GSM%2BGPS_Shield_v1.1">SIM808 GSM shield</a></p>

    <p><img src="/images/samples/arduino/sim808-htu21d/sim808_shield.jpg" alt="image" /></p>
  </li>
</ul>

<h2 id="wiring">Wiring</h2>

<h3 id="sim808-shield-connection">SIM808 shield connection</h3>

<p>Simply connect SIM808 shield on top of your Arduino.</p>

<h3 id="htu21d-connection">HTU21D connection</h3>

<p>Connect HTU21D in following manner:</p>

<ul>
  <li>VCC - Arduino 3.3V</li>
  <li>GND - Arduino GND</li>
  <li>SDA - Arduino A5</li>
  <li>SCL - Arduino A4</li>
</ul>

<h1 id="complete-wiring">Complete wiring</h1>

<p>Double-check that your wiring follows schematics below:</p>

<p><img src="/images/samples/arduino/sim808-htu21d/arduino-uno-sim808-htu21d.png" alt="image" /></p>

<p>The complete setup will look like that:</p>

<p><img src="/images/samples/arduino/sim808-htu21d/arduino-uno-sim808-htu21d-photo.png" alt="image" /></p>

<h2 id="device-provisioning">Device provisioning</h2>

<p>This step contains instructions that are necessary to connect your device to ThingsBoard.</p>

<p>Open ThingsBoard Web UI (http://localhost:8080) in browser and login as tenant administrator.
If you loaded the demo data during TB installation, the next credentials can be used:</p>

<ul>
  <li>login: tenant@thingsboard.org</li>
  <li>password: tenant</li>
</ul>

<p>Go to Devices section. Click + button and create a device with the name Arduino UNO Demo Device. Set Device type to default.</p>

<p><img src="/images/samples/arduino/sim808-htu21d/device.png" alt="image" /></p>

<p>Once device created, open its details and click Manage credentials.</p>

<p>Copy auto-generated access token from the Access token field. Please save this device token. It will be referred to later as <strong>$ACCESS_TOKEN</strong>.</p>

<p><img src="/images/samples/arduino/sim808-htu21d/credentials.png" alt="image" /></p>

<h2 id="provision-your-dashboard">Provision your dashboard</h2>

<p>Download the dashboard file using this <a href="/docs/samples/arduino/resources/arduino_uno_with_sim808_shield_and_htu21d_sensor_dashboard.json"><strong>link</strong></a>.
Use import/export <a href="/docs/user-guide/ui/dashboards/#dashboard-importexport"><strong>instructions</strong></a> to import the dashboard to your ThingsBoard instance.</p>

<h2 id="creating-arduino-firmware">Creating Arduino firmware</h2>

<p>If you already familiar with basics of Arduino UNO programming using Arduino IDE you can skip the following step and proceed with step 2.</p>

<h3 id="step-1-arduino-uno-and-arduino-ide-setup">Step 1. Arduino UNO and Arduino IDE setup.</h3>
<p>In order to start programming the Arduino UNO device, you will need Arduino IDE and all related software installed.</p>

<p>Download and install <a href="https://www.arduino.cc/en/Main/Software">Arduino IDE</a>.</p>

<p>To learn how to connect your Uno board to the computer and upload your first sketch please follow this <a href="https://www.arduino.cc/en/Guide/ArduinoUno">guide</a>.</p>

<h3 id="step-2-install-arduino-thingsboard-sdk-and-dependencies">Step 2. Install Arduino ThingsBoard SDK and dependencies</h3>

<p>To simplify application development, install the ThingsBoard Arduino SDK and its dependencies from standard Arduino library repository:</p>

<ol>
  <li>
    <p>Proceed to <strong>Sketch -&gt; Include Library</strong> submenu. Select <strong>Manage Libraries</strong>.</p>
  </li>
  <li>
    <p>Find and install <strong>ThingsBoard Arduino SDK</strong> and <strong>PubSubClient by Nick OLeary</strong> libraries.</p>

    <p><img src="/images/samples/arduino/sim808-htu21d/install-tb-arduino.png" alt="image" /></p>
  </li>
  <li>
    <p>Install <strong>ArduinoJSON</strong> library <strong>v6.9.1</strong> or higher. <span style="color:red">Avoid installing beta releases of the ArduinoJson library</span>.</p>

    <p><img src="/images/samples/arduino/sim808-htu21d/do-not-use-beta-version-arduinojson.png" alt="image" /></p>
  </li>
  <li>
    <p>Install <strong>ArduinoHttpClient</strong> library.</p>

    <p><img src="/images/samples/arduino/sim808-htu21d/install-http-arduino.png" alt="image" /></p>
  </li>
</ol>

<p>From now on, you can use ThingsBoard SDK right from Arduino IDE.</p>

<h3 id="step-3-install-htu21d-library">Step 3. Install HTU21D library</h3>

<p>Use SparkFun HTU21D library, as shown in the screenshot below.</p>

<p><img src="/images/samples/arduino/sim808-htu21d/install-htu21d.png" alt="image" /></p>

<h3 id="step-4-install-sim808-driver">Step 4. Install SIM808 driver</h3>

<p>The SIM808 is support by the TinyGSM driver, which can be installed as described below.</p>

<p><img src="/images/samples/arduino/sim808-htu21d/install-tinygsm.png" alt="image" /></p>

<h3 id="step-5-prepare-and-upload-a-sketch">Step 5. Prepare and upload a sketch.</h3>

<p>Download and open <strong>arduino_htu21d_sim808_http.ino</strong> sketch.</p>

<p><strong>Note</strong> You need to edit following constants and variables in the sketch:</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">apn</code> - GPRS access point name. Consult your cellular network provider to get more information.</li>
  <li><code class="language-plaintext highlighter-rouge">user</code> - GPRS access point user. Consult your cellular network provider to get more information.</li>
  <li><code class="language-plaintext highlighter-rouge">pass</code> - GPRS access point password. Consult your cellular network provider to get more information.</li>
  <li><code class="language-plaintext highlighter-rouge">TOKEN</code> - the <strong>$ACCESS_TOKEN</strong> from ThingsBoard configuration step.</li>
  <li><code class="language-plaintext highlighter-rouge">THINGSBOARD_SERVER</code> - ThingsBoard HOST/IP address that is accessible from within your wifi network. Specify demo.thingsboard.io if you are using <a href="https://demo.thingsboard.io/">live demo</a> server.</li>
  <li><code class="language-plaintext highlighter-rouge">THINGSBOARD_PORT</code> - HTTP port to connect to. Change it if necessary.</li>
</ul>

<script>
  jqueryUiDefer(initTabs);
  function initTabs() {
    $(function(){
        $("#arduino-sketch").tabs();
    });
  }
</script>

<div id="arduino-sketch" class="docs-tabs">
  <div class="ui-tabs-scrollbox">
    <ul>
      <li><a href="#arduino_uno_sim808_htu21d_http">arduino_uno_sim808_htu21d_http.ino</a></li>
    </ul>
  </div>
  <div id="arduino_uno_sim808_htu21d_http">
    <table class="includecode">
<tr><td>
<div class="language-c copy-code highlighter-rouge" id="resources/arduino_uno_sim808_htu21d_http.ino"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
</pre></td><td class="rouge-code"><pre><span class="c1">// This sketch demonstrates connecting and sending telemetry</span>
<span class="c1">// using ThingsBoard SDK and GSM modem, such as SIM808</span>
<span class="c1">//</span>
<span class="c1">// Hardware:</span>
<span class="c1">//  - Arduino Uno</span>
<span class="c1">//  - SIM808 Arduino shield connected to Arduino Uno</span>

<span class="c1">// Select your modem:</span>
<span class="c1">//#define TINY_GSM_MODEM_SIM800</span>
 <span class="cp">#define TINY_GSM_MODEM_SIM808
</span><span class="c1">// #define TINY_GSM_MODEM_SIM900</span>
<span class="c1">// #define TINY_GSM_MODEM_UBLOX</span>
<span class="c1">// #define TINY_GSM_MODEM_BG96</span>
<span class="c1">// #define TINY_GSM_MODEM_A6</span>
<span class="c1">// #define TINY_GSM_MODEM_A7</span>
<span class="c1">// #define TINY_GSM_MODEM_M590</span>
<span class="c1">// #define TINY_GSM_MODEM_ESP8266</span>

<span class="cp">#include &lt;TinyGsmClient.h&gt;
#include &lt;SoftwareSerial.h&gt;
#include &lt;SparkFunHTU21D.h&gt;
#include "ThingsBoard.h"
</span>
<span class="c1">// Your GPRS credentials</span>
<span class="c1">// Leave empty, if missing user or pass</span>
<span class="k">const</span> <span class="kt">char</span> <span class="n">apn</span><span class="p">[]</span>  <span class="o">=</span> <span class="s">"internet"</span><span class="p">;</span>
<span class="k">const</span> <span class="kt">char</span> <span class="n">user</span><span class="p">[]</span> <span class="o">=</span> <span class="s">""</span><span class="p">;</span>
<span class="k">const</span> <span class="kt">char</span> <span class="n">pass</span><span class="p">[]</span> <span class="o">=</span> <span class="s">""</span><span class="p">;</span>

<span class="c1">// See https://thingsboard.io/docs/getting-started-guides/helloworld/</span>
<span class="c1">// to understand how to obtain an access token</span>
<span class="cp">#define TOKEN               "YOUR_ACCESS_TOKEN"
#define THINGSBOARD_SERVER  "demo.thingsboard.io"
#define THINGSBOARD_PORT    80
</span>
<span class="c1">// Baud rate for debug serial</span>
<span class="cp">#define SERIAL_DEBUG_BAUD   115200
</span>
<span class="c1">// Serial port for GSM shield</span>
<span class="n">SoftwareSerial</span> <span class="nf">serialGsm</span><span class="p">(</span><span class="mi">7</span><span class="p">,</span> <span class="mi">8</span><span class="p">);</span> <span class="c1">// RX, TX pins for communicating with modem</span>

<span class="c1">// Uncomment to see StreamDebugger output in serial monitor</span>
<span class="c1">//#define DUMP_AT_COMMANDS 1</span>

<span class="cp">#ifdef DUMP_AT_COMMANDS
</span>  <span class="cp">#include &lt;StreamDebugger.h&gt;
</span>  <span class="n">StreamDebugger</span> <span class="nf">debugger</span><span class="p">(</span><span class="n">serialGsm</span><span class="p">,</span> <span class="n">Serial</span><span class="p">);</span>
  <span class="n">TinyGsm</span> <span class="nf">modem</span><span class="p">(</span><span class="n">debugger</span><span class="p">);</span>
<span class="cp">#else
</span>  <span class="c1">// Initialize GSM modem</span>
  <span class="n">TinyGsm</span> <span class="nf">modem</span><span class="p">(</span><span class="n">serialGsm</span><span class="p">);</span>
<span class="cp">#endif
</span>
<span class="c1">// Initialize GSM client</span>
<span class="n">TinyGsmClient</span> <span class="nf">client</span><span class="p">(</span><span class="n">modem</span><span class="p">);</span>

<span class="c1">// Initialize ThingsBoard instance</span>
<span class="n">ThingsBoardHttp</span> <span class="nf">tb</span><span class="p">(</span><span class="n">client</span><span class="p">,</span> <span class="n">TOKEN</span><span class="p">,</span> <span class="n">THINGSBOARD_SERVER</span><span class="p">,</span> <span class="n">THINGSBOARD_PORT</span><span class="p">);</span>

<span class="c1">// Set to true, if modem is connected</span>
<span class="n">bool</span> <span class="n">modemConnected</span> <span class="o">=</span> <span class="nb">false</span><span class="p">;</span>

<span class="n">HTU21D</span> <span class="n">sensor</span><span class="p">;</span>

<span class="kt">void</span> <span class="nf">setup</span><span class="p">()</span> <span class="p">{</span>
  <span class="c1">// Set console baud rate</span>

  <span class="n">Serial</span><span class="p">.</span><span class="n">begin</span><span class="p">(</span><span class="n">SERIAL_DEBUG_BAUD</span><span class="p">);</span>
  <span class="n">Serial</span><span class="p">.</span><span class="n">println</span><span class="p">(</span><span class="s">"-------SETUP------"</span><span class="p">);</span>

  <span class="c1">// Set GSM module baud rate</span>
  <span class="n">serialGsm</span><span class="p">.</span><span class="n">begin</span><span class="p">(</span><span class="mi">115200</span><span class="p">);</span>
  <span class="n">delay</span><span class="p">(</span><span class="mi">3000</span><span class="p">);</span>

  <span class="c1">// Lower baud rate of the modem.</span>
  <span class="c1">// This is highly practical for Uno board, since SoftwareSerial there</span>
  <span class="c1">// works too slow to receive a modem data.</span>

  <span class="n">serialGsm</span><span class="p">.</span><span class="n">write</span><span class="p">(</span><span class="s">"AT+IPR=9600</span><span class="se">\r\n</span><span class="s">"</span><span class="p">);</span>
  <span class="n">serialGsm</span><span class="p">.</span><span class="n">end</span><span class="p">();</span>
  <span class="n">serialGsm</span><span class="p">.</span><span class="n">begin</span><span class="p">(</span><span class="mi">9600</span><span class="p">);</span>

  <span class="c1">// Restart takes quite some time</span>
  <span class="c1">// To skip it, call init() instead of restart()</span>
  <span class="n">Serial</span><span class="p">.</span><span class="n">println</span><span class="p">(</span><span class="n">F</span><span class="p">(</span><span class="s">"Initializing modem..."</span><span class="p">));</span>
  <span class="n">modem</span><span class="p">.</span><span class="n">restart</span><span class="p">();</span>

  <span class="n">String</span> <span class="n">modemInfo</span> <span class="o">=</span> <span class="n">modem</span><span class="p">.</span><span class="n">getModemInfo</span><span class="p">();</span>
  <span class="n">Serial</span><span class="p">.</span><span class="n">print</span><span class="p">(</span><span class="n">F</span><span class="p">(</span><span class="s">"Modem: "</span><span class="p">));</span>
  <span class="n">Serial</span><span class="p">.</span><span class="n">println</span><span class="p">(</span><span class="n">modemInfo</span><span class="p">);</span>

  <span class="n">sensor</span><span class="p">.</span><span class="n">begin</span><span class="p">();</span>

  <span class="c1">// Unlock your SIM card with a PIN</span>
  <span class="c1">//modem.simUnlock("1234");</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="nf">loop</span><span class="p">()</span> <span class="p">{</span>
  <span class="n">delay</span><span class="p">(</span><span class="mi">1000</span><span class="p">);</span>

  <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">modemConnected</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">Serial</span><span class="p">.</span><span class="n">print</span><span class="p">(</span><span class="n">F</span><span class="p">(</span><span class="s">"Waiting for network..."</span><span class="p">));</span>
    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">modem</span><span class="p">.</span><span class="n">waitForNetwork</span><span class="p">())</span> <span class="p">{</span>
        <span class="n">Serial</span><span class="p">.</span><span class="n">println</span><span class="p">(</span><span class="s">" fail"</span><span class="p">);</span>
        <span class="n">delay</span><span class="p">(</span><span class="mi">10000</span><span class="p">);</span>
        <span class="k">return</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="n">Serial</span><span class="p">.</span><span class="n">println</span><span class="p">(</span><span class="s">" OK"</span><span class="p">);</span>

    <span class="n">Serial</span><span class="p">.</span><span class="n">print</span><span class="p">(</span><span class="n">F</span><span class="p">(</span><span class="s">"Connecting to "</span><span class="p">));</span>
    <span class="n">Serial</span><span class="p">.</span><span class="n">print</span><span class="p">(</span><span class="n">apn</span><span class="p">);</span>
    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">modem</span><span class="p">.</span><span class="n">gprsConnect</span><span class="p">(</span><span class="n">apn</span><span class="p">,</span> <span class="n">user</span><span class="p">,</span> <span class="n">pass</span><span class="p">))</span> <span class="p">{</span>
        <span class="n">Serial</span><span class="p">.</span><span class="n">println</span><span class="p">(</span><span class="s">" fail"</span><span class="p">);</span>
        <span class="n">delay</span><span class="p">(</span><span class="mi">10000</span><span class="p">);</span>
        <span class="k">return</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="n">modemConnected</span> <span class="o">=</span> <span class="nb">true</span><span class="p">;</span>
    <span class="n">Serial</span><span class="p">.</span><span class="n">println</span><span class="p">(</span><span class="s">" OK"</span><span class="p">);</span>
  <span class="p">}</span>

  <span class="c1">// Uploads new telemetry to ThingsBoard using HTTP.</span>
  <span class="c1">// See https://thingsboard.io/docs/reference/http-api/#telemetry-upload-api</span>
  <span class="c1">// for more details</span>

  <span class="n">Serial</span><span class="p">.</span><span class="n">println</span><span class="p">(</span><span class="s">"Sending temperature data..."</span><span class="p">);</span>
  <span class="n">tb</span><span class="p">.</span><span class="n">sendTelemetryFloat</span><span class="p">(</span><span class="s">"temperature"</span><span class="p">,</span> <span class="n">sensor</span><span class="p">.</span><span class="n">readTemperature</span><span class="p">());</span>

  <span class="n">Serial</span><span class="p">.</span><span class="n">println</span><span class="p">(</span><span class="s">"Sending humidity data..."</span><span class="p">);</span>
  <span class="n">tb</span><span class="p">.</span><span class="n">sendTelemetryFloat</span><span class="p">(</span><span class="s">"humidity"</span><span class="p">,</span> <span class="n">sensor</span><span class="p">.</span><span class="n">readHumidity</span><span class="p">());</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre></div></div>
</td></tr></table>
  </div>
</div>

<p>Connect your Arduino UNO device via USB cable and select Arduino/Genuino Uno port in Arduino IDE. Compile and Upload your sketch to the device using Upload button.</p>

<p>After application will be uploaded and started it will try to connect to ThingsBoard node using HTTP and upload humidity and temperature timeseries data once per second.</p>

<h2 id="troubleshooting">Troubleshooting</h2>

<p>When the application is running you can select Arduino/Genuino Uno port in Arduino IDE and open Serial Monitor in order to view debug information produced by serial output.</p>

<h2 id="data-visualization">Data visualization</h2>

<p>Finally, open ThingsBoard Web UI. You can access this dashboard by logging in as a tenant administrator. Use</p>

<ul>
  <li>login: tenant@thingsboard.org</li>
  <li>password: tenant</li>
</ul>

<p>in case of local ThingsBoard installation.</p>

<p>Go to <strong>Devices</strong> section and locate <strong>Arduino UNO Demo Device</strong>, open device details and switch to <strong>Latest telemetry</strong> tab.
If all is configured correctly you should be able to see latest values of <em>humidity</em> and <em>temperature</em> in the table.</p>

<p><img src="/images/samples/arduino/sim808-htu21d/telemetry.png" alt="image" /></p>

<p>After, open <strong>Dashboards</strong> section then locate and open <strong>dashboard  Arduino Uno with SIM808 Shield and HTU21D sensor</strong>.
As a result, you will see two time-series charts and digital gauges displaying humidity and temperature level (similar to dashboard image in the introduction).</p>

      </div>
      <footer>
	<main class="light-text">
		<div class="newsletterSubsContainer">
            <script type="text/javascript">
                function subscribeForNewsletter(event) {
                    event.stopPropagation();
                    var script_tag = document.createElement('script');
                    script_tag.setAttribute("type", "text/javascript");
                    script_tag.setAttribute("src", "https://static.mailerlite.com/js/w/webforms.min.js?v28bf44f740701752bfc6767bc7e171d4");
                    document.getElementsByTagName("head")[0].appendChild(script_tag);
                    $(event.target).css('display', 'none');
                    $('#mlb2-7341216').css('display', 'block');
                }
            </script>
            <button class="n-button price subscribe" onClick="subscribeForNewsletter(event)">Sign up for ThingsBoard news</button>
            <div id="mlb2-7341216" class="ml-subscribe-form ml-subscribe-form-7341216" style="display: none;">
<!--            <div id="mlb2-7341216" class="ml-subscribe-form ml-subscribe-form-7341216" style="display: block;">-->
                <div class="ml-vertical-align-center">
                    <div class="subscribe-form ml-block-success" style="display: none;">
                        <div class="form-section">
                            <p>Thank you for your interest in ThingsBoard!<br/>Have a great day!</p>
                        </div>
                    </div>
                    <form class="ml-block-form" action="https://static.mailerlite.com/webforms/submit/r9r9x7" data-id="708170" data-code="r9r9x7" method="POST" target="_blank">
                        <div class="subscribe-form horizontal">
                            <div class="form-section horizontal">
                                <div class="form-group ml-field-email ml-validate-required ml-validate-email">
                                    <input type="email" name="fields[email]" class="form-control" placeholder="Email address*" value="" autocomplete="email" x-autocompletetype="email" spellcheck="false" autocapitalize="off" autocorrect="off">
                                </div>
                            </div>
                            <input type="hidden" name="ml-submit" value="1">
                            <div class="form-section horizontal ml-button-position">
                                <button class="primary n-button price subscribe" type="submit">
                                    Subscribe
                                </button>
                                <button disabled="disabled" style="display: none;" type="button" class="n-button loading">
                                    <img src="https://static.mailerlite.com/images/rolling@2x.gif" width="20" height="20" style="width: 20px; height: 20px;">
                                </button>
                            </div>
                            <p>By subscribing you agree to receive newsletters from ThingsBoard, Inc.</p>
                        </div>
                    </form>
                </div>
            </div>
		</div>

        <hr>

        <div class="deeper">
            <a href="/" class="footer-logo"></a>
            <nav>
                <a href="/docs/getting-started-guides/helloworld/">Get Started</a>
                <a href="/docs/">Documentation</a>
                <a href="/iot-use-cases/">Use cases</a>
                <a href="https://blog.thingsboard.io/">Blog</a>
                <a href="/docs/services/">Services</a>
                <a href="/docs/contact-us/">Contact us</a>
            </nav>
        </div>

        <div class="deepmost">
            <div class="copyright">&copy; 2021 The ThingsBoard Authors</div>
            <div class="social">
                <a href="https://github.com/thingsboard/thingsboard" class="github"></a>
                <a href="https://gitter.im/thingsboard/chat" class="gitter"></a>
                <a href="https://www.youtube.com/thingsboard" class="youtube"></a>
                <a href="http://stackoverflow.com/questions/tagged/thingsboard" class="stack-overflow"></a>
                <a href="https://groups.google.com/forum/#!forum/thingsboard" class="mailing-list"></a>
                <a href="https://www.facebook.com/thingsboard" class="facebook"></a>
                <a href="https://twitter.com/thingsboard" class="twitter"></a>
            </div>
        </div>
	</main>
</footer>

  </div>
</section>

<style>
  .cse .gsc-control-cse, .gsc-control-cse {
    padding: 0;
  }
  .gsc-control-cse table, .gsc-control-cse-en table {
    margin:0px !important;
  }
  .gsc-above-wrapper-area {
    border-bottom: 0;
  }
</style>
<script>
    jqueryDefer(function () {
        $(document).on('selectionchange',function() {
        // $(document).mouseup(function () {
            $('.clipboard-btn').removeClass('noChars');
            var selectedChars = getSelectedText();
            // $('#numberChars').html(selectedChars.length);
            if (selectedChars == 0) {
                $('.clipboard-btn').addClass('noChars');
            }
        });
    });
    function getSelectedText() {
        var text;
        if (window.getSelection) {
            text = window.getSelection().toString();
        } else if (document.getSelection) {
            text = document.getSelection();
        } else if (document.selection) {
            text = document.selection.createRange().text;
        }
        return text;
    }
</script>
<script>
    jqueryDefer(function () {
        $(document).ready(function () {
            var allCodeBlocksElements = $(".copy-code");
            allCodeBlocksElements.each(function (i) {
                var codeBlock = $(this);
                if (!codeBlock.hasClass('highlighter-rouge')) {
                    codeBlock = codeBlock.find('.highlighter-rouge');
                }
                codeBlock.each(function () {
                    var block = codeBlock.find('pre.highlight > code .rouge-code');
                    var currentId = "codeblock" + (i + 1);
                    block.attr('id', currentId);
                    var clipButton = $('<button class="clipboard-btn" data-clipboard-target="#' + currentId + '"><p>Copy to clipboard</p><div><img src="/images/copy-code-icon.svg" alt="Copy to clipboard"></div></button>');
                    $(this).append(clipButton);
                    var troyan = codeBlock.find('pre.highlight');
                    var Tooltip = $('<div class="customTooltip"><div class="tooltipText">Copied!</div></div>');
                    troyan.append(Tooltip);
                    troyan.addClass('clipboard-btn');
                    troyan.attr('data-clipboard-target', "#" + currentId);
                    troyan.on('mouseleave', clearTooltip);
                    troyan.on('blur', clearTooltip);
                    troyan.on('click', function(e) {
                        var el = $(e.currentTarget);
                        if (el.hasClass('showTool')) {
                            clearTooltip(e);
                            troyan.attr('data-skip-tooltip', "true");
                        }
                    });
                });
            });

            var clipboard = new Clipboard('.noChars');
            clipboard.on('success', function (e) {
                $('.clipboard-btn').removeClass('noChars');
                e.clearSelection();
                var trigger = e.trigger;
                if (!$(trigger).attr('data-skip-tooltip')) {
                    showTooltip(e.trigger, 'Copied!');
                } else {
                    $(trigger).removeAttr('data-skip-tooltip');
                }
            });

            $('#search').focus(
                function(){
                    $(this).parent('#searchBox').addClass('focused');
                }).blur(
                function(){
                    $(this).parent('#searchBox').removeClass('focused');
                });

            $('#searchBox .searchButton').click(function () {
                var value = $('#search').val();
                window.location.replace('/docs/search/?q=' + value);
            });

            $('#docsBreadcrumbs').click(function () {
                if ($(this).hasClass('active')) {
                    $(this).removeClass('active');
                    $('#docsNav').removeClass('active');
                    $('#searchBox').removeClass('visible');
                } else {
                    $(this).addClass('active');
                    $('#docsNav').addClass('active');
                    $('#searchBox').addClass('visible');
                }
            });
        });

        function clearTooltip(e) {
            var el = $(e.currentTarget);
            el.removeClass('showTool');
            el.attr('aria-label', null);
        }

        function showTooltip(elem, msg) {
            var el = $(elem);
            el.addClass('showTool');
            el.attr('aria-label', msg);
        }
    });
</script>

<script>
    jqueryDefer(function () {
        var markdownTocs = null;
        var contentAnchors = [];
        var activeAnchor = null;
        var firstAnchor = null;
        var lastAnchor = null;

        function updatePositions() {
            contentAnchors = [];
            markdownTocs.each(function (i) {
                var tocAnchor = $(this).children('a');
                var href = tocAnchor.attr('href');
                var contentAnchor = $('div#content ' + href);
                var top = Math.floor(contentAnchor.offset().top);
                var bottom;
                if (i < markdownTocs.length - 1) {
                    var nextHref = $(markdownTocs[i + 1]).children('a').attr('href');
                    var nextContentAnchor = $('div#content ' + nextHref);
                    bottom = Math.floor(nextContentAnchor.offset().top);
                } else {
                    bottom = $('div#content').offset().top + $('div#content').innerHeight();
                }
                var contentAnchorInfo = {anchor: contentAnchor, toc: $(this), top: top, bottom: bottom, href: href};
                contentAnchors.push(contentAnchorInfo);
                if (i === 0) {
                    firstAnchor = contentAnchorInfo;
                }
                if (i === markdownTocs.length - 1) {
                    lastAnchor = contentAnchorInfo;
                }
            });
        }

        function findActiveContentToc() {
            var top = $(window).scrollTop();
            var bottom = top + $(window).height();
            if (bottom === $('#encyclopedia').offset().top + $('#encyclopedia').innerHeight()) {
                return lastAnchor;
            } else {
                bottom -= 154;
                for (var i = 0; i < contentAnchors.length; i++) {
                    var contentAnchor = contentAnchors[i];
                    if (contentAnchor.top <= bottom &&
                        contentAnchor.bottom > top) {
                        return contentAnchor;
                    }
                }
            }
            return firstAnchor;
        }

        function updateActiveToc(init) {
            updatePositions();
            var newActiveAnchor = findActiveContentToc();
            if (!activeAnchor || newActiveAnchor.href !== activeAnchor.href) {
                activeAnchor = newActiveAnchor;
                markdownTocs.removeClass('active');
                activeAnchor.toc.addClass('active');
                var tocTop = $('#table-of-contents').scrollTop() + 100;
                var tocBottom = tocTop + $('#table-of-contents').innerHeight() - 200;
                var activeTocTop = activeAnchor.toc.position().top;
                var activeTocBottom = activeTocTop + activeAnchor.toc.children(':first').height();
                if (tocTop > activeTocTop) {
                    activeAnchor.toc[0].scrollIntoView();
                    $('#table-of-contents')[0].scrollTop -= 100;
                } else if (tocBottom < activeTocBottom) {
                    activeAnchor.toc[0].scrollIntoView();
                    $('#table-of-contents')[0].scrollTop += init ? -100 : 100;
                }
            }
        }
        $( document ).ready(function() {
            var tocs = $('#content > ul#markdown-toc');
            var tableOfContents = $('#table-of-contents');
            tableOfContents.append(tocs);
            markdownTocs = $('#table-of-contents ul#markdown-toc li').filter(function() {
                var tocAnchor = $(this).children('a');
                var href = tocAnchor.attr('href');
                if (!href.startsWith('#')) {
                    return false;
                } else {
                    var contentAnchor = $('div#content ' + href);
                    return contentAnchor.length > 0;
                }
            });
            updateActiveToc(true);
        });

        $(document).on("scroll", function() {
            updateActiveToc(false);
        });

    });
</script>

</body>
</html>

