







<!Doctype html>
<html id="docs" class="ThingsBoard Documentation">







<head>
    <meta charset="utf-8">
    <meta name="cf-2fa-verify" content="a08672380de15e9">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    
    <title>Widget Actions | ThingsBoard Community Edition</title>
    <!-- Begin Jekyll SEO tag v2.7.1 -->
<meta name="generator" content="Jekyll v3.9.0" />
<meta property="og:title" content="Widget Actions" />
<meta name="author" content="thingsboard" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="ThingsBoard Dashboard Widget Actions" />
<meta property="og:description" content="ThingsBoard Dashboard Widget Actions" />
<link rel="canonical" href="http://0.0.0.0:4002/docs/user-guide/ui/widget-actions/" />
<meta property="og:url" content="http://0.0.0.0:4002/docs/user-guide/ui/widget-actions/" />
<meta property="og:site_name" content="ThingsBoard" />
<meta property="og:image" content="http://0.0.0.0:4002/images/thingsboard_logo.png" />
<meta name="twitter:card" content="summary_large_image" />
<meta property="twitter:image" content="http://0.0.0.0:4002/images/thingsboard_logo.png" />
<meta property="twitter:title" content="Widget Actions" />
<meta name="twitter:site" content="@thingsboard" />
<meta name="twitter:creator" content="@thingsboard" />
<script type="application/ld+json">
{"url":"http://0.0.0.0:4002/docs/user-guide/ui/widget-actions/","publisher":{"@type":"Organization","logo":{"@type":"ImageObject","url":"http://0.0.0.0:4002/images/thingsboard_logo.png"},"name":"thingsboard"},"author":{"@type":"Person","name":"thingsboard"},"image":{"twitter":"/images/thingsboard_logo.png","facebook":"/images/thingsboard_logo.png","url":"http://0.0.0.0:4002/images/thingsboard_logo.png","@type":"imageObject"},"description":"ThingsBoard Dashboard Widget Actions","@type":"WebPage","headline":"Widget Actions","@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->

    
    
    <meta name="twitter:description" content="ThingsBoard Dashboard Widget Actions"/>
    
    
    <link rel="shortcut icon" type="image/png" href="/images/favicon.png">
    <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Poppins:300,400,500,600,700" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.5.2/animate.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
          integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    <link rel="stylesheet" href="/css/styles.css">
    <script async defer src="https://buttons.github.io/buttons.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/qs/6.7.0/qs.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gifffer/1.5.0/gifffer.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/clipboard@1/dist/clipboard.min.js"></script>
    <script type="text/javascript">
        window.onload = function() {
            Gifffer();
        }
    </script>
    <script type="text/javascript">
        /*! loadCSS. [c]2017 Filament Group, Inc. MIT License */
        !function (a) {
            "use strict";
            var b = function (b, c, d) {
                function e(a) {
                    return h.body ? a() : void setTimeout(function () {
                        e(a)
                    })
                }

                function f() {
                    i.addEventListener && i.removeEventListener("load", f), i.media = d || "all"
                }

                var g, h = a.document, i = h.createElement("link");
                if (c) g = c; else {
                    var j = (h.body || h.getElementsByTagName("head")[0]).childNodes;
                    g = j[j.length - 1]
                }
                var k = h.styleSheets;
                i.rel = "stylesheet", i.href = b, i.media = "only x", e(function () {
                    g.parentNode.insertBefore(i, c ? g : g.nextSibling)
                });
                var l = function (a) {
                    for (var b = i.href, c = k.length; c--;) if (k[c].href === b) return a();
                    setTimeout(function () {
                        l(a)
                    })
                };
                return i.addEventListener && i.addEventListener("load", f), i.onloadcssdefined = l, l(f), i
            };
            "undefined" != typeof exports ? exports.loadCSS = b : a.loadCSS = b
        }("undefined" != typeof global ? global : this);

        /*! onloadCSS. (onload callback for loadCSS) [c]2017 Filament Group, Inc. MIT License */
        function onloadCSS(a, b) {
            function c() {
                !d && b && (d = !0, b.call(a))
            }

            var d;
            a.addEventListener && a.addEventListener("load", c), a.attachEvent && a.attachEvent("onload", c), "isApplicationInstalled" in navigator && "onloadcssdefined" in a && a.onloadcssdefined(c)
        }
    </script>
    <script type="text/javascript">

        function jqueryDefer(method) {
            if (window.jQuery) {
                method();
            } else {
                setTimeout(function () {
                    jqueryDefer(method)
                }, 50);
            }
        }

        function jqueryUiDefer(method) {
            if (window.jQuery && window.jQuery.ui) {
                method();
            } else {
                setTimeout(function () {
                    jqueryUiDefer(method)
                }, 50);
            }
        }

        window.vis = (function () {
            var stateKey,
                eventKey,
                keys = {
                    hidden: "visibilitychange",
                    webkitHidden: "webkitvisibilitychange",
                    mozHidden: "mozvisibilitychange",
                    msHidden: "msvisibilitychange"
                };
            for (stateKey in keys) {
                if (stateKey in document) {
                    eventKey = keys[stateKey];
                    break;
                }
            }
            return function (c) {
                if (c) document.addEventListener(eventKey, c);
                return !document[stateKey];
            }
        })();

        function loadScript(src, callback) {
            var s, r, t;
            r = false;
            s = document.createElement('script');
            s.type = 'text/javascript';
            s.src = src;
            s.onload = s.onreadystatechange = function () {
                if (!r && (!this.readyState || this.readyState == 'complete')) {
                    r = true;
                    if (callback) {
                        callback();
                    }
                }
            };
            t = document.getElementsByTagName('script')[0];
            t.parentNode.insertBefore(s, t);
        }

        function loadCssAsync(src, callback) {
            var stylesheet = loadCSS(src);
            if (callback) {
                onloadCSS(stylesheet, callback);
            }
        }

        function loadNextScript(index, scriptsList, completeCallback) {
            if (index < scriptsList.length) {
                var script = scriptsList[index];
                if (script.type === 'script') {
                    loadScript(script.src, function () {
                        if (script.callback) {
                            script.callback();
                        }
                        index++;
                        loadNextScript(index, scriptsList, completeCallback);
                    });
                } else if (script.type === 'css') {
                    loadCssAsync(script.src, function () {
                        index++;
                        loadNextScript(index, scriptsList, completeCallback);
                    });
                }
            } else if (completeCallback) {
                completeCallback();
            }
        }

        var initialScriptsList = [
            {src: '/js/jquery-2.2.0.min.js', type: 'script'},
            {src: '/css/jquery-ui.min.css', type: 'css'},
            {src: '/js/jquery-ui.min.js', type: 'script'},
            {src: '/js/jquery.vide.js', type: 'script'},
            {src: '/js/script.js', type: 'script'},
            {src: '/css/photoswipe.css', type: 'css'},
            {src: '/css/default-skin/default-skin.css', type: 'css'},
            {src: '/js/photoswipe.min.js', type: 'script'},
            {src: '/js/photoswipe-ui-default.min.js', type: 'script'}
        ];

        loadNextScript(0, initialScriptsList);

        jqueryDefer(function () {
            (function ($, win) {
                $.fn.inViewport = function (cb) {
                    return this.each(function (i, el) {
                        function visPx() {
                            var H = $(this).height(),
                                r = el.getBoundingClientRect(), t = r.top, b = r.bottom;
                            var result = cb.call(el, Math.max(0, t > 0 ? H - t : (b < H ? b : H)));
                            if (result) {
                                $(win).off("resize scroll", visPx);
                            }
                        }

                        visPx();
                        $(win).on("resize scroll", visPx);
                    });
                };
            }(jQuery, window));
        });

        function inViewportDefer(method) {
            if (window.jQuery && $.fn.inViewport) {
                method();
            } else {
                setTimeout(function () {
                    inViewportDefer(method)
                }, 50);
            }
        }

    </script>
    <script type="text/javascript">
        function _gaLt(event) {
            /* If GA is blocked or not loaded, or not main|middle|touch click then don't track */
            if (!ga.hasOwnProperty("loaded") || ga.loaded != true || (event.which != 1 && event.which != 2)) {
                return;
            }
            var el = event.srcElement || event.target;

            while (el && (typeof el.tagName == 'undefined' || el.tagName.toLowerCase() != 'a' || !el.href)) {
                el = el.parentNode;
            }
            if (el && el.href) {
                var link = el.href;
                if ((link.indexOf(location.host) == -1 || link.indexOf('.' + location.host) > 0) && !link.match(/^javascript\:/i)) {
                    var target = (el.target && !el.target.match(/^_(self|parent|top)$/i)) ? el.target : false;
                    if (event.ctrlKey || event.shiftKey || event.metaKey || event.which == 2) {
                        target = "_blank";
                    }

                    var hbrun = false; // tracker has not yet run
                    var hitBack = function () {
                        if (hbrun) return;
                        hbrun = true;
                        window.location.href = link;
                    };

                    if (target) {
                        ga(
                            "send", "event", "Outgoing Links", link,
                            document.location.pathname + document.location.search
                        );
                    } else {
                        event.preventDefault ? event.preventDefault() : event.returnValue = !1;
                        ga(
                            "send", "event", "Outgoing Links", link,
                            document.location.pathname + document.location.search, {
                                "hitCallback": hitBack
                            }
                        );

                        setTimeout(hitBack, 1000);
                    }
                }
            }
        }

        var _w = window;
        var _gaLtEvt = ("ontouchstart" in _w) ? "click" : "mousedown";
        _w.addEventListener ? _w.addEventListener("load", function () {
                document.body.addEventListener(_gaLtEvt, _gaLt, !1)
            }, !1)
            : _w.attachEvent && _w.attachEvent("onload", function () {
            document.body.attachEvent("on" + _gaLtEvt, _gaLt)
        });
    </script>
    <script>
        (function (i, s, o, g, r, a, m) {
            i['GoogleAnalyticsObject'] = r;
            i[r] = i[r] || function () {
                (i[r].q = i[r].q || []).push(arguments)
            }, i[r].l = 1 * new Date();
            a = s.createElement(o),
                m = s.getElementsByTagName(o)[0];
            a.async = 1;
            a.src = g;
            m.parentNode.insertBefore(a, m)
        })(window, document, 'script', '//www.google-analytics.com/analytics.js', 'ga');

        ga('create', 'UA-88383331-1', 'auto');
        ga('send', 'pageview');
    </script>
    <script>
        function Burger() {
            var header = $('header');
            var body = $('body');
            if (header.hasClass('opened-burger')) {
                header.removeClass('opened-burger');
                let subMenus = $('nav.head-menu > ul > li > div.centered-sub > ul.sub-menu');
                subMenus.removeClass('open-sub');
                body.css('overflow', '');
            } else {
                header.addClass('opened-burger');
                body.css('overflow', 'hidden');
            }
        }
    </script>
    <script>

        jqueryDefer(function () {
            let menuElement = $('nav.head-menu > ul');
            let submenuContainer = $('nav.head-menu > div.sub-menu-container');
            let menuItems = $('nav.head-menu > ul > li');
            let indicator = $('nav.head-menu > ul > div.indicator');
            let subMenuActive = false;
            menuElement.on('mouseleave', function (event) {
                if (!$(event.relatedTarget).parents('div.sub-menu-container').length) {
                    subMenuActive = false;
                    submenuContainer.removeClass('active bounds-transition');
                    menuItems.removeClass('active');
                    indicator.removeClass('left-transition');
                }
            });
            submenuContainer.on('mouseleave', function (event) {
                if (!$(event.relatedTarget).parents('nav.head-menu > ul').length) {
                    subMenuActive = false;
                    submenuContainer.removeClass('active bounds-transition');
                    menuItems.removeClass('active');
                    indicator.removeClass('left-transition');
                }
            });
            menuItems.each(function() {
                let item = $( this );
                let subMenuId = item.attr('data-submenu-id');
                item.on('mouseenter', function () {
                    let submenus = $('nav.head-menu > div.sub-menu-container > div');
                    submenus.css('display', 'none');
                    menuItems.removeClass('active');
                    item.addClass('active');
                    let targetSubMenu = $('nav.head-menu > div.sub-menu-container > div#'+subMenuId);
                    targetSubMenu.css('display', 'block');
                    submenuContainer.css('overflow', 'visible');
                    let left = item.position().left + (item.outerWidth() - targetSubMenu.outerWidth()) / 2;
                    submenuContainer.css('left', left + 'px');
                    if (!subMenuActive) {
                        submenuContainer.addClass('active');
                        subMenuActive = true;
                    } else {
                        submenuContainer.addClass('bounds-transition');
                        indicator.addClass('left-transition');
                    }
                    indicator.css('left', item.position().left);
                    indicator.css('width', item.outerWidth());
                    submenuContainer.css('height', targetSubMenu.outerHeight() + 'px');
                    submenuContainer.css('width', targetSubMenu.outerWidth() + 'px');
                    submenuContainer.css('overflow', 'hidden');
                });
            });

            let isMobile = $('button.burger').css('display') === 'block';
            if (isMobile) {
                initMobileSubmenu();
            }

            $(window).resize(function(){
                let newIsMobile = $('button.burger').css('display') === 'block';
                if (isMobile !== newIsMobile) {
                    isMobile = newIsMobile;
                    if (isMobile) {
                        initMobileSubmenu();
                    } else {
                        restoreDesktopSubmenu();
                    }
                }
            });

            // Products selector

            
            let productsSelector = $('.products-selector');
            $(window).click(function(e) {
                if (productsSelector[0].contains(e.target)) {
                    if (productsSelector.hasClass('active')) {
                        productsSelector.removeClass('active');
                    } else {
                        productsSelector.addClass('active');
                    }
                } else {
                    productsSelector.removeClass('active');
                }
            });
            

            // Rogue line numbers fix (don't show line numbers for 1 row)
            $( document ).ready(function() {
                $('.rouge-gutter.gl').each(function() {
                    var lineNumbers = $(this).children('.lineno');
                    if (lineNumbers.text() === '1\n') {
                        $(this).css('display', 'none');
                    }
                });
            });
        });

        function initMobileSubmenu() {

            var header = $('header');
            if (header.hasClass('opened-burger')) {
                var body = $('body');
                body.css('overflow', 'hidden');
            }

            let targetSubMenus = $('nav.head-menu > div.sub-menu-container > div');
            targetSubMenus.css('display', 'block');
            let submenuContainer = $('nav.head-menu > div.sub-menu-container');
            submenuContainer.removeClass('active');
            submenuContainer.css('display', 'none');

            targetSubMenus.each(function() {
                let subMenu = $( this );
                let subMenuId = subMenu.attr('id');
                let parent = $('nav.head-menu > ul > li.'+subMenuId);
                parent.append(subMenu);
            });
        }

        function restoreDesktopSubmenu() {
            var body = $('body');
            body.css('overflow', '');
            let targetSubMenus = $('nav.head-menu > ul > li > div');
            let submenuContainer = $('nav.head-menu > div.sub-menu-container');
            submenuContainer.removeClass('active');
            submenuContainer.css('display', 'block');
            let menuItems = $('nav.head-menu > ul > li');
            menuItems.removeClass('active');
            targetSubMenus.each(function() {
                let subMenu = $( this );
                submenuContainer.append(subMenu);
            });
        }

        function listburg(subMenuId) {
            let isMobile = $('button.burger').css('display') === 'block';
            if (isMobile) {
                let targetSubMenu = $('nav.head-menu > ul > li > div.centered-sub#'+subMenuId+' > ul.sub-menu');
                let isOpen = targetSubMenu.hasClass('open-sub');
                let subMenus = $('nav.head-menu > ul > li > div.centered-sub > ul.sub-menu');
                subMenus.removeClass('open-sub');
                if (!isOpen) {
                    targetSubMenu.addClass('open-sub');
                }
            }
        }
    </script>
</head>
<body>

<div class="products-selector">
    <img src="/images/thingsboard-cm-icon.svg"/>
    <div class="product-info">
        <div class="product-title">
            Community Edition
        </div>
        <div class="product-description">
            ThingsBoard Documentation
        </div>
    </div>
    <div class="products">
        
        

    
        
        


        
            
        
    


        <a href="/docs/paas/user-guide/ui/widget-actions/" class="product">Cloud</a>
        
        

    
        
        


        
            
        
    


        <a href="/docs/pe/user-guide/ui/widget-actions/" class="product">Professional Edition</a>
        
        

    
        
        


        
            
        
    


        <a href="/docs/user-guide/ui/widget-actions/" class="product active">Community Edition</a>
        
        

    


        <a href="/docs/edge/" class="product">Edge</a>
        
        

    


        <a href="/docs/iot-gateway/" class="product">IoT Gateway</a>
        
        

    


        <a href="/products/license-server/" class="product">License Server</a>
        
        

    


        <a href="/docs/trendz/" class="product">Trendz Analytics</a>
        
    </div>
</div>

<header>
    <div class="logo-burger">
        
        <button onclick="Burger()" class="burger"></button>
        <div id="githubButtonContainer">
            <a class="github-button" href="https://github.com/thingsboard/thingsboard" data-show-count="true"
               aria-label="Star thingsboard/thingsboard on GitHub">Star</a>
        </div>
    </div>
    <nav class="head-menu">
        <ul>
            <li class="nav-products" data-submenu-id="nav-products">
                <a onclick="listburg('nav-products')">Products</a>
            </li>
            <li class="nav-services" data-submenu-id="nav-services">
                <a onclick="listburg('nav-services')">Services</a>
            </li>
            
            <li class="nav-cases" data-submenu-id="nav-cases">
                <a onclick="listburg('nav-cases')">Use Cases</a>
            </li>
            <li class="nav-customers" data-submenu-id="nav-customers">
                <a onclick="listburg('nav-customers')">Customers</a>
            </li>
            <li class="nav-company" data-submenu-id="nav-company">
                <a onclick="listburg('nav-company')">Company</a>
            </li>
            <div class="indicator"><div class="head-arrow"></div><div class="line"></div><div class="sub-background"></div></div>
        </ul>
        <div class="sub-menu-container">
            <div id="nav-products" class="centered-sub">
                <ul class="sub-menu products">
                    <div class="sub-groups">
                        <div class="group">
                            <p class="group-name">IoT platforms</p>
                            <a class="cloud-lnk" href="/products/paas/">
                                <img src="/images/thingsboard-c-icon.svg">
                                <div class="sub-text">
                                    <h1>Cloud</h1>
                                    <p>Platform as a service</p>
                                </div>
                            </a>
                            <a class="prof-lnk" href="/products/thingsboard-pe/">
                                <img src="/images/thingsboard-p-icon.svg">
                                <div class="sub-text">
                                    <h1>Professional Edition</h1>
                                    <p>Advanced IoT platform</p>
                                </div>
                            </a>
                            <a class="com-lnk" href="/">
                                <img src="/images/thingsboard-cm-icon.svg">
                                <div class="sub-text">
                                    <h1>Community Edition</h1>
                                    <p>Open source platform</p>
                                </div>
                            </a>
                        </div>
                        <div class="group">
                            <p class="group-name">Product ecosystem</p>
                            <a class="edge-lnk" href="/products/thingsboard-edge/">
                                <img src="/images/thingsboard-e-icon.svg">
                                <div class="sub-text">
                                    <h1>Edge</h1>
                                    <p>Edge computing</p>
                                </div>
                            </a>
                            <a class="gateway-lnk" href="/docs/iot-gateway/what-is-iot-gateway/">
                                <img src="/images/gateway-icon.svg">
                                <div class="sub-text">
                                    <h1>IoT Gateway</h1>
                                    <p>Connect legacy protocols</p>
                                </div>
                            </a>
                            <a class="license-lnk" href="/products/license-server/">
                                <img src="/images/license-icon.svg">
                                <div class="sub-text">
                                    <h1>License Server</h1>
                                    <p>Billing solution</p>
                                </div>
                            </a>
                            <a class="trendz-lnk" href="/products/trendz/">
                                <img src="/images/trendz-icon.svg">
                                <div class="sub-text">
                                    <h1>Trendz Analytics</h1>
                                    <p>Data analytics and Prediction</p>
                                </div>
                            </a>
                        </div>
                    </div>
                </ul>
            </div>
            <div id="nav-services" class="centered-sub">
                <ul class="sub-menu services">
                    <a href="/docs/services/support/">
                        <img src="/images/support-icon.svg">
                        <div class="sub-text">
                            <h1>Support</h1>
                            <p>Support packages</p>
                        </div>
                    </a>
                    <a href="/docs/services/trainings/">
                        <img src="/images/train-icon.svg">
                        <div class="sub-text">
                            <h1>Trainings</h1>
                            <p>ThingsBoard education courses</p>
                        </div>
                    </a>
                    <a href="/docs/services/consulting/">
                        <img src="/images/prof-icon.svg">
                        <div class="sub-text">
                            <h1>Professional services</h1>
                            <p>Development of solutions by the ThingsBoard team</p>
                        </div>
                    </a>
                </ul>
            </div>
            
            <div id="nav-cases" class="centered-sub">
                <ul class="sub-menu cases">
                    <a href="/smart-metering/">
                        <img src="/images/case-met-icon.svg">
                        <div class="sub-text">
                            <h1>Smart Metering</h1>
                            <p>Collection, analysis and visualization of data from meters</p>
                        </div>
                    </a>
                    <a href="/smart-energy/">
                        <img src="/images/case-eng-icon.svg">
                        <div class="sub-text">
                            <h1>Smart Energy</h1>
                            <p>Energy monitoring and efficiency analysis</p>
                        </div>
                    </a>
                    <a href="/smart-farming/">
                        <img src="/images/case-fam-icon.svg">
                        <div class="sub-text">
                            <h1>Smart Farming</h1>
                            <p>Monitoring of indoor conditions and plant growth characteristics</p>
                        </div>
                    </a>
                    <a href="/fleet-tracking/">
                        <img src="/images/case-trk-icon.svg">
                        <div class="sub-text">
                            <h1>Fleet Tracking</h1>
                            <p>Fleet tracking and fleet management</p>
                        </div>
                    </a>
                </ul>
            </div>
            <div id="nav-customers" class="centered-sub">
                <ul class="sub-menu customers">
                    <div class="sub-groups">
                        <div class="group">
                            <a class="small-link" href="/industries/smart-energy/">
                                <img src="/images/se-s-icon.svg">
                                <div class="sub-text">
                                    <h1>Smart Energy</h1>
                                </div>
                            </a>
                            <a class="small-link" href="/industries/agriculture/">
                                <img src="/images/agr-s-icon.svg">
                                <div class="sub-text">
                                    <h1>Agriculture</h1>
                                </div>
                            </a>
                            <a class="small-link" href="/industries/smart-buildings/">
                                <img src="/images/sb-s-icon.svg">
                                <div class="sub-text">
                                    <h1>Smart Buildings</h1>
                                </div>
                            </a>
                        </div>
                        <div class="group">
                            <a class="small-link" href="/industries/smart-city/">
                                <img src="/images/sc-s-icon.svg">
                                <div class="sub-text">
                                    <h1>Smart City</h1>
                                </div>
                            </a>
                            <a class="small-link" href="/industries/telecom/">
                                <img src="/images/tel-s-icon.svg">
                                <div class="sub-text">
                                    <h1>Telecom</h1>
                                </div>
                            </a>
                            <a class="small-link" href="/industries/industry40/">
                                <img src="/images/in-s-icon.svg">
                                <div class="sub-text">
                                    <h1>Industry 4.0</h1>
                                </div>
                            </a>
                        </div>
                    </div>
                </ul>
            </div>
            <div id="nav-company" class="centered-sub">
                <ul class="sub-menu about">
                    <div class="sub-groups">
                        <div class="group">
                            <a class="small-link" href="/company/">
                                <img src="/images/about-s-icon.svg">
                                <div class="sub-text">
                                    <h1>Our Company</h1>
                                </div>
                            </a>
                            <a class="small-link" href="/docs/contact-us/">
                                <img src="/images/contact-s-icon.svg">
                                <div class="sub-text">
                                    <h1>Contact Us</h1>
                                </div>
                            </a>
                            <a class="small-link" href="/careers/">
                                <img src="/images/careers-s-icon.svg">
                                <div class="sub-text">
                                    <h1>Careers</h1>
                                </div>
                            </a>
                        </div>
                        <div class="group">
                            <a class="small-link" href="/mediakit/">
                                <img src="/images/media-s-icon.svg">
                                <div class="sub-text">
                                    <h1>Media Kit</h1>
                                </div>
                            </a>
                            <a class="small-link" href="https://blog.thingsboard.io/">
                                <img src="/images/blog-s-icon.svg">
                                <div class="sub-text">
                                    <h1>Blog</h1>
                                </div>
                            </a>
                        </div>
                    </div>
                    <div class="bottom-group">
                        <a class="small-link" href="/partners/hardware/">
                            <img src="/images/hard-s-icon.svg">
                            <div class="sub-text">
                                <h1>Hardware partners</h1>
                            </div>
                        </a>
                        <a class="small-link" href="/partners/distributors/">
                            <img src="/images/dis-s-icon.svg">
                            <div class="sub-text">
                                <h1>Distributors</h1>
                            </div>
                        </a>
                    </div>
                </ul>
            </div>
        </div>
    </nav>
    <div>
        <a href="/installations/" class="n-button try">Try it now</a>
        <a href="/pricing/" class="n-button price">Pricing</a>
    </div>
</header>


<div id="searchBox">
    <input type="text" id="search" placeholder="Search" onkeydown="if (event.keyCode==13) window.location.replace('/docs/search/?q=' + this.value)">
    <button class="searchButton"></button>
</div>

<!--  HERO  -->
<section id="hero">
  <div id="hero-content">
    <div id="vendorStrip">
      <div id="docsList">
          <ul>
            
              
              
              
              <li>
                  <a href="/docs/getting-started-guides/helloworld/" >Getting Started</a>
                  
              </li>
            
              
              
              
              <li>
                  <a href="/docs/" class="YAH">Documentation</a>
                  
                     <div class="indicator"><div class="head-arrow"></div><div class="line"></div><div class="sub-background"></div></div>
                  
              </li>
            
              
              
              
              <li>
                  <a href="/docs/guides/" >Guides</a>
                  
              </li>
            
              
              
              
              <li>
                  <a href="/docs/user-guide/install/installation-options/" >Installation</a>
                  
              </li>
            
              
              
              
              <li>
                  <a href="/docs/reference/" >Architecture</a>
                  
              </li>
            
              
              
              
              <li>
                  <a href="/docs/api/" >API</a>
                  
              </li>
            
              
              
              
              <li>
                  <a href="/docs/faq/" >FAQ</a>
                  
              </li>
            
          </ul>
          <div id="docsBreadcrumbs">
              
                  
                  
                  
                  
                      
                  
                      
                  
                      
                  
                      
                         
                         
                         
    

    

    

    

    

    

    

    


                         
                            
                         
                      
                  
                      
                         
                         
                         
    

    

    
        
        
        

                         
                            
                  
                    <span class="item">Documentation</span>
                    
                        <span class="divider">></span>
                    
                  
                    <span class="item">Dashboards</span>
                    
                        <span class="divider">></span>
                    
                  
                    <span class="item">Widget Actions</span>
                    
                  
              
          </div>
      </div>
    </div>
  </div>
</section>
<div id="docsNav">
    <div class="docItems">
        
            
            
                <a class="toc" href="/docs/getting-started-guides/helloworld/" >Getting Started</a>
            
        
            
            
                <div class="pi-accordion">
                    


<a class="item" data-title="Community Edition" href="/docs/"></a>


<a class="item" data-title="What is ThingsBoard?" href="/docs/getting-started-guides/what-is-thingsboard/"></a>


<a class="item" data-title="How to connect your device?" href="/docs/getting-started-guides/connectivity/"></a>


<div class="item" data-title="Key concepts">
  <div class="container">


<a class="item" data-title="Entities and relations" href="/docs/user-guide/entities-and-relations/"></a>


<a class="item" data-title="Tenant Profiles" href="/docs/user-guide/tenant-profiles/"></a>


<a class="item item-new" data-title="Device Profiles" href="/docs/user-guide/device-profiles/"></a>


<a class="item" data-title="Attributes" href="/docs/user-guide/attributes/"></a>


<a class="item" data-title="Time-series data" href="/docs/user-guide/telemetry/"></a>


<a class="item" data-title="Alarms" href="/docs/user-guide/alarms/"></a>


<a class="item" data-title="Remote commands to devices" href="/docs/user-guide/rpc/"></a>


<a class="item item-new" data-title="OTA updates" href="/docs/user-guide/ota-updates/"></a>
  </div>
</div>


<div class="item" data-title="Dashboards">
  <div class="container">


<a class="item" data-title="Overview" href="/docs/user-guide/dashboards/"></a>


<a class="item" data-title="Aliases" href="/docs/user-guide/ui/aliases/"></a>


<a class="item" data-title="Widget Actions" href="/docs/user-guide/ui/widget-actions/"></a>


<a class="item" data-title="Widgets Library" href="/docs/user-guide/ui/widget-library/"></a>
  </div>
</div>


<div class="item" data-title="Rule engine">
  <div class="container">


<a class="item" data-title="Getting Started" href="/docs/user-guide/rule-engine-2-0/re-getting-started/"></a>


<a class="item" data-title="Overview" href="/docs/user-guide/rule-engine-2-0/overview/"></a>


<a class="item" data-title="Architecture" href="/docs/user-guide/rule-engine-2-0/architecture/"></a>


<div class="item" data-title="Nodes">
  <div class="container">


<a class="item" data-title="Filter Nodes" href="/docs/user-guide/rule-engine-2-0/filter-nodes/"></a>


<a class="item" data-title="Enrichment Nodes" href="/docs/user-guide/rule-engine-2-0/enrichment-nodes/"></a>


<a class="item" data-title="Transformation Nodes" href="/docs/user-guide/rule-engine-2-0/transformation-nodes/"></a>


<a class="item" data-title="Action Nodes" href="/docs/user-guide/rule-engine-2-0/action-nodes/"></a>


<a class="item" data-title="External Nodes" href="/docs/user-guide/rule-engine-2-0/external-nodes/"></a>
  </div>
</div>


<div class="item item-pe" data-title="PE Nodes">
  <div class="container">


<a class="item" data-title="Transformation Nodes" href="/docs/pe/user-guide/rule-engine-2-0/transformation-nodes/"></a>


<a class="item" data-title="Action Nodes" href="/docs/pe/user-guide/rule-engine-2-0/action-nodes/"></a>


<a class="item" data-title="Analytics Nodes" href="/docs/pe/user-guide/rule-engine-2-0/analytics-nodes/"></a>
  </div>
</div>


<a class="item" data-title="Custom Rule Nodes" href="/docs/user-guide/contribution/rule-node-development/"></a>
  </div>
</div>


<div class="item item-pe" data-title="White-labeling">
  <div class="container">


<a class="item" data-title="Overview" href="/docs/pe/user-guide/white-labeling/"></a>


<a class="item" data-title="Self-registration" href="/docs/pe/user-guide/self-registration/"></a>


<a class="item" data-title="Custom Translations" href="/docs/pe/user-guide/custom-translation/"></a>


<a class="item" data-title="Custom Menu" href="/docs/pe/user-guide/custom-menu/"></a>
  </div>
</div>


<div class="item item-pe" data-title="Integrations">
  <div class="container">


<a class="item" data-title="Overview" href="/docs/user-guide/integrations/"></a>


<a class="item" data-title="Remote Integrations" href="/docs/user-guide/integrations/remote-integrations/"></a>


<a class="item" data-title="HTTP" href="/docs/user-guide/integrations/http/"></a>


<a class="item" data-title="MQTT" href="/docs/user-guide/integrations/mqtt/"></a>


<a class="item" data-title="OPC-UA" href="/docs/user-guide/integrations/opc-ua/"></a>


<a class="item" data-title="Actility ThingPark" href="/docs/user-guide/integrations/thingpark/"></a>


<a class="item" data-title="TheThingsNetwork" href="/docs/user-guide/integrations/ttn/"></a>


<a class="item" data-title="TheThingsIndustries" href="/docs/user-guide/integrations/tti/"></a>


<a class="item" data-title="LORIOT" href="/docs/user-guide/integrations/loriot/"></a>


<a class="item" data-title="AWS IoT" href="/docs/user-guide/integrations/aws-iot/"></a>


<a class="item" data-title="AWS Kinesis" href="/docs/user-guide/integrations/aws-kinesis/"></a>


<a class="item" data-title="IBM Watson" href="/docs/user-guide/integrations/ibm-watson-iot/"></a>


<a class="item" data-title="Azure Event Hub" href="/docs/user-guide/integrations/azure-event-hub/"></a>


<a class="item" data-title="Azure IoT Hub" href="/docs/user-guide/integrations/azure-iot-hub/"></a>


<a class="item" data-title="TCP" href="/docs/user-guide/integrations/tcp/"></a>


<a class="item" data-title="UDP" href="/docs/user-guide/integrations/udp/"></a>


<a class="item" data-title="SigFox" href="/docs/user-guide/integrations/sigfox/"></a>


<a class="item" data-title="Ocean Connect" href="/docs/user-guide/integrations/ocean-connect/"></a>


<a class="item" data-title="Custom Integration development guide" href="/docs/user-guide/integrations/custom/"></a>


<a class="item" data-title="Notifications and Alarms on your smartphone using Telegram Bot" href="/docs/user-guide/rule-engine-2-0/tutorials/integration-with-telegram-bot/"></a>
  </div>
</div>


<div class="item" data-title="Analytics">
  <div class="container">


<a class="item" data-title="Trendz Analytics" href="/docs/trendz/"></a>


<a class="item" data-title="Kafka Streams" href="/docs/samples/analytics/kafka-streams/"></a>
  </div>
</div>


<div class="item" data-title="Other Features">
  <div class="container">


<a class="item" data-title="Device Connectivity Status" href="/docs/user-guide/device-connectivity-status/"></a>


<a class="item" data-title="Claiming Devices" href="/docs/user-guide/claiming-devices/"></a>


<a class="item item-new" data-title="Device provisioning" href="/docs/user-guide/device-provisioning/"></a>


<a class="item" data-title="Entity Views" href="/docs/user-guide/entity-views/"></a>


<a class="item" data-title="API Limits" href="/docs/user-guide/api-limits/"></a>


<a class="item item-new" data-title="Bulk Provisioning" href="/docs/user-guide/bulk-provisioning/"></a>


<a class="item item-pe" data-title="Entity Groups" href="/docs/pe/user-guide/groups/"></a>


<a class="item item-pe" data-title="Scheduler" href="/docs/pe/user-guide/scheduler/"></a>


<a class="item item-pe" data-title="Reporting" href="/docs/pe/user-guide/reporting/"></a>


<a class="item item-pe" data-title="CSV/XLS data export" href="/docs/pe/user-guide/csv-xls-data-export/"></a>


<a class="item item-pe" data-title="File Storage" href="/docs/pe/user-guide/file-storage/"></a>
  </div>
</div>


<div class="item" data-title="Security">
  <div class="container">


<a class="item" data-title="Audit Log" href="/docs/user-guide/audit-log/"></a>


<a class="item item-pe" data-title="Advanced RBAC for IoT" href="/docs/pe/user-guide/rbac/"></a>


<a class="item" data-title="OAuth 2 Support" href="/docs/user-guide/oauth-2-support/"></a>


<a class="item" data-title="MQTT over SSL" href="/docs/user-guide/mqtt-over-ssl/"></a>


<a class="item" data-title="Device authentication options" href="/docs/user-guide/device-credentials/"></a>


<a class="item" data-title="Access Token based authentication" href="/docs/user-guide/access-token/"></a>


<a class="item" data-title="Basic MQTT Credentials" href="/docs/user-guide/basic-mqtt/"></a>


<a class="item" data-title="X.509 Certificate based authentication" href="/docs/user-guide/certificates/"></a>
  </div>
</div>


<div class="item" data-title="Administration UI">
  <div class="container">


<a class="item" data-title="Tenants" href="/docs/user-guide/ui/tenants/"></a>


<a class="item" data-title="Customers" href="/docs/user-guide/ui/customers/"></a>


<a class="item" data-title="Users" href="/docs/user-guide/ui/users/"></a>


<a class="item" data-title="Assets" href="/docs/user-guide/ui/assets/"></a>


<a class="item" data-title="Devices" href="/docs/user-guide/ui/devices/"></a>


<a class="item" data-title="Rule Chains" href="/docs/user-guide/ui/rule-chains/"></a>


<div class="item" data-title="Widgets">
  <div class="container">


<a class="item item-new" data-title="Chart widgets" href="/docs/user-guide/ui/chart-widget/"></a>


<a class="item item-new" data-title="Entity Table widget" href="/docs/user-guide/ui/entity-table-widget/"></a>


<a class="item" data-title="Trip Animation widget" href="/docs/user-guide/ui/trip-animation-widget/"></a>


<a class="item" data-title="Advanced data key configuration" href="/docs/user-guide/ui/advanced-data-key-configuration/"></a>
  </div>
</div>


<a class="item" data-title="Dashboards" href="/docs/user-guide/ui/dashboards/"></a>


<a class="item" data-title="SMS Provider Settings" href="/docs/user-guide/ui/sms-provider-settings/"></a>


<a class="item" data-title="Mail Settings" href="/docs/user-guide/ui/mail-settings/"></a>
  </div>
</div>


<div class="item" data-title="Contribution Guide">
  <div class="container">


<a class="item" data-title="How to contribute" href="/docs/user-guide/contribution/how-to-contribute/"></a>


<a class="item" data-title="How to contribute your device integration guide" href="/docs/user-guide/contribution/how-to-contribute-your-device-integration-guide/"></a>


<a class="item" data-title="Rule Node development" href="/docs/user-guide/contribution/rule-node-development/"></a>


<a class="item" data-title="Widgets development (ThingsBoard v3.x)" href="/docs/user-guide/contribution/widgets-development/"></a>


<a class="item" data-title="Widgets development (ThingsBoard v2.x)" href="/docs/user-guide/contribution/widgets-development-before-3.0/"></a>
  </div>
</div>


<a class="item" data-title="Troubleshooting" href="/docs/user-guide/troubleshooting/"></a>


<a class="item" data-title="Release Notes" href="/docs/reference/releases/"></a>


<a class="item" data-title="Roadmap" href="/docs/reference/roadmap/"></a>
                </div>
            
        
            
            
                <a class="toc" href="/docs/guides/" >Guides</a>
            
        
            
            
                <a class="toc" href="/docs/user-guide/install/installation-options/" >Installation</a>
            
        
            
            
                <a class="toc" href="/docs/reference/" >Architecture</a>
            
        
            
            
                <a class="toc" href="/docs/api/" >API</a>
            
        
            
            
                <a class="toc" href="/docs/faq/" >FAQ</a>
            
        
    </div>
</div>








<section id="encyclopedia">
  
  <div id="docsToc">
        <div class="pi-accordion">
        


<a class="item" data-title="Community Edition" href="/docs/"></a>


<a class="item" data-title="What is ThingsBoard?" href="/docs/getting-started-guides/what-is-thingsboard/"></a>


<a class="item" data-title="How to connect your device?" href="/docs/getting-started-guides/connectivity/"></a>


<div class="item" data-title="Key concepts">
  <div class="container">


<a class="item" data-title="Entities and relations" href="/docs/user-guide/entities-and-relations/"></a>


<a class="item" data-title="Tenant Profiles" href="/docs/user-guide/tenant-profiles/"></a>


<a class="item item-new" data-title="Device Profiles" href="/docs/user-guide/device-profiles/"></a>


<a class="item" data-title="Attributes" href="/docs/user-guide/attributes/"></a>


<a class="item" data-title="Time-series data" href="/docs/user-guide/telemetry/"></a>


<a class="item" data-title="Alarms" href="/docs/user-guide/alarms/"></a>


<a class="item" data-title="Remote commands to devices" href="/docs/user-guide/rpc/"></a>


<a class="item item-new" data-title="OTA updates" href="/docs/user-guide/ota-updates/"></a>
  </div>
</div>


<div class="item" data-title="Dashboards">
  <div class="container">


<a class="item" data-title="Overview" href="/docs/user-guide/dashboards/"></a>


<a class="item" data-title="Aliases" href="/docs/user-guide/ui/aliases/"></a>


<a class="item" data-title="Widget Actions" href="/docs/user-guide/ui/widget-actions/"></a>


<a class="item" data-title="Widgets Library" href="/docs/user-guide/ui/widget-library/"></a>
  </div>
</div>


<div class="item" data-title="Rule engine">
  <div class="container">


<a class="item" data-title="Getting Started" href="/docs/user-guide/rule-engine-2-0/re-getting-started/"></a>


<a class="item" data-title="Overview" href="/docs/user-guide/rule-engine-2-0/overview/"></a>


<a class="item" data-title="Architecture" href="/docs/user-guide/rule-engine-2-0/architecture/"></a>


<div class="item" data-title="Nodes">
  <div class="container">


<a class="item" data-title="Filter Nodes" href="/docs/user-guide/rule-engine-2-0/filter-nodes/"></a>


<a class="item" data-title="Enrichment Nodes" href="/docs/user-guide/rule-engine-2-0/enrichment-nodes/"></a>


<a class="item" data-title="Transformation Nodes" href="/docs/user-guide/rule-engine-2-0/transformation-nodes/"></a>


<a class="item" data-title="Action Nodes" href="/docs/user-guide/rule-engine-2-0/action-nodes/"></a>


<a class="item" data-title="External Nodes" href="/docs/user-guide/rule-engine-2-0/external-nodes/"></a>
  </div>
</div>


<div class="item item-pe" data-title="PE Nodes">
  <div class="container">


<a class="item" data-title="Transformation Nodes" href="/docs/pe/user-guide/rule-engine-2-0/transformation-nodes/"></a>


<a class="item" data-title="Action Nodes" href="/docs/pe/user-guide/rule-engine-2-0/action-nodes/"></a>


<a class="item" data-title="Analytics Nodes" href="/docs/pe/user-guide/rule-engine-2-0/analytics-nodes/"></a>
  </div>
</div>


<a class="item" data-title="Custom Rule Nodes" href="/docs/user-guide/contribution/rule-node-development/"></a>
  </div>
</div>


<div class="item item-pe" data-title="White-labeling">
  <div class="container">


<a class="item" data-title="Overview" href="/docs/pe/user-guide/white-labeling/"></a>


<a class="item" data-title="Self-registration" href="/docs/pe/user-guide/self-registration/"></a>


<a class="item" data-title="Custom Translations" href="/docs/pe/user-guide/custom-translation/"></a>


<a class="item" data-title="Custom Menu" href="/docs/pe/user-guide/custom-menu/"></a>
  </div>
</div>


<div class="item item-pe" data-title="Integrations">
  <div class="container">


<a class="item" data-title="Overview" href="/docs/user-guide/integrations/"></a>


<a class="item" data-title="Remote Integrations" href="/docs/user-guide/integrations/remote-integrations/"></a>


<a class="item" data-title="HTTP" href="/docs/user-guide/integrations/http/"></a>


<a class="item" data-title="MQTT" href="/docs/user-guide/integrations/mqtt/"></a>


<a class="item" data-title="OPC-UA" href="/docs/user-guide/integrations/opc-ua/"></a>


<a class="item" data-title="Actility ThingPark" href="/docs/user-guide/integrations/thingpark/"></a>


<a class="item" data-title="TheThingsNetwork" href="/docs/user-guide/integrations/ttn/"></a>


<a class="item" data-title="TheThingsIndustries" href="/docs/user-guide/integrations/tti/"></a>


<a class="item" data-title="LORIOT" href="/docs/user-guide/integrations/loriot/"></a>


<a class="item" data-title="AWS IoT" href="/docs/user-guide/integrations/aws-iot/"></a>


<a class="item" data-title="AWS Kinesis" href="/docs/user-guide/integrations/aws-kinesis/"></a>


<a class="item" data-title="IBM Watson" href="/docs/user-guide/integrations/ibm-watson-iot/"></a>


<a class="item" data-title="Azure Event Hub" href="/docs/user-guide/integrations/azure-event-hub/"></a>


<a class="item" data-title="Azure IoT Hub" href="/docs/user-guide/integrations/azure-iot-hub/"></a>


<a class="item" data-title="TCP" href="/docs/user-guide/integrations/tcp/"></a>


<a class="item" data-title="UDP" href="/docs/user-guide/integrations/udp/"></a>


<a class="item" data-title="SigFox" href="/docs/user-guide/integrations/sigfox/"></a>


<a class="item" data-title="Ocean Connect" href="/docs/user-guide/integrations/ocean-connect/"></a>


<a class="item" data-title="Custom Integration development guide" href="/docs/user-guide/integrations/custom/"></a>


<a class="item" data-title="Notifications and Alarms on your smartphone using Telegram Bot" href="/docs/user-guide/rule-engine-2-0/tutorials/integration-with-telegram-bot/"></a>
  </div>
</div>


<div class="item" data-title="Analytics">
  <div class="container">


<a class="item" data-title="Trendz Analytics" href="/docs/trendz/"></a>


<a class="item" data-title="Kafka Streams" href="/docs/samples/analytics/kafka-streams/"></a>
  </div>
</div>


<div class="item" data-title="Other Features">
  <div class="container">


<a class="item" data-title="Device Connectivity Status" href="/docs/user-guide/device-connectivity-status/"></a>


<a class="item" data-title="Claiming Devices" href="/docs/user-guide/claiming-devices/"></a>


<a class="item item-new" data-title="Device provisioning" href="/docs/user-guide/device-provisioning/"></a>


<a class="item" data-title="Entity Views" href="/docs/user-guide/entity-views/"></a>


<a class="item" data-title="API Limits" href="/docs/user-guide/api-limits/"></a>


<a class="item item-new" data-title="Bulk Provisioning" href="/docs/user-guide/bulk-provisioning/"></a>


<a class="item item-pe" data-title="Entity Groups" href="/docs/pe/user-guide/groups/"></a>


<a class="item item-pe" data-title="Scheduler" href="/docs/pe/user-guide/scheduler/"></a>


<a class="item item-pe" data-title="Reporting" href="/docs/pe/user-guide/reporting/"></a>


<a class="item item-pe" data-title="CSV/XLS data export" href="/docs/pe/user-guide/csv-xls-data-export/"></a>


<a class="item item-pe" data-title="File Storage" href="/docs/pe/user-guide/file-storage/"></a>
  </div>
</div>


<div class="item" data-title="Security">
  <div class="container">


<a class="item" data-title="Audit Log" href="/docs/user-guide/audit-log/"></a>


<a class="item item-pe" data-title="Advanced RBAC for IoT" href="/docs/pe/user-guide/rbac/"></a>


<a class="item" data-title="OAuth 2 Support" href="/docs/user-guide/oauth-2-support/"></a>


<a class="item" data-title="MQTT over SSL" href="/docs/user-guide/mqtt-over-ssl/"></a>


<a class="item" data-title="Device authentication options" href="/docs/user-guide/device-credentials/"></a>


<a class="item" data-title="Access Token based authentication" href="/docs/user-guide/access-token/"></a>


<a class="item" data-title="Basic MQTT Credentials" href="/docs/user-guide/basic-mqtt/"></a>


<a class="item" data-title="X.509 Certificate based authentication" href="/docs/user-guide/certificates/"></a>
  </div>
</div>


<div class="item" data-title="Administration UI">
  <div class="container">


<a class="item" data-title="Tenants" href="/docs/user-guide/ui/tenants/"></a>


<a class="item" data-title="Customers" href="/docs/user-guide/ui/customers/"></a>


<a class="item" data-title="Users" href="/docs/user-guide/ui/users/"></a>


<a class="item" data-title="Assets" href="/docs/user-guide/ui/assets/"></a>


<a class="item" data-title="Devices" href="/docs/user-guide/ui/devices/"></a>


<a class="item" data-title="Rule Chains" href="/docs/user-guide/ui/rule-chains/"></a>


<div class="item" data-title="Widgets">
  <div class="container">


<a class="item item-new" data-title="Chart widgets" href="/docs/user-guide/ui/chart-widget/"></a>


<a class="item item-new" data-title="Entity Table widget" href="/docs/user-guide/ui/entity-table-widget/"></a>


<a class="item" data-title="Trip Animation widget" href="/docs/user-guide/ui/trip-animation-widget/"></a>


<a class="item" data-title="Advanced data key configuration" href="/docs/user-guide/ui/advanced-data-key-configuration/"></a>
  </div>
</div>


<a class="item" data-title="Dashboards" href="/docs/user-guide/ui/dashboards/"></a>


<a class="item" data-title="SMS Provider Settings" href="/docs/user-guide/ui/sms-provider-settings/"></a>


<a class="item" data-title="Mail Settings" href="/docs/user-guide/ui/mail-settings/"></a>
  </div>
</div>


<div class="item" data-title="Contribution Guide">
  <div class="container">


<a class="item" data-title="How to contribute" href="/docs/user-guide/contribution/how-to-contribute/"></a>


<a class="item" data-title="How to contribute your device integration guide" href="/docs/user-guide/contribution/how-to-contribute-your-device-integration-guide/"></a>


<a class="item" data-title="Rule Node development" href="/docs/user-guide/contribution/rule-node-development/"></a>


<a class="item" data-title="Widgets development (ThingsBoard v3.x)" href="/docs/user-guide/contribution/widgets-development/"></a>


<a class="item" data-title="Widgets development (ThingsBoard v2.x)" href="/docs/user-guide/contribution/widgets-development-before-3.0/"></a>
  </div>
</div>


<a class="item" data-title="Troubleshooting" href="/docs/user-guide/troubleshooting/"></a>


<a class="item" data-title="Release Notes" href="/docs/reference/releases/"></a>


<a class="item" data-title="Roadmap" href="/docs/reference/roadmap/"></a>
        </div> <!-- /pi-accordion -->
  </div> <!-- /docsToc -->
  
  <div id="docsContent" class=" hasTocContent">
      <div id="table-of-contents">
          
              <h4>On this page</h4>
          
      </div>
      <div id="top-spacer"></div>
      <h1>Widget Actions</h1>
      <div id="content">
          <ul id="markdown-toc">
  <li><a href="#introduction" id="markdown-toc-introduction">Introduction</a></li>
  <li><a href="#action-types" id="markdown-toc-action-types">Action types</a></li>
  <li><a href="#action-types-configuration" id="markdown-toc-action-types-configuration">Action types configuration</a>    <ul>
      <li><a href="#navigate-to-new-dashboard-state" id="markdown-toc-navigate-to-new-dashboard-state">Navigate to new dashboard state</a></li>
      <li><a href="#update-current-dashboard-state" id="markdown-toc-update-current-dashboard-state">Update current dashboard state</a></li>
      <li><a href="#navigate-to-other-dashboard" id="markdown-toc-navigate-to-other-dashboard">Navigate to other dashboard</a></li>
      <li><a href="#custom-action" id="markdown-toc-custom-action">Custom action</a></li>
      <li><a href="#custom-action-with-html-template" id="markdown-toc-custom-action-with-html-template">Custom action (with HTML template)</a></li>
    </ul>
  </li>
  <li><a href="#action-sources" id="markdown-toc-action-sources">Action sources</a>    <ul>
      <li><a href="#action-sources-configuration" id="markdown-toc-action-sources-configuration">Action sources configuration</a>        <ul>
          <li><a href="#1-action-cell-button" id="markdown-toc-1-action-cell-button">1. Action cell button</a></li>
          <li><a href="#2-widget-header-button" id="markdown-toc-2-widget-header-button">2. Widget header button</a></li>
          <li><a href="#3-on-row-click" id="markdown-toc-3-on-row-click">3. On row click</a></li>
          <li><a href="#4-on-row-double-click" id="markdown-toc-4-on-row-double-click">4. On row double click</a></li>
          <li><a href="#5-on-node-selected-only-in-entities-hierarchy-widget" id="markdown-toc-5-on-node-selected-only-in-entities-hierarchy-widget">5. On node selected (only in Entities Hierarchy widget)</a></li>
          <li><a href="#6-on-html-element-click-only-in-html-cards-and-value-title-widgets" id="markdown-toc-6-on-html-element-click-only-in-html-cards-and-value-title-widgets">6. On HTML element click (only in HTML Cards and Value Title widgets)</a></li>
        </ul>
      </li>
      <li><a href="#map-widget-action-sources" id="markdown-toc-map-widget-action-sources">Map widget action sources</a>        <ul>
          <li><a href="#1-on-marker-click" id="markdown-toc-1-on-marker-click">1. On marker click</a></li>
          <li><a href="#2-on-polygon-click" id="markdown-toc-2-on-polygon-click">2. On polygon click</a></li>
          <li><a href="#3-tooltip-tag-action" id="markdown-toc-3-tooltip-tag-action">3. Tooltip tag action</a></li>
        </ul>
      </li>
    </ul>
  </li>
  <li><a href="#special-actions-settings" id="markdown-toc-special-actions-settings">Special actions settings</a>    <ul>
      <li><a href="#open-right-dashboard-layout-mobile-view" id="markdown-toc-open-right-dashboard-layout-mobile-view">Open right dashboard layout (mobile view)</a></li>
      <li><a href="#open-in-a-separate-dialog" id="markdown-toc-open-in-a-separate-dialog">Open in a separate dialog</a></li>
      <li><a href="#set-entity-from-widget" id="markdown-toc-set-entity-from-widget">Set entity from widget</a></li>
    </ul>
  </li>
</ul>

<h2 id="introduction">Introduction</h2>

<p>Actions feature can be treated as navigation among <a href="/docs/user-guide/dashboards/#states">dashboard’s states</a> or between different <a href="/docs/user-guide/dashboards/">dashboards</a>.
Actions allow quickly and easily configuring the transition to created state, transferring to other dashboards, or even updating the dashboard you are in. 
Depending on the widget, the action sources differ. However, the type of action you are able to choose will be the same for all widgets.</p>

<p>Actions are adjusted in the Edit mode of the needed widget.</p>

<p>To fully understand how to use Actions, you have to add a State to your widget. How to do this you should <a href="/docs/user-guide/dashboards/#states">read here</a>.</p>

<h2 id="action-types">Action types</h2>

<p><em>Types of action</em> define which exactly action will be taken.
There are five action types that are the same for all widgets.
Learn how to configure action types with the example on <a href="/docs/user-guide/ui/widget-actions/#action-types-configuration">Entity Cards widget</a> examples.</p>

<h2 id="action-types-configuration">Action types configuration</h2>

<p>Since the action types are the same for all widgets, in this tutorial will be used the <a href="/docs/user-guide/ui/widget-actions/#1-action-cell-button">Action Cell Button action source</a> to explain all action types,
and they will be explained using the Entity Cards widget examples.</p>

<h5 id="navigate-to-new-dashboard-state">Navigate to new dashboard state</h5>

<p>States are so-called levels that allow you to navigate between different devices, assets, and widget objects to see the information you need in more detail.
When choosing the <em>Navigate to new dashboard state</em> action type, you will be transferred to the previously created state of your choice.
How to add states to your dashboard, please <a href="/docs/user-guide/dashboards/#states">read here</a>.</p>

<p>After a state has been added, we can configure a <em>Navigate to new dashboard state</em> action type:</p>

<ol>
  <li>In the widget’s Edit mode move to the last cell “Actions”.</li>
  <li>Click the “+” icon on the right of the window to add a new action.</li>
  <li>As an example for this manual, in the top drop-down menu, choose an “Action cell button” action source.</li>
  <li>In the next line input a name for the action and choose an icon that will represent a button. With this button, action will be performed.</li>
  <li>In the drop-down menu “Type”, choose a <em>Navigate to new dashboard state</em> action type.</li>
  <li>After choosing an action type, the drop-down menu “Target dashboard state” appears. Select a previously created state you’d like to be transitioned to.</li>
  <li>When the desired state has been selected, click the “Add” button at the bottom of the “Add action” window.</li>
  <li>Now you see configured action, so you can double-check action source, icon, and action type.</li>
  <li>Apply changes by clicking the orange tick icon in the top right of the window and then close the details window.</li>
  <li>Save applied changes by clicking the orange tick icon “Apply changes” in the bottom right of the screen.</li>
</ol>

<p>After saving changes, you can see an icon-button opposite the entity names. Clicking any of these icons will bring you to the previously selected state.</p>

<div id="0">
  <div itemscope="" itemtype="http://schema.org/ImageGallery" class="images-gallery" style="justify-content: start;">
    <figure itemprop="associatedMedia" itemscope="" itemtype="http://schema.org/ImageObject" style="max-width: min(225px, 100%);
                    max-height: min(225px, 100%);" class="list-item">
<a href="/images/user-guide/ui/widgets/actions/entity-cards/navigate-new-state-entity.png" onclick="return false;" itemprop="contentUrl"> <img src="/images/user-guide/ui/widgets/actions/entity-cards/navigate-new-state-entity-preview.png" itemprop="thumbnail" alt="image" style="max-width: min(225px, 100%);
                                max-height: min(225px, 100%);" /> </a>       <figcaption itemprop="caption description" style="display: none"></figcaption>
    </figure>
    <figure itemprop="associatedMedia" itemscope="" itemtype="http://schema.org/ImageObject" style="max-width: min(225px, 100%);
                    max-height: min(225px, 100%);" class="list-item">
<a href="/images/user-guide/ui/widgets/actions/entity-cards/navigate-new-state-entity-1.png" onclick="return false;" itemprop="contentUrl"> <img src="/images/user-guide/ui/widgets/actions/entity-cards/navigate-new-state-entity-1-preview.png" itemprop="thumbnail" alt="image" style="max-width: min(225px, 100%);
                                max-height: min(225px, 100%);" /> </a>       <figcaption itemprop="caption description" style="display: none"></figcaption>
    </figure>
    <figure itemprop="associatedMedia" itemscope="" itemtype="http://schema.org/ImageObject" style="max-width: min(225px, 100%);
                    max-height: min(225px, 100%);" class="list-item">
<a href="/images/user-guide/ui/widgets/actions/entity-cards/navigate-new-state-entity-2.png" onclick="return false;" itemprop="contentUrl"> <img src="/images/user-guide/ui/widgets/actions/entity-cards/navigate-new-state-entity-2-preview.png" itemprop="thumbnail" alt="image" style="max-width: min(225px, 100%);
                                max-height: min(225px, 100%);" /> </a>       <figcaption itemprop="caption description" style="display: none"></figcaption>
    </figure>
    <figure itemprop="associatedMedia" itemscope="" itemtype="http://schema.org/ImageObject" style="max-width: min(225px, 100%);
                    max-height: min(225px, 100%);" class="list-item">
<a href="/images/user-guide/ui/widgets/actions/entity-cards/navigate-new-state-entity-3.png" onclick="return false;" itemprop="contentUrl"> <img src="/images/user-guide/ui/widgets/actions/entity-cards/navigate-new-state-entity-3-preview.png" itemprop="thumbnail" alt="image" style="max-width: min(225px, 100%);
                                max-height: min(225px, 100%);" /> </a>       <figcaption itemprop="caption description" style="display: none"></figcaption>
    </figure>
    <figure itemprop="associatedMedia" itemscope="" itemtype="http://schema.org/ImageObject" style="max-width: min(225px, 100%);
                    max-height: min(225px, 100%);" class="list-item">
<a href="/images/user-guide/ui/widgets/actions/entity-cards/navigate-new-state-entity-4.png" onclick="return false;" itemprop="contentUrl"> <img src="/images/user-guide/ui/widgets/actions/entity-cards/navigate-new-state-entity-4-preview.png" itemprop="thumbnail" alt="image" style="max-width: min(225px, 100%);
                                max-height: min(225px, 100%);" /> </a>       <figcaption itemprop="caption description" style="display: none"></figcaption>
    </figure>
    <figure itemprop="associatedMedia" itemscope="" itemtype="http://schema.org/ImageObject" style="max-width: min(225px, 100%);
                    max-height: min(225px, 100%);" class="list-item">
<a href="/images/user-guide/ui/widgets/actions/entity-cards/navigate-new-state-entity-5.png" onclick="return false;" itemprop="contentUrl"> <img src="/images/user-guide/ui/widgets/actions/entity-cards/navigate-new-state-entity-5-preview.png" itemprop="thumbnail" alt="image" style="max-width: min(225px, 100%);
                                max-height: min(225px, 100%);" /> </a>       <figcaption itemprop="caption description" style="display: none"></figcaption>
    </figure>
    <figure itemprop="associatedMedia" itemscope="" itemtype="http://schema.org/ImageObject" style="max-width: min(225px, 100%);
                    max-height: min(225px, 100%);" class="list-item">
<a href="/images/user-guide/ui/widgets/actions/entity-cards/navigate-new-state-entity-6.png" onclick="return false;" itemprop="contentUrl"> <img src="/images/user-guide/ui/widgets/actions/entity-cards/navigate-new-state-entity-6-preview.png" itemprop="thumbnail" alt="image" style="max-width: min(225px, 100%);
                                max-height: min(225px, 100%);" /> </a>       <figcaption itemprop="caption description" style="display: none"></figcaption>
    </figure>
  </div>
</div>

<script>
    window.addEventListener("load", function() {
        window.removeEventListener("load", arguments.callee, false);

        if(!document.getElementsByClassName('pswp').length){
            document.body.insertAdjacentHTML('beforeend',
                '<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">\n' +
                '        <div class="pswp__bg"></div>\n' +
                '        <div class="pswp__scroll-wrap">\n' +
                '            <div class="pswp__container">\n' +
                '                <div class="pswp__item"></div>\n' +
                '                <div class="pswp__item"></div>\n' +
                '                <div class="pswp__item"></div>\n' +
                '            </div>\n' +
                '\n' +
                '            <div class="pswp__ui pswp__ui--hidden">\n' +
                '\n' +
                '                <div class="pswp__top-bar">\n' +
                '                    <div class="pswp__counter"></div>\n' +
                '\n' +
                '                    <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>\n' +
                '\n' +
                '                    <button class="pswp__button pswp__button--share" title="Share"></button>\n' +
                '\n' +
                '                    <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>\n' +
                '\n' +
                '                    <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>\n' +
                '\n' +
                '                    <div class="pswp__preloader">\n' +
                '                        <div class="pswp__preloader__icn">\n' +
                '                            <div class="pswp__preloader__cut">\n' +
                '                                <div class="pswp__preloader__donut"></div>\n' +
                '                            </div>\n' +
                '                        </div>\n' +
                '                    </div>\n' +
                '                </div>\n' +
                '                <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">\n' +
                '                    <div class="pswp__share-tooltip"></div>\n' +
                '                </div>\n' +
                '                <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">\n' +
                '                </button>\n' +
                '                <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">\n' +
                '                </button>\n' +
                '                <div class="pswp__caption">\n' +
                '                    <div class="pswp__caption__center"></div>\n' +
                '                </div>\n' +
                '            </div>\n' +
                '        </div>\n' +
                '    </div>'
            );
        }

        var container = document.getElementById('0');

        var initPhotoSwipeFromDOM = function(gallerySelector) {
            var parseThumbnailElements = function(el) {
                var thumbElements = el.childNodes,
                    numNodes = thumbElements.length,
                    items = [],
                    figureEl,
                    linkEl,
                    size,
                    item;

                for(var i = 0; i < numNodes; i++) {

                    figureEl = thumbElements[i];
                    if(figureEl.nodeType !== 1) {
                        continue;
                    }
                    linkEl = figureEl.children[0];
                    size = linkEl.children[0];
                    item = {
                        src: linkEl.getAttribute('href'),
                        w: 2500,
                        h: 0,
                        sizeLoaded: false
                    };

                    if(figureEl.children.length > 1) {
                        item.title = figureEl.children[1].innerHTML;
                    }
                    if(linkEl.children.length > 0) {
                        item.msrc = linkEl.children[0].getAttribute('src');
                    }
                    if(item.msrc === item.src){
                        item.w = parseInt(size.naturalWidth, 10);
                        item.h = parseInt(size.naturalHeight, 10);
                    }

                    item.el = figureEl;
                    items.push(item);
                }
                return items;
            };

            var closest = function closest(el, fn) {
                return el && ( fn(el) ? el : closest(el.parentNode, fn) );
            };

            var onThumbnailsClick = function(e) {
                e = e || window.event;
                e.preventDefault ? e.preventDefault() : e.returnValue = false;

                var eTarget = e.target || e.srcElement;

                var clickedListItem = closest(eTarget, function(el) {
                    return (el.tagName && el.tagName.toUpperCase() === 'FIGURE');
                });

                if(!clickedListItem) {
                    return;
                }

                var clickedGallery = clickedListItem.parentNode,
                    childNodes = clickedListItem.parentNode.childNodes,
                    numChildNodes = childNodes.length,
                    nodeIndex = 0,
                    index;

                for (var i = 0; i < numChildNodes; i++) {
                    if(childNodes[i].nodeType !== 1) {
                        continue;
                    }

                    if(childNodes[i] === clickedListItem) {
                        index = nodeIndex;
                        break;
                    }
                    nodeIndex++;
                }

                if(index >= 0) {
                    openPhotoSwipe( index, clickedGallery );
                }
                return false;
            };

            var photoswipeParseHash = function() {
                var hash = window.location.hash.substring(1),
                    params = {};

                if(hash.length < 5) {
                    return params;
                }

                var vars = hash.split('&');
                for (var i = 0; i < vars.length; i++) {
                    if(!vars[i]) {
                        continue;
                    }
                    var pair = vars[i].split('=');
                    if(pair.length < 2) {
                        continue;
                    }
                    params[pair[0]] = pair[1];
                }

                if(params.gid) {
                    params.gid = parseInt(params.gid, 10);
                }

                return params;
            };

            var openPhotoSwipe = function(index, galleryElement, disableAnimation, fromURL) {
                var pswpElement = document.querySelectorAll('.pswp')[0],
                    gallery,
                    options,
                    items;

                items = parseThumbnailElements(galleryElement);

                options = {
                    galleryUID: galleryElement.getAttribute('data-pswp-uid'),
                    getThumbBoundsFn: function(index) {
                        var thumbnail = items[index].el.getElementsByTagName('img')[0], // find thumbnail
                            pageYScroll = window.pageYOffset || document.documentElement.scrollTop,
                            rect = thumbnail.getBoundingClientRect();
                        return {x:rect.left, y:rect.top + pageYScroll, w:rect.width};
                    },
                    bgOpacity: 0.8,
                    closeOnScroll: false,
                    shareEl: false,
                    fullscreenEl: false,
                    zoomEl: true,
                    history: false,
                    loop: false
                };

                if(fromURL) {
                    if(options.galleryPIDs) {
                        for(var j = 0; j < items.length; j++) {
                            if(items[j].pid == index) {
                                options.index = j;
                                break;
                            }
                        }
                    } else {
                        options.index = parseInt(index, 10) - 1;
                    }
                } else {
                    options.index = parseInt(index, 10);
                }

                if( isNaN(options.index) ) {
                    return;
                }

                if(disableAnimation) {
                    options.showAnimationDuration = 0;
                }

                gallery = new PhotoSwipe( pswpElement, PhotoSwipeUI_Default, items, options);

                gallery.listen('gettingData', function(index, item) {
                    if (!item.sizeLoaded) {
                        item.sizeLoaded = true;
                        var img = new Image();
                        img.onload = function() {
                            item.w = this.width;
                            item.h = this.height;
                            gallery.updateSize(true);
                        }
                        img.src = item.src;
                    }
                });

                gallery.init();

                var buttonLeft = pswpElement.getElementsByClassName('pswp__button--arrow--left')[0];
                var buttonRight = pswpElement.getElementsByClassName('pswp__button--arrow--right')[0];

                buttonLeft.hidden = gallery.getCurrentIndex() === 0;
                buttonRight.hidden = gallery.getCurrentIndex() + 1 === gallery.items.length;

                gallery.listen('beforeChange', function() {
                        buttonLeft.hidden = gallery.getCurrentIndex() === 0;
                        buttonRight.hidden = gallery.getCurrentIndex() + 1 === gallery.items.length;
                    }
                );
            };

            var galleryElements = container.querySelectorAll( gallerySelector );

            for(var i = 0, l = galleryElements.length; i < l; i++) {
                galleryElements[i].setAttribute('data-pswp-uid', i+1);
                galleryElements[i].onclick = onThumbnailsClick;
            }

            var hashData = photoswipeParseHash();
            if(hashData.pid && hashData.gid) {
                openPhotoSwipe( hashData.pid ,  galleryElements[ hashData.gid - 1 ], true, true );
            }
        };

        initPhotoSwipeFromDOM('.images-gallery');
    }, false)
</script>

<h5 id="update-current-dashboard-state">Update current dashboard state</h5>

<p>This action type allows updating a dashboard that you are currently on.
While using a dashboard, you can view detailed information about a specific device/asset in real-time.
The most common use of this action type is through Chart widgets where you can see the details more accurately.
For starters let’s add a Chart widget to the Dashboard to configure the <em>Update current dashboard state</em> action type:</p>

<ol>
  <li>Enter Dashboard’s Edit mode and in the drop-down “Select widget” menu choose Charts: Timeseries Line Chart.</li>
  <li>In the “Add widget” window type input your data source, in this manual for example is used pressure data. Click “Add” at the right bottom of the widget.</li>
  <li>We can see that the Chart widget has appeared on the dashboard, but it has no data to display yet.</li>
  <li>Enter Edit mode of the Table widget by clicking the Pencil icon on the right top of the widget.</li>
  <li>In the widget’s Edit mode move to the last cell “Actions”.</li>
  <li>Click the “+” icon on the right of the window to add a new action.</li>
  <li>As an example for this manual, in the top drop-down menu, choose an “Action cell button” action source.</li>
  <li>In the next line input a name for the action and choose an icon that will represent a button. With this button, action will be performed.</li>
  <li>In the drop-down menu “Type”, choose an <em>Update current dashboard state</em> action type.</li>
  <li>After choosing an action type, click “Add” at the right bottom of the “Add action” window.</li>
  <li>Now you see configured action, so you can double-check action source, icon, and action type.</li>
  <li>Apply changes by clicking the orange tick icon in the top right of the window and then close the details window.</li>
  <li>Save applied changes by clicking the orange tick icon “Apply changes” in the bottom right of the screen.</li>
</ol>

<p>After saving changes, you will see button icons opposite the entity names. Clicking on any of these icons will update the entity details and they will be shown on the Chart widget on the current dashboard.</p>

<div id="0">
  <div itemscope="" itemtype="http://schema.org/ImageGallery" class="images-gallery" style="justify-content: start;">
    <figure itemprop="associatedMedia" itemscope="" itemtype="http://schema.org/ImageObject" style="max-width: min(225px, 100%);
                    max-height: min(225px, 100%);" class="list-item">
<a href="/images/user-guide/ui/widgets/actions/entity-cards/update-current-dash-cards-8.png" onclick="return false;" itemprop="contentUrl"> <img src="/images/user-guide/ui/widgets/actions/entity-cards/update-current-dash-cards-8-preview.png" itemprop="thumbnail" alt="image" style="max-width: min(225px, 100%);
                                max-height: min(225px, 100%);" /> </a>       <figcaption itemprop="caption description" style="display: none"></figcaption>
    </figure>
    <figure itemprop="associatedMedia" itemscope="" itemtype="http://schema.org/ImageObject" style="max-width: min(225px, 100%);
                    max-height: min(225px, 100%);" class="list-item">
<a href="/images/user-guide/ui/widgets/actions/entity-cards/update-current-dash-cards-9.png" onclick="return false;" itemprop="contentUrl"> <img src="/images/user-guide/ui/widgets/actions/entity-cards/update-current-dash-cards-9-preview.png" itemprop="thumbnail" alt="image" style="max-width: min(225px, 100%);
                                max-height: min(225px, 100%);" /> </a>       <figcaption itemprop="caption description" style="display: none"></figcaption>
    </figure>
    <figure itemprop="associatedMedia" itemscope="" itemtype="http://schema.org/ImageObject" style="max-width: min(225px, 100%);
                    max-height: min(225px, 100%);" class="list-item">
<a href="/images/user-guide/ui/widgets/actions/entity-cards/update-current-dash-cards-10.png" onclick="return false;" itemprop="contentUrl"> <img src="/images/user-guide/ui/widgets/actions/entity-cards/update-current-dash-cards-10-preview.png" itemprop="thumbnail" alt="image" style="max-width: min(225px, 100%);
                                max-height: min(225px, 100%);" /> </a>       <figcaption itemprop="caption description" style="display: none"></figcaption>
    </figure>
    <figure itemprop="associatedMedia" itemscope="" itemtype="http://schema.org/ImageObject" style="max-width: min(225px, 100%);
                    max-height: min(225px, 100%);" class="list-item">
<a href="/images/user-guide/ui/widgets/actions/entity-cards/update-current-dash-cards-11.png" onclick="return false;" itemprop="contentUrl"> <img src="/images/user-guide/ui/widgets/actions/entity-cards/update-current-dash-cards-11-preview.png" itemprop="thumbnail" alt="image" style="max-width: min(225px, 100%);
                                max-height: min(225px, 100%);" /> </a>       <figcaption itemprop="caption description" style="display: none"></figcaption>
    </figure>
    <figure itemprop="associatedMedia" itemscope="" itemtype="http://schema.org/ImageObject" style="max-width: min(225px, 100%);
                    max-height: min(225px, 100%);" class="list-item">
<a href="/images/user-guide/ui/widgets/actions/entity-cards/update-current-dash-cards.png" onclick="return false;" itemprop="contentUrl"> <img src="/images/user-guide/ui/widgets/actions/entity-cards/update-current-dash-cards-preview.png" itemprop="thumbnail" alt="image" style="max-width: min(225px, 100%);
                                max-height: min(225px, 100%);" /> </a>       <figcaption itemprop="caption description" style="display: none"></figcaption>
    </figure>
    <figure itemprop="associatedMedia" itemscope="" itemtype="http://schema.org/ImageObject" style="max-width: min(225px, 100%);
                    max-height: min(225px, 100%);" class="list-item">
<a href="/images/user-guide/ui/widgets/actions/entity-cards/update-current-dash-cards-1.png" onclick="return false;" itemprop="contentUrl"> <img src="/images/user-guide/ui/widgets/actions/entity-cards/update-current-dash-cards-1-preview.png" itemprop="thumbnail" alt="image" style="max-width: min(225px, 100%);
                                max-height: min(225px, 100%);" /> </a>       <figcaption itemprop="caption description" style="display: none"></figcaption>
    </figure>
    <figure itemprop="associatedMedia" itemscope="" itemtype="http://schema.org/ImageObject" style="max-width: min(225px, 100%);
                    max-height: min(225px, 100%);" class="list-item">
<a href="/images/user-guide/ui/widgets/actions/entity-cards/update-current-dash-cards-2.png" onclick="return false;" itemprop="contentUrl"> <img src="/images/user-guide/ui/widgets/actions/entity-cards/update-current-dash-cards-2-preview.png" itemprop="thumbnail" alt="image" style="max-width: min(225px, 100%);
                                max-height: min(225px, 100%);" /> </a>       <figcaption itemprop="caption description" style="display: none"></figcaption>
    </figure>
    <figure itemprop="associatedMedia" itemscope="" itemtype="http://schema.org/ImageObject" style="max-width: min(225px, 100%);
                    max-height: min(225px, 100%);" class="list-item">
<a href="/images/user-guide/ui/widgets/actions/entity-cards/update-current-dash-cards-3.png" onclick="return false;" itemprop="contentUrl"> <img src="/images/user-guide/ui/widgets/actions/entity-cards/update-current-dash-cards-3-preview.png" itemprop="thumbnail" alt="image" style="max-width: min(225px, 100%);
                                max-height: min(225px, 100%);" /> </a>       <figcaption itemprop="caption description" style="display: none"></figcaption>
    </figure>
    <figure itemprop="associatedMedia" itemscope="" itemtype="http://schema.org/ImageObject" style="max-width: min(225px, 100%);
                    max-height: min(225px, 100%);" class="list-item">
<a href="/images/user-guide/ui/widgets/actions/entity-cards/update-current-dash-cards-4.png" onclick="return false;" itemprop="contentUrl"> <img src="/images/user-guide/ui/widgets/actions/entity-cards/update-current-dash-cards-4-preview.png" itemprop="thumbnail" alt="image" style="max-width: min(225px, 100%);
                                max-height: min(225px, 100%);" /> </a>       <figcaption itemprop="caption description" style="display: none"></figcaption>
    </figure>
    <figure itemprop="associatedMedia" itemscope="" itemtype="http://schema.org/ImageObject" style="max-width: min(225px, 100%);
                    max-height: min(225px, 100%);" class="list-item">
<a href="/images/user-guide/ui/widgets/actions/entity-cards/update-current-dash-cards-5.png" onclick="return false;" itemprop="contentUrl"> <img src="/images/user-guide/ui/widgets/actions/entity-cards/update-current-dash-cards-5-preview.png" itemprop="thumbnail" alt="image" style="max-width: min(225px, 100%);
                                max-height: min(225px, 100%);" /> </a>       <figcaption itemprop="caption description" style="display: none"></figcaption>
    </figure>
    <figure itemprop="associatedMedia" itemscope="" itemtype="http://schema.org/ImageObject" style="max-width: min(225px, 100%);
                    max-height: min(225px, 100%);" class="list-item">
<a href="/images/user-guide/ui/widgets/actions/entity-cards/update-current-dash-cards-6.png" onclick="return false;" itemprop="contentUrl"> <img src="/images/user-guide/ui/widgets/actions/entity-cards/update-current-dash-cards-6-preview.png" itemprop="thumbnail" alt="image" style="max-width: min(225px, 100%);
                                max-height: min(225px, 100%);" /> </a>       <figcaption itemprop="caption description" style="display: none"></figcaption>
    </figure>
    <figure itemprop="associatedMedia" itemscope="" itemtype="http://schema.org/ImageObject" style="max-width: min(225px, 100%);
                    max-height: min(225px, 100%);" class="list-item">
<a href="/images/user-guide/ui/widgets/actions/entity-cards/update-current-dash-cards-7.png" onclick="return false;" itemprop="contentUrl"> <img src="/images/user-guide/ui/widgets/actions/entity-cards/update-current-dash-cards-7-preview.png" itemprop="thumbnail" alt="image" style="max-width: min(225px, 100%);
                                max-height: min(225px, 100%);" /> </a>       <figcaption itemprop="caption description" style="display: none"></figcaption>
    </figure>
  </div>
</div>

<script>
    window.addEventListener("load", function() {
        window.removeEventListener("load", arguments.callee, false);

        if(!document.getElementsByClassName('pswp').length){
            document.body.insertAdjacentHTML('beforeend',
                '<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">\n' +
                '        <div class="pswp__bg"></div>\n' +
                '        <div class="pswp__scroll-wrap">\n' +
                '            <div class="pswp__container">\n' +
                '                <div class="pswp__item"></div>\n' +
                '                <div class="pswp__item"></div>\n' +
                '                <div class="pswp__item"></div>\n' +
                '            </div>\n' +
                '\n' +
                '            <div class="pswp__ui pswp__ui--hidden">\n' +
                '\n' +
                '                <div class="pswp__top-bar">\n' +
                '                    <div class="pswp__counter"></div>\n' +
                '\n' +
                '                    <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>\n' +
                '\n' +
                '                    <button class="pswp__button pswp__button--share" title="Share"></button>\n' +
                '\n' +
                '                    <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>\n' +
                '\n' +
                '                    <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>\n' +
                '\n' +
                '                    <div class="pswp__preloader">\n' +
                '                        <div class="pswp__preloader__icn">\n' +
                '                            <div class="pswp__preloader__cut">\n' +
                '                                <div class="pswp__preloader__donut"></div>\n' +
                '                            </div>\n' +
                '                        </div>\n' +
                '                    </div>\n' +
                '                </div>\n' +
                '                <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">\n' +
                '                    <div class="pswp__share-tooltip"></div>\n' +
                '                </div>\n' +
                '                <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">\n' +
                '                </button>\n' +
                '                <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">\n' +
                '                </button>\n' +
                '                <div class="pswp__caption">\n' +
                '                    <div class="pswp__caption__center"></div>\n' +
                '                </div>\n' +
                '            </div>\n' +
                '        </div>\n' +
                '    </div>'
            );
        }

        var container = document.getElementById('0');

        var initPhotoSwipeFromDOM = function(gallerySelector) {
            var parseThumbnailElements = function(el) {
                var thumbElements = el.childNodes,
                    numNodes = thumbElements.length,
                    items = [],
                    figureEl,
                    linkEl,
                    size,
                    item;

                for(var i = 0; i < numNodes; i++) {

                    figureEl = thumbElements[i];
                    if(figureEl.nodeType !== 1) {
                        continue;
                    }
                    linkEl = figureEl.children[0];
                    size = linkEl.children[0];
                    item = {
                        src: linkEl.getAttribute('href'),
                        w: 2500,
                        h: 0,
                        sizeLoaded: false
                    };

                    if(figureEl.children.length > 1) {
                        item.title = figureEl.children[1].innerHTML;
                    }
                    if(linkEl.children.length > 0) {
                        item.msrc = linkEl.children[0].getAttribute('src');
                    }
                    if(item.msrc === item.src){
                        item.w = parseInt(size.naturalWidth, 10);
                        item.h = parseInt(size.naturalHeight, 10);
                    }

                    item.el = figureEl;
                    items.push(item);
                }
                return items;
            };

            var closest = function closest(el, fn) {
                return el && ( fn(el) ? el : closest(el.parentNode, fn) );
            };

            var onThumbnailsClick = function(e) {
                e = e || window.event;
                e.preventDefault ? e.preventDefault() : e.returnValue = false;

                var eTarget = e.target || e.srcElement;

                var clickedListItem = closest(eTarget, function(el) {
                    return (el.tagName && el.tagName.toUpperCase() === 'FIGURE');
                });

                if(!clickedListItem) {
                    return;
                }

                var clickedGallery = clickedListItem.parentNode,
                    childNodes = clickedListItem.parentNode.childNodes,
                    numChildNodes = childNodes.length,
                    nodeIndex = 0,
                    index;

                for (var i = 0; i < numChildNodes; i++) {
                    if(childNodes[i].nodeType !== 1) {
                        continue;
                    }

                    if(childNodes[i] === clickedListItem) {
                        index = nodeIndex;
                        break;
                    }
                    nodeIndex++;
                }

                if(index >= 0) {
                    openPhotoSwipe( index, clickedGallery );
                }
                return false;
            };

            var photoswipeParseHash = function() {
                var hash = window.location.hash.substring(1),
                    params = {};

                if(hash.length < 5) {
                    return params;
                }

                var vars = hash.split('&');
                for (var i = 0; i < vars.length; i++) {
                    if(!vars[i]) {
                        continue;
                    }
                    var pair = vars[i].split('=');
                    if(pair.length < 2) {
                        continue;
                    }
                    params[pair[0]] = pair[1];
                }

                if(params.gid) {
                    params.gid = parseInt(params.gid, 10);
                }

                return params;
            };

            var openPhotoSwipe = function(index, galleryElement, disableAnimation, fromURL) {
                var pswpElement = document.querySelectorAll('.pswp')[0],
                    gallery,
                    options,
                    items;

                items = parseThumbnailElements(galleryElement);

                options = {
                    galleryUID: galleryElement.getAttribute('data-pswp-uid'),
                    getThumbBoundsFn: function(index) {
                        var thumbnail = items[index].el.getElementsByTagName('img')[0], // find thumbnail
                            pageYScroll = window.pageYOffset || document.documentElement.scrollTop,
                            rect = thumbnail.getBoundingClientRect();
                        return {x:rect.left, y:rect.top + pageYScroll, w:rect.width};
                    },
                    bgOpacity: 0.8,
                    closeOnScroll: false,
                    shareEl: false,
                    fullscreenEl: false,
                    zoomEl: true,
                    history: false,
                    loop: false
                };

                if(fromURL) {
                    if(options.galleryPIDs) {
                        for(var j = 0; j < items.length; j++) {
                            if(items[j].pid == index) {
                                options.index = j;
                                break;
                            }
                        }
                    } else {
                        options.index = parseInt(index, 10) - 1;
                    }
                } else {
                    options.index = parseInt(index, 10);
                }

                if( isNaN(options.index) ) {
                    return;
                }

                if(disableAnimation) {
                    options.showAnimationDuration = 0;
                }

                gallery = new PhotoSwipe( pswpElement, PhotoSwipeUI_Default, items, options);

                gallery.listen('gettingData', function(index, item) {
                    if (!item.sizeLoaded) {
                        item.sizeLoaded = true;
                        var img = new Image();
                        img.onload = function() {
                            item.w = this.width;
                            item.h = this.height;
                            gallery.updateSize(true);
                        }
                        img.src = item.src;
                    }
                });

                gallery.init();

                var buttonLeft = pswpElement.getElementsByClassName('pswp__button--arrow--left')[0];
                var buttonRight = pswpElement.getElementsByClassName('pswp__button--arrow--right')[0];

                buttonLeft.hidden = gallery.getCurrentIndex() === 0;
                buttonRight.hidden = gallery.getCurrentIndex() + 1 === gallery.items.length;

                gallery.listen('beforeChange', function() {
                        buttonLeft.hidden = gallery.getCurrentIndex() === 0;
                        buttonRight.hidden = gallery.getCurrentIndex() + 1 === gallery.items.length;
                    }
                );
            };

            var galleryElements = container.querySelectorAll( gallerySelector );

            for(var i = 0, l = galleryElements.length; i < l; i++) {
                galleryElements[i].setAttribute('data-pswp-uid', i+1);
                galleryElements[i].onclick = onThumbnailsClick;
            }

            var hashData = photoswipeParseHash();
            if(hashData.pid && hashData.gid) {
                openPhotoSwipe( hashData.pid ,  galleryElements[ hashData.gid - 1 ], true, true );
            }
        };

        initPhotoSwipeFromDOM('.images-gallery');
    }, false)
</script>

<h5 id="navigate-to-other-dashboard">Navigate to other dashboard</h5>

<p>This type of action transfers you to a previously created dashboard of your choice.
To be fastly transitioned to another selected dashboard, you should:</p>

<ol>
  <li>In the widget’s Edit mode move to the last cell “Actions”.</li>
  <li>Click the “+” icon on the right of the window to add a new action.</li>
  <li>As an example for this manual, in the top drop-down menu, choose an “Action cell button” action source.</li>
  <li>In the next line input a name for the action and choose an icon that will represent a button. With this button, action will be performed.</li>
  <li>In the drop-down menu “Type”, choose a <em>Navigate to other dashboard</em> action type.</li>
  <li>After choosing an action type, the drop-down menu “Target dashboard” appears. Select a previously created dashboard you’d like to be transitioned to.
Notice that it’s also possible to be transitioned to the existed state in the chosen dashboard.</li>
  <li>After configuring an action type, click “Add” at the right bottom of the “Add action” window.</li>
  <li>Now you see configured action, so you can double-check action source, icon, and action type.</li>
  <li>Apply changes by clicking the orange tick icon in the top right of the window, and then close the details window.</li>
  <li>Save applied changes by clicking the orange tick icon “Apply changes” in the bottom right of the screen.</li>
</ol>

<p>After saving changes, you can see icon-buttons opposite the entity names. Clicking any of these icons will transfer you to the previously selected dashboard (or chosen state in that dashboard).</p>

<div id="0">
  <div itemscope="" itemtype="http://schema.org/ImageGallery" class="images-gallery" style="justify-content: start;">
    <figure itemprop="associatedMedia" itemscope="" itemtype="http://schema.org/ImageObject" style="max-width: min(225px, 100%);
                    max-height: min(225px, 100%);" class="list-item">
<a href="/images/user-guide/ui/widgets/actions/entity-cards/cards-action-new-dash.png" onclick="return false;" itemprop="contentUrl"> <img src="/images/user-guide/ui/widgets/actions/entity-cards/cards-action-new-dash-preview.png" itemprop="thumbnail" alt="image" style="max-width: min(225px, 100%);
                                max-height: min(225px, 100%);" /> </a>       <figcaption itemprop="caption description" style="display: none"></figcaption>
    </figure>
    <figure itemprop="associatedMedia" itemscope="" itemtype="http://schema.org/ImageObject" style="max-width: min(225px, 100%);
                    max-height: min(225px, 100%);" class="list-item">
<a href="/images/user-guide/ui/widgets/actions/entity-cards/cards-action-new-dash-1.png" onclick="return false;" itemprop="contentUrl"> <img src="/images/user-guide/ui/widgets/actions/entity-cards/cards-action-new-dash-1-preview.png" itemprop="thumbnail" alt="image" style="max-width: min(225px, 100%);
                                max-height: min(225px, 100%);" /> </a>       <figcaption itemprop="caption description" style="display: none"></figcaption>
    </figure>
    <figure itemprop="associatedMedia" itemscope="" itemtype="http://schema.org/ImageObject" style="max-width: min(225px, 100%);
                    max-height: min(225px, 100%);" class="list-item">
<a href="/images/user-guide/ui/widgets/actions/entity-cards/cards-action-new-dash-2.png" onclick="return false;" itemprop="contentUrl"> <img src="/images/user-guide/ui/widgets/actions/entity-cards/cards-action-new-dash-2-preview.png" itemprop="thumbnail" alt="image" style="max-width: min(225px, 100%);
                                max-height: min(225px, 100%);" /> </a>       <figcaption itemprop="caption description" style="display: none"></figcaption>
    </figure>
    <figure itemprop="associatedMedia" itemscope="" itemtype="http://schema.org/ImageObject" style="max-width: min(225px, 100%);
                    max-height: min(225px, 100%);" class="list-item">
<a href="/images/user-guide/ui/widgets/actions/entity-cards/cards-action-new-dash-3.png" onclick="return false;" itemprop="contentUrl"> <img src="/images/user-guide/ui/widgets/actions/entity-cards/cards-action-new-dash-3-preview.png" itemprop="thumbnail" alt="image" style="max-width: min(225px, 100%);
                                max-height: min(225px, 100%);" /> </a>       <figcaption itemprop="caption description" style="display: none"></figcaption>
    </figure>
    <figure itemprop="associatedMedia" itemscope="" itemtype="http://schema.org/ImageObject" style="max-width: min(225px, 100%);
                    max-height: min(225px, 100%);" class="list-item">
<a href="/images/user-guide/ui/widgets/actions/entity-cards/cards-action-new-dash-4.png" onclick="return false;" itemprop="contentUrl"> <img src="/images/user-guide/ui/widgets/actions/entity-cards/cards-action-new-dash-4-preview.png" itemprop="thumbnail" alt="image" style="max-width: min(225px, 100%);
                                max-height: min(225px, 100%);" /> </a>       <figcaption itemprop="caption description" style="display: none"></figcaption>
    </figure>
  </div>
</div>

<script>
    window.addEventListener("load", function() {
        window.removeEventListener("load", arguments.callee, false);

        if(!document.getElementsByClassName('pswp').length){
            document.body.insertAdjacentHTML('beforeend',
                '<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">\n' +
                '        <div class="pswp__bg"></div>\n' +
                '        <div class="pswp__scroll-wrap">\n' +
                '            <div class="pswp__container">\n' +
                '                <div class="pswp__item"></div>\n' +
                '                <div class="pswp__item"></div>\n' +
                '                <div class="pswp__item"></div>\n' +
                '            </div>\n' +
                '\n' +
                '            <div class="pswp__ui pswp__ui--hidden">\n' +
                '\n' +
                '                <div class="pswp__top-bar">\n' +
                '                    <div class="pswp__counter"></div>\n' +
                '\n' +
                '                    <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>\n' +
                '\n' +
                '                    <button class="pswp__button pswp__button--share" title="Share"></button>\n' +
                '\n' +
                '                    <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>\n' +
                '\n' +
                '                    <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>\n' +
                '\n' +
                '                    <div class="pswp__preloader">\n' +
                '                        <div class="pswp__preloader__icn">\n' +
                '                            <div class="pswp__preloader__cut">\n' +
                '                                <div class="pswp__preloader__donut"></div>\n' +
                '                            </div>\n' +
                '                        </div>\n' +
                '                    </div>\n' +
                '                </div>\n' +
                '                <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">\n' +
                '                    <div class="pswp__share-tooltip"></div>\n' +
                '                </div>\n' +
                '                <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">\n' +
                '                </button>\n' +
                '                <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">\n' +
                '                </button>\n' +
                '                <div class="pswp__caption">\n' +
                '                    <div class="pswp__caption__center"></div>\n' +
                '                </div>\n' +
                '            </div>\n' +
                '        </div>\n' +
                '    </div>'
            );
        }

        var container = document.getElementById('0');

        var initPhotoSwipeFromDOM = function(gallerySelector) {
            var parseThumbnailElements = function(el) {
                var thumbElements = el.childNodes,
                    numNodes = thumbElements.length,
                    items = [],
                    figureEl,
                    linkEl,
                    size,
                    item;

                for(var i = 0; i < numNodes; i++) {

                    figureEl = thumbElements[i];
                    if(figureEl.nodeType !== 1) {
                        continue;
                    }
                    linkEl = figureEl.children[0];
                    size = linkEl.children[0];
                    item = {
                        src: linkEl.getAttribute('href'),
                        w: 2500,
                        h: 0,
                        sizeLoaded: false
                    };

                    if(figureEl.children.length > 1) {
                        item.title = figureEl.children[1].innerHTML;
                    }
                    if(linkEl.children.length > 0) {
                        item.msrc = linkEl.children[0].getAttribute('src');
                    }
                    if(item.msrc === item.src){
                        item.w = parseInt(size.naturalWidth, 10);
                        item.h = parseInt(size.naturalHeight, 10);
                    }

                    item.el = figureEl;
                    items.push(item);
                }
                return items;
            };

            var closest = function closest(el, fn) {
                return el && ( fn(el) ? el : closest(el.parentNode, fn) );
            };

            var onThumbnailsClick = function(e) {
                e = e || window.event;
                e.preventDefault ? e.preventDefault() : e.returnValue = false;

                var eTarget = e.target || e.srcElement;

                var clickedListItem = closest(eTarget, function(el) {
                    return (el.tagName && el.tagName.toUpperCase() === 'FIGURE');
                });

                if(!clickedListItem) {
                    return;
                }

                var clickedGallery = clickedListItem.parentNode,
                    childNodes = clickedListItem.parentNode.childNodes,
                    numChildNodes = childNodes.length,
                    nodeIndex = 0,
                    index;

                for (var i = 0; i < numChildNodes; i++) {
                    if(childNodes[i].nodeType !== 1) {
                        continue;
                    }

                    if(childNodes[i] === clickedListItem) {
                        index = nodeIndex;
                        break;
                    }
                    nodeIndex++;
                }

                if(index >= 0) {
                    openPhotoSwipe( index, clickedGallery );
                }
                return false;
            };

            var photoswipeParseHash = function() {
                var hash = window.location.hash.substring(1),
                    params = {};

                if(hash.length < 5) {
                    return params;
                }

                var vars = hash.split('&');
                for (var i = 0; i < vars.length; i++) {
                    if(!vars[i]) {
                        continue;
                    }
                    var pair = vars[i].split('=');
                    if(pair.length < 2) {
                        continue;
                    }
                    params[pair[0]] = pair[1];
                }

                if(params.gid) {
                    params.gid = parseInt(params.gid, 10);
                }

                return params;
            };

            var openPhotoSwipe = function(index, galleryElement, disableAnimation, fromURL) {
                var pswpElement = document.querySelectorAll('.pswp')[0],
                    gallery,
                    options,
                    items;

                items = parseThumbnailElements(galleryElement);

                options = {
                    galleryUID: galleryElement.getAttribute('data-pswp-uid'),
                    getThumbBoundsFn: function(index) {
                        var thumbnail = items[index].el.getElementsByTagName('img')[0], // find thumbnail
                            pageYScroll = window.pageYOffset || document.documentElement.scrollTop,
                            rect = thumbnail.getBoundingClientRect();
                        return {x:rect.left, y:rect.top + pageYScroll, w:rect.width};
                    },
                    bgOpacity: 0.8,
                    closeOnScroll: false,
                    shareEl: false,
                    fullscreenEl: false,
                    zoomEl: true,
                    history: false,
                    loop: false
                };

                if(fromURL) {
                    if(options.galleryPIDs) {
                        for(var j = 0; j < items.length; j++) {
                            if(items[j].pid == index) {
                                options.index = j;
                                break;
                            }
                        }
                    } else {
                        options.index = parseInt(index, 10) - 1;
                    }
                } else {
                    options.index = parseInt(index, 10);
                }

                if( isNaN(options.index) ) {
                    return;
                }

                if(disableAnimation) {
                    options.showAnimationDuration = 0;
                }

                gallery = new PhotoSwipe( pswpElement, PhotoSwipeUI_Default, items, options);

                gallery.listen('gettingData', function(index, item) {
                    if (!item.sizeLoaded) {
                        item.sizeLoaded = true;
                        var img = new Image();
                        img.onload = function() {
                            item.w = this.width;
                            item.h = this.height;
                            gallery.updateSize(true);
                        }
                        img.src = item.src;
                    }
                });

                gallery.init();

                var buttonLeft = pswpElement.getElementsByClassName('pswp__button--arrow--left')[0];
                var buttonRight = pswpElement.getElementsByClassName('pswp__button--arrow--right')[0];

                buttonLeft.hidden = gallery.getCurrentIndex() === 0;
                buttonRight.hidden = gallery.getCurrentIndex() + 1 === gallery.items.length;

                gallery.listen('beforeChange', function() {
                        buttonLeft.hidden = gallery.getCurrentIndex() === 0;
                        buttonRight.hidden = gallery.getCurrentIndex() + 1 === gallery.items.length;
                    }
                );
            };

            var galleryElements = container.querySelectorAll( gallerySelector );

            for(var i = 0, l = galleryElements.length; i < l; i++) {
                galleryElements[i].setAttribute('data-pswp-uid', i+1);
                galleryElements[i].onclick = onThumbnailsClick;
            }

            var hashData = photoswipeParseHash();
            if(hashData.pid && hashData.gid) {
                openPhotoSwipe( hashData.pid ,  galleryElements[ hashData.gid - 1 ], true, true );
            }
        };

        initPhotoSwipeFromDOM('.images-gallery');
    }, false)
</script>

<h5 id="custom-action">Custom action</h5>

<p>A Custom action allows manually configuring a function that can be used to add an individual action to your widget (for example deleting listed devices/assets).
To configure a custom action with a function (with an example of a device deletion):</p>

<ol>
  <li>In the widget’s Edit mode move to the last cell “Actions”.</li>
  <li>Click the “+” icon on the right of the window to add a new action.</li>
  <li>As an example for this manual, in the top drop-down menu, choose an “Action cell button” action source.</li>
  <li>In the next line input a name for the action and choose an icon that will represent a button. With this button, action will be performed.</li>
  <li>In the drop-down menu “Type”, choose a <em>Custom action</em> action type.</li>
  <li>After choosing a Custom action type, a field for inputting a function will appear.</li>
  <li>Enter your custom function there. An example in this tutorial is a device deletion action that adds the ability to delete devices right from the table
(you can find an example of the function under the screenshots section).</li>
  <li>Apply changes by clicking the “Save” button at the right bottom of the “Add action” window.</li>
  <li>Apply changes by clicking the orange tick icon in the top right of the window and then close the details window.</li>
  <li>Save applied changes by clicking the orange tick icon “Apply changes” in the bottom right of the screen.</li>
</ol>

<p>Execute an action by clicking the “trash box” icon opposite entity names.</p>

<div id="0">
  <div itemscope="" itemtype="http://schema.org/ImageGallery" class="images-gallery" style="justify-content: start;">
    <figure itemprop="associatedMedia" itemscope="" itemtype="http://schema.org/ImageObject" style="max-width: min(225px, 100%);
                    max-height: min(225px, 100%);" class="list-item">
<a href="/images/user-guide/ui/widgets/actions/custom-action-1-ce.png" onclick="return false;" itemprop="contentUrl"> <img src="/images/user-guide/ui/widgets/actions/custom-action-1-ce-preview.png" itemprop="thumbnail" alt="image" style="max-width: min(225px, 100%);
                                max-height: min(225px, 100%);" /> </a>       <figcaption itemprop="caption description" style="display: none"></figcaption>
    </figure>
    <figure itemprop="associatedMedia" itemscope="" itemtype="http://schema.org/ImageObject" style="max-width: min(225px, 100%);
                    max-height: min(225px, 100%);" class="list-item">
<a href="/images/user-guide/ui/widgets/actions/custom-action-2-ce.png" onclick="return false;" itemprop="contentUrl"> <img src="/images/user-guide/ui/widgets/actions/custom-action-2-ce-preview.png" itemprop="thumbnail" alt="image" style="max-width: min(225px, 100%);
                                max-height: min(225px, 100%);" /> </a>       <figcaption itemprop="caption description" style="display: none"></figcaption>
    </figure>
    <figure itemprop="associatedMedia" itemscope="" itemtype="http://schema.org/ImageObject" style="max-width: min(225px, 100%);
                    max-height: min(225px, 100%);" class="list-item">
<a href="/images/user-guide/ui/widgets/actions/custom-action-3-ce.png" onclick="return false;" itemprop="contentUrl"> <img src="/images/user-guide/ui/widgets/actions/custom-action-3-ce-preview.png" itemprop="thumbnail" alt="image" style="max-width: min(225px, 100%);
                                max-height: min(225px, 100%);" /> </a>       <figcaption itemprop="caption description" style="display: none"></figcaption>
    </figure>
    <figure itemprop="associatedMedia" itemscope="" itemtype="http://schema.org/ImageObject" style="max-width: min(225px, 100%);
                    max-height: min(225px, 100%);" class="list-item">
<a href="/images/user-guide/ui/widgets/actions/custom-action-4-ce.png" onclick="return false;" itemprop="contentUrl"> <img src="/images/user-guide/ui/widgets/actions/custom-action-4-ce-preview.png" itemprop="thumbnail" alt="image" style="max-width: min(225px, 100%);
                                max-height: min(225px, 100%);" /> </a>       <figcaption itemprop="caption description" style="display: none"></figcaption>
    </figure>
    <figure itemprop="associatedMedia" itemscope="" itemtype="http://schema.org/ImageObject" style="max-width: min(225px, 100%);
                    max-height: min(225px, 100%);" class="list-item">
<a href="/images/user-guide/ui/widgets/actions/custom-action-5-ce.png" onclick="return false;" itemprop="contentUrl"> <img src="/images/user-guide/ui/widgets/actions/custom-action-5-ce-preview.png" itemprop="thumbnail" alt="image" style="max-width: min(225px, 100%);
                                max-height: min(225px, 100%);" /> </a>       <figcaption itemprop="caption description" style="display: none"></figcaption>
    </figure>
    <figure itemprop="associatedMedia" itemscope="" itemtype="http://schema.org/ImageObject" style="max-width: min(225px, 100%);
                    max-height: min(225px, 100%);" class="list-item">
<a href="/images/user-guide/ui/widgets/actions/custom-action-6-ce.png" onclick="return false;" itemprop="contentUrl"> <img src="/images/user-guide/ui/widgets/actions/custom-action-6-ce-preview.png" itemprop="thumbnail" alt="image" style="max-width: min(225px, 100%);
                                max-height: min(225px, 100%);" /> </a>       <figcaption itemprop="caption description" style="display: none"></figcaption>
    </figure>
    <figure itemprop="associatedMedia" itemscope="" itemtype="http://schema.org/ImageObject" style="max-width: min(225px, 100%);
                    max-height: min(225px, 100%);" class="list-item">
<a href="/images/user-guide/ui/widgets/actions/custom-action-7-ce.png" onclick="return false;" itemprop="contentUrl"> <img src="/images/user-guide/ui/widgets/actions/custom-action-7-ce-preview.png" itemprop="thumbnail" alt="image" style="max-width: min(225px, 100%);
                                max-height: min(225px, 100%);" /> </a>       <figcaption itemprop="caption description" style="display: none"></figcaption>
    </figure>
  </div>
</div>

<script>
    window.addEventListener("load", function() {
        window.removeEventListener("load", arguments.callee, false);

        if(!document.getElementsByClassName('pswp').length){
            document.body.insertAdjacentHTML('beforeend',
                '<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">\n' +
                '        <div class="pswp__bg"></div>\n' +
                '        <div class="pswp__scroll-wrap">\n' +
                '            <div class="pswp__container">\n' +
                '                <div class="pswp__item"></div>\n' +
                '                <div class="pswp__item"></div>\n' +
                '                <div class="pswp__item"></div>\n' +
                '            </div>\n' +
                '\n' +
                '            <div class="pswp__ui pswp__ui--hidden">\n' +
                '\n' +
                '                <div class="pswp__top-bar">\n' +
                '                    <div class="pswp__counter"></div>\n' +
                '\n' +
                '                    <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>\n' +
                '\n' +
                '                    <button class="pswp__button pswp__button--share" title="Share"></button>\n' +
                '\n' +
                '                    <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>\n' +
                '\n' +
                '                    <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>\n' +
                '\n' +
                '                    <div class="pswp__preloader">\n' +
                '                        <div class="pswp__preloader__icn">\n' +
                '                            <div class="pswp__preloader__cut">\n' +
                '                                <div class="pswp__preloader__donut"></div>\n' +
                '                            </div>\n' +
                '                        </div>\n' +
                '                    </div>\n' +
                '                </div>\n' +
                '                <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">\n' +
                '                    <div class="pswp__share-tooltip"></div>\n' +
                '                </div>\n' +
                '                <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">\n' +
                '                </button>\n' +
                '                <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">\n' +
                '                </button>\n' +
                '                <div class="pswp__caption">\n' +
                '                    <div class="pswp__caption__center"></div>\n' +
                '                </div>\n' +
                '            </div>\n' +
                '        </div>\n' +
                '    </div>'
            );
        }

        var container = document.getElementById('0');

        var initPhotoSwipeFromDOM = function(gallerySelector) {
            var parseThumbnailElements = function(el) {
                var thumbElements = el.childNodes,
                    numNodes = thumbElements.length,
                    items = [],
                    figureEl,
                    linkEl,
                    size,
                    item;

                for(var i = 0; i < numNodes; i++) {

                    figureEl = thumbElements[i];
                    if(figureEl.nodeType !== 1) {
                        continue;
                    }
                    linkEl = figureEl.children[0];
                    size = linkEl.children[0];
                    item = {
                        src: linkEl.getAttribute('href'),
                        w: 2500,
                        h: 0,
                        sizeLoaded: false
                    };

                    if(figureEl.children.length > 1) {
                        item.title = figureEl.children[1].innerHTML;
                    }
                    if(linkEl.children.length > 0) {
                        item.msrc = linkEl.children[0].getAttribute('src');
                    }
                    if(item.msrc === item.src){
                        item.w = parseInt(size.naturalWidth, 10);
                        item.h = parseInt(size.naturalHeight, 10);
                    }

                    item.el = figureEl;
                    items.push(item);
                }
                return items;
            };

            var closest = function closest(el, fn) {
                return el && ( fn(el) ? el : closest(el.parentNode, fn) );
            };

            var onThumbnailsClick = function(e) {
                e = e || window.event;
                e.preventDefault ? e.preventDefault() : e.returnValue = false;

                var eTarget = e.target || e.srcElement;

                var clickedListItem = closest(eTarget, function(el) {
                    return (el.tagName && el.tagName.toUpperCase() === 'FIGURE');
                });

                if(!clickedListItem) {
                    return;
                }

                var clickedGallery = clickedListItem.parentNode,
                    childNodes = clickedListItem.parentNode.childNodes,
                    numChildNodes = childNodes.length,
                    nodeIndex = 0,
                    index;

                for (var i = 0; i < numChildNodes; i++) {
                    if(childNodes[i].nodeType !== 1) {
                        continue;
                    }

                    if(childNodes[i] === clickedListItem) {
                        index = nodeIndex;
                        break;
                    }
                    nodeIndex++;
                }

                if(index >= 0) {
                    openPhotoSwipe( index, clickedGallery );
                }
                return false;
            };

            var photoswipeParseHash = function() {
                var hash = window.location.hash.substring(1),
                    params = {};

                if(hash.length < 5) {
                    return params;
                }

                var vars = hash.split('&');
                for (var i = 0; i < vars.length; i++) {
                    if(!vars[i]) {
                        continue;
                    }
                    var pair = vars[i].split('=');
                    if(pair.length < 2) {
                        continue;
                    }
                    params[pair[0]] = pair[1];
                }

                if(params.gid) {
                    params.gid = parseInt(params.gid, 10);
                }

                return params;
            };

            var openPhotoSwipe = function(index, galleryElement, disableAnimation, fromURL) {
                var pswpElement = document.querySelectorAll('.pswp')[0],
                    gallery,
                    options,
                    items;

                items = parseThumbnailElements(galleryElement);

                options = {
                    galleryUID: galleryElement.getAttribute('data-pswp-uid'),
                    getThumbBoundsFn: function(index) {
                        var thumbnail = items[index].el.getElementsByTagName('img')[0], // find thumbnail
                            pageYScroll = window.pageYOffset || document.documentElement.scrollTop,
                            rect = thumbnail.getBoundingClientRect();
                        return {x:rect.left, y:rect.top + pageYScroll, w:rect.width};
                    },
                    bgOpacity: 0.8,
                    closeOnScroll: false,
                    shareEl: false,
                    fullscreenEl: false,
                    zoomEl: true,
                    history: false,
                    loop: false
                };

                if(fromURL) {
                    if(options.galleryPIDs) {
                        for(var j = 0; j < items.length; j++) {
                            if(items[j].pid == index) {
                                options.index = j;
                                break;
                            }
                        }
                    } else {
                        options.index = parseInt(index, 10) - 1;
                    }
                } else {
                    options.index = parseInt(index, 10);
                }

                if( isNaN(options.index) ) {
                    return;
                }

                if(disableAnimation) {
                    options.showAnimationDuration = 0;
                }

                gallery = new PhotoSwipe( pswpElement, PhotoSwipeUI_Default, items, options);

                gallery.listen('gettingData', function(index, item) {
                    if (!item.sizeLoaded) {
                        item.sizeLoaded = true;
                        var img = new Image();
                        img.onload = function() {
                            item.w = this.width;
                            item.h = this.height;
                            gallery.updateSize(true);
                        }
                        img.src = item.src;
                    }
                });

                gallery.init();

                var buttonLeft = pswpElement.getElementsByClassName('pswp__button--arrow--left')[0];
                var buttonRight = pswpElement.getElementsByClassName('pswp__button--arrow--right')[0];

                buttonLeft.hidden = gallery.getCurrentIndex() === 0;
                buttonRight.hidden = gallery.getCurrentIndex() + 1 === gallery.items.length;

                gallery.listen('beforeChange', function() {
                        buttonLeft.hidden = gallery.getCurrentIndex() === 0;
                        buttonRight.hidden = gallery.getCurrentIndex() + 1 === gallery.items.length;
                    }
                );
            };

            var galleryElements = container.querySelectorAll( gallerySelector );

            for(var i = 0, l = galleryElements.length; i < l; i++) {
                galleryElements[i].setAttribute('data-pswp-uid', i+1);
                galleryElements[i].onclick = onThumbnailsClick;
            }

            var hashData = photoswipeParseHash();
            if(hashData.pid && hashData.gid) {
                openPhotoSwipe( hashData.pid ,  galleryElements[ hashData.gid - 1 ], true, true );
            }
        };

        initPhotoSwipeFromDOM('.images-gallery');
    }, false)
</script>

<details>
   <summary>
 <strong>An example of the function for a device deletion.</strong> 
  </summary>
   <figure class="highlight">
    <div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
</pre></td><td class="rouge-code"><pre><span class="n">let</span> <span class="vg">$injector</span> <span class="o">=</span> <span class="n">widgetContext</span><span class="o">.</span><span class="vg">$scope</span><span class="o">.</span><span class="vg">$injector</span><span class="p">;</span>
<span class="n">let</span> <span class="n">dialogs</span> <span class="o">=</span> <span class="vg">$injector</span><span class="p">.</span><span class="nf">get</span><span class="p">(</span><span class="n">widgetContext</span><span class="p">.</span><span class="nf">servicesMap</span><span class="p">.</span><span class="nf">get</span><span class="p">(</span><span class="s1">'dialogs'</span><span class="p">));</span>
<span class="n">let</span> <span class="n">deviceService</span> <span class="o">=</span> <span class="vg">$injector</span><span class="p">.</span><span class="nf">get</span><span class="p">(</span><span class="n">widgetContext</span><span class="p">.</span><span class="nf">servicesMap</span><span class="p">.</span><span class="nf">get</span><span class="p">(</span><span class="s1">'deviceService'</span><span class="p">));</span>

<span class="n">openDeleteDeviceDialog</span><span class="p">();</span>

<span class="n">function</span> <span class="n">openDeleteDeviceDialog</span><span class="p">()</span> <span class="p">{</span>
    <span class="n">let</span> <span class="n">title</span> <span class="o">=</span> <span class="s2">"Are you sure you want to delete the device "</span> <span class="o">+</span> <span class="n">entityName</span> <span class="o">+</span> <span class="s2">"?"</span><span class="p">;</span>
    <span class="n">let</span> <span class="n">content</span> <span class="o">=</span> <span class="s2">"Be careful, after the confirmation, the device and all related data will become unrecoverable!"</span><span class="p">;</span>
    <span class="n">dialogs</span><span class="p">.</span><span class="nf">confirm</span><span class="p">(</span><span class="n">title</span><span class="p">,</span> <span class="n">content</span><span class="p">,</span> <span class="s1">'Cancel'</span><span class="p">,</span> <span class="s1">'Delete'</span><span class="p">).</span><span class="nf">subscribe</span><span class="p">(</span>
        <span class="n">function</span><span class="p">(</span><span class="n">result</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">result</span><span class="p">)</span> <span class="p">{</span>
                <span class="n">deleteDevice</span><span class="p">();</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">);</span>
<span class="p">}</span>

<span class="n">function</span> <span class="n">deleteDevice</span><span class="p">()</span> <span class="p">{</span>
    <span class="n">deviceService</span><span class="p">.</span><span class="nf">deleteDevice</span><span class="p">(</span><span class="n">entityId</span><span class="p">.</span><span class="nf">id</span><span class="p">).</span><span class="nf">subscribe</span><span class="p">(</span>
        <span class="n">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="n">widgetContext</span><span class="p">.</span><span class="nf">updateAliases</span><span class="p">();</span>
        <span class="p">}</span>
    <span class="p">);</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre></div>    </div>
  </figure>
 
</details>

<h5 id="custom-action-with-html-template">Custom action (with HTML template)</h5>

<p>A Custom action with an HTML template allows manually entering a function in an existing HTML template (for example creating dialog windows with an opportunity to create or edit listed devices/assets).</p>

<ol>
  <li>In the widget’s Edit mode move to the last cell “Actions”.</li>
  <li>Click the “+” icon on the right of the window to add a new action.</li>
  <li>As an example for this manual, in the top drop-down menu, choose an “Action cell button” action source.</li>
  <li>In the next line input a name for the action and choose an icon that will represent a button. With this button, action will be performed.</li>
  <li>
    <p>In the drop-down menu “Type”, choose a <em>Custom action(with HTML template)</em> action type. After choosing a Custom action type, four tabs appea:</p>

    <p><em>Resources</em> tab is used to specify external JavaScript/CSS resources used by the widget;</p>

    <p><em>CSS</em> tab contains custom action specific CSS style definitions;</p>

    <p><em>HTML</em> tab contains custom action HTML code;</p>

    <p><em>JavaScript</em> section contains JS code of your custom action.</p>
  </li>
  <li>In JavaScript tab, enter a JavaScript function for your custom action (you can find an example of JavaScript function under the screenshots section).</li>
  <li>In HTML tab, enter an HTML code for your custom action (you can find an example of HTML code under the screenshots section).</li>
  <li>Apply changes by clicking the “Save” button at the right bottom of the “Add action” window.</li>
  <li>Apply changes by clicking the orange tick icon in the top right of the window and then close the details window.</li>
  <li>Save applied changes by clicking the orange tick icon “Apply changes” in the bottom right of the screen.</li>
</ol>

<p>Execute actions by clicking appropriate icons.</p>

<div id="0">
  <div itemscope="" itemtype="http://schema.org/ImageGallery" class="images-gallery" style="justify-content: start;">
    <figure itemprop="associatedMedia" itemscope="" itemtype="http://schema.org/ImageObject" style="max-width: min(225px, 100%);
                    max-height: min(225px, 100%);" class="list-item">
<a href="/images/user-guide/ui/widgets/actions/custom-action-html-1-ce.png" onclick="return false;" itemprop="contentUrl"> <img src="/images/user-guide/ui/widgets/actions/custom-action-html-1-ce-preview.png" itemprop="thumbnail" alt="image" style="max-width: min(225px, 100%);
                                max-height: min(225px, 100%);" /> </a>       <figcaption itemprop="caption description" style="display: none"></figcaption>
    </figure>
    <figure itemprop="associatedMedia" itemscope="" itemtype="http://schema.org/ImageObject" style="max-width: min(225px, 100%);
                    max-height: min(225px, 100%);" class="list-item">
<a href="/images/user-guide/ui/widgets/actions/custom-action-html-2-ce.png" onclick="return false;" itemprop="contentUrl"> <img src="/images/user-guide/ui/widgets/actions/custom-action-html-2-ce-preview.png" itemprop="thumbnail" alt="image" style="max-width: min(225px, 100%);
                                max-height: min(225px, 100%);" /> </a>       <figcaption itemprop="caption description" style="display: none"></figcaption>
    </figure>
    <figure itemprop="associatedMedia" itemscope="" itemtype="http://schema.org/ImageObject" style="max-width: min(225px, 100%);
                    max-height: min(225px, 100%);" class="list-item">
<a href="/images/user-guide/ui/widgets/actions/custom-action-html-3-ce.png" onclick="return false;" itemprop="contentUrl"> <img src="/images/user-guide/ui/widgets/actions/custom-action-html-3-ce-preview.png" itemprop="thumbnail" alt="image" style="max-width: min(225px, 100%);
                                max-height: min(225px, 100%);" /> </a>       <figcaption itemprop="caption description" style="display: none"></figcaption>
    </figure>
    <figure itemprop="associatedMedia" itemscope="" itemtype="http://schema.org/ImageObject" style="max-width: min(225px, 100%);
                    max-height: min(225px, 100%);" class="list-item">
<a href="/images/user-guide/ui/widgets/actions/custom-action-html-4-ce.png" onclick="return false;" itemprop="contentUrl"> <img src="/images/user-guide/ui/widgets/actions/custom-action-html-4-ce-preview.png" itemprop="thumbnail" alt="image" style="max-width: min(225px, 100%);
                                max-height: min(225px, 100%);" /> </a>       <figcaption itemprop="caption description" style="display: none"></figcaption>
    </figure>
    <figure itemprop="associatedMedia" itemscope="" itemtype="http://schema.org/ImageObject" style="max-width: min(225px, 100%);
                    max-height: min(225px, 100%);" class="list-item">
<a href="/images/user-guide/ui/widgets/actions/custom-action-html-5-ce.png" onclick="return false;" itemprop="contentUrl"> <img src="/images/user-guide/ui/widgets/actions/custom-action-html-5-ce-preview.png" itemprop="thumbnail" alt="image" style="max-width: min(225px, 100%);
                                max-height: min(225px, 100%);" /> </a>       <figcaption itemprop="caption description" style="display: none"></figcaption>
    </figure>
    <figure itemprop="associatedMedia" itemscope="" itemtype="http://schema.org/ImageObject" style="max-width: min(225px, 100%);
                    max-height: min(225px, 100%);" class="list-item">
<a href="/images/user-guide/ui/widgets/actions/custom-action-html-6-ce.png" onclick="return false;" itemprop="contentUrl"> <img src="/images/user-guide/ui/widgets/actions/custom-action-html-6-ce-preview.png" itemprop="thumbnail" alt="image" style="max-width: min(225px, 100%);
                                max-height: min(225px, 100%);" /> </a>       <figcaption itemprop="caption description" style="display: none"></figcaption>
    </figure>
    <figure itemprop="associatedMedia" itemscope="" itemtype="http://schema.org/ImageObject" style="max-width: min(225px, 100%);
                    max-height: min(225px, 100%);" class="list-item">
<a href="/images/user-guide/ui/widgets/actions/custom-action-html-7-ce.png" onclick="return false;" itemprop="contentUrl"> <img src="/images/user-guide/ui/widgets/actions/custom-action-html-7-ce-preview.png" itemprop="thumbnail" alt="image" style="max-width: min(225px, 100%);
                                max-height: min(225px, 100%);" /> </a>       <figcaption itemprop="caption description" style="display: none"></figcaption>
    </figure>
    <figure itemprop="associatedMedia" itemscope="" itemtype="http://schema.org/ImageObject" style="max-width: min(225px, 100%);
                    max-height: min(225px, 100%);" class="list-item">
<a href="/images/user-guide/ui/widgets/actions/custom-action-html-8-ce.png" onclick="return false;" itemprop="contentUrl"> <img src="/images/user-guide/ui/widgets/actions/custom-action-html-8-ce-preview.png" itemprop="thumbnail" alt="image" style="max-width: min(225px, 100%);
                                max-height: min(225px, 100%);" /> </a>       <figcaption itemprop="caption description" style="display: none"></figcaption>
    </figure>
    <figure itemprop="associatedMedia" itemscope="" itemtype="http://schema.org/ImageObject" style="max-width: min(225px, 100%);
                    max-height: min(225px, 100%);" class="list-item">
<a href="/images/user-guide/ui/widgets/actions/custom-action-html-9-ce.png" onclick="return false;" itemprop="contentUrl"> <img src="/images/user-guide/ui/widgets/actions/custom-action-html-9-ce-preview.png" itemprop="thumbnail" alt="image" style="max-width: min(225px, 100%);
                                max-height: min(225px, 100%);" /> </a>       <figcaption itemprop="caption description" style="display: none"></figcaption>
    </figure>
    <figure itemprop="associatedMedia" itemscope="" itemtype="http://schema.org/ImageObject" style="max-width: min(225px, 100%);
                    max-height: min(225px, 100%);" class="list-item">
<a href="/images/user-guide/ui/widgets/actions/custom-action-html-10-ce.png" onclick="return false;" itemprop="contentUrl"> <img src="/images/user-guide/ui/widgets/actions/custom-action-html-10-ce-preview.png" itemprop="thumbnail" alt="image" style="max-width: min(225px, 100%);
                                max-height: min(225px, 100%);" /> </a>       <figcaption itemprop="caption description" style="display: none"></figcaption>
    </figure>
    <figure itemprop="associatedMedia" itemscope="" itemtype="http://schema.org/ImageObject" style="max-width: min(225px, 100%);
                    max-height: min(225px, 100%);" class="list-item">
<a href="/images/user-guide/ui/widgets/actions/custom-action-html-11-ce.png" onclick="return false;" itemprop="contentUrl"> <img src="/images/user-guide/ui/widgets/actions/custom-action-html-11-ce-preview.png" itemprop="thumbnail" alt="image" style="max-width: min(225px, 100%);
                                max-height: min(225px, 100%);" /> </a>       <figcaption itemprop="caption description" style="display: none"></figcaption>
    </figure>
    <figure itemprop="associatedMedia" itemscope="" itemtype="http://schema.org/ImageObject" style="max-width: min(225px, 100%);
                    max-height: min(225px, 100%);" class="list-item">
<a href="/images/user-guide/ui/widgets/actions/custom-action-html-12-ce.png" onclick="return false;" itemprop="contentUrl"> <img src="/images/user-guide/ui/widgets/actions/custom-action-html-12-ce-preview.png" itemprop="thumbnail" alt="image" style="max-width: min(225px, 100%);
                                max-height: min(225px, 100%);" /> </a>       <figcaption itemprop="caption description" style="display: none"></figcaption>
    </figure>
    <figure itemprop="associatedMedia" itemscope="" itemtype="http://schema.org/ImageObject" style="max-width: min(225px, 100%);
                    max-height: min(225px, 100%);" class="list-item">
<a href="/images/user-guide/ui/widgets/actions/custom-action-html-13-ce.png" onclick="return false;" itemprop="contentUrl"> <img src="/images/user-guide/ui/widgets/actions/custom-action-html-13-ce-preview.png" itemprop="thumbnail" alt="image" style="max-width: min(225px, 100%);
                                max-height: min(225px, 100%);" /> </a>       <figcaption itemprop="caption description" style="display: none"></figcaption>
    </figure>
    <figure itemprop="associatedMedia" itemscope="" itemtype="http://schema.org/ImageObject" style="max-width: min(225px, 100%);
                    max-height: min(225px, 100%);" class="list-item">
<a href="/images/user-guide/ui/widgets/actions/custom-action-html-14-ce.png" onclick="return false;" itemprop="contentUrl"> <img src="/images/user-guide/ui/widgets/actions/custom-action-html-14-ce-preview.png" itemprop="thumbnail" alt="image" style="max-width: min(225px, 100%);
                                max-height: min(225px, 100%);" /> </a>       <figcaption itemprop="caption description" style="display: none"></figcaption>
    </figure>
    <figure itemprop="associatedMedia" itemscope="" itemtype="http://schema.org/ImageObject" style="max-width: min(225px, 100%);
                    max-height: min(225px, 100%);" class="list-item">
<a href="/images/user-guide/ui/widgets/actions/custom-action-html-15-ce.png" onclick="return false;" itemprop="contentUrl"> <img src="/images/user-guide/ui/widgets/actions/custom-action-html-15-ce-preview.png" itemprop="thumbnail" alt="image" style="max-width: min(225px, 100%);
                                max-height: min(225px, 100%);" /> </a>       <figcaption itemprop="caption description" style="display: none"></figcaption>
    </figure>
  </div>
</div>

<script>
    window.addEventListener("load", function() {
        window.removeEventListener("load", arguments.callee, false);

        if(!document.getElementsByClassName('pswp').length){
            document.body.insertAdjacentHTML('beforeend',
                '<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">\n' +
                '        <div class="pswp__bg"></div>\n' +
                '        <div class="pswp__scroll-wrap">\n' +
                '            <div class="pswp__container">\n' +
                '                <div class="pswp__item"></div>\n' +
                '                <div class="pswp__item"></div>\n' +
                '                <div class="pswp__item"></div>\n' +
                '            </div>\n' +
                '\n' +
                '            <div class="pswp__ui pswp__ui--hidden">\n' +
                '\n' +
                '                <div class="pswp__top-bar">\n' +
                '                    <div class="pswp__counter"></div>\n' +
                '\n' +
                '                    <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>\n' +
                '\n' +
                '                    <button class="pswp__button pswp__button--share" title="Share"></button>\n' +
                '\n' +
                '                    <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>\n' +
                '\n' +
                '                    <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>\n' +
                '\n' +
                '                    <div class="pswp__preloader">\n' +
                '                        <div class="pswp__preloader__icn">\n' +
                '                            <div class="pswp__preloader__cut">\n' +
                '                                <div class="pswp__preloader__donut"></div>\n' +
                '                            </div>\n' +
                '                        </div>\n' +
                '                    </div>\n' +
                '                </div>\n' +
                '                <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">\n' +
                '                    <div class="pswp__share-tooltip"></div>\n' +
                '                </div>\n' +
                '                <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">\n' +
                '                </button>\n' +
                '                <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">\n' +
                '                </button>\n' +
                '                <div class="pswp__caption">\n' +
                '                    <div class="pswp__caption__center"></div>\n' +
                '                </div>\n' +
                '            </div>\n' +
                '        </div>\n' +
                '    </div>'
            );
        }

        var container = document.getElementById('0');

        var initPhotoSwipeFromDOM = function(gallerySelector) {
            var parseThumbnailElements = function(el) {
                var thumbElements = el.childNodes,
                    numNodes = thumbElements.length,
                    items = [],
                    figureEl,
                    linkEl,
                    size,
                    item;

                for(var i = 0; i < numNodes; i++) {

                    figureEl = thumbElements[i];
                    if(figureEl.nodeType !== 1) {
                        continue;
                    }
                    linkEl = figureEl.children[0];
                    size = linkEl.children[0];
                    item = {
                        src: linkEl.getAttribute('href'),
                        w: 2500,
                        h: 0,
                        sizeLoaded: false
                    };

                    if(figureEl.children.length > 1) {
                        item.title = figureEl.children[1].innerHTML;
                    }
                    if(linkEl.children.length > 0) {
                        item.msrc = linkEl.children[0].getAttribute('src');
                    }
                    if(item.msrc === item.src){
                        item.w = parseInt(size.naturalWidth, 10);
                        item.h = parseInt(size.naturalHeight, 10);
                    }

                    item.el = figureEl;
                    items.push(item);
                }
                return items;
            };

            var closest = function closest(el, fn) {
                return el && ( fn(el) ? el : closest(el.parentNode, fn) );
            };

            var onThumbnailsClick = function(e) {
                e = e || window.event;
                e.preventDefault ? e.preventDefault() : e.returnValue = false;

                var eTarget = e.target || e.srcElement;

                var clickedListItem = closest(eTarget, function(el) {
                    return (el.tagName && el.tagName.toUpperCase() === 'FIGURE');
                });

                if(!clickedListItem) {
                    return;
                }

                var clickedGallery = clickedListItem.parentNode,
                    childNodes = clickedListItem.parentNode.childNodes,
                    numChildNodes = childNodes.length,
                    nodeIndex = 0,
                    index;

                for (var i = 0; i < numChildNodes; i++) {
                    if(childNodes[i].nodeType !== 1) {
                        continue;
                    }

                    if(childNodes[i] === clickedListItem) {
                        index = nodeIndex;
                        break;
                    }
                    nodeIndex++;
                }

                if(index >= 0) {
                    openPhotoSwipe( index, clickedGallery );
                }
                return false;
            };

            var photoswipeParseHash = function() {
                var hash = window.location.hash.substring(1),
                    params = {};

                if(hash.length < 5) {
                    return params;
                }

                var vars = hash.split('&');
                for (var i = 0; i < vars.length; i++) {
                    if(!vars[i]) {
                        continue;
                    }
                    var pair = vars[i].split('=');
                    if(pair.length < 2) {
                        continue;
                    }
                    params[pair[0]] = pair[1];
                }

                if(params.gid) {
                    params.gid = parseInt(params.gid, 10);
                }

                return params;
            };

            var openPhotoSwipe = function(index, galleryElement, disableAnimation, fromURL) {
                var pswpElement = document.querySelectorAll('.pswp')[0],
                    gallery,
                    options,
                    items;

                items = parseThumbnailElements(galleryElement);

                options = {
                    galleryUID: galleryElement.getAttribute('data-pswp-uid'),
                    getThumbBoundsFn: function(index) {
                        var thumbnail = items[index].el.getElementsByTagName('img')[0], // find thumbnail
                            pageYScroll = window.pageYOffset || document.documentElement.scrollTop,
                            rect = thumbnail.getBoundingClientRect();
                        return {x:rect.left, y:rect.top + pageYScroll, w:rect.width};
                    },
                    bgOpacity: 0.8,
                    closeOnScroll: false,
                    shareEl: false,
                    fullscreenEl: false,
                    zoomEl: true,
                    history: false,
                    loop: false
                };

                if(fromURL) {
                    if(options.galleryPIDs) {
                        for(var j = 0; j < items.length; j++) {
                            if(items[j].pid == index) {
                                options.index = j;
                                break;
                            }
                        }
                    } else {
                        options.index = parseInt(index, 10) - 1;
                    }
                } else {
                    options.index = parseInt(index, 10);
                }

                if( isNaN(options.index) ) {
                    return;
                }

                if(disableAnimation) {
                    options.showAnimationDuration = 0;
                }

                gallery = new PhotoSwipe( pswpElement, PhotoSwipeUI_Default, items, options);

                gallery.listen('gettingData', function(index, item) {
                    if (!item.sizeLoaded) {
                        item.sizeLoaded = true;
                        var img = new Image();
                        img.onload = function() {
                            item.w = this.width;
                            item.h = this.height;
                            gallery.updateSize(true);
                        }
                        img.src = item.src;
                    }
                });

                gallery.init();

                var buttonLeft = pswpElement.getElementsByClassName('pswp__button--arrow--left')[0];
                var buttonRight = pswpElement.getElementsByClassName('pswp__button--arrow--right')[0];

                buttonLeft.hidden = gallery.getCurrentIndex() === 0;
                buttonRight.hidden = gallery.getCurrentIndex() + 1 === gallery.items.length;

                gallery.listen('beforeChange', function() {
                        buttonLeft.hidden = gallery.getCurrentIndex() === 0;
                        buttonRight.hidden = gallery.getCurrentIndex() + 1 === gallery.items.length;
                    }
                );
            };

            var galleryElements = container.querySelectorAll( gallerySelector );

            for(var i = 0, l = galleryElements.length; i < l; i++) {
                galleryElements[i].setAttribute('data-pswp-uid', i+1);
                galleryElements[i].onclick = onThumbnailsClick;
            }

            var hashData = photoswipeParseHash();
            if(hashData.pid && hashData.gid) {
                openPhotoSwipe( hashData.pid ,  galleryElements[ hashData.gid - 1 ], true, true );
            }
        };

        initPhotoSwipeFromDOM('.images-gallery');
    }, false)
</script>

<p><strong>Examples of JavaScript function and HTML code that add a possibility to create a device or an asset:</strong>
<br />
<br /></p>
<details>
   <summary>
 JavaScript function. 
  </summary>
   <figure class="highlight">
    <div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
</pre></td><td class="rouge-code"><pre><span class="n">let</span> <span class="vg">$injector</span> <span class="o">=</span> <span class="n">widgetContext</span><span class="o">.</span><span class="vg">$scope</span><span class="o">.</span><span class="vg">$injector</span><span class="p">;</span>
<span class="n">let</span> <span class="n">customDialog</span> <span class="o">=</span> <span class="vg">$injector</span><span class="p">.</span><span class="nf">get</span><span class="p">(</span><span class="n">widgetContext</span><span class="p">.</span><span class="nf">servicesMap</span><span class="p">.</span><span class="nf">get</span><span class="p">(</span><span class="s1">'customDialog'</span><span class="p">));</span>
<span class="n">let</span> <span class="n">assetService</span> <span class="o">=</span> <span class="vg">$injector</span><span class="p">.</span><span class="nf">get</span><span class="p">(</span><span class="n">widgetContext</span><span class="p">.</span><span class="nf">servicesMap</span><span class="p">.</span><span class="nf">get</span><span class="p">(</span><span class="s1">'assetService'</span><span class="p">));</span>
<span class="n">let</span> <span class="n">deviceService</span> <span class="o">=</span> <span class="vg">$injector</span><span class="p">.</span><span class="nf">get</span><span class="p">(</span><span class="n">widgetContext</span><span class="p">.</span><span class="nf">servicesMap</span><span class="p">.</span><span class="nf">get</span><span class="p">(</span><span class="s1">'deviceService'</span><span class="p">));</span>
<span class="n">let</span> <span class="n">attributeService</span> <span class="o">=</span> <span class="vg">$injector</span><span class="p">.</span><span class="nf">get</span><span class="p">(</span><span class="n">widgetContext</span><span class="p">.</span><span class="nf">servicesMap</span><span class="p">.</span><span class="nf">get</span><span class="p">(</span><span class="s1">'attributeService'</span><span class="p">));</span>
<span class="n">let</span> <span class="n">entityRelationService</span> <span class="o">=</span> <span class="vg">$injector</span><span class="p">.</span><span class="nf">get</span><span class="p">(</span><span class="n">widgetContext</span><span class="p">.</span><span class="nf">servicesMap</span><span class="p">.</span><span class="nf">get</span><span class="p">(</span><span class="s1">'entityRelationService'</span><span class="p">));</span>

<span class="n">openAddEntityDialog</span><span class="p">();</span>

<span class="n">function</span> <span class="n">openAddEntityDialog</span><span class="p">()</span> <span class="p">{</span>
<span class="n">customDialog</span><span class="p">.</span><span class="nf">customDialog</span><span class="p">(</span><span class="n">htmlTemplate</span><span class="p">,</span> <span class="no">AddEntityDialogController</span><span class="p">).</span><span class="nf">subscribe</span><span class="p">();</span>
<span class="p">}</span>

<span class="n">function</span> <span class="no">AddEntityDialogController</span><span class="p">(</span><span class="n">instance</span><span class="p">)</span> <span class="p">{</span>
<span class="n">let</span> <span class="n">vm</span> <span class="o">=</span> <span class="n">instance</span><span class="p">;</span>

    <span class="n">vm</span><span class="p">.</span><span class="nf">allowedEntityTypes</span> <span class="o">=</span> <span class="p">[</span><span class="s1">'ASSET'</span><span class="p">,</span> <span class="s1">'DEVICE'</span><span class="p">];</span>
    <span class="n">vm</span><span class="p">.</span><span class="nf">entitySearchDirection</span> <span class="o">=</span> <span class="p">{</span>
        <span class="ss">from: </span><span class="s2">"FROM"</span><span class="p">,</span>
        <span class="ss">to: </span><span class="s2">"TO"</span>
    <span class="p">}</span>

    <span class="n">vm</span><span class="p">.</span><span class="nf">addEntityFormGroup</span> <span class="o">=</span> <span class="n">vm</span><span class="p">.</span><span class="nf">fb</span><span class="p">.</span><span class="nf">group</span><span class="p">({</span>
     <span class="ss">entityName: </span><span class="p">[</span><span class="s1">''</span><span class="p">,</span> <span class="p">[</span><span class="n">vm</span><span class="p">.</span><span class="nf">validators</span><span class="p">.</span><span class="nf">required</span><span class="p">]],</span>
     <span class="ss">entityType: </span><span class="p">[</span><span class="s1">'DEVICE'</span><span class="p">],</span>
     <span class="ss">entityLabel: </span><span class="p">[</span><span class="n">null</span><span class="p">],</span>
     <span class="ss">type: </span><span class="p">[</span><span class="s1">''</span><span class="p">,</span> <span class="p">[</span><span class="n">vm</span><span class="p">.</span><span class="nf">validators</span><span class="p">.</span><span class="nf">required</span><span class="p">]],</span>
     <span class="ss">attributes: </span><span class="n">vm</span><span class="p">.</span><span class="nf">fb</span><span class="p">.</span><span class="nf">group</span><span class="p">({</span>
         <span class="ss">latitude: </span><span class="p">[</span><span class="n">null</span><span class="p">],</span>
         <span class="ss">longitude: </span><span class="p">[</span><span class="n">null</span><span class="p">],</span>
         <span class="ss">address: </span><span class="p">[</span><span class="n">null</span><span class="p">],</span>
         <span class="ss">owner: </span><span class="p">[</span><span class="n">null</span><span class="p">],</span>
         <span class="ss">number: </span><span class="p">[</span><span class="n">null</span><span class="p">,</span> <span class="p">[</span><span class="n">vm</span><span class="p">.</span><span class="nf">validators</span><span class="p">.</span><span class="nf">pattern</span><span class="p">(</span><span class="sr">/^-?[0-9]+$/</span><span class="p">)]],</span>
         <span class="ss">booleanValue: </span><span class="p">[</span><span class="n">null</span><span class="p">]</span>
     <span class="p">}),</span>
     <span class="ss">relations: </span><span class="n">vm</span><span class="p">.</span><span class="nf">fb</span><span class="p">.</span><span class="nf">array</span><span class="p">([])</span>
    <span class="p">});</span>

    <span class="n">vm</span><span class="p">.</span><span class="nf">cancel</span> <span class="o">=</span> <span class="n">function</span><span class="p">()</span> <span class="p">{</span>
        <span class="n">vm</span><span class="p">.</span><span class="nf">dialogRef</span><span class="p">.</span><span class="nf">close</span><span class="p">(</span><span class="n">null</span><span class="p">);</span>
    <span class="p">};</span>

    <span class="n">vm</span><span class="p">.</span><span class="nf">relations</span> <span class="o">=</span> <span class="n">function</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">return</span> <span class="n">vm</span><span class="p">.</span><span class="nf">addEntityFormGroup</span><span class="p">.</span><span class="nf">get</span><span class="p">(</span><span class="s1">'relations'</span><span class="p">);</span>
    <span class="p">};</span>

    <span class="n">vm</span><span class="p">.</span><span class="nf">addRelation</span> <span class="o">=</span> <span class="n">function</span><span class="p">()</span> <span class="p">{</span>
        <span class="n">vm</span><span class="p">.</span><span class="nf">relations</span><span class="p">().</span><span class="nf">push</span><span class="p">(</span><span class="n">vm</span><span class="p">.</span><span class="nf">fb</span><span class="p">.</span><span class="nf">group</span><span class="p">({</span>
         <span class="ss">relatedEntity: </span><span class="p">[</span><span class="n">null</span><span class="p">,</span> <span class="p">[</span><span class="n">vm</span><span class="p">.</span><span class="nf">validators</span><span class="p">.</span><span class="nf">required</span><span class="p">]],</span>
         <span class="ss">relationType: </span><span class="p">[</span><span class="n">null</span><span class="p">,</span> <span class="p">[</span><span class="n">vm</span><span class="p">.</span><span class="nf">validators</span><span class="p">.</span><span class="nf">required</span><span class="p">]],</span>
         <span class="ss">direction: </span><span class="p">[</span><span class="n">null</span><span class="p">,</span> <span class="p">[</span><span class="n">vm</span><span class="p">.</span><span class="nf">validators</span><span class="p">.</span><span class="nf">required</span><span class="p">]]</span>
        <span class="p">}));</span>
    <span class="p">};</span>

    <span class="n">vm</span><span class="p">.</span><span class="nf">removeRelation</span> <span class="o">=</span> <span class="n">function</span><span class="p">(</span><span class="n">index</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">vm</span><span class="p">.</span><span class="nf">relations</span><span class="p">().</span><span class="nf">removeAt</span><span class="p">(</span><span class="n">index</span><span class="p">);</span>
        <span class="n">vm</span><span class="p">.</span><span class="nf">relations</span><span class="p">().</span><span class="nf">markAsDirty</span><span class="p">();</span>
    <span class="p">};</span>

    <span class="n">vm</span><span class="p">.</span><span class="nf">save</span> <span class="o">=</span> <span class="n">function</span><span class="p">()</span> <span class="p">{</span>
        <span class="n">vm</span><span class="p">.</span><span class="nf">addEntityFormGroup</span><span class="p">.</span><span class="nf">markAsPristine</span><span class="p">();</span>
        <span class="n">saveEntityObservable</span><span class="p">().</span><span class="nf">subscribe</span><span class="p">(</span>
            <span class="n">function</span> <span class="p">(</span><span class="n">entity</span><span class="p">)</span> <span class="p">{</span>
                <span class="n">widgetContext</span><span class="p">.</span><span class="nf">rxjs</span><span class="p">.</span><span class="nf">forkJoin</span><span class="p">([</span>
                    <span class="n">saveAttributes</span><span class="p">(</span><span class="n">entity</span><span class="p">.</span><span class="nf">id</span><span class="p">),</span>
                    <span class="n">saveRelations</span><span class="p">(</span><span class="n">entity</span><span class="p">.</span><span class="nf">id</span><span class="p">)</span>
                <span class="p">]).</span><span class="nf">subscribe</span><span class="p">(</span>
                    <span class="n">function</span> <span class="p">()</span> <span class="p">{</span>
                        <span class="n">widgetContext</span><span class="p">.</span><span class="nf">updateAliases</span><span class="p">();</span>
                        <span class="n">vm</span><span class="p">.</span><span class="nf">dialogRef</span><span class="p">.</span><span class="nf">close</span><span class="p">(</span><span class="n">null</span><span class="p">);</span>
                    <span class="p">}</span>
                <span class="p">);</span>
            <span class="p">}</span>
        <span class="p">);</span>
    <span class="p">};</span>

    <span class="n">function</span> <span class="n">saveEntityObservable</span><span class="p">()</span> <span class="p">{</span>
        <span class="n">const</span> <span class="n">formValues</span> <span class="o">=</span> <span class="n">vm</span><span class="p">.</span><span class="nf">addEntityFormGroup</span><span class="p">.</span><span class="nf">value</span><span class="p">;</span>
        <span class="n">let</span> <span class="n">entity</span> <span class="o">=</span> <span class="p">{</span>
            <span class="ss">name: </span><span class="n">formValues</span><span class="p">.</span><span class="nf">entityName</span><span class="p">,</span>
            <span class="ss">type: </span><span class="n">formValues</span><span class="p">.</span><span class="nf">type</span><span class="p">,</span>
            <span class="ss">label: </span><span class="n">formValues</span><span class="p">.</span><span class="nf">entityLabel</span>
        <span class="p">};</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">formValues</span><span class="p">.</span><span class="nf">entityType</span> <span class="o">==</span> <span class="s1">'ASSET'</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">return</span> <span class="n">assetService</span><span class="p">.</span><span class="nf">saveAsset</span><span class="p">(</span><span class="n">entity</span><span class="p">);</span>
        <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">formValues</span><span class="p">.</span><span class="nf">entityType</span> <span class="o">==</span> <span class="s1">'DEVICE'</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">return</span> <span class="n">deviceService</span><span class="p">.</span><span class="nf">saveDevice</span><span class="p">(</span><span class="n">entity</span><span class="p">);</span>
        <span class="p">}</span>
    <span class="p">}</span>

    <span class="n">function</span> <span class="n">saveAttributes</span><span class="p">(</span><span class="n">entityId</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">let</span> <span class="n">attributes</span> <span class="o">=</span> <span class="n">vm</span><span class="p">.</span><span class="nf">addEntityFormGroup</span><span class="p">.</span><span class="nf">get</span><span class="p">(</span><span class="s1">'attributes'</span><span class="p">).</span><span class="nf">value</span><span class="p">;</span>
        <span class="n">let</span> <span class="n">attributesArray</span> <span class="o">=</span> <span class="p">[];</span>
        <span class="k">for</span> <span class="p">(</span><span class="n">let</span> <span class="n">key</span> <span class="k">in</span> <span class="n">attributes</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">if</span><span class="p">(</span><span class="n">attributes</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">!==</span> <span class="n">null</span><span class="p">)</span> <span class="p">{</span>
                <span class="n">attributesArray</span><span class="p">.</span><span class="nf">push</span><span class="p">({</span><span class="ss">key: </span><span class="n">key</span><span class="p">,</span> <span class="ss">value: </span><span class="n">attributes</span><span class="p">[</span><span class="n">key</span><span class="p">]});</span>
            <span class="p">}</span>
        <span class="p">}</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">attributesArray</span><span class="p">.</span><span class="nf">length</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">return</span> <span class="n">attributeService</span><span class="p">.</span><span class="nf">saveEntityAttributes</span><span class="p">(</span><span class="n">entityId</span><span class="p">,</span> <span class="s2">"SERVER_SCOPE"</span><span class="p">,</span> <span class="n">attributesArray</span><span class="p">);</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="n">widgetContext</span><span class="p">.</span><span class="nf">rxjs</span><span class="p">.</span><span class="nf">of</span><span class="p">([]);</span>
    <span class="p">}</span>

    <span class="n">function</span> <span class="n">saveRelations</span><span class="p">(</span><span class="n">entityId</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">let</span> <span class="n">relations</span> <span class="o">=</span> <span class="n">vm</span><span class="p">.</span><span class="nf">addEntityFormGroup</span><span class="p">.</span><span class="nf">get</span><span class="p">(</span><span class="s1">'relations'</span><span class="p">).</span><span class="nf">value</span><span class="p">;</span>
        <span class="n">let</span> <span class="n">tasks</span> <span class="o">=</span> <span class="p">[];</span>
        <span class="k">for</span><span class="p">(</span><span class="n">let</span> <span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">relations</span><span class="p">.</span><span class="nf">length</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
            <span class="n">let</span> <span class="n">relation</span> <span class="o">=</span> <span class="p">{</span>
                <span class="ss">type: </span><span class="n">relations</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="nf">relationType</span><span class="p">,</span>
                <span class="ss">typeGroup: </span><span class="s1">'COMMON'</span>
            <span class="p">};</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">relations</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="nf">direction</span> <span class="o">==</span> <span class="s1">'FROM'</span><span class="p">)</span> <span class="p">{</span>
                <span class="n">relation</span><span class="p">.</span><span class="nf">to</span> <span class="o">=</span> <span class="n">relations</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="nf">relatedEntity</span><span class="p">;</span>
                <span class="n">relation</span><span class="p">.</span><span class="nf">from</span> <span class="o">=</span> <span class="n">entityId</span><span class="p">;</span>
            <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
                <span class="n">relation</span><span class="p">.</span><span class="nf">to</span> <span class="o">=</span> <span class="n">entityId</span><span class="p">;</span>
                <span class="n">relation</span><span class="p">.</span><span class="nf">from</span> <span class="o">=</span> <span class="n">relations</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="nf">relatedEntity</span><span class="p">;</span>
            <span class="p">}</span>
            <span class="n">tasks</span><span class="p">.</span><span class="nf">push</span><span class="p">(</span><span class="n">entityRelationService</span><span class="p">.</span><span class="nf">saveRelation</span><span class="p">(</span><span class="n">relation</span><span class="p">));</span>
        <span class="p">}</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">tasks</span><span class="p">.</span><span class="nf">length</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">return</span> <span class="n">widgetContext</span><span class="p">.</span><span class="nf">rxjs</span><span class="p">.</span><span class="nf">forkJoin</span><span class="p">(</span><span class="n">tasks</span><span class="p">);</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="n">widgetContext</span><span class="p">.</span><span class="nf">rxjs</span><span class="p">.</span><span class="nf">of</span><span class="p">([]);</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre></div>    </div>
  </figure>
 
</details>
<p><br /></p>
<details>
   <summary>
 HTML code. 
  </summary>
   <figure class="highlight">
    <div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
153
154
155
</pre></td><td class="rouge-code"><pre><span class="o">&lt;</span><span class="n">form</span> <span class="c1">#addEntityForm="ngForm" [formGroup]="addEntityFormGroup"</span>
      <span class="p">(</span><span class="n">ngSubmit</span><span class="p">)</span><span class="o">=</span><span class="s2">"save()"</span> <span class="k">class</span><span class="o">=</span><span class="s2">"add-entity-form"</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">mat</span><span class="o">-</span><span class="n">toolbar</span> <span class="n">fxLayout</span><span class="o">=</span><span class="s2">"row"</span> <span class="n">color</span><span class="o">=</span><span class="s2">"primary"</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="n">h2</span><span class="o">&gt;</span><span class="no">Add</span> <span class="n">entity</span><span class="o">&lt;</span><span class="sr">/h2&gt;
        &lt;span fxFlex&gt;&lt;/s</span><span class="n">pan</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="n">button</span> <span class="n">mat</span><span class="o">-</span><span class="n">icon</span><span class="o">-</span><span class="n">button</span> <span class="p">(</span><span class="n">click</span><span class="p">)</span><span class="o">=</span><span class="s2">"cancel()"</span> <span class="n">type</span><span class="o">=</span><span class="s2">"button"</span><span class="o">&gt;</span>
            <span class="o">&lt;</span><span class="n">mat</span><span class="o">-</span><span class="n">icon</span> <span class="k">class</span><span class="o">=</span><span class="s2">"material-icons"</span><span class="o">&gt;</span><span class="n">close</span><span class="o">&lt;</span><span class="sr">/mat-icon&gt;
        &lt;/</span><span class="n">button</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="sr">/mat-toolbar&gt;
    &lt;mat-progress-bar color="warn" mode="indeterminate" *ngIf="isLoading$ | async"&gt;
    &lt;/m</span><span class="n">at</span><span class="o">-</span><span class="n">progress</span><span class="o">-</span><span class="n">bar</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">div</span> <span class="n">style</span><span class="o">=</span><span class="s2">"height: 4px;"</span> <span class="o">*</span><span class="n">ngIf</span><span class="o">=</span><span class="s2">"!(isLoading$ | async)"</span><span class="o">&gt;&lt;</span><span class="sr">/div&gt;
    &lt;div mat-dialog-content fxLayout="column"&gt;
        &lt;div fxLayout="row" fxLayoutGap="8px" fxLayout.xs="column"  fxLayoutGap.xs="0"&gt;
            &lt;mat-form-field fxFlex class="mat-block"&gt;
                &lt;mat-label&gt;Entity Name&lt;/m</span><span class="n">at</span><span class="o">-</span><span class="n">label</span><span class="o">&gt;</span>
                <span class="o">&lt;</span><span class="n">input</span> <span class="n">matInput</span> <span class="n">formControlName</span><span class="o">=</span><span class="s2">"entityName"</span> <span class="n">required</span><span class="o">&gt;</span>
                <span class="o">&lt;</span><span class="n">mat</span><span class="o">-</span><span class="n">error</span> <span class="o">*</span><span class="n">ngIf</span><span class="o">=</span><span class="s2">"addEntityFormGroup.get('entityName').hasError('required')"</span><span class="o">&gt;</span>
                    <span class="no">Entity</span> <span class="nb">name</span> <span class="n">is</span> <span class="n">required</span><span class="p">.</span>
                <span class="nf">&lt;</span><span class="o">/</span><span class="n">mat</span><span class="o">-</span><span class="n">error</span><span class="o">&gt;</span>
            <span class="o">&lt;</span><span class="sr">/mat-form-field&gt;
            &lt;mat-form-field fxFlex class="mat-block"&gt;
                &lt;mat-label&gt;Entity Label&lt;/m</span><span class="n">at</span><span class="o">-</span><span class="n">label</span><span class="o">&gt;</span>
                <span class="o">&lt;</span><span class="n">input</span> <span class="n">matInput</span> <span class="n">formControlName</span><span class="o">=</span><span class="s2">"entityLabel"</span> <span class="o">&gt;</span>
            <span class="o">&lt;</span><span class="sr">/mat-form-field&gt;
        &lt;/</span><span class="n">div</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="n">div</span> <span class="n">fxLayout</span><span class="o">=</span><span class="s2">"row"</span> <span class="n">fxLayoutGap</span><span class="o">=</span><span class="s2">"8px"</span> <span class="n">fxLayout</span><span class="p">.</span><span class="nf">xs</span><span class="o">=</span><span class="s2">"column"</span>  <span class="n">fxLayoutGap</span><span class="p">.</span><span class="nf">xs</span><span class="o">=</span><span class="s2">"0"</span><span class="o">&gt;</span>
            <span class="o">&lt;</span><span class="n">tb</span><span class="o">-</span><span class="n">entity</span><span class="o">-</span><span class="n">type</span><span class="o">-</span><span class="nb">select</span>
                    <span class="k">class</span><span class="o">=</span><span class="s2">"mat-block"</span>
                    <span class="n">formControlName</span><span class="o">=</span><span class="s2">"entityType"</span>
                    <span class="p">[</span><span class="n">showLabel</span><span class="p">]</span><span class="o">=</span><span class="s2">"true"</span>
                    <span class="p">[</span><span class="n">allowedEntityTypes</span><span class="p">]</span><span class="o">=</span><span class="s2">"allowedEntityTypes"</span>
            <span class="o">&gt;&lt;</span><span class="sr">/tb-entity-type-select&gt;
            &lt;tb-entity-subtype-autocomplete
                    fxFlex *ngIf="addEntityFormGroup.get('entityType').value == 'ASSET'"
                    class="mat-block"
                    formControlName="type"
                    [required]="true"
                    [entityType]="'ASSET'"
            &gt;&lt;/</span><span class="n">tb</span><span class="o">-</span><span class="n">entity</span><span class="o">-</span><span class="n">subtype</span><span class="o">-</span><span class="n">autocomplete</span><span class="o">&gt;</span>
            <span class="o">&lt;</span><span class="n">tb</span><span class="o">-</span><span class="n">entity</span><span class="o">-</span><span class="n">subtype</span><span class="o">-</span><span class="n">autocomplete</span>
                    <span class="n">fxFlex</span> <span class="o">*</span><span class="n">ngIf</span><span class="o">=</span><span class="s2">"addEntityFormGroup.get('entityType').value != 'ASSET'"</span>
                    <span class="k">class</span><span class="o">=</span><span class="s2">"mat-block"</span>
                    <span class="n">formControlName</span><span class="o">=</span><span class="s2">"type"</span>
                    <span class="p">[</span><span class="n">required</span><span class="p">]</span><span class="o">=</span><span class="s2">"true"</span>
                    <span class="p">[</span><span class="n">entityType</span><span class="p">]</span><span class="o">=</span><span class="s2">"'DEVICE'"</span>
            <span class="o">&gt;&lt;</span><span class="sr">/tb-entity-subtype-autocomplete&gt;
        &lt;/</span><span class="n">div</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="n">div</span> <span class="n">formGroupName</span><span class="o">=</span><span class="s2">"attributes"</span> <span class="n">fxLayout</span><span class="o">=</span><span class="s2">"column"</span><span class="o">&gt;</span>
            <span class="o">&lt;</span><span class="n">div</span> <span class="n">fxLayout</span><span class="o">=</span><span class="s2">"row"</span> <span class="n">fxLayoutGap</span><span class="o">=</span><span class="s2">"8px"</span> <span class="n">fxLayout</span><span class="p">.</span><span class="nf">xs</span><span class="o">=</span><span class="s2">"column"</span>  <span class="n">fxLayoutGap</span><span class="p">.</span><span class="nf">xs</span><span class="o">=</span><span class="s2">"0"</span><span class="o">&gt;</span>
                <span class="o">&lt;</span><span class="n">mat</span><span class="o">-</span><span class="n">form</span><span class="o">-</span><span class="n">field</span> <span class="n">fxFlex</span> <span class="k">class</span><span class="o">=</span><span class="s2">"mat-block"</span><span class="o">&gt;</span>
                    <span class="o">&lt;</span><span class="n">mat</span><span class="o">-</span><span class="n">label</span><span class="o">&gt;</span><span class="no">Latitude</span><span class="o">&lt;</span><span class="sr">/mat-label&gt;
                    &lt;input type="number" step="any" matInput formControlName="latitude"&gt;
                &lt;/m</span><span class="n">at</span><span class="o">-</span><span class="n">form</span><span class="o">-</span><span class="n">field</span><span class="o">&gt;</span>
                <span class="o">&lt;</span><span class="n">mat</span><span class="o">-</span><span class="n">form</span><span class="o">-</span><span class="n">field</span> <span class="n">fxFlex</span> <span class="k">class</span><span class="o">=</span><span class="s2">"mat-block"</span><span class="o">&gt;</span>
                    <span class="o">&lt;</span><span class="n">mat</span><span class="o">-</span><span class="n">label</span><span class="o">&gt;</span><span class="no">Longitude</span><span class="o">&lt;</span><span class="sr">/mat-label&gt;
                    &lt;input type="number" step="any" matInput formControlName="longitude"&gt;
                &lt;/m</span><span class="n">at</span><span class="o">-</span><span class="n">form</span><span class="o">-</span><span class="n">field</span><span class="o">&gt;</span>
            <span class="o">&lt;</span><span class="sr">/div&gt;
            &lt;div fxLayout="row" fxLayoutGap="8px" fxLayout.xs="column"  fxLayoutGap.xs="0"&gt;
                &lt;mat-form-field fxFlex class="mat-block"&gt;
                    &lt;mat-label&gt;Address&lt;/m</span><span class="n">at</span><span class="o">-</span><span class="n">label</span><span class="o">&gt;</span>
                    <span class="o">&lt;</span><span class="n">input</span> <span class="n">matInput</span> <span class="n">formControlName</span><span class="o">=</span><span class="s2">"address"</span><span class="o">&gt;</span>
                <span class="o">&lt;</span><span class="sr">/mat-form-field&gt;
                &lt;mat-form-field fxFlex class="mat-block"&gt;
                    &lt;mat-label&gt;Owner&lt;/m</span><span class="n">at</span><span class="o">-</span><span class="n">label</span><span class="o">&gt;</span>
                    <span class="o">&lt;</span><span class="n">input</span> <span class="n">matInput</span> <span class="n">formControlName</span><span class="o">=</span><span class="s2">"owner"</span><span class="o">&gt;</span>
                <span class="o">&lt;</span><span class="sr">/mat-form-field&gt;
            &lt;/</span><span class="n">div</span><span class="o">&gt;</span>
            <span class="o">&lt;</span><span class="n">div</span> <span class="n">fxLayout</span><span class="o">=</span><span class="s2">"row"</span> <span class="n">fxLayoutGap</span><span class="o">=</span><span class="s2">"8px"</span> <span class="n">fxLayout</span><span class="p">.</span><span class="nf">xs</span><span class="o">=</span><span class="s2">"column"</span>  <span class="n">fxLayoutGap</span><span class="p">.</span><span class="nf">xs</span><span class="o">=</span><span class="s2">"0"</span><span class="o">&gt;</span>
                <span class="o">&lt;</span><span class="n">mat</span><span class="o">-</span><span class="n">form</span><span class="o">-</span><span class="n">field</span> <span class="n">fxFlex</span> <span class="k">class</span><span class="o">=</span><span class="s2">"mat-block"</span><span class="o">&gt;</span>
                    <span class="o">&lt;</span><span class="n">mat</span><span class="o">-</span><span class="n">label</span><span class="o">&gt;</span><span class="no">Integer</span> <span class="no">Value</span><span class="o">&lt;</span><span class="sr">/mat-label&gt;
                    &lt;input type="number" step="1" matInput formControlName="number"&gt;
                    &lt;mat-error *ngIf="addEntityFormGroup.get('attributes.number').hasError('pattern')"&gt;
                        Invalid integer value.
                    &lt;/m</span><span class="n">at</span><span class="o">-</span><span class="n">error</span><span class="o">&gt;</span>
                <span class="o">&lt;</span><span class="sr">/mat-form-field&gt;
                &lt;div class="boolean-value-input" fxLayout="column" fxLayoutAlign="center start" fxFlex&gt;
                    &lt;label class="checkbox-label"&gt;Boolean Value&lt;/</span><span class="n">label</span><span class="o">&gt;</span>
                    <span class="o">&lt;</span><span class="n">mat</span><span class="o">-</span><span class="n">checkbox</span> <span class="n">formControlName</span><span class="o">=</span><span class="s2">"booleanValue"</span> <span class="n">style</span><span class="o">=</span><span class="s2">"margin-bottom: 40px;"</span><span class="o">&gt;</span>
                        
                    <span class="o">&lt;</span><span class="sr">/mat-checkbox&gt;
                &lt;/</span><span class="n">div</span><span class="o">&gt;</span>
            <span class="o">&lt;</span><span class="sr">/div&gt;
        &lt;/</span><span class="n">div</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="n">div</span> <span class="k">class</span><span class="o">=</span><span class="s2">"relations-list"</span><span class="o">&gt;</span>
            <span class="o">&lt;</span><span class="n">div</span> <span class="k">class</span><span class="o">=</span><span class="s2">"mat-body-1"</span> <span class="n">style</span><span class="o">=</span><span class="s2">"padding-bottom: 10px; color: rgba(0,0,0,0.57);"</span><span class="o">&gt;</span><span class="no">Relations</span><span class="o">&lt;</span><span class="sr">/div&gt;
            &lt;div class="body" [fxShow]="relations().length"&gt;
                &lt;div class="row" fxLayout="row" fxLayoutAlign="start center" formArrayName="relations" *ngFor="let relation of relations().controls; let i = index;"&gt;
                    &lt;div [formGroupName]="i" class="mat-elevation-z2" fxFlex fxLayout="row" style="padding: 5px 0 5px 5px;"&gt;
                        &lt;div fxFlex fxLayout="column"&gt;
                            &lt;div fxLayout="row" fxLayoutGap="8px" fxLayout.xs="column"  fxLayoutGap.xs="0"&gt;
                                &lt;mat-form-field class="mat-block" style="min-width: 100px;"&gt;
                                    &lt;mat-label&gt;Direction&lt;/m</span><span class="n">at</span><span class="o">-</span><span class="n">label</span><span class="o">&gt;</span>
                                    <span class="o">&lt;</span><span class="n">mat</span><span class="o">-</span><span class="nb">select</span> <span class="n">formControlName</span><span class="o">=</span><span class="s2">"direction"</span> <span class="nb">name</span><span class="o">=</span><span class="s2">"direction"</span><span class="o">&gt;</span>
                                        <span class="o">&lt;</span><span class="n">mat</span><span class="o">-</span><span class="n">option</span> <span class="o">*</span><span class="n">ngFor</span><span class="o">=</span><span class="s2">"let direction of entitySearchDirection | keyvalue"</span> <span class="p">[</span><span class="n">value</span><span class="p">]</span><span class="o">=</span><span class="s2">"direction.value"</span><span class="o">&gt;</span>
                                            
                                        <span class="o">&lt;</span><span class="sr">/mat-option&gt;
                                    &lt;/m</span><span class="n">at</span><span class="o">-</span><span class="nb">select</span><span class="o">&gt;</span>
                                    <span class="o">&lt;</span><span class="n">mat</span><span class="o">-</span><span class="n">error</span> <span class="o">*</span><span class="n">ngIf</span><span class="o">=</span><span class="s2">"relation.get('direction').hasError('required')"</span><span class="o">&gt;</span>
                                        <span class="no">Relation</span> <span class="n">direction</span> <span class="n">is</span> <span class="n">required</span><span class="p">.</span>
                                    <span class="nf">&lt;</span><span class="o">/</span><span class="n">mat</span><span class="o">-</span><span class="n">error</span><span class="o">&gt;</span>
                                <span class="o">&lt;</span><span class="sr">/mat-form-field&gt;
                                &lt;tb-relation-type-autocomplete
                                        fxFlex class="mat-block"
                                        formControlName="relationType"
                                        [required]="true"&gt;
                                &lt;/</span><span class="n">tb</span><span class="o">-</span><span class="n">relation</span><span class="o">-</span><span class="n">type</span><span class="o">-</span><span class="n">autocomplete</span><span class="o">&gt;</span>
                            <span class="o">&lt;</span><span class="sr">/div&gt;
                            &lt;div fxLayout="row" fxLayout.xs="column"&gt;
                                &lt;tb-entity-select
                                        fxFlex class="mat-block"
                                        [required]="true"
                                        formControlName="relatedEntity"&gt;
                                &lt;/</span><span class="n">tb</span><span class="o">-</span><span class="n">entity</span><span class="o">-</span><span class="nb">select</span><span class="o">&gt;</span>
                            <span class="o">&lt;</span><span class="sr">/div&gt;
                        &lt;/</span><span class="n">div</span><span class="o">&gt;</span>
                        <span class="o">&lt;</span><span class="n">div</span> <span class="n">fxLayout</span><span class="o">=</span><span class="s2">"column"</span> <span class="n">fxLayoutAlign</span><span class="o">=</span><span class="s2">"center center"</span><span class="o">&gt;</span>
                            <span class="o">&lt;</span><span class="n">button</span> <span class="n">mat</span><span class="o">-</span><span class="n">icon</span><span class="o">-</span><span class="n">button</span> <span class="n">color</span><span class="o">=</span><span class="s2">"primary"</span>
                                    <span class="n">aria</span><span class="o">-</span><span class="n">label</span><span class="o">=</span><span class="s2">"Remove"</span>
                                    <span class="n">type</span><span class="o">=</span><span class="s2">"button"</span>
                                    <span class="p">(</span><span class="n">click</span><span class="p">)</span><span class="o">=</span><span class="s2">"removeRelation(i)"</span>
                                    <span class="n">matTooltip</span><span class="o">=</span><span class="s2">"Remove relation"</span>
                                    <span class="n">matTooltipPosition</span><span class="o">=</span><span class="s2">"above"</span><span class="o">&gt;</span>
                                <span class="o">&lt;</span><span class="n">mat</span><span class="o">-</span><span class="n">icon</span><span class="o">&gt;</span><span class="n">close</span><span class="o">&lt;</span><span class="sr">/mat-icon&gt;
                            &lt;/</span><span class="n">button</span><span class="o">&gt;</span>
                        <span class="o">&lt;</span><span class="sr">/div&gt;
                    &lt;/</span><span class="n">div</span><span class="o">&gt;</span>
                <span class="o">&lt;</span><span class="sr">/div&gt;
            &lt;/</span><span class="n">div</span><span class="o">&gt;</span>
            <span class="o">&lt;</span><span class="n">div</span><span class="o">&gt;</span>
                <span class="o">&lt;</span><span class="n">button</span> <span class="n">mat</span><span class="o">-</span><span class="n">raised</span><span class="o">-</span><span class="n">button</span> <span class="n">color</span><span class="o">=</span><span class="s2">"primary"</span>
                        <span class="n">type</span><span class="o">=</span><span class="s2">"button"</span>
                        <span class="p">(</span><span class="n">click</span><span class="p">)</span><span class="o">=</span><span class="s2">"addRelation()"</span>
                        <span class="n">matTooltip</span><span class="o">=</span><span class="s2">"Add Relation"</span>
                        <span class="n">matTooltipPosition</span><span class="o">=</span><span class="s2">"above"</span><span class="o">&gt;</span>
                    <span class="no">Add</span>
                <span class="o">&lt;</span><span class="sr">/button&gt;
            &lt;/</span><span class="n">div</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="sr">/div&gt;
    &lt;/</span><span class="n">div</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">div</span> <span class="n">mat</span><span class="o">-</span><span class="n">dialog</span><span class="o">-</span><span class="n">actions</span> <span class="n">fxLayout</span><span class="o">=</span><span class="s2">"row"</span> <span class="n">fxLayoutAlign</span><span class="o">=</span><span class="s2">"end center"</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="n">button</span> <span class="n">mat</span><span class="o">-</span><span class="n">button</span> <span class="n">color</span><span class="o">=</span><span class="s2">"primary"</span>
                <span class="n">type</span><span class="o">=</span><span class="s2">"button"</span>
                <span class="p">[</span><span class="n">disabled</span><span class="p">]</span><span class="o">=</span><span class="s2">"(isLoading$ | async)"</span>
                <span class="p">(</span><span class="n">click</span><span class="p">)</span><span class="o">=</span><span class="s2">"cancel()"</span> <span class="n">cdkFocusInitial</span><span class="o">&gt;</span>
            <span class="no">Cancel</span>
        <span class="o">&lt;</span><span class="sr">/button&gt;
        &lt;button mat-button mat-raised-button color="primary"
                type="submit"
                [disabled]="(isLoading$ | async) || addEntityForm.invalid || !addEntityForm.dirty"&gt;
            Create
        &lt;/</span><span class="n">button</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="sr">/div&gt;
&lt;/</span><span class="n">form</span><span class="o">&gt;</span>
</pre></td></tr></tbody></table></code></pre></div>    </div>
  </figure>
 
</details>
<p><br />
<strong>Examples of JavaScript function and HTML code that add a possibility to edit a device or an asset:</strong>
<br />
<br /></p>
<details>
   <summary>
 JavaScript function. 
  </summary>
   <figure class="highlight">
    <div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
153
154
155
156
157
158
159
160
161
162
163
164
165
166
167
168
169
170
171
172
173
174
175
176
177
178
179
180
181
182
183
184
185
186
187
188
189
190
191
192
193
194
195
196
197
198
199
200
201
202
203
204
205
206
207
208
209
210
211
212
213
214
215
</pre></td><td class="rouge-code"><pre><span class="n">let</span> <span class="vg">$injector</span> <span class="o">=</span> <span class="n">widgetContext</span><span class="o">.</span><span class="vg">$scope</span><span class="o">.</span><span class="vg">$injector</span><span class="p">;</span>
<span class="n">let</span> <span class="n">customDialog</span> <span class="o">=</span> <span class="vg">$injector</span><span class="p">.</span><span class="nf">get</span><span class="p">(</span><span class="n">widgetContext</span><span class="p">.</span><span class="nf">servicesMap</span><span class="p">.</span><span class="nf">get</span><span class="p">(</span><span class="s1">'customDialog'</span><span class="p">));</span>
<span class="n">let</span> <span class="n">entityService</span> <span class="o">=</span> <span class="vg">$injector</span><span class="p">.</span><span class="nf">get</span><span class="p">(</span><span class="n">widgetContext</span><span class="p">.</span><span class="nf">servicesMap</span><span class="p">.</span><span class="nf">get</span><span class="p">(</span><span class="s1">'entityService'</span><span class="p">));</span>
<span class="n">let</span> <span class="n">assetService</span> <span class="o">=</span> <span class="vg">$injector</span><span class="p">.</span><span class="nf">get</span><span class="p">(</span><span class="n">widgetContext</span><span class="p">.</span><span class="nf">servicesMap</span><span class="p">.</span><span class="nf">get</span><span class="p">(</span><span class="s1">'assetService'</span><span class="p">));</span>
<span class="n">let</span> <span class="n">deviceService</span> <span class="o">=</span> <span class="vg">$injector</span><span class="p">.</span><span class="nf">get</span><span class="p">(</span><span class="n">widgetContext</span><span class="p">.</span><span class="nf">servicesMap</span><span class="p">.</span><span class="nf">get</span><span class="p">(</span><span class="s1">'deviceService'</span><span class="p">));</span>
<span class="n">let</span> <span class="n">attributeService</span> <span class="o">=</span> <span class="vg">$injector</span><span class="p">.</span><span class="nf">get</span><span class="p">(</span><span class="n">widgetContext</span><span class="p">.</span><span class="nf">servicesMap</span><span class="p">.</span><span class="nf">get</span><span class="p">(</span><span class="s1">'attributeService'</span><span class="p">));</span>
<span class="n">let</span> <span class="n">entityRelationService</span> <span class="o">=</span> <span class="vg">$injector</span><span class="p">.</span><span class="nf">get</span><span class="p">(</span><span class="n">widgetContext</span><span class="p">.</span><span class="nf">servicesMap</span><span class="p">.</span><span class="nf">get</span><span class="p">(</span><span class="s1">'entityRelationService'</span><span class="p">));</span>

<span class="n">openEditEntityDialog</span><span class="p">();</span>

<span class="n">function</span> <span class="n">openEditEntityDialog</span><span class="p">()</span> <span class="p">{</span>
<span class="n">customDialog</span><span class="p">.</span><span class="nf">customDialog</span><span class="p">(</span><span class="n">htmlTemplate</span><span class="p">,</span> <span class="no">EditEntityDialogController</span><span class="p">).</span><span class="nf">subscribe</span><span class="p">();</span>
<span class="p">}</span>

<span class="n">function</span> <span class="no">EditEntityDialogController</span><span class="p">(</span><span class="n">instance</span><span class="p">)</span> <span class="p">{</span>
<span class="n">let</span> <span class="n">vm</span> <span class="o">=</span> <span class="n">instance</span><span class="p">;</span>

    <span class="n">vm</span><span class="p">.</span><span class="nf">entityName</span> <span class="o">=</span> <span class="n">entityName</span><span class="p">;</span>
    <span class="n">vm</span><span class="p">.</span><span class="nf">entityType</span> <span class="o">=</span> <span class="n">entityId</span><span class="p">.</span><span class="nf">entityType</span><span class="p">;</span>
    <span class="n">vm</span><span class="p">.</span><span class="nf">entitySearchDirection</span> <span class="o">=</span> <span class="p">{</span>
        <span class="ss">from: </span><span class="s2">"FROM"</span><span class="p">,</span>
        <span class="ss">to: </span><span class="s2">"TO"</span>
    <span class="p">};</span>
    <span class="n">vm</span><span class="p">.</span><span class="nf">attributes</span> <span class="o">=</span> <span class="p">{};</span>
    <span class="n">vm</span><span class="p">.</span><span class="nf">oldRelationsData</span> <span class="o">=</span> <span class="p">[];</span>
    <span class="n">vm</span><span class="p">.</span><span class="nf">relationsToDelete</span> <span class="o">=</span> <span class="p">[];</span>
    <span class="n">vm</span><span class="p">.</span><span class="nf">entity</span> <span class="o">=</span> <span class="p">{};</span>

    <span class="n">vm</span><span class="p">.</span><span class="nf">editEntityFormGroup</span> <span class="o">=</span> <span class="n">vm</span><span class="p">.</span><span class="nf">fb</span><span class="p">.</span><span class="nf">group</span><span class="p">({</span>
        <span class="ss">entityName: </span><span class="p">[</span><span class="s1">''</span><span class="p">,</span> <span class="p">[</span><span class="n">vm</span><span class="p">.</span><span class="nf">validators</span><span class="p">.</span><span class="nf">required</span><span class="p">]],</span>
        <span class="ss">entityType: </span><span class="p">[</span><span class="n">null</span><span class="p">],</span>
        <span class="ss">entityLabel: </span><span class="p">[</span><span class="n">null</span><span class="p">],</span>
        <span class="ss">type: </span><span class="p">[</span><span class="s1">''</span><span class="p">,</span> <span class="p">[</span><span class="n">vm</span><span class="p">.</span><span class="nf">validators</span><span class="p">.</span><span class="nf">required</span><span class="p">]],</span>
        <span class="ss">attributes: </span><span class="n">vm</span><span class="p">.</span><span class="nf">fb</span><span class="p">.</span><span class="nf">group</span><span class="p">({</span>
            <span class="ss">latitude: </span><span class="p">[</span><span class="n">null</span><span class="p">],</span>
            <span class="ss">longitude: </span><span class="p">[</span><span class="n">null</span><span class="p">],</span>
            <span class="ss">address: </span><span class="p">[</span><span class="n">null</span><span class="p">],</span>
            <span class="ss">owner: </span><span class="p">[</span><span class="n">null</span><span class="p">],</span>
            <span class="ss">number: </span><span class="p">[</span><span class="n">null</span><span class="p">,</span> <span class="p">[</span><span class="n">vm</span><span class="p">.</span><span class="nf">validators</span><span class="p">.</span><span class="nf">pattern</span><span class="p">(</span><span class="sr">/^-?[0-9]+$/</span><span class="p">)]],</span>
            <span class="ss">booleanValue: </span><span class="p">[</span><span class="kp">false</span><span class="p">]</span>
        <span class="p">}),</span>
        <span class="ss">oldRelations: </span><span class="n">vm</span><span class="p">.</span><span class="nf">fb</span><span class="p">.</span><span class="nf">array</span><span class="p">([]),</span>
        <span class="ss">relations: </span><span class="n">vm</span><span class="p">.</span><span class="nf">fb</span><span class="p">.</span><span class="nf">array</span><span class="p">([])</span>
    <span class="p">});</span>

    <span class="n">getEntityInfo</span><span class="p">();</span>

    <span class="n">vm</span><span class="p">.</span><span class="nf">cancel</span> <span class="o">=</span> <span class="n">function</span><span class="p">()</span> <span class="p">{</span>
        <span class="n">vm</span><span class="p">.</span><span class="nf">dialogRef</span><span class="p">.</span><span class="nf">close</span><span class="p">(</span><span class="n">null</span><span class="p">);</span>
    <span class="p">};</span>

    <span class="n">vm</span><span class="p">.</span><span class="nf">relations</span> <span class="o">=</span> <span class="n">function</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">return</span> <span class="n">vm</span><span class="p">.</span><span class="nf">editEntityFormGroup</span><span class="p">.</span><span class="nf">get</span><span class="p">(</span><span class="s1">'relations'</span><span class="p">);</span>
    <span class="p">};</span>

    <span class="n">vm</span><span class="p">.</span><span class="nf">oldRelations</span> <span class="o">=</span> <span class="n">function</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">return</span> <span class="n">vm</span><span class="p">.</span><span class="nf">editEntityFormGroup</span><span class="p">.</span><span class="nf">get</span><span class="p">(</span><span class="s1">'oldRelations'</span><span class="p">);</span>
    <span class="p">};</span>

    <span class="n">vm</span><span class="p">.</span><span class="nf">addRelation</span> <span class="o">=</span> <span class="n">function</span><span class="p">()</span> <span class="p">{</span>
        <span class="n">vm</span><span class="p">.</span><span class="nf">relations</span><span class="p">().</span><span class="nf">push</span><span class="p">(</span><span class="n">vm</span><span class="p">.</span><span class="nf">fb</span><span class="p">.</span><span class="nf">group</span><span class="p">({</span>
            <span class="ss">relatedEntity: </span><span class="p">[</span><span class="n">null</span><span class="p">,</span> <span class="p">[</span><span class="n">vm</span><span class="p">.</span><span class="nf">validators</span><span class="p">.</span><span class="nf">required</span><span class="p">]],</span>
            <span class="ss">relationType: </span><span class="p">[</span><span class="n">null</span><span class="p">,</span> <span class="p">[</span><span class="n">vm</span><span class="p">.</span><span class="nf">validators</span><span class="p">.</span><span class="nf">required</span><span class="p">]],</span>
            <span class="ss">direction: </span><span class="p">[</span><span class="n">null</span><span class="p">,</span> <span class="p">[</span><span class="n">vm</span><span class="p">.</span><span class="nf">validators</span><span class="p">.</span><span class="nf">required</span><span class="p">]]</span>
        <span class="p">}));</span>
    <span class="p">};</span>

    <span class="n">function</span> <span class="n">addOldRelation</span><span class="p">()</span> <span class="p">{</span>
        <span class="n">vm</span><span class="p">.</span><span class="nf">oldRelations</span><span class="p">().</span><span class="nf">push</span><span class="p">(</span><span class="n">vm</span><span class="p">.</span><span class="nf">fb</span><span class="p">.</span><span class="nf">group</span><span class="p">({</span>
            <span class="ss">relatedEntity: </span><span class="p">[{</span><span class="ss">value: </span><span class="n">null</span><span class="p">,</span> <span class="ss">disabled: </span><span class="kp">true</span><span class="p">},</span> <span class="p">[</span><span class="n">vm</span><span class="p">.</span><span class="nf">validators</span><span class="p">.</span><span class="nf">required</span><span class="p">]],</span>
            <span class="ss">relationType: </span><span class="p">[{</span><span class="ss">value: </span><span class="n">null</span><span class="p">,</span> <span class="ss">disabled: </span><span class="kp">true</span><span class="p">},</span> <span class="p">[</span><span class="n">vm</span><span class="p">.</span><span class="nf">validators</span><span class="p">.</span><span class="nf">required</span><span class="p">]],</span>
            <span class="ss">direction: </span><span class="p">[{</span><span class="ss">value: </span><span class="n">null</span><span class="p">,</span> <span class="ss">disabled: </span><span class="kp">true</span><span class="p">},</span> <span class="p">[</span><span class="n">vm</span><span class="p">.</span><span class="nf">validators</span><span class="p">.</span><span class="nf">required</span><span class="p">]]</span>
        <span class="p">}));</span>
    <span class="p">}</span>

    <span class="n">vm</span><span class="p">.</span><span class="nf">removeRelation</span> <span class="o">=</span> <span class="n">function</span><span class="p">(</span><span class="n">index</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">vm</span><span class="p">.</span><span class="nf">relations</span><span class="p">().</span><span class="nf">removeAt</span><span class="p">(</span><span class="n">index</span><span class="p">);</span>
        <span class="n">vm</span><span class="p">.</span><span class="nf">relations</span><span class="p">().</span><span class="nf">markAsDirty</span><span class="p">();</span>
    <span class="p">};</span>

    <span class="n">vm</span><span class="p">.</span><span class="nf">removeOldRelation</span> <span class="o">=</span> <span class="n">function</span><span class="p">(</span><span class="n">index</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">vm</span><span class="p">.</span><span class="nf">oldRelations</span><span class="p">().</span><span class="nf">removeAt</span><span class="p">(</span><span class="n">index</span><span class="p">);</span>
        <span class="n">vm</span><span class="p">.</span><span class="nf">relationsToDelete</span><span class="p">.</span><span class="nf">push</span><span class="p">(</span><span class="n">vm</span><span class="p">.</span><span class="nf">oldRelationsData</span><span class="p">[</span><span class="n">index</span><span class="p">]);</span>
        <span class="n">vm</span><span class="p">.</span><span class="nf">oldRelations</span><span class="p">().</span><span class="nf">markAsDirty</span><span class="p">();</span>
    <span class="p">};</span>

    <span class="n">vm</span><span class="p">.</span><span class="nf">save</span> <span class="o">=</span> <span class="n">function</span><span class="p">()</span> <span class="p">{</span>
        <span class="n">vm</span><span class="p">.</span><span class="nf">editEntityFormGroup</span><span class="p">.</span><span class="nf">markAsPristine</span><span class="p">();</span>
        <span class="n">widgetContext</span><span class="p">.</span><span class="nf">rxjs</span><span class="p">.</span><span class="nf">forkJoin</span><span class="p">([</span>
            <span class="n">saveAttributes</span><span class="p">(</span><span class="n">entityId</span><span class="p">),</span>
            <span class="n">saveRelations</span><span class="p">(</span><span class="n">entityId</span><span class="p">),</span>
            <span class="n">saveEntity</span><span class="p">()</span>
        <span class="p">]).</span><span class="nf">subscribe</span><span class="p">(</span>
            <span class="n">function</span> <span class="p">()</span> <span class="p">{</span>
                <span class="n">widgetContext</span><span class="p">.</span><span class="nf">updateAliases</span><span class="p">();</span>
                <span class="n">vm</span><span class="p">.</span><span class="nf">dialogRef</span><span class="p">.</span><span class="nf">close</span><span class="p">(</span><span class="n">null</span><span class="p">);</span>
            <span class="p">}</span>
        <span class="p">);</span>
    <span class="p">};</span>

    <span class="n">function</span> <span class="n">getEntityAttributes</span><span class="p">(</span><span class="n">attributes</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">for</span> <span class="p">(</span><span class="n">var</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">attributes</span><span class="p">.</span><span class="nf">length</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
            <span class="n">vm</span><span class="p">.</span><span class="nf">attributes</span><span class="p">[</span><span class="n">attributes</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="nf">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">attributes</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="nf">value</span><span class="p">;</span>
        <span class="p">}</span>
    <span class="p">}</span>

    <span class="n">function</span> <span class="n">getEntityRelations</span><span class="p">(</span><span class="n">relations</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">let</span> <span class="n">relationsFrom</span> <span class="o">=</span> <span class="n">relations</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
        <span class="n">let</span> <span class="n">relationsTo</span> <span class="o">=</span> <span class="n">relations</span><span class="p">[</span><span class="mi">1</span><span class="p">];</span>
        <span class="k">for</span> <span class="p">(</span><span class="n">let</span> <span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">relationsFrom</span><span class="p">.</span><span class="nf">length</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
            <span class="n">let</span> <span class="n">relation</span> <span class="o">=</span> <span class="p">{</span>
                <span class="ss">direction: </span><span class="s1">'FROM'</span><span class="p">,</span>
                <span class="ss">relationType: </span><span class="n">relationsFrom</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="nf">type</span><span class="p">,</span>
                <span class="ss">relatedEntity: </span><span class="n">relationsFrom</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="nf">to</span>
            <span class="p">};</span>
            <span class="n">vm</span><span class="p">.</span><span class="nf">oldRelationsData</span><span class="p">.</span><span class="nf">push</span><span class="p">(</span><span class="n">relation</span><span class="p">);</span>
            <span class="n">addOldRelation</span><span class="p">();</span>
        <span class="p">}</span>
        <span class="k">for</span> <span class="p">(</span><span class="n">let</span> <span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">relationsTo</span><span class="p">.</span><span class="nf">length</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
            <span class="n">let</span> <span class="n">relation</span> <span class="o">=</span> <span class="p">{</span>
                <span class="ss">direction: </span><span class="s1">'TO'</span><span class="p">,</span>
                <span class="ss">relationType: </span><span class="n">relationsTo</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="nf">type</span><span class="p">,</span>
                <span class="ss">relatedEntity: </span><span class="n">relationsTo</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="nf">from</span>
            <span class="p">};</span>
            <span class="n">vm</span><span class="p">.</span><span class="nf">oldRelationsData</span><span class="p">.</span><span class="nf">push</span><span class="p">(</span><span class="n">relation</span><span class="p">);</span>
            <span class="n">addOldRelation</span><span class="p">();</span>
        <span class="p">}</span>
    <span class="p">}</span>

    <span class="n">function</span> <span class="n">getEntityInfo</span><span class="p">()</span> <span class="p">{</span>
        <span class="n">widgetContext</span><span class="p">.</span><span class="nf">rxjs</span><span class="p">.</span><span class="nf">forkJoin</span><span class="p">([</span>
            <span class="n">entityRelationService</span><span class="p">.</span><span class="nf">findInfoByFrom</span><span class="p">(</span><span class="n">entityId</span><span class="p">),</span>
            <span class="n">entityRelationService</span><span class="p">.</span><span class="nf">findInfoByTo</span><span class="p">(</span><span class="n">entityId</span><span class="p">),</span>
            <span class="n">attributeService</span><span class="p">.</span><span class="nf">getEntityAttributes</span><span class="p">(</span><span class="n">entityId</span><span class="p">,</span> <span class="s1">'SERVER_SCOPE'</span><span class="p">),</span>
            <span class="n">entityService</span><span class="p">.</span><span class="nf">getEntity</span><span class="p">(</span><span class="n">entityId</span><span class="p">.</span><span class="nf">entityType</span><span class="p">,</span> <span class="n">entityId</span><span class="p">.</span><span class="nf">id</span><span class="p">)</span>
        <span class="p">]).</span><span class="nf">subscribe</span><span class="p">(</span>
            <span class="n">function</span> <span class="p">(</span><span class="n">data</span><span class="p">)</span> <span class="p">{</span>
                <span class="n">getEntityRelations</span><span class="p">(</span><span class="n">data</span><span class="p">.</span><span class="nf">slice</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">2</span><span class="p">));</span>
                <span class="n">getEntityAttributes</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="mi">2</span><span class="p">]);</span>
                <span class="n">vm</span><span class="p">.</span><span class="nf">entity</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="mi">3</span><span class="p">];</span>
                <span class="n">vm</span><span class="p">.</span><span class="nf">editEntityFormGroup</span><span class="p">.</span><span class="nf">patchValue</span><span class="p">({</span>
                    <span class="ss">entityName: </span><span class="n">vm</span><span class="p">.</span><span class="nf">entity</span><span class="p">.</span><span class="nf">name</span><span class="p">,</span>
                    <span class="ss">entityType: </span><span class="n">vm</span><span class="p">.</span><span class="nf">entityType</span><span class="p">,</span>
                    <span class="ss">entityLabel: </span><span class="n">vm</span><span class="p">.</span><span class="nf">entity</span><span class="p">.</span><span class="nf">label</span><span class="p">,</span>
                    <span class="ss">type: </span><span class="n">vm</span><span class="p">.</span><span class="nf">entity</span><span class="p">.</span><span class="nf">type</span><span class="p">,</span>
                    <span class="ss">attributes: </span><span class="n">vm</span><span class="p">.</span><span class="nf">attributes</span><span class="p">,</span>
                    <span class="ss">oldRelations: </span><span class="n">vm</span><span class="p">.</span><span class="nf">oldRelationsData</span>
                <span class="p">},</span> <span class="p">{</span><span class="ss">emitEvent: </span><span class="kp">false</span><span class="p">});</span>
            <span class="p">}</span>
        <span class="p">);</span>
    <span class="p">}</span>

    <span class="n">function</span> <span class="n">saveEntity</span><span class="p">()</span> <span class="p">{</span>
        <span class="n">const</span> <span class="n">formValues</span> <span class="o">=</span> <span class="n">vm</span><span class="p">.</span><span class="nf">editEntityFormGroup</span><span class="p">.</span><span class="nf">value</span><span class="p">;</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">vm</span><span class="p">.</span><span class="nf">entity</span><span class="p">.</span><span class="nf">label</span> <span class="o">!==</span> <span class="n">formValues</span><span class="p">.</span><span class="nf">entityLabel</span><span class="p">){</span>
            <span class="n">vm</span><span class="p">.</span><span class="nf">entity</span><span class="p">.</span><span class="nf">label</span> <span class="o">=</span> <span class="n">formValues</span><span class="p">.</span><span class="nf">entityLabel</span><span class="p">;</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">formValues</span><span class="p">.</span><span class="nf">entityType</span> <span class="o">==</span> <span class="s1">'ASSET'</span><span class="p">)</span> <span class="p">{</span>
                <span class="k">return</span> <span class="n">assetService</span><span class="p">.</span><span class="nf">saveAsset</span><span class="p">(</span><span class="n">vm</span><span class="p">.</span><span class="nf">entity</span><span class="p">);</span>
            <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">formValues</span><span class="p">.</span><span class="nf">entityType</span> <span class="o">==</span> <span class="s1">'DEVICE'</span><span class="p">)</span> <span class="p">{</span>
                <span class="k">return</span> <span class="n">deviceService</span><span class="p">.</span><span class="nf">saveDevice</span><span class="p">(</span><span class="n">vm</span><span class="p">.</span><span class="nf">entity</span><span class="p">);</span>
            <span class="p">}</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="n">widgetContext</span><span class="p">.</span><span class="nf">rxjs</span><span class="p">.</span><span class="nf">of</span><span class="p">([]);</span>
    <span class="p">}</span>

    <span class="n">function</span> <span class="n">saveAttributes</span><span class="p">(</span><span class="n">entityId</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">let</span> <span class="n">attributes</span> <span class="o">=</span> <span class="n">vm</span><span class="p">.</span><span class="nf">editEntityFormGroup</span><span class="p">.</span><span class="nf">get</span><span class="p">(</span><span class="s1">'attributes'</span><span class="p">).</span><span class="nf">value</span><span class="p">;</span>
        <span class="n">let</span> <span class="n">attributesArray</span> <span class="o">=</span> <span class="p">[];</span>
        <span class="k">for</span> <span class="p">(</span><span class="n">let</span> <span class="n">key</span> <span class="k">in</span> <span class="n">attributes</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">attributes</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">!==</span> <span class="n">vm</span><span class="p">.</span><span class="nf">attributes</span><span class="p">[</span><span class="n">key</span><span class="p">])</span> <span class="p">{</span>
                <span class="n">attributesArray</span><span class="p">.</span><span class="nf">push</span><span class="p">({</span><span class="ss">key: </span><span class="n">key</span><span class="p">,</span> <span class="ss">value: </span><span class="n">attributes</span><span class="p">[</span><span class="n">key</span><span class="p">]});</span>
            <span class="p">}</span>
        <span class="p">}</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">attributesArray</span><span class="p">.</span><span class="nf">length</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">return</span> <span class="n">attributeService</span><span class="p">.</span><span class="nf">saveEntityAttributes</span><span class="p">(</span><span class="n">entityId</span><span class="p">,</span> <span class="s2">"SERVER_SCOPE"</span><span class="p">,</span> <span class="n">attributesArray</span><span class="p">);</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="n">widgetContext</span><span class="p">.</span><span class="nf">rxjs</span><span class="p">.</span><span class="nf">of</span><span class="p">([]);</span>
    <span class="p">}</span>

    <span class="n">function</span> <span class="n">saveRelations</span><span class="p">(</span><span class="n">entityId</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">let</span> <span class="n">relations</span> <span class="o">=</span> <span class="n">vm</span><span class="p">.</span><span class="nf">editEntityFormGroup</span><span class="p">.</span><span class="nf">get</span><span class="p">(</span><span class="s1">'relations'</span><span class="p">).</span><span class="nf">value</span><span class="p">;</span>
        <span class="n">let</span> <span class="n">tasks</span> <span class="o">=</span> <span class="p">[];</span>
        <span class="k">for</span><span class="p">(</span><span class="n">let</span> <span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">relations</span><span class="p">.</span><span class="nf">length</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
            <span class="n">let</span> <span class="n">relation</span> <span class="o">=</span> <span class="p">{</span>
                <span class="ss">type: </span><span class="n">relations</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="nf">relationType</span><span class="p">,</span>
                <span class="ss">typeGroup: </span><span class="s1">'COMMON'</span>
            <span class="p">};</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">relations</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="nf">direction</span> <span class="o">==</span> <span class="s1">'FROM'</span><span class="p">)</span> <span class="p">{</span>
                <span class="n">relation</span><span class="p">.</span><span class="nf">to</span> <span class="o">=</span> <span class="n">relations</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="nf">relatedEntity</span><span class="p">;</span>
                <span class="n">relation</span><span class="p">.</span><span class="nf">from</span> <span class="o">=</span> <span class="n">entityId</span><span class="p">;</span>
            <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
                <span class="n">relation</span><span class="p">.</span><span class="nf">to</span> <span class="o">=</span> <span class="n">entityId</span><span class="p">;</span>
                <span class="n">relation</span><span class="p">.</span><span class="nf">from</span> <span class="o">=</span> <span class="n">relations</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="nf">relatedEntity</span><span class="p">;</span>
            <span class="p">}</span>
            <span class="n">tasks</span><span class="p">.</span><span class="nf">push</span><span class="p">(</span><span class="n">entityRelationService</span><span class="p">.</span><span class="nf">saveRelation</span><span class="p">(</span><span class="n">relation</span><span class="p">));</span>
        <span class="p">}</span>
        <span class="k">for</span> <span class="p">(</span><span class="n">let</span> <span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">vm</span><span class="p">.</span><span class="nf">relationsToDelete</span><span class="p">.</span><span class="nf">length</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
            <span class="n">let</span> <span class="n">relation</span> <span class="o">=</span> <span class="p">{</span>
                <span class="ss">type: </span><span class="n">vm</span><span class="p">.</span><span class="nf">relationsToDelete</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="nf">relationType</span>
            <span class="p">};</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">vm</span><span class="p">.</span><span class="nf">relationsToDelete</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="nf">direction</span> <span class="o">==</span> <span class="s1">'FROM'</span><span class="p">)</span> <span class="p">{</span>
                <span class="n">relation</span><span class="p">.</span><span class="nf">to</span> <span class="o">=</span> <span class="n">vm</span><span class="p">.</span><span class="nf">relationsToDelete</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="nf">relatedEntity</span><span class="p">;</span>
                <span class="n">relation</span><span class="p">.</span><span class="nf">from</span> <span class="o">=</span> <span class="n">entityId</span><span class="p">;</span>
            <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
                <span class="n">relation</span><span class="p">.</span><span class="nf">to</span> <span class="o">=</span> <span class="n">entityId</span><span class="p">;</span>
                <span class="n">relation</span><span class="p">.</span><span class="nf">from</span> <span class="o">=</span> <span class="n">vm</span><span class="p">.</span><span class="nf">relationsToDelete</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="nf">relatedEntity</span><span class="p">;</span>
            <span class="p">}</span>
            <span class="n">tasks</span><span class="p">.</span><span class="nf">push</span><span class="p">(</span><span class="n">entityRelationService</span><span class="p">.</span><span class="nf">deleteRelation</span><span class="p">(</span><span class="n">relation</span><span class="p">.</span><span class="nf">from</span><span class="p">,</span> <span class="n">relation</span><span class="p">.</span><span class="nf">type</span><span class="p">,</span> <span class="n">relation</span><span class="p">.</span><span class="nf">to</span><span class="p">));</span>
        <span class="p">}</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">tasks</span><span class="p">.</span><span class="nf">length</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">return</span> <span class="n">widgetContext</span><span class="p">.</span><span class="nf">rxjs</span><span class="p">.</span><span class="nf">forkJoin</span><span class="p">(</span><span class="n">tasks</span><span class="p">);</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="n">widgetContext</span><span class="p">.</span><span class="nf">rxjs</span><span class="p">.</span><span class="nf">of</span><span class="p">([]);</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre></div>    </div>
  </figure>
 
</details>
<p><br /></p>
<details>
   <summary>
 HTML code. 
  </summary>
   <figure class="highlight">
    <div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
153
154
155
156
157
158
159
160
161
162
163
164
165
166
167
168
169
170
171
172
173
174
175
176
177
178
179
180
181
182
183
184
185
186
187
</pre></td><td class="rouge-code"><pre><span class="o">&lt;</span><span class="n">form</span> <span class="c1">#editEntityForm="ngForm" [formGroup]="editEntityFormGroup"</span>
      <span class="p">(</span><span class="n">ngSubmit</span><span class="p">)</span><span class="o">=</span><span class="s2">"save()"</span>  <span class="k">class</span><span class="o">=</span><span class="s2">"edit-entity-form"</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">mat</span><span class="o">-</span><span class="n">toolbar</span> <span class="n">fxLayout</span><span class="o">=</span><span class="s2">"row"</span> <span class="n">color</span><span class="o">=</span><span class="s2">"primary"</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="n">h2</span><span class="o">&gt;</span><span class="no">Edit</span>  <span class="o">&lt;</span><span class="sr">/h2&gt;
        &lt;span fxFlex&gt;&lt;/s</span><span class="n">pan</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="n">button</span> <span class="n">mat</span><span class="o">-</span><span class="n">icon</span><span class="o">-</span><span class="n">button</span> <span class="p">(</span><span class="n">click</span><span class="p">)</span><span class="o">=</span><span class="s2">"cancel()"</span> <span class="n">type</span><span class="o">=</span><span class="s2">"button"</span><span class="o">&gt;</span>
            <span class="o">&lt;</span><span class="n">mat</span><span class="o">-</span><span class="n">icon</span> <span class="k">class</span><span class="o">=</span><span class="s2">"material-icons"</span><span class="o">&gt;</span><span class="n">close</span><span class="o">&lt;</span><span class="sr">/mat-icon&gt;
        &lt;/</span><span class="n">button</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="sr">/mat-toolbar&gt;
    &lt;mat-progress-bar color="warn" mode="indeterminate" *ngIf="isLoading$ | async"&gt;
    &lt;/m</span><span class="n">at</span><span class="o">-</span><span class="n">progress</span><span class="o">-</span><span class="n">bar</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">div</span> <span class="n">style</span><span class="o">=</span><span class="s2">"height: 4px;"</span> <span class="o">*</span><span class="n">ngIf</span><span class="o">=</span><span class="s2">"!(isLoading$ | async)"</span><span class="o">&gt;&lt;</span><span class="sr">/div&gt;
    &lt;div mat-dialog-content fxLayout="column"&gt;
        &lt;div fxLayout="row" fxLayoutGap="8px" fxLayout.xs="column"  fxLayoutGap.xs="0"&gt;
            &lt;mat-form-field fxFlex class="mat-block"&gt;
                &lt;mat-label&gt;Entity Name&lt;/m</span><span class="n">at</span><span class="o">-</span><span class="n">label</span><span class="o">&gt;</span>
                <span class="o">&lt;</span><span class="n">input</span> <span class="n">matInput</span> <span class="n">formControlName</span><span class="o">=</span><span class="s2">"entityName"</span> <span class="n">required</span> <span class="n">readonly</span><span class="o">=</span><span class="s2">""</span><span class="o">&gt;</span>
            <span class="o">&lt;</span><span class="sr">/mat-form-field&gt;
            &lt;mat-form-field fxFlex class="mat-block"&gt;
                &lt;mat-label&gt;Entity Label&lt;/m</span><span class="n">at</span><span class="o">-</span><span class="n">label</span><span class="o">&gt;</span>
                <span class="o">&lt;</span><span class="n">input</span> <span class="n">matInput</span> <span class="n">formControlName</span><span class="o">=</span><span class="s2">"entityLabel"</span><span class="o">&gt;</span>
            <span class="o">&lt;</span><span class="sr">/mat-form-field&gt;
        &lt;/</span><span class="n">div</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="n">div</span> <span class="n">fxLayout</span><span class="o">=</span><span class="s2">"row"</span> <span class="n">fxLayoutGap</span><span class="o">=</span><span class="s2">"8px"</span> <span class="n">fxLayout</span><span class="p">.</span><span class="nf">xs</span><span class="o">=</span><span class="s2">"column"</span>  <span class="n">fxLayoutGap</span><span class="p">.</span><span class="nf">xs</span><span class="o">=</span><span class="s2">"0"</span><span class="o">&gt;</span>
            <span class="o">&lt;</span><span class="n">mat</span><span class="o">-</span><span class="n">form</span><span class="o">-</span><span class="n">field</span> <span class="n">fxFlex</span> <span class="k">class</span><span class="o">=</span><span class="s2">"mat-block"</span><span class="o">&gt;</span>
                <span class="o">&lt;</span><span class="n">mat</span><span class="o">-</span><span class="n">label</span><span class="o">&gt;</span><span class="no">Entity</span> <span class="no">Type</span><span class="o">&lt;</span><span class="sr">/mat-label&gt;
                &lt;input matInput formControlName="entityType" readonly&gt;
            &lt;/m</span><span class="n">at</span><span class="o">-</span><span class="n">form</span><span class="o">-</span><span class="n">field</span><span class="o">&gt;</span>
            <span class="o">&lt;</span><span class="n">mat</span><span class="o">-</span><span class="n">form</span><span class="o">-</span><span class="n">field</span> <span class="n">fxFlex</span> <span class="k">class</span><span class="o">=</span><span class="s2">"mat-block"</span><span class="o">&gt;</span>
                <span class="o">&lt;</span><span class="n">mat</span><span class="o">-</span><span class="n">label</span><span class="o">&gt;</span><span class="no">Type</span><span class="o">&lt;</span><span class="sr">/mat-label&gt;
                &lt;input matInput formControlName="type" readonly&gt;
            &lt;/m</span><span class="n">at</span><span class="o">-</span><span class="n">form</span><span class="o">-</span><span class="n">field</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="sr">/div&gt;
        &lt;div formGroupName="attributes" fxLayout="column"&gt;
            &lt;div fxLayout="row" fxLayoutGap="8px" fxLayout.xs="column"  fxLayoutGap.xs="0"&gt;
                &lt;mat-form-field fxFlex class="mat-block"&gt;
                    &lt;mat-label&gt;Latitude&lt;/m</span><span class="n">at</span><span class="o">-</span><span class="n">label</span><span class="o">&gt;</span>
                    <span class="o">&lt;</span><span class="n">input</span> <span class="n">type</span><span class="o">=</span><span class="s2">"number"</span> <span class="n">step</span><span class="o">=</span><span class="s2">"any"</span> <span class="n">matInput</span> <span class="n">formControlName</span><span class="o">=</span><span class="s2">"latitude"</span><span class="o">&gt;</span>
                <span class="o">&lt;</span><span class="sr">/mat-form-field&gt;
                &lt;mat-form-field fxFlex class="mat-block"&gt;
                    &lt;mat-label&gt;Longitude&lt;/m</span><span class="n">at</span><span class="o">-</span><span class="n">label</span><span class="o">&gt;</span>
                    <span class="o">&lt;</span><span class="n">input</span> <span class="n">type</span><span class="o">=</span><span class="s2">"number"</span> <span class="n">step</span><span class="o">=</span><span class="s2">"any"</span> <span class="n">matInput</span> <span class="n">formControlName</span><span class="o">=</span><span class="s2">"longitude"</span><span class="o">&gt;</span>
                <span class="o">&lt;</span><span class="sr">/mat-form-field&gt;
            &lt;/</span><span class="n">div</span><span class="o">&gt;</span>
            <span class="o">&lt;</span><span class="n">div</span> <span class="n">fxLayout</span><span class="o">=</span><span class="s2">"row"</span> <span class="n">fxLayoutGap</span><span class="o">=</span><span class="s2">"8px"</span> <span class="n">fxLayout</span><span class="p">.</span><span class="nf">xs</span><span class="o">=</span><span class="s2">"column"</span>  <span class="n">fxLayoutGap</span><span class="p">.</span><span class="nf">xs</span><span class="o">=</span><span class="s2">"0"</span><span class="o">&gt;</span>
                <span class="o">&lt;</span><span class="n">mat</span><span class="o">-</span><span class="n">form</span><span class="o">-</span><span class="n">field</span> <span class="n">fxFlex</span> <span class="k">class</span><span class="o">=</span><span class="s2">"mat-block"</span><span class="o">&gt;</span>
                    <span class="o">&lt;</span><span class="n">mat</span><span class="o">-</span><span class="n">label</span><span class="o">&gt;</span><span class="no">Address</span><span class="o">&lt;</span><span class="sr">/mat-label&gt;
                    &lt;input matInput formControlName="address"&gt;
                &lt;/m</span><span class="n">at</span><span class="o">-</span><span class="n">form</span><span class="o">-</span><span class="n">field</span><span class="o">&gt;</span>
                <span class="o">&lt;</span><span class="n">mat</span><span class="o">-</span><span class="n">form</span><span class="o">-</span><span class="n">field</span> <span class="n">fxFlex</span> <span class="k">class</span><span class="o">=</span><span class="s2">"mat-block"</span><span class="o">&gt;</span>
                    <span class="o">&lt;</span><span class="n">mat</span><span class="o">-</span><span class="n">label</span><span class="o">&gt;</span><span class="no">Owner</span><span class="o">&lt;</span><span class="sr">/mat-label&gt;
                    &lt;input matInput formControlName="owner"&gt;
                &lt;/m</span><span class="n">at</span><span class="o">-</span><span class="n">form</span><span class="o">-</span><span class="n">field</span><span class="o">&gt;</span>
            <span class="o">&lt;</span><span class="sr">/div&gt;
            &lt;div fxLayout="row" fxLayoutGap="8px" fxLayout.xs="column"  fxLayoutGap.xs="0"&gt;
                &lt;mat-form-field fxFlex class="mat-block"&gt;
                    &lt;mat-label&gt;Integer Value&lt;/m</span><span class="n">at</span><span class="o">-</span><span class="n">label</span><span class="o">&gt;</span>
                    <span class="o">&lt;</span><span class="n">input</span> <span class="n">type</span><span class="o">=</span><span class="s2">"number"</span> <span class="n">step</span><span class="o">=</span><span class="s2">"1"</span> <span class="n">matInput</span> <span class="n">formControlName</span><span class="o">=</span><span class="s2">"number"</span><span class="o">&gt;</span>
                    <span class="o">&lt;</span><span class="n">mat</span><span class="o">-</span><span class="n">error</span> <span class="o">*</span><span class="n">ngIf</span><span class="o">=</span><span class="s2">"editEntityFormGroup.get('attributes.number').hasError('pattern')"</span><span class="o">&gt;</span>
                        <span class="no">Invalid</span> <span class="n">integer</span> <span class="n">value</span><span class="p">.</span>
                    <span class="nf">&lt;</span><span class="o">/</span><span class="n">mat</span><span class="o">-</span><span class="n">error</span><span class="o">&gt;</span>
                <span class="o">&lt;</span><span class="sr">/mat-form-field&gt;
                &lt;div class="boolean-value-input" fxLayout="column" fxLayoutAlign="center start" fxFlex&gt;
                    &lt;label class="checkbox-label"&gt;Boolean Value&lt;/</span><span class="n">label</span><span class="o">&gt;</span>
                    <span class="o">&lt;</span><span class="n">mat</span><span class="o">-</span><span class="n">checkbox</span> <span class="n">formControlName</span><span class="o">=</span><span class="s2">"booleanValue"</span> <span class="n">style</span><span class="o">=</span><span class="s2">"margin-bottom: 40px;"</span><span class="o">&gt;</span>
                        
                    <span class="o">&lt;</span><span class="sr">/mat-checkbox&gt;
                &lt;/</span><span class="n">div</span><span class="o">&gt;</span>
            <span class="o">&lt;</span><span class="sr">/div&gt;
        &lt;/</span><span class="n">div</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="n">div</span> <span class="k">class</span><span class="o">=</span><span class="s2">"relations-list old-relations"</span><span class="o">&gt;</span>
            <span class="o">&lt;</span><span class="n">div</span> <span class="k">class</span><span class="o">=</span><span class="s2">"mat-body-1"</span> <span class="n">style</span><span class="o">=</span><span class="s2">"padding-bottom: 10px; color: rgba(0,0,0,0.57);"</span><span class="o">&gt;</span><span class="no">Relations</span><span class="o">&lt;</span><span class="sr">/div&gt;
            &lt;div class="body" [fxShow]="oldRelations().length"&gt;
                &lt;div class="row" fxLayout="row" fxLayoutAlign="start center" formArrayName="oldRelations" 
                     *ngFor="let relation of oldRelations().controls; let i = index;"&gt;
                    &lt;div [formGroupName]="i" class="mat-elevation-z2" fxFlex fxLayout="row" style="padding: 5px 0 5px 5px;"&gt;
                        &lt;div fxFlex fxLayout="column"&gt;
                            &lt;div fxLayout="row" fxLayoutGap="8px" fxLayout.xs="column"  fxLayoutGap.xs="0"&gt;
                                &lt;mat-form-field class="mat-block" style="min-width: 100px;"&gt;
                                    &lt;mat-label&gt;Direction&lt;/m</span><span class="n">at</span><span class="o">-</span><span class="n">label</span><span class="o">&gt;</span>
                                    <span class="o">&lt;</span><span class="n">mat</span><span class="o">-</span><span class="nb">select</span> <span class="n">formControlName</span><span class="o">=</span><span class="s2">"direction"</span> <span class="nb">name</span><span class="o">=</span><span class="s2">"direction"</span><span class="o">&gt;</span>
                                        <span class="o">&lt;</span><span class="n">mat</span><span class="o">-</span><span class="n">option</span> <span class="o">*</span><span class="n">ngFor</span><span class="o">=</span><span class="s2">"let direction of entitySearchDirection | keyvalue"</span> <span class="p">[</span><span class="n">value</span><span class="p">]</span><span class="o">=</span><span class="s2">"direction.value"</span><span class="o">&gt;</span>
                                            
                                        <span class="o">&lt;</span><span class="sr">/mat-option&gt;
                                    &lt;/m</span><span class="n">at</span><span class="o">-</span><span class="nb">select</span><span class="o">&gt;</span>
                                    <span class="o">&lt;</span><span class="n">mat</span><span class="o">-</span><span class="n">error</span> <span class="o">*</span><span class="n">ngIf</span><span class="o">=</span><span class="s2">"relation.get('direction').hasError('required')"</span><span class="o">&gt;</span>
                                        <span class="no">Relation</span> <span class="n">direction</span> <span class="n">is</span> <span class="n">required</span><span class="p">.</span>
                                    <span class="nf">&lt;</span><span class="o">/</span><span class="n">mat</span><span class="o">-</span><span class="n">error</span><span class="o">&gt;</span>
                                <span class="o">&lt;</span><span class="sr">/mat-form-field&gt;
                                &lt;tb-relation-type-autocomplete
                                        fxFlex class="mat-block"
                                        formControlName="relationType"
                                        required="true"&gt;
                                &lt;/</span><span class="n">tb</span><span class="o">-</span><span class="n">relation</span><span class="o">-</span><span class="n">type</span><span class="o">-</span><span class="n">autocomplete</span><span class="o">&gt;</span>
                            <span class="o">&lt;</span><span class="sr">/div&gt;
                            &lt;div fxLayout="row" fxLayout.xs="column"&gt;
                                &lt;tb-entity-select
                                        fxFlex class="mat-block"
                                        required="true"
                                        formControlName="relatedEntity"&gt;
                                &lt;/</span><span class="n">tb</span><span class="o">-</span><span class="n">entity</span><span class="o">-</span><span class="nb">select</span><span class="o">&gt;</span>
                            <span class="o">&lt;</span><span class="sr">/div&gt;
                        &lt;/</span><span class="n">div</span><span class="o">&gt;</span>
                        <span class="o">&lt;</span><span class="n">div</span> <span class="n">fxLayout</span><span class="o">=</span><span class="s2">"column"</span> <span class="n">fxLayoutAlign</span><span class="o">=</span><span class="s2">"center center"</span><span class="o">&gt;</span>
                            <span class="o">&lt;</span><span class="n">button</span> <span class="n">mat</span><span class="o">-</span><span class="n">icon</span><span class="o">-</span><span class="n">button</span> <span class="n">color</span><span class="o">=</span><span class="s2">"primary"</span>
                                    <span class="n">aria</span><span class="o">-</span><span class="n">label</span><span class="o">=</span><span class="s2">"Remove"</span>
                                    <span class="n">type</span><span class="o">=</span><span class="s2">"button"</span>
                                    <span class="p">(</span><span class="n">click</span><span class="p">)</span><span class="o">=</span><span class="s2">"removeOldRelation(i)"</span>
                                    <span class="n">matTooltip</span><span class="o">=</span><span class="s2">"Remove relation"</span>
                                    <span class="n">matTooltipPosition</span><span class="o">=</span><span class="s2">"above"</span><span class="o">&gt;</span>
                                <span class="o">&lt;</span><span class="n">mat</span><span class="o">-</span><span class="n">icon</span><span class="o">&gt;</span><span class="n">close</span><span class="o">&lt;</span><span class="sr">/mat-icon&gt;
                            &lt;/</span><span class="n">button</span><span class="o">&gt;</span>
                        <span class="o">&lt;</span><span class="sr">/div&gt;
                    &lt;/</span><span class="n">div</span><span class="o">&gt;</span>
                <span class="o">&lt;</span><span class="sr">/div&gt;
            &lt;/</span><span class="n">div</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="sr">/div&gt;
        &lt;div class="relations-list"&gt;
            &lt;div class="mat-body-1" style="padding-bottom: 10px; color: rgba(0,0,0,0.57);"&gt;New Relations&lt;/</span><span class="n">div</span><span class="o">&gt;</span>
            <span class="o">&lt;</span><span class="n">div</span> <span class="k">class</span><span class="o">=</span><span class="s2">"body"</span> <span class="p">[</span><span class="n">fxShow</span><span class="p">]</span><span class="o">=</span><span class="s2">"relations().length"</span><span class="o">&gt;</span>
                <span class="o">&lt;</span><span class="n">div</span> <span class="k">class</span><span class="o">=</span><span class="s2">"row"</span> <span class="n">fxLayout</span><span class="o">=</span><span class="s2">"row"</span> <span class="n">fxLayoutAlign</span><span class="o">=</span><span class="s2">"start center"</span> <span class="n">formArrayName</span><span class="o">=</span><span class="s2">"relations"</span> <span class="o">*</span><span class="n">ngFor</span><span class="o">=</span><span class="s2">"let relation of relations().controls; let i = index;"</span><span class="o">&gt;</span>
                    <span class="o">&lt;</span><span class="n">div</span> <span class="p">[</span><span class="n">formGroupName</span><span class="p">]</span><span class="o">=</span><span class="s2">"i"</span> <span class="k">class</span><span class="o">=</span><span class="s2">"mat-elevation-z2"</span> <span class="n">fxFlex</span> <span class="n">fxLayout</span><span class="o">=</span><span class="s2">"row"</span> <span class="n">style</span><span class="o">=</span><span class="s2">"padding: 5px 0 5px 5px;"</span><span class="o">&gt;</span>
                        <span class="o">&lt;</span><span class="n">div</span> <span class="n">fxFlex</span> <span class="n">fxLayout</span><span class="o">=</span><span class="s2">"column"</span><span class="o">&gt;</span>
                            <span class="o">&lt;</span><span class="n">div</span> <span class="n">fxLayout</span><span class="o">=</span><span class="s2">"row"</span> <span class="n">fxLayoutGap</span><span class="o">=</span><span class="s2">"8px"</span> <span class="n">fxLayout</span><span class="p">.</span><span class="nf">xs</span><span class="o">=</span><span class="s2">"column"</span>  <span class="n">fxLayoutGap</span><span class="p">.</span><span class="nf">xs</span><span class="o">=</span><span class="s2">"0"</span><span class="o">&gt;</span>
                                <span class="o">&lt;</span><span class="n">mat</span><span class="o">-</span><span class="n">form</span><span class="o">-</span><span class="n">field</span> <span class="k">class</span><span class="o">=</span><span class="s2">"mat-block"</span> <span class="n">style</span><span class="o">=</span><span class="s2">"min-width: 100px;"</span><span class="o">&gt;</span>
                                    <span class="o">&lt;</span><span class="n">mat</span><span class="o">-</span><span class="n">label</span><span class="o">&gt;</span><span class="no">Direction</span><span class="o">&lt;</span><span class="sr">/mat-label&gt;
                                    &lt;mat-select formControlName="direction" name="direction"&gt;
                                        &lt;mat-option *ngFor="let direction of entitySearchDirection | keyvalue" [value]="direction.value"&gt;
                                            
                                        &lt;/m</span><span class="n">at</span><span class="o">-</span><span class="n">option</span><span class="o">&gt;</span>
                                    <span class="o">&lt;</span><span class="sr">/mat-select&gt;
                                    &lt;mat-error *ngIf="relation.get('direction').hasError('required')"&gt;
                                        Relation direction is required.
                                    &lt;/m</span><span class="n">at</span><span class="o">-</span><span class="n">error</span><span class="o">&gt;</span>
                                <span class="o">&lt;</span><span class="sr">/mat-form-field&gt;
                                &lt;tb-relation-type-autocomplete
                                        fxFlex class="mat-block"
                                        formControlName="relationType"
                                        [required]="true"&gt;
                                &lt;/</span><span class="n">tb</span><span class="o">-</span><span class="n">relation</span><span class="o">-</span><span class="n">type</span><span class="o">-</span><span class="n">autocomplete</span><span class="o">&gt;</span>
                            <span class="o">&lt;</span><span class="sr">/div&gt;
                            &lt;div fxLayout="row" fxLayout.xs="column"&gt;
                                &lt;tb-entity-select
                                        fxFlex class="mat-block"
                                        [required]="true"
                                        formControlName="relatedEntity"&gt;
                                &lt;/</span><span class="n">tb</span><span class="o">-</span><span class="n">entity</span><span class="o">-</span><span class="nb">select</span><span class="o">&gt;</span>
                            <span class="o">&lt;</span><span class="sr">/div&gt;
                        &lt;/</span><span class="n">div</span><span class="o">&gt;</span>
                        <span class="o">&lt;</span><span class="n">div</span> <span class="n">fxLayout</span><span class="o">=</span><span class="s2">"column"</span> <span class="n">fxLayoutAlign</span><span class="o">=</span><span class="s2">"center center"</span><span class="o">&gt;</span>
                            <span class="o">&lt;</span><span class="n">button</span> <span class="n">mat</span><span class="o">-</span><span class="n">icon</span><span class="o">-</span><span class="n">button</span> <span class="n">color</span><span class="o">=</span><span class="s2">"primary"</span>
                                    <span class="n">aria</span><span class="o">-</span><span class="n">label</span><span class="o">=</span><span class="s2">"Remove"</span>
                                    <span class="n">type</span><span class="o">=</span><span class="s2">"button"</span>
                                    <span class="p">(</span><span class="n">click</span><span class="p">)</span><span class="o">=</span><span class="s2">"removeRelation(i)"</span>
                                    <span class="n">matTooltip</span><span class="o">=</span><span class="s2">"Remove relation"</span>
                                    <span class="n">matTooltipPosition</span><span class="o">=</span><span class="s2">"above"</span><span class="o">&gt;</span>
                                <span class="o">&lt;</span><span class="n">mat</span><span class="o">-</span><span class="n">icon</span><span class="o">&gt;</span><span class="n">close</span><span class="o">&lt;</span><span class="sr">/mat-icon&gt;
                            &lt;/</span><span class="n">button</span><span class="o">&gt;</span>
                        <span class="o">&lt;</span><span class="sr">/div&gt;
                    &lt;/</span><span class="n">div</span><span class="o">&gt;</span>
                <span class="o">&lt;</span><span class="sr">/div&gt;
            &lt;/</span><span class="n">div</span><span class="o">&gt;</span>
            <span class="o">&lt;</span><span class="n">div</span><span class="o">&gt;</span>
                <span class="o">&lt;</span><span class="n">button</span> <span class="n">mat</span><span class="o">-</span><span class="n">raised</span><span class="o">-</span><span class="n">button</span> <span class="n">color</span><span class="o">=</span><span class="s2">"primary"</span>
                        <span class="n">type</span><span class="o">=</span><span class="s2">"button"</span>
                        <span class="p">(</span><span class="n">click</span><span class="p">)</span><span class="o">=</span><span class="s2">"addRelation()"</span>
                        <span class="n">matTooltip</span><span class="o">=</span><span class="s2">"Add Relation"</span>
                        <span class="n">matTooltipPosition</span><span class="o">=</span><span class="s2">"above"</span><span class="o">&gt;</span>
                    <span class="no">Add</span>
                <span class="o">&lt;</span><span class="sr">/button&gt;
            &lt;/</span><span class="n">div</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="sr">/div&gt;
    &lt;/</span><span class="n">div</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">div</span> <span class="n">mat</span><span class="o">-</span><span class="n">dialog</span><span class="o">-</span><span class="n">actions</span> <span class="n">fxLayout</span><span class="o">=</span><span class="s2">"row"</span> <span class="n">fxLayoutAlign</span><span class="o">=</span><span class="s2">"end center"</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="n">button</span> <span class="n">mat</span><span class="o">-</span><span class="n">button</span> <span class="n">color</span><span class="o">=</span><span class="s2">"primary"</span>
                <span class="n">type</span><span class="o">=</span><span class="s2">"button"</span>
                <span class="p">[</span><span class="n">disabled</span><span class="p">]</span><span class="o">=</span><span class="s2">"(isLoading$ | async)"</span>
                <span class="p">(</span><span class="n">click</span><span class="p">)</span><span class="o">=</span><span class="s2">"cancel()"</span> <span class="n">cdkFocusInitial</span><span class="o">&gt;</span>
            <span class="no">Cancel</span>
        <span class="o">&lt;</span><span class="sr">/button&gt;
        &lt;button mat-button mat-raised-button color="primary"
                type="submit"
                [disabled]="(isLoading$ | async) || editEntityForm.invalid || !editEntityForm.dirty"&gt;
            Save
        &lt;/</span><span class="n">button</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="sr">/div&gt;
&lt;/</span><span class="n">form</span><span class="o">&gt;</span>
</pre></td></tr></tbody></table></code></pre></div>    </div>
  </figure>
 
</details>

<h2 id="action-sources">Action sources</h2>

<p><em>Actions sources</em> is a specific act that needs to be done to achieve a goal (like clicking a widget header button, double-clicking a row, or a map’s marker). Action sources are different for all widgets. 
Action sources will be explained for each widget type separately using an example of the most commonly used type of action “Navigate to new dashboard state”.</p>

<p><strong>All of the action sources will be shown with an example of <a href="/docs/user-guide/ui/widget-actions/#navigate-to-new-dashboard-state">“Navigate to new dashboard state”</a> action type.</strong></p>

<h4 id="action-sources-configuration">Action sources configuration</h4>

<p>For suitability, we consider action sources on the most commonly used widgets.</p>

<p>Please, <a href="/docs/getting-started-guides/helloworld/#step-33-add-table-widget">learn here</a> how to add an Entity Table widget to your dashboard.</p>

<p>To add an action to your Entity Table widget:</p>
<ul>
  <li>Go to the Dashboard’s Edit mode;</li>
  <li>Click a “Pencil” icon in the upper right corner of the widget;</li>
  <li>Choose the last cell “Actions” and click the “Plus” symbol on the right of the window.</li>
</ul>

<div id="0">
  <div itemscope="" itemtype="http://schema.org/ImageGallery" class="images-gallery" style="justify-content: start;">
    <figure itemprop="associatedMedia" itemscope="" itemtype="http://schema.org/ImageObject" style="max-width: min(225px, 100%);
                    max-height: min(225px, 100%);" class="list-item">
<a href="/images/user-guide/ui/widgets/actions/entity-cards/entity-sources.png" onclick="return false;" itemprop="contentUrl"> <img src="/images/user-guide/ui/widgets/actions/entity-cards/entity-sources-preview.png" itemprop="thumbnail" alt="image" style="max-width: min(225px, 100%);
                                max-height: min(225px, 100%);" /> </a>       <figcaption itemprop="caption description" style="display: none"></figcaption>
    </figure>
    <figure itemprop="associatedMedia" itemscope="" itemtype="http://schema.org/ImageObject" style="max-width: min(225px, 100%);
                    max-height: min(225px, 100%);" class="list-item">
<a href="/images/user-guide/ui/widgets/actions/entity-cards/entity-sources-1.png" onclick="return false;" itemprop="contentUrl"> <img src="/images/user-guide/ui/widgets/actions/entity-cards/entity-sources-1-preview.png" itemprop="thumbnail" alt="image" style="max-width: min(225px, 100%);
                                max-height: min(225px, 100%);" /> </a>       <figcaption itemprop="caption description" style="display: none"></figcaption>
    </figure>
    <figure itemprop="associatedMedia" itemscope="" itemtype="http://schema.org/ImageObject" style="max-width: min(225px, 100%);
                    max-height: min(225px, 100%);" class="list-item">
<a href="/images/user-guide/ui/widgets/actions/entity-cards/entity-sources-2.png" onclick="return false;" itemprop="contentUrl"> <img src="/images/user-guide/ui/widgets/actions/entity-cards/entity-sources-2-preview.png" itemprop="thumbnail" alt="image" style="max-width: min(225px, 100%);
                                max-height: min(225px, 100%);" /> </a>       <figcaption itemprop="caption description" style="display: none"></figcaption>
    </figure>
  </div>
</div>

<script>
    window.addEventListener("load", function() {
        window.removeEventListener("load", arguments.callee, false);

        if(!document.getElementsByClassName('pswp').length){
            document.body.insertAdjacentHTML('beforeend',
                '<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">\n' +
                '        <div class="pswp__bg"></div>\n' +
                '        <div class="pswp__scroll-wrap">\n' +
                '            <div class="pswp__container">\n' +
                '                <div class="pswp__item"></div>\n' +
                '                <div class="pswp__item"></div>\n' +
                '                <div class="pswp__item"></div>\n' +
                '            </div>\n' +
                '\n' +
                '            <div class="pswp__ui pswp__ui--hidden">\n' +
                '\n' +
                '                <div class="pswp__top-bar">\n' +
                '                    <div class="pswp__counter"></div>\n' +
                '\n' +
                '                    <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>\n' +
                '\n' +
                '                    <button class="pswp__button pswp__button--share" title="Share"></button>\n' +
                '\n' +
                '                    <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>\n' +
                '\n' +
                '                    <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>\n' +
                '\n' +
                '                    <div class="pswp__preloader">\n' +
                '                        <div class="pswp__preloader__icn">\n' +
                '                            <div class="pswp__preloader__cut">\n' +
                '                                <div class="pswp__preloader__donut"></div>\n' +
                '                            </div>\n' +
                '                        </div>\n' +
                '                    </div>\n' +
                '                </div>\n' +
                '                <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">\n' +
                '                    <div class="pswp__share-tooltip"></div>\n' +
                '                </div>\n' +
                '                <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">\n' +
                '                </button>\n' +
                '                <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">\n' +
                '                </button>\n' +
                '                <div class="pswp__caption">\n' +
                '                    <div class="pswp__caption__center"></div>\n' +
                '                </div>\n' +
                '            </div>\n' +
                '        </div>\n' +
                '    </div>'
            );
        }

        var container = document.getElementById('0');

        var initPhotoSwipeFromDOM = function(gallerySelector) {
            var parseThumbnailElements = function(el) {
                var thumbElements = el.childNodes,
                    numNodes = thumbElements.length,
                    items = [],
                    figureEl,
                    linkEl,
                    size,
                    item;

                for(var i = 0; i < numNodes; i++) {

                    figureEl = thumbElements[i];
                    if(figureEl.nodeType !== 1) {
                        continue;
                    }
                    linkEl = figureEl.children[0];
                    size = linkEl.children[0];
                    item = {
                        src: linkEl.getAttribute('href'),
                        w: 2500,
                        h: 0,
                        sizeLoaded: false
                    };

                    if(figureEl.children.length > 1) {
                        item.title = figureEl.children[1].innerHTML;
                    }
                    if(linkEl.children.length > 0) {
                        item.msrc = linkEl.children[0].getAttribute('src');
                    }
                    if(item.msrc === item.src){
                        item.w = parseInt(size.naturalWidth, 10);
                        item.h = parseInt(size.naturalHeight, 10);
                    }

                    item.el = figureEl;
                    items.push(item);
                }
                return items;
            };

            var closest = function closest(el, fn) {
                return el && ( fn(el) ? el : closest(el.parentNode, fn) );
            };

            var onThumbnailsClick = function(e) {
                e = e || window.event;
                e.preventDefault ? e.preventDefault() : e.returnValue = false;

                var eTarget = e.target || e.srcElement;

                var clickedListItem = closest(eTarget, function(el) {
                    return (el.tagName && el.tagName.toUpperCase() === 'FIGURE');
                });

                if(!clickedListItem) {
                    return;
                }

                var clickedGallery = clickedListItem.parentNode,
                    childNodes = clickedListItem.parentNode.childNodes,
                    numChildNodes = childNodes.length,
                    nodeIndex = 0,
                    index;

                for (var i = 0; i < numChildNodes; i++) {
                    if(childNodes[i].nodeType !== 1) {
                        continue;
                    }

                    if(childNodes[i] === clickedListItem) {
                        index = nodeIndex;
                        break;
                    }
                    nodeIndex++;
                }

                if(index >= 0) {
                    openPhotoSwipe( index, clickedGallery );
                }
                return false;
            };

            var photoswipeParseHash = function() {
                var hash = window.location.hash.substring(1),
                    params = {};

                if(hash.length < 5) {
                    return params;
                }

                var vars = hash.split('&');
                for (var i = 0; i < vars.length; i++) {
                    if(!vars[i]) {
                        continue;
                    }
                    var pair = vars[i].split('=');
                    if(pair.length < 2) {
                        continue;
                    }
                    params[pair[0]] = pair[1];
                }

                if(params.gid) {
                    params.gid = parseInt(params.gid, 10);
                }

                return params;
            };

            var openPhotoSwipe = function(index, galleryElement, disableAnimation, fromURL) {
                var pswpElement = document.querySelectorAll('.pswp')[0],
                    gallery,
                    options,
                    items;

                items = parseThumbnailElements(galleryElement);

                options = {
                    galleryUID: galleryElement.getAttribute('data-pswp-uid'),
                    getThumbBoundsFn: function(index) {
                        var thumbnail = items[index].el.getElementsByTagName('img')[0], // find thumbnail
                            pageYScroll = window.pageYOffset || document.documentElement.scrollTop,
                            rect = thumbnail.getBoundingClientRect();
                        return {x:rect.left, y:rect.top + pageYScroll, w:rect.width};
                    },
                    bgOpacity: 0.8,
                    closeOnScroll: false,
                    shareEl: false,
                    fullscreenEl: false,
                    zoomEl: true,
                    history: false,
                    loop: false
                };

                if(fromURL) {
                    if(options.galleryPIDs) {
                        for(var j = 0; j < items.length; j++) {
                            if(items[j].pid == index) {
                                options.index = j;
                                break;
                            }
                        }
                    } else {
                        options.index = parseInt(index, 10) - 1;
                    }
                } else {
                    options.index = parseInt(index, 10);
                }

                if( isNaN(options.index) ) {
                    return;
                }

                if(disableAnimation) {
                    options.showAnimationDuration = 0;
                }

                gallery = new PhotoSwipe( pswpElement, PhotoSwipeUI_Default, items, options);

                gallery.listen('gettingData', function(index, item) {
                    if (!item.sizeLoaded) {
                        item.sizeLoaded = true;
                        var img = new Image();
                        img.onload = function() {
                            item.w = this.width;
                            item.h = this.height;
                            gallery.updateSize(true);
                        }
                        img.src = item.src;
                    }
                });

                gallery.init();

                var buttonLeft = pswpElement.getElementsByClassName('pswp__button--arrow--left')[0];
                var buttonRight = pswpElement.getElementsByClassName('pswp__button--arrow--right')[0];

                buttonLeft.hidden = gallery.getCurrentIndex() === 0;
                buttonRight.hidden = gallery.getCurrentIndex() + 1 === gallery.items.length;

                gallery.listen('beforeChange', function() {
                        buttonLeft.hidden = gallery.getCurrentIndex() === 0;
                        buttonRight.hidden = gallery.getCurrentIndex() + 1 === gallery.items.length;
                    }
                );
            };

            var galleryElements = container.querySelectorAll( gallerySelector );

            for(var i = 0, l = galleryElements.length; i < l; i++) {
                galleryElements[i].setAttribute('data-pswp-uid', i+1);
                galleryElements[i].onclick = onThumbnailsClick;
            }

            var hashData = photoswipeParseHash();
            if(hashData.pid && hashData.gid) {
                openPhotoSwipe( hashData.pid ,  galleryElements[ hashData.gid - 1 ], true, true );
            }
        };

        initPhotoSwipeFromDOM('.images-gallery');
    }, false)
</script>

<h6 id="1-action-cell-button">1. Action cell button</h6>

<p>Clicking an icon that’s been chosen as a button executes an action. To configure the <em>Action cell button</em> action source, you should:</p>

<ol>
  <li>In the widget’s Edit mode move to the last cell “Actions”.</li>
  <li>Click the “+” icon on the right of the window to add a new action.</li>
  <li>In the top drop-down menu, choose an <em>Action cell button</em> action source.</li>
  <li>In the next line input a name for the action and choose an icon that will represent a button. With this button, action will be performed.</li>
  <li>Since the example for all the action sources is the “Navigate to new dashboard state” action type, choose it in the drop-down Type menu.</li>
  <li>After choosing an action type, the drop-down menu “Target dashboard state” appears. Select a previously created state you’d like to be transitioned to.</li>
  <li>When all needed settings are configured, click “Add” at the right bottom of the “Add action” window.</li>
  <li>Now you see configured action, so you can double-check action source, icon, and action type.</li>
  <li>Apply changes by clicking the orange tick icon in the top right of the window and then close the details window.</li>
  <li>Save applied changes by clicking the orange tick icon “Apply changes” in the bottom right of the screen.</li>
</ol>

<p>As you see, opposite each entity name is an action cell button. By clicking this button the action will be executed, namely transition to the chosen state.</p>

<div id="0">
  <div itemscope="" itemtype="http://schema.org/ImageGallery" class="images-gallery" style="justify-content: start;">
    <figure itemprop="associatedMedia" itemscope="" itemtype="http://schema.org/ImageObject" style="max-width: min(225px, 100%);
                    max-height: min(225px, 100%);" class="list-item">
<a href="/images/user-guide/ui/widgets/actions/entity-cards/entity-action-cellbutton.png" onclick="return false;" itemprop="contentUrl"> <img src="/images/user-guide/ui/widgets/actions/entity-cards/entity-action-cellbutton-preview.png" itemprop="thumbnail" alt="image" style="max-width: min(225px, 100%);
                                max-height: min(225px, 100%);" /> </a>       <figcaption itemprop="caption description" style="display: none"></figcaption>
    </figure>
    <figure itemprop="associatedMedia" itemscope="" itemtype="http://schema.org/ImageObject" style="max-width: min(225px, 100%);
                    max-height: min(225px, 100%);" class="list-item">
<a href="/images/user-guide/ui/widgets/actions/entity-cards/entity-action-cellbutton-1.png" onclick="return false;" itemprop="contentUrl"> <img src="/images/user-guide/ui/widgets/actions/entity-cards/entity-action-cellbutton-1-preview.png" itemprop="thumbnail" alt="image" style="max-width: min(225px, 100%);
                                max-height: min(225px, 100%);" /> </a>       <figcaption itemprop="caption description" style="display: none"></figcaption>
    </figure>
    <figure itemprop="associatedMedia" itemscope="" itemtype="http://schema.org/ImageObject" style="max-width: min(225px, 100%);
                    max-height: min(225px, 100%);" class="list-item">
<a href="/images/user-guide/ui/widgets/actions/entity-cards/entity-action-cellbutton-2.png" onclick="return false;" itemprop="contentUrl"> <img src="/images/user-guide/ui/widgets/actions/entity-cards/entity-action-cellbutton-2-preview.png" itemprop="thumbnail" alt="image" style="max-width: min(225px, 100%);
                                max-height: min(225px, 100%);" /> </a>       <figcaption itemprop="caption description" style="display: none"></figcaption>
    </figure>
    <figure itemprop="associatedMedia" itemscope="" itemtype="http://schema.org/ImageObject" style="max-width: min(225px, 100%);
                    max-height: min(225px, 100%);" class="list-item">
<a href="/images/user-guide/ui/widgets/actions/entity-cards/entity-action-cellbutton-3.png" onclick="return false;" itemprop="contentUrl"> <img src="/images/user-guide/ui/widgets/actions/entity-cards/entity-action-cellbutton-3-preview.png" itemprop="thumbnail" alt="image" style="max-width: min(225px, 100%);
                                max-height: min(225px, 100%);" /> </a>       <figcaption itemprop="caption description" style="display: none"></figcaption>
    </figure>
    <figure itemprop="associatedMedia" itemscope="" itemtype="http://schema.org/ImageObject" style="max-width: min(225px, 100%);
                    max-height: min(225px, 100%);" class="list-item">
<a href="/images/user-guide/ui/widgets/actions/entity-cards/entity-action-cellbutton-4.png" onclick="return false;" itemprop="contentUrl"> <img src="/images/user-guide/ui/widgets/actions/entity-cards/entity-action-cellbutton-4-preview.png" itemprop="thumbnail" alt="image" style="max-width: min(225px, 100%);
                                max-height: min(225px, 100%);" /> </a>       <figcaption itemprop="caption description" style="display: none"></figcaption>
    </figure>
    <figure itemprop="associatedMedia" itemscope="" itemtype="http://schema.org/ImageObject" style="max-width: min(225px, 100%);
                    max-height: min(225px, 100%);" class="list-item">
<a href="/images/user-guide/ui/widgets/actions/entity-cards/entity-action-cellbutton-5.png" onclick="return false;" itemprop="contentUrl"> <img src="/images/user-guide/ui/widgets/actions/entity-cards/entity-action-cellbutton-5-preview.png" itemprop="thumbnail" alt="image" style="max-width: min(225px, 100%);
                                max-height: min(225px, 100%);" /> </a>       <figcaption itemprop="caption description" style="display: none"></figcaption>
    </figure>
  </div>
</div>

<script>
    window.addEventListener("load", function() {
        window.removeEventListener("load", arguments.callee, false);

        if(!document.getElementsByClassName('pswp').length){
            document.body.insertAdjacentHTML('beforeend',
                '<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">\n' +
                '        <div class="pswp__bg"></div>\n' +
                '        <div class="pswp__scroll-wrap">\n' +
                '            <div class="pswp__container">\n' +
                '                <div class="pswp__item"></div>\n' +
                '                <div class="pswp__item"></div>\n' +
                '                <div class="pswp__item"></div>\n' +
                '            </div>\n' +
                '\n' +
                '            <div class="pswp__ui pswp__ui--hidden">\n' +
                '\n' +
                '                <div class="pswp__top-bar">\n' +
                '                    <div class="pswp__counter"></div>\n' +
                '\n' +
                '                    <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>\n' +
                '\n' +
                '                    <button class="pswp__button pswp__button--share" title="Share"></button>\n' +
                '\n' +
                '                    <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>\n' +
                '\n' +
                '                    <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>\n' +
                '\n' +
                '                    <div class="pswp__preloader">\n' +
                '                        <div class="pswp__preloader__icn">\n' +
                '                            <div class="pswp__preloader__cut">\n' +
                '                                <div class="pswp__preloader__donut"></div>\n' +
                '                            </div>\n' +
                '                        </div>\n' +
                '                    </div>\n' +
                '                </div>\n' +
                '                <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">\n' +
                '                    <div class="pswp__share-tooltip"></div>\n' +
                '                </div>\n' +
                '                <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">\n' +
                '                </button>\n' +
                '                <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">\n' +
                '                </button>\n' +
                '                <div class="pswp__caption">\n' +
                '                    <div class="pswp__caption__center"></div>\n' +
                '                </div>\n' +
                '            </div>\n' +
                '        </div>\n' +
                '    </div>'
            );
        }

        var container = document.getElementById('0');

        var initPhotoSwipeFromDOM = function(gallerySelector) {
            var parseThumbnailElements = function(el) {
                var thumbElements = el.childNodes,
                    numNodes = thumbElements.length,
                    items = [],
                    figureEl,
                    linkEl,
                    size,
                    item;

                for(var i = 0; i < numNodes; i++) {

                    figureEl = thumbElements[i];
                    if(figureEl.nodeType !== 1) {
                        continue;
                    }
                    linkEl = figureEl.children[0];
                    size = linkEl.children[0];
                    item = {
                        src: linkEl.getAttribute('href'),
                        w: 2500,
                        h: 0,
                        sizeLoaded: false
                    };

                    if(figureEl.children.length > 1) {
                        item.title = figureEl.children[1].innerHTML;
                    }
                    if(linkEl.children.length > 0) {
                        item.msrc = linkEl.children[0].getAttribute('src');
                    }
                    if(item.msrc === item.src){
                        item.w = parseInt(size.naturalWidth, 10);
                        item.h = parseInt(size.naturalHeight, 10);
                    }

                    item.el = figureEl;
                    items.push(item);
                }
                return items;
            };

            var closest = function closest(el, fn) {
                return el && ( fn(el) ? el : closest(el.parentNode, fn) );
            };

            var onThumbnailsClick = function(e) {
                e = e || window.event;
                e.preventDefault ? e.preventDefault() : e.returnValue = false;

                var eTarget = e.target || e.srcElement;

                var clickedListItem = closest(eTarget, function(el) {
                    return (el.tagName && el.tagName.toUpperCase() === 'FIGURE');
                });

                if(!clickedListItem) {
                    return;
                }

                var clickedGallery = clickedListItem.parentNode,
                    childNodes = clickedListItem.parentNode.childNodes,
                    numChildNodes = childNodes.length,
                    nodeIndex = 0,
                    index;

                for (var i = 0; i < numChildNodes; i++) {
                    if(childNodes[i].nodeType !== 1) {
                        continue;
                    }

                    if(childNodes[i] === clickedListItem) {
                        index = nodeIndex;
                        break;
                    }
                    nodeIndex++;
                }

                if(index >= 0) {
                    openPhotoSwipe( index, clickedGallery );
                }
                return false;
            };

            var photoswipeParseHash = function() {
                var hash = window.location.hash.substring(1),
                    params = {};

                if(hash.length < 5) {
                    return params;
                }

                var vars = hash.split('&');
                for (var i = 0; i < vars.length; i++) {
                    if(!vars[i]) {
                        continue;
                    }
                    var pair = vars[i].split('=');
                    if(pair.length < 2) {
                        continue;
                    }
                    params[pair[0]] = pair[1];
                }

                if(params.gid) {
                    params.gid = parseInt(params.gid, 10);
                }

                return params;
            };

            var openPhotoSwipe = function(index, galleryElement, disableAnimation, fromURL) {
                var pswpElement = document.querySelectorAll('.pswp')[0],
                    gallery,
                    options,
                    items;

                items = parseThumbnailElements(galleryElement);

                options = {
                    galleryUID: galleryElement.getAttribute('data-pswp-uid'),
                    getThumbBoundsFn: function(index) {
                        var thumbnail = items[index].el.getElementsByTagName('img')[0], // find thumbnail
                            pageYScroll = window.pageYOffset || document.documentElement.scrollTop,
                            rect = thumbnail.getBoundingClientRect();
                        return {x:rect.left, y:rect.top + pageYScroll, w:rect.width};
                    },
                    bgOpacity: 0.8,
                    closeOnScroll: false,
                    shareEl: false,
                    fullscreenEl: false,
                    zoomEl: true,
                    history: false,
                    loop: false
                };

                if(fromURL) {
                    if(options.galleryPIDs) {
                        for(var j = 0; j < items.length; j++) {
                            if(items[j].pid == index) {
                                options.index = j;
                                break;
                            }
                        }
                    } else {
                        options.index = parseInt(index, 10) - 1;
                    }
                } else {
                    options.index = parseInt(index, 10);
                }

                if( isNaN(options.index) ) {
                    return;
                }

                if(disableAnimation) {
                    options.showAnimationDuration = 0;
                }

                gallery = new PhotoSwipe( pswpElement, PhotoSwipeUI_Default, items, options);

                gallery.listen('gettingData', function(index, item) {
                    if (!item.sizeLoaded) {
                        item.sizeLoaded = true;
                        var img = new Image();
                        img.onload = function() {
                            item.w = this.width;
                            item.h = this.height;
                            gallery.updateSize(true);
                        }
                        img.src = item.src;
                    }
                });

                gallery.init();

                var buttonLeft = pswpElement.getElementsByClassName('pswp__button--arrow--left')[0];
                var buttonRight = pswpElement.getElementsByClassName('pswp__button--arrow--right')[0];

                buttonLeft.hidden = gallery.getCurrentIndex() === 0;
                buttonRight.hidden = gallery.getCurrentIndex() + 1 === gallery.items.length;

                gallery.listen('beforeChange', function() {
                        buttonLeft.hidden = gallery.getCurrentIndex() === 0;
                        buttonRight.hidden = gallery.getCurrentIndex() + 1 === gallery.items.length;
                    }
                );
            };

            var galleryElements = container.querySelectorAll( gallerySelector );

            for(var i = 0, l = galleryElements.length; i < l; i++) {
                galleryElements[i].setAttribute('data-pswp-uid', i+1);
                galleryElements[i].onclick = onThumbnailsClick;
            }

            var hashData = photoswipeParseHash();
            if(hashData.pid && hashData.gid) {
                openPhotoSwipe( hashData.pid ,  galleryElements[ hashData.gid - 1 ], true, true );
            }
        };

        initPhotoSwipeFromDOM('.images-gallery');
    }, false)
</script>

<h6 id="2-widget-header-button">2. Widget header button</h6>

<p>A button appears in the header of the widget. Clicking this button executes an action. This button responsible for the whole widget, not for separate entities. 
The widget header button is the most commonly used action source, and it can be found in all widgets. To configure the <em>Widget header button</em> action source, you should:</p>

<ol>
  <li>In the widget’s Edit mode move to the last cell “Actions”.</li>
  <li>Click the “+” icon on the right of the window to add a new action.</li>
  <li>In the top drop-down menu, choose a <em>Widget header button</em> action source.</li>
  <li>In the next line input a name for the action and choose an icon that will represent a button. With this button, action will be performed.</li>
  <li>Since the example for all the action sources is the “Navigate to new dashboard state” action type, choose it in the drop-down Type menu.</li>
  <li>After choosing an action type, the drop-down menu “Target dashboard state” appears. Select a previously created state you’d like to be transitioned to.</li>
  <li>When all needed settings are configured, click “Add” at the right bottom of the “Add action” window.</li>
  <li>Now you see configured action, so you can double-check action source, icon, and action type.</li>
  <li>Apply changes by clicking the orange tick icon in the top right of the window and then close the details window.</li>
  <li>Save applied changes by clicking the orange tick icon “Apply changes” in the bottom right of the screen.</li>
</ol>

<p>As you see now, in the header of the widget has appeared a button-icon. After you click it, action will be performed, namely, the transition to the chosen state.</p>

<div id="0">
  <div itemscope="" itemtype="http://schema.org/ImageGallery" class="images-gallery" style="justify-content: start;">
    <figure itemprop="associatedMedia" itemscope="" itemtype="http://schema.org/ImageObject" style="max-width: min(225px, 100%);
                    max-height: min(225px, 100%);" class="list-item">
<a href="/images/user-guide/ui/widgets/actions/entity-cards/entity-widgetheaderbutton.png" onclick="return false;" itemprop="contentUrl"> <img src="/images/user-guide/ui/widgets/actions/entity-cards/entity-widgetheaderbutton-preview.png" itemprop="thumbnail" alt="image" style="max-width: min(225px, 100%);
                                max-height: min(225px, 100%);" /> </a>       <figcaption itemprop="caption description" style="display: none"></figcaption>
    </figure>
    <figure itemprop="associatedMedia" itemscope="" itemtype="http://schema.org/ImageObject" style="max-width: min(225px, 100%);
                    max-height: min(225px, 100%);" class="list-item">
<a href="/images/user-guide/ui/widgets/actions/entity-cards/entity-widgetheaderbutton-1.png" onclick="return false;" itemprop="contentUrl"> <img src="/images/user-guide/ui/widgets/actions/entity-cards/entity-widgetheaderbutton-1-preview.png" itemprop="thumbnail" alt="image" style="max-width: min(225px, 100%);
                                max-height: min(225px, 100%);" /> </a>       <figcaption itemprop="caption description" style="display: none"></figcaption>
    </figure>
    <figure itemprop="associatedMedia" itemscope="" itemtype="http://schema.org/ImageObject" style="max-width: min(225px, 100%);
                    max-height: min(225px, 100%);" class="list-item">
<a href="/images/user-guide/ui/widgets/actions/entity-cards/entity-widgetheaderbutton-2.png" onclick="return false;" itemprop="contentUrl"> <img src="/images/user-guide/ui/widgets/actions/entity-cards/entity-widgetheaderbutton-2-preview.png" itemprop="thumbnail" alt="image" style="max-width: min(225px, 100%);
                                max-height: min(225px, 100%);" /> </a>       <figcaption itemprop="caption description" style="display: none"></figcaption>
    </figure>
    <figure itemprop="associatedMedia" itemscope="" itemtype="http://schema.org/ImageObject" style="max-width: min(225px, 100%);
                    max-height: min(225px, 100%);" class="list-item">
<a href="/images/user-guide/ui/widgets/actions/entity-cards/entity-widgetheaderbutton-3.png" onclick="return false;" itemprop="contentUrl"> <img src="/images/user-guide/ui/widgets/actions/entity-cards/entity-widgetheaderbutton-3-preview.png" itemprop="thumbnail" alt="image" style="max-width: min(225px, 100%);
                                max-height: min(225px, 100%);" /> </a>       <figcaption itemprop="caption description" style="display: none"></figcaption>
    </figure>
    <figure itemprop="associatedMedia" itemscope="" itemtype="http://schema.org/ImageObject" style="max-width: min(225px, 100%);
                    max-height: min(225px, 100%);" class="list-item">
<a href="/images/user-guide/ui/widgets/actions/entity-cards/entity-widgetheaderbutton-4.png" onclick="return false;" itemprop="contentUrl"> <img src="/images/user-guide/ui/widgets/actions/entity-cards/entity-widgetheaderbutton-4-preview.png" itemprop="thumbnail" alt="image" style="max-width: min(225px, 100%);
                                max-height: min(225px, 100%);" /> </a>       <figcaption itemprop="caption description" style="display: none"></figcaption>
    </figure>
    <figure itemprop="associatedMedia" itemscope="" itemtype="http://schema.org/ImageObject" style="max-width: min(225px, 100%);
                    max-height: min(225px, 100%);" class="list-item">
<a href="/images/user-guide/ui/widgets/actions/entity-cards/entity-widgetheaderbutton-5.png" onclick="return false;" itemprop="contentUrl"> <img src="/images/user-guide/ui/widgets/actions/entity-cards/entity-widgetheaderbutton-5-preview.png" itemprop="thumbnail" alt="image" style="max-width: min(225px, 100%);
                                max-height: min(225px, 100%);" /> </a>       <figcaption itemprop="caption description" style="display: none"></figcaption>
    </figure>
  </div>
</div>

<script>
    window.addEventListener("load", function() {
        window.removeEventListener("load", arguments.callee, false);

        if(!document.getElementsByClassName('pswp').length){
            document.body.insertAdjacentHTML('beforeend',
                '<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">\n' +
                '        <div class="pswp__bg"></div>\n' +
                '        <div class="pswp__scroll-wrap">\n' +
                '            <div class="pswp__container">\n' +
                '                <div class="pswp__item"></div>\n' +
                '                <div class="pswp__item"></div>\n' +
                '                <div class="pswp__item"></div>\n' +
                '            </div>\n' +
                '\n' +
                '            <div class="pswp__ui pswp__ui--hidden">\n' +
                '\n' +
                '                <div class="pswp__top-bar">\n' +
                '                    <div class="pswp__counter"></div>\n' +
                '\n' +
                '                    <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>\n' +
                '\n' +
                '                    <button class="pswp__button pswp__button--share" title="Share"></button>\n' +
                '\n' +
                '                    <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>\n' +
                '\n' +
                '                    <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>\n' +
                '\n' +
                '                    <div class="pswp__preloader">\n' +
                '                        <div class="pswp__preloader__icn">\n' +
                '                            <div class="pswp__preloader__cut">\n' +
                '                                <div class="pswp__preloader__donut"></div>\n' +
                '                            </div>\n' +
                '                        </div>\n' +
                '                    </div>\n' +
                '                </div>\n' +
                '                <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">\n' +
                '                    <div class="pswp__share-tooltip"></div>\n' +
                '                </div>\n' +
                '                <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">\n' +
                '                </button>\n' +
                '                <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">\n' +
                '                </button>\n' +
                '                <div class="pswp__caption">\n' +
                '                    <div class="pswp__caption__center"></div>\n' +
                '                </div>\n' +
                '            </div>\n' +
                '        </div>\n' +
                '    </div>'
            );
        }

        var container = document.getElementById('0');

        var initPhotoSwipeFromDOM = function(gallerySelector) {
            var parseThumbnailElements = function(el) {
                var thumbElements = el.childNodes,
                    numNodes = thumbElements.length,
                    items = [],
                    figureEl,
                    linkEl,
                    size,
                    item;

                for(var i = 0; i < numNodes; i++) {

                    figureEl = thumbElements[i];
                    if(figureEl.nodeType !== 1) {
                        continue;
                    }
                    linkEl = figureEl.children[0];
                    size = linkEl.children[0];
                    item = {
                        src: linkEl.getAttribute('href'),
                        w: 2500,
                        h: 0,
                        sizeLoaded: false
                    };

                    if(figureEl.children.length > 1) {
                        item.title = figureEl.children[1].innerHTML;
                    }
                    if(linkEl.children.length > 0) {
                        item.msrc = linkEl.children[0].getAttribute('src');
                    }
                    if(item.msrc === item.src){
                        item.w = parseInt(size.naturalWidth, 10);
                        item.h = parseInt(size.naturalHeight, 10);
                    }

                    item.el = figureEl;
                    items.push(item);
                }
                return items;
            };

            var closest = function closest(el, fn) {
                return el && ( fn(el) ? el : closest(el.parentNode, fn) );
            };

            var onThumbnailsClick = function(e) {
                e = e || window.event;
                e.preventDefault ? e.preventDefault() : e.returnValue = false;

                var eTarget = e.target || e.srcElement;

                var clickedListItem = closest(eTarget, function(el) {
                    return (el.tagName && el.tagName.toUpperCase() === 'FIGURE');
                });

                if(!clickedListItem) {
                    return;
                }

                var clickedGallery = clickedListItem.parentNode,
                    childNodes = clickedListItem.parentNode.childNodes,
                    numChildNodes = childNodes.length,
                    nodeIndex = 0,
                    index;

                for (var i = 0; i < numChildNodes; i++) {
                    if(childNodes[i].nodeType !== 1) {
                        continue;
                    }

                    if(childNodes[i] === clickedListItem) {
                        index = nodeIndex;
                        break;
                    }
                    nodeIndex++;
                }

                if(index >= 0) {
                    openPhotoSwipe( index, clickedGallery );
                }
                return false;
            };

            var photoswipeParseHash = function() {
                var hash = window.location.hash.substring(1),
                    params = {};

                if(hash.length < 5) {
                    return params;
                }

                var vars = hash.split('&');
                for (var i = 0; i < vars.length; i++) {
                    if(!vars[i]) {
                        continue;
                    }
                    var pair = vars[i].split('=');
                    if(pair.length < 2) {
                        continue;
                    }
                    params[pair[0]] = pair[1];
                }

                if(params.gid) {
                    params.gid = parseInt(params.gid, 10);
                }

                return params;
            };

            var openPhotoSwipe = function(index, galleryElement, disableAnimation, fromURL) {
                var pswpElement = document.querySelectorAll('.pswp')[0],
                    gallery,
                    options,
                    items;

                items = parseThumbnailElements(galleryElement);

                options = {
                    galleryUID: galleryElement.getAttribute('data-pswp-uid'),
                    getThumbBoundsFn: function(index) {
                        var thumbnail = items[index].el.getElementsByTagName('img')[0], // find thumbnail
                            pageYScroll = window.pageYOffset || document.documentElement.scrollTop,
                            rect = thumbnail.getBoundingClientRect();
                        return {x:rect.left, y:rect.top + pageYScroll, w:rect.width};
                    },
                    bgOpacity: 0.8,
                    closeOnScroll: false,
                    shareEl: false,
                    fullscreenEl: false,
                    zoomEl: true,
                    history: false,
                    loop: false
                };

                if(fromURL) {
                    if(options.galleryPIDs) {
                        for(var j = 0; j < items.length; j++) {
                            if(items[j].pid == index) {
                                options.index = j;
                                break;
                            }
                        }
                    } else {
                        options.index = parseInt(index, 10) - 1;
                    }
                } else {
                    options.index = parseInt(index, 10);
                }

                if( isNaN(options.index) ) {
                    return;
                }

                if(disableAnimation) {
                    options.showAnimationDuration = 0;
                }

                gallery = new PhotoSwipe( pswpElement, PhotoSwipeUI_Default, items, options);

                gallery.listen('gettingData', function(index, item) {
                    if (!item.sizeLoaded) {
                        item.sizeLoaded = true;
                        var img = new Image();
                        img.onload = function() {
                            item.w = this.width;
                            item.h = this.height;
                            gallery.updateSize(true);
                        }
                        img.src = item.src;
                    }
                });

                gallery.init();

                var buttonLeft = pswpElement.getElementsByClassName('pswp__button--arrow--left')[0];
                var buttonRight = pswpElement.getElementsByClassName('pswp__button--arrow--right')[0];

                buttonLeft.hidden = gallery.getCurrentIndex() === 0;
                buttonRight.hidden = gallery.getCurrentIndex() + 1 === gallery.items.length;

                gallery.listen('beforeChange', function() {
                        buttonLeft.hidden = gallery.getCurrentIndex() === 0;
                        buttonRight.hidden = gallery.getCurrentIndex() + 1 === gallery.items.length;
                    }
                );
            };

            var galleryElements = container.querySelectorAll( gallerySelector );

            for(var i = 0, l = galleryElements.length; i < l; i++) {
                galleryElements[i].setAttribute('data-pswp-uid', i+1);
                galleryElements[i].onclick = onThumbnailsClick;
            }

            var hashData = photoswipeParseHash();
            if(hashData.pid && hashData.gid) {
                openPhotoSwipe( hashData.pid ,  galleryElements[ hashData.gid - 1 ], true, true );
            }
        };

        initPhotoSwipeFromDOM('.images-gallery');
    }, false)
</script>

<h6 id="3-on-row-click">3. On row click</h6>

<p>Clicking on the row of the Table widget executes an action. To configure the <em>On row click</em> action source, you should:</p>

<ol>
  <li>In the widget’s Edit mode move to the last cell “Actions”.</li>
  <li>Click the “+” icon on the right of the window to add a new action.</li>
  <li>In the top drop-down menu, choose an <em>On row click</em> action source.</li>
  <li>Enter the name of the action in the appropriate line.</li>
  <li>Using this action source, there won’t be any buttons on the widget, therefore we shouldn’t select an icon.</li>
  <li>Since the example for all the action sources is the “Navigate to new dashboard state” action type, choose it in the drop-down Type menu.</li>
  <li>After choosing an action type, the drop-down menu “Target dashboard state” appears. Select a previously created state you’d like to be transitioned to.</li>
  <li>When all needed settings are configured, click “Add” at the right bottom of the “Add action” window.</li>
  <li>Now, you see configured action, so you can double-check action source and action type.</li>
  <li>Apply changes by clicking the orange tick icon in the top right of the window and then close the details window.</li>
  <li>Save applied changes by clicking the orange tick icon “Apply changes” in the bottom right of the screen.</li>
</ol>

<p>To execute an action, namely to be transitioned to the chosen state, just click any of the rows of your Table widget.</p>

<div id="0">
  <div itemscope="" itemtype="http://schema.org/ImageGallery" class="images-gallery" style="justify-content: start;">
    <figure itemprop="associatedMedia" itemscope="" itemtype="http://schema.org/ImageObject" style="max-width: min(225px, 100%);
                    max-height: min(225px, 100%);" class="list-item">
<a href="/images/user-guide/ui/widgets/actions/entity-cards/entity-onrowclick.png" onclick="return false;" itemprop="contentUrl"> <img src="/images/user-guide/ui/widgets/actions/entity-cards/entity-onrowclick-preview.png" itemprop="thumbnail" alt="image" style="max-width: min(225px, 100%);
                                max-height: min(225px, 100%);" /> </a>       <figcaption itemprop="caption description" style="display: none"></figcaption>
    </figure>
    <figure itemprop="associatedMedia" itemscope="" itemtype="http://schema.org/ImageObject" style="max-width: min(225px, 100%);
                    max-height: min(225px, 100%);" class="list-item">
<a href="/images/user-guide/ui/widgets/actions/entity-cards/entity-onrowclick-1.png" onclick="return false;" itemprop="contentUrl"> <img src="/images/user-guide/ui/widgets/actions/entity-cards/entity-onrowclick-1-preview.png" itemprop="thumbnail" alt="image" style="max-width: min(225px, 100%);
                                max-height: min(225px, 100%);" /> </a>       <figcaption itemprop="caption description" style="display: none"></figcaption>
    </figure>
    <figure itemprop="associatedMedia" itemscope="" itemtype="http://schema.org/ImageObject" style="max-width: min(225px, 100%);
                    max-height: min(225px, 100%);" class="list-item">
<a href="/images/user-guide/ui/widgets/actions/entity-cards/entity-onrowclick-2.png" onclick="return false;" itemprop="contentUrl"> <img src="/images/user-guide/ui/widgets/actions/entity-cards/entity-onrowclick-2-preview.png" itemprop="thumbnail" alt="image" style="max-width: min(225px, 100%);
                                max-height: min(225px, 100%);" /> </a>       <figcaption itemprop="caption description" style="display: none"></figcaption>
    </figure>
    <figure itemprop="associatedMedia" itemscope="" itemtype="http://schema.org/ImageObject" style="max-width: min(225px, 100%);
                    max-height: min(225px, 100%);" class="list-item">
<a href="/images/user-guide/ui/widgets/actions/entity-cards/entity-onrowclick-3.png" onclick="return false;" itemprop="contentUrl"> <img src="/images/user-guide/ui/widgets/actions/entity-cards/entity-onrowclick-3-preview.png" itemprop="thumbnail" alt="image" style="max-width: min(225px, 100%);
                                max-height: min(225px, 100%);" /> </a>       <figcaption itemprop="caption description" style="display: none"></figcaption>
    </figure>
    <figure itemprop="associatedMedia" itemscope="" itemtype="http://schema.org/ImageObject" style="max-width: min(225px, 100%);
                    max-height: min(225px, 100%);" class="list-item">
<a href="/images/user-guide/ui/widgets/actions/entity-cards/entity-onrowclick-4.png" onclick="return false;" itemprop="contentUrl"> <img src="/images/user-guide/ui/widgets/actions/entity-cards/entity-onrowclick-4-preview.png" itemprop="thumbnail" alt="image" style="max-width: min(225px, 100%);
                                max-height: min(225px, 100%);" /> </a>       <figcaption itemprop="caption description" style="display: none"></figcaption>
    </figure>
  </div>
</div>

<script>
    window.addEventListener("load", function() {
        window.removeEventListener("load", arguments.callee, false);

        if(!document.getElementsByClassName('pswp').length){
            document.body.insertAdjacentHTML('beforeend',
                '<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">\n' +
                '        <div class="pswp__bg"></div>\n' +
                '        <div class="pswp__scroll-wrap">\n' +
                '            <div class="pswp__container">\n' +
                '                <div class="pswp__item"></div>\n' +
                '                <div class="pswp__item"></div>\n' +
                '                <div class="pswp__item"></div>\n' +
                '            </div>\n' +
                '\n' +
                '            <div class="pswp__ui pswp__ui--hidden">\n' +
                '\n' +
                '                <div class="pswp__top-bar">\n' +
                '                    <div class="pswp__counter"></div>\n' +
                '\n' +
                '                    <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>\n' +
                '\n' +
                '                    <button class="pswp__button pswp__button--share" title="Share"></button>\n' +
                '\n' +
                '                    <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>\n' +
                '\n' +
                '                    <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>\n' +
                '\n' +
                '                    <div class="pswp__preloader">\n' +
                '                        <div class="pswp__preloader__icn">\n' +
                '                            <div class="pswp__preloader__cut">\n' +
                '                                <div class="pswp__preloader__donut"></div>\n' +
                '                            </div>\n' +
                '                        </div>\n' +
                '                    </div>\n' +
                '                </div>\n' +
                '                <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">\n' +
                '                    <div class="pswp__share-tooltip"></div>\n' +
                '                </div>\n' +
                '                <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">\n' +
                '                </button>\n' +
                '                <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">\n' +
                '                </button>\n' +
                '                <div class="pswp__caption">\n' +
                '                    <div class="pswp__caption__center"></div>\n' +
                '                </div>\n' +
                '            </div>\n' +
                '        </div>\n' +
                '    </div>'
            );
        }

        var container = document.getElementById('0');

        var initPhotoSwipeFromDOM = function(gallerySelector) {
            var parseThumbnailElements = function(el) {
                var thumbElements = el.childNodes,
                    numNodes = thumbElements.length,
                    items = [],
                    figureEl,
                    linkEl,
                    size,
                    item;

                for(var i = 0; i < numNodes; i++) {

                    figureEl = thumbElements[i];
                    if(figureEl.nodeType !== 1) {
                        continue;
                    }
                    linkEl = figureEl.children[0];
                    size = linkEl.children[0];
                    item = {
                        src: linkEl.getAttribute('href'),
                        w: 2500,
                        h: 0,
                        sizeLoaded: false
                    };

                    if(figureEl.children.length > 1) {
                        item.title = figureEl.children[1].innerHTML;
                    }
                    if(linkEl.children.length > 0) {
                        item.msrc = linkEl.children[0].getAttribute('src');
                    }
                    if(item.msrc === item.src){
                        item.w = parseInt(size.naturalWidth, 10);
                        item.h = parseInt(size.naturalHeight, 10);
                    }

                    item.el = figureEl;
                    items.push(item);
                }
                return items;
            };

            var closest = function closest(el, fn) {
                return el && ( fn(el) ? el : closest(el.parentNode, fn) );
            };

            var onThumbnailsClick = function(e) {
                e = e || window.event;
                e.preventDefault ? e.preventDefault() : e.returnValue = false;

                var eTarget = e.target || e.srcElement;

                var clickedListItem = closest(eTarget, function(el) {
                    return (el.tagName && el.tagName.toUpperCase() === 'FIGURE');
                });

                if(!clickedListItem) {
                    return;
                }

                var clickedGallery = clickedListItem.parentNode,
                    childNodes = clickedListItem.parentNode.childNodes,
                    numChildNodes = childNodes.length,
                    nodeIndex = 0,
                    index;

                for (var i = 0; i < numChildNodes; i++) {
                    if(childNodes[i].nodeType !== 1) {
                        continue;
                    }

                    if(childNodes[i] === clickedListItem) {
                        index = nodeIndex;
                        break;
                    }
                    nodeIndex++;
                }

                if(index >= 0) {
                    openPhotoSwipe( index, clickedGallery );
                }
                return false;
            };

            var photoswipeParseHash = function() {
                var hash = window.location.hash.substring(1),
                    params = {};

                if(hash.length < 5) {
                    return params;
                }

                var vars = hash.split('&');
                for (var i = 0; i < vars.length; i++) {
                    if(!vars[i]) {
                        continue;
                    }
                    var pair = vars[i].split('=');
                    if(pair.length < 2) {
                        continue;
                    }
                    params[pair[0]] = pair[1];
                }

                if(params.gid) {
                    params.gid = parseInt(params.gid, 10);
                }

                return params;
            };

            var openPhotoSwipe = function(index, galleryElement, disableAnimation, fromURL) {
                var pswpElement = document.querySelectorAll('.pswp')[0],
                    gallery,
                    options,
                    items;

                items = parseThumbnailElements(galleryElement);

                options = {
                    galleryUID: galleryElement.getAttribute('data-pswp-uid'),
                    getThumbBoundsFn: function(index) {
                        var thumbnail = items[index].el.getElementsByTagName('img')[0], // find thumbnail
                            pageYScroll = window.pageYOffset || document.documentElement.scrollTop,
                            rect = thumbnail.getBoundingClientRect();
                        return {x:rect.left, y:rect.top + pageYScroll, w:rect.width};
                    },
                    bgOpacity: 0.8,
                    closeOnScroll: false,
                    shareEl: false,
                    fullscreenEl: false,
                    zoomEl: true,
                    history: false,
                    loop: false
                };

                if(fromURL) {
                    if(options.galleryPIDs) {
                        for(var j = 0; j < items.length; j++) {
                            if(items[j].pid == index) {
                                options.index = j;
                                break;
                            }
                        }
                    } else {
                        options.index = parseInt(index, 10) - 1;
                    }
                } else {
                    options.index = parseInt(index, 10);
                }

                if( isNaN(options.index) ) {
                    return;
                }

                if(disableAnimation) {
                    options.showAnimationDuration = 0;
                }

                gallery = new PhotoSwipe( pswpElement, PhotoSwipeUI_Default, items, options);

                gallery.listen('gettingData', function(index, item) {
                    if (!item.sizeLoaded) {
                        item.sizeLoaded = true;
                        var img = new Image();
                        img.onload = function() {
                            item.w = this.width;
                            item.h = this.height;
                            gallery.updateSize(true);
                        }
                        img.src = item.src;
                    }
                });

                gallery.init();

                var buttonLeft = pswpElement.getElementsByClassName('pswp__button--arrow--left')[0];
                var buttonRight = pswpElement.getElementsByClassName('pswp__button--arrow--right')[0];

                buttonLeft.hidden = gallery.getCurrentIndex() === 0;
                buttonRight.hidden = gallery.getCurrentIndex() + 1 === gallery.items.length;

                gallery.listen('beforeChange', function() {
                        buttonLeft.hidden = gallery.getCurrentIndex() === 0;
                        buttonRight.hidden = gallery.getCurrentIndex() + 1 === gallery.items.length;
                    }
                );
            };

            var galleryElements = container.querySelectorAll( gallerySelector );

            for(var i = 0, l = galleryElements.length; i < l; i++) {
                galleryElements[i].setAttribute('data-pswp-uid', i+1);
                galleryElements[i].onclick = onThumbnailsClick;
            }

            var hashData = photoswipeParseHash();
            if(hashData.pid && hashData.gid) {
                openPhotoSwipe( hashData.pid ,  galleryElements[ hashData.gid - 1 ], true, true );
            }
        };

        initPhotoSwipeFromDOM('.images-gallery');
    }, false)
</script>

<h6 id="4-on-row-double-click">4. On row double click</h6>

<p>Double-clicking any row of the Entity table widget executes an action. To configure the <em>On row double click</em> action source, you should:</p>

<ol>
  <li>In the widget’s Edit mode move to the last cell “Actions”.</li>
  <li>Click the “+” icon on the right of the window to add a new action.</li>
  <li>In the top drop-down menu, choose an <em>On row double click</em> action source.</li>
  <li>Enter the name of the action in the appropriate line.</li>
  <li>Using this action source, there won’t be any buttons on the widget, therefore we shouldn’t select an icon.</li>
  <li>Since the example for all the action sources is the “Navigate to new dashboard state” action type, choose it in the drop-down Type menu.</li>
  <li>After choosing an action type, the drop-down menu “Target dashboard state” appears. Select a previously created state you’d like to be transitioned to.</li>
  <li>When all needed settings are configured, click “Add” at the right bottom of the “Add action” window.</li>
  <li>Now, you see configured action, so you can double-check action source and action type.</li>
  <li>Apply changes by clicking the orange tick icon in the top right of the window and then close the details window.</li>
  <li>Save applied changes by clicking the orange tick icon “Apply changes” in the bottom right of the screen.</li>
</ol>

<p>To execute an action, namely to be transitioned to the chosen state, just double click any of the rows of your Table widget.</p>

<div id="0">
  <div itemscope="" itemtype="http://schema.org/ImageGallery" class="images-gallery" style="justify-content: start;">
    <figure itemprop="associatedMedia" itemscope="" itemtype="http://schema.org/ImageObject" style="max-width: min(225px, 100%);
                    max-height: min(225px, 100%);" class="list-item">
<a href="/images/user-guide/ui/widgets/actions/entity-cards/entity-onrowdoubleclick.png" onclick="return false;" itemprop="contentUrl"> <img src="/images/user-guide/ui/widgets/actions/entity-cards/entity-onrowdoubleclick-preview.png" itemprop="thumbnail" alt="image" style="max-width: min(225px, 100%);
                                max-height: min(225px, 100%);" /> </a>       <figcaption itemprop="caption description" style="display: none"></figcaption>
    </figure>
    <figure itemprop="associatedMedia" itemscope="" itemtype="http://schema.org/ImageObject" style="max-width: min(225px, 100%);
                    max-height: min(225px, 100%);" class="list-item">
<a href="/images/user-guide/ui/widgets/actions/entity-cards/entity-onrowdoubleclick-1.png" onclick="return false;" itemprop="contentUrl"> <img src="/images/user-guide/ui/widgets/actions/entity-cards/entity-onrowdoubleclick-1-preview.png" itemprop="thumbnail" alt="image" style="max-width: min(225px, 100%);
                                max-height: min(225px, 100%);" /> </a>       <figcaption itemprop="caption description" style="display: none"></figcaption>
    </figure>
    <figure itemprop="associatedMedia" itemscope="" itemtype="http://schema.org/ImageObject" style="max-width: min(225px, 100%);
                    max-height: min(225px, 100%);" class="list-item">
<a href="/images/user-guide/ui/widgets/actions/entity-cards/entity-onrowdoubleclick-2.png" onclick="return false;" itemprop="contentUrl"> <img src="/images/user-guide/ui/widgets/actions/entity-cards/entity-onrowdoubleclick-2-preview.png" itemprop="thumbnail" alt="image" style="max-width: min(225px, 100%);
                                max-height: min(225px, 100%);" /> </a>       <figcaption itemprop="caption description" style="display: none"></figcaption>
    </figure>
    <figure itemprop="associatedMedia" itemscope="" itemtype="http://schema.org/ImageObject" style="max-width: min(225px, 100%);
                    max-height: min(225px, 100%);" class="list-item">
<a href="/images/user-guide/ui/widgets/actions/entity-cards/entity-onrowdoubleclick-3.png" onclick="return false;" itemprop="contentUrl"> <img src="/images/user-guide/ui/widgets/actions/entity-cards/entity-onrowdoubleclick-3-preview.png" itemprop="thumbnail" alt="image" style="max-width: min(225px, 100%);
                                max-height: min(225px, 100%);" /> </a>       <figcaption itemprop="caption description" style="display: none"></figcaption>
    </figure>
    <figure itemprop="associatedMedia" itemscope="" itemtype="http://schema.org/ImageObject" style="max-width: min(225px, 100%);
                    max-height: min(225px, 100%);" class="list-item">
<a href="/images/user-guide/ui/widgets/actions/entity-cards/entity-onrowdoubleclick-4.png" onclick="return false;" itemprop="contentUrl"> <img src="/images/user-guide/ui/widgets/actions/entity-cards/entity-onrowdoubleclick-4-preview.png" itemprop="thumbnail" alt="image" style="max-width: min(225px, 100%);
                                max-height: min(225px, 100%);" /> </a>       <figcaption itemprop="caption description" style="display: none"></figcaption>
    </figure>
  </div>
</div>

<script>
    window.addEventListener("load", function() {
        window.removeEventListener("load", arguments.callee, false);

        if(!document.getElementsByClassName('pswp').length){
            document.body.insertAdjacentHTML('beforeend',
                '<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">\n' +
                '        <div class="pswp__bg"></div>\n' +
                '        <div class="pswp__scroll-wrap">\n' +
                '            <div class="pswp__container">\n' +
                '                <div class="pswp__item"></div>\n' +
                '                <div class="pswp__item"></div>\n' +
                '                <div class="pswp__item"></div>\n' +
                '            </div>\n' +
                '\n' +
                '            <div class="pswp__ui pswp__ui--hidden">\n' +
                '\n' +
                '                <div class="pswp__top-bar">\n' +
                '                    <div class="pswp__counter"></div>\n' +
                '\n' +
                '                    <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>\n' +
                '\n' +
                '                    <button class="pswp__button pswp__button--share" title="Share"></button>\n' +
                '\n' +
                '                    <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>\n' +
                '\n' +
                '                    <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>\n' +
                '\n' +
                '                    <div class="pswp__preloader">\n' +
                '                        <div class="pswp__preloader__icn">\n' +
                '                            <div class="pswp__preloader__cut">\n' +
                '                                <div class="pswp__preloader__donut"></div>\n' +
                '                            </div>\n' +
                '                        </div>\n' +
                '                    </div>\n' +
                '                </div>\n' +
                '                <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">\n' +
                '                    <div class="pswp__share-tooltip"></div>\n' +
                '                </div>\n' +
                '                <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">\n' +
                '                </button>\n' +
                '                <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">\n' +
                '                </button>\n' +
                '                <div class="pswp__caption">\n' +
                '                    <div class="pswp__caption__center"></div>\n' +
                '                </div>\n' +
                '            </div>\n' +
                '        </div>\n' +
                '    </div>'
            );
        }

        var container = document.getElementById('0');

        var initPhotoSwipeFromDOM = function(gallerySelector) {
            var parseThumbnailElements = function(el) {
                var thumbElements = el.childNodes,
                    numNodes = thumbElements.length,
                    items = [],
                    figureEl,
                    linkEl,
                    size,
                    item;

                for(var i = 0; i < numNodes; i++) {

                    figureEl = thumbElements[i];
                    if(figureEl.nodeType !== 1) {
                        continue;
                    }
                    linkEl = figureEl.children[0];
                    size = linkEl.children[0];
                    item = {
                        src: linkEl.getAttribute('href'),
                        w: 2500,
                        h: 0,
                        sizeLoaded: false
                    };

                    if(figureEl.children.length > 1) {
                        item.title = figureEl.children[1].innerHTML;
                    }
                    if(linkEl.children.length > 0) {
                        item.msrc = linkEl.children[0].getAttribute('src');
                    }
                    if(item.msrc === item.src){
                        item.w = parseInt(size.naturalWidth, 10);
                        item.h = parseInt(size.naturalHeight, 10);
                    }

                    item.el = figureEl;
                    items.push(item);
                }
                return items;
            };

            var closest = function closest(el, fn) {
                return el && ( fn(el) ? el : closest(el.parentNode, fn) );
            };

            var onThumbnailsClick = function(e) {
                e = e || window.event;
                e.preventDefault ? e.preventDefault() : e.returnValue = false;

                var eTarget = e.target || e.srcElement;

                var clickedListItem = closest(eTarget, function(el) {
                    return (el.tagName && el.tagName.toUpperCase() === 'FIGURE');
                });

                if(!clickedListItem) {
                    return;
                }

                var clickedGallery = clickedListItem.parentNode,
                    childNodes = clickedListItem.parentNode.childNodes,
                    numChildNodes = childNodes.length,
                    nodeIndex = 0,
                    index;

                for (var i = 0; i < numChildNodes; i++) {
                    if(childNodes[i].nodeType !== 1) {
                        continue;
                    }

                    if(childNodes[i] === clickedListItem) {
                        index = nodeIndex;
                        break;
                    }
                    nodeIndex++;
                }

                if(index >= 0) {
                    openPhotoSwipe( index, clickedGallery );
                }
                return false;
            };

            var photoswipeParseHash = function() {
                var hash = window.location.hash.substring(1),
                    params = {};

                if(hash.length < 5) {
                    return params;
                }

                var vars = hash.split('&');
                for (var i = 0; i < vars.length; i++) {
                    if(!vars[i]) {
                        continue;
                    }
                    var pair = vars[i].split('=');
                    if(pair.length < 2) {
                        continue;
                    }
                    params[pair[0]] = pair[1];
                }

                if(params.gid) {
                    params.gid = parseInt(params.gid, 10);
                }

                return params;
            };

            var openPhotoSwipe = function(index, galleryElement, disableAnimation, fromURL) {
                var pswpElement = document.querySelectorAll('.pswp')[0],
                    gallery,
                    options,
                    items;

                items = parseThumbnailElements(galleryElement);

                options = {
                    galleryUID: galleryElement.getAttribute('data-pswp-uid'),
                    getThumbBoundsFn: function(index) {
                        var thumbnail = items[index].el.getElementsByTagName('img')[0], // find thumbnail
                            pageYScroll = window.pageYOffset || document.documentElement.scrollTop,
                            rect = thumbnail.getBoundingClientRect();
                        return {x:rect.left, y:rect.top + pageYScroll, w:rect.width};
                    },
                    bgOpacity: 0.8,
                    closeOnScroll: false,
                    shareEl: false,
                    fullscreenEl: false,
                    zoomEl: true,
                    history: false,
                    loop: false
                };

                if(fromURL) {
                    if(options.galleryPIDs) {
                        for(var j = 0; j < items.length; j++) {
                            if(items[j].pid == index) {
                                options.index = j;
                                break;
                            }
                        }
                    } else {
                        options.index = parseInt(index, 10) - 1;
                    }
                } else {
                    options.index = parseInt(index, 10);
                }

                if( isNaN(options.index) ) {
                    return;
                }

                if(disableAnimation) {
                    options.showAnimationDuration = 0;
                }

                gallery = new PhotoSwipe( pswpElement, PhotoSwipeUI_Default, items, options);

                gallery.listen('gettingData', function(index, item) {
                    if (!item.sizeLoaded) {
                        item.sizeLoaded = true;
                        var img = new Image();
                        img.onload = function() {
                            item.w = this.width;
                            item.h = this.height;
                            gallery.updateSize(true);
                        }
                        img.src = item.src;
                    }
                });

                gallery.init();

                var buttonLeft = pswpElement.getElementsByClassName('pswp__button--arrow--left')[0];
                var buttonRight = pswpElement.getElementsByClassName('pswp__button--arrow--right')[0];

                buttonLeft.hidden = gallery.getCurrentIndex() === 0;
                buttonRight.hidden = gallery.getCurrentIndex() + 1 === gallery.items.length;

                gallery.listen('beforeChange', function() {
                        buttonLeft.hidden = gallery.getCurrentIndex() === 0;
                        buttonRight.hidden = gallery.getCurrentIndex() + 1 === gallery.items.length;
                    }
                );
            };

            var galleryElements = container.querySelectorAll( gallerySelector );

            for(var i = 0, l = galleryElements.length; i < l; i++) {
                galleryElements[i].setAttribute('data-pswp-uid', i+1);
                galleryElements[i].onclick = onThumbnailsClick;
            }

            var hashData = photoswipeParseHash();
            if(hashData.pid && hashData.gid) {
                openPhotoSwipe( hashData.pid ,  galleryElements[ hashData.gid - 1 ], true, true );
            }
        };

        initPhotoSwipeFromDOM('.images-gallery');
    }, false)
</script>

<h6 id="5-on-node-selected-only-in-entities-hierarchy-widget">5. On node selected (only in Entities Hierarchy widget)</h6>

<p>When the Entities Hierarchy widget was added, you should configure a hierarchy itself. How to do it, please, <a href="/docs/user-guide/entities-and-relations/#step-1-provision-entities-and-relations">learn here</a>. 
After relations were added, go to the Edit mode of the Entities Hierarchy widget. To configure the <em>On node selected</em> action source:</p>

<ol>
  <li>In the widget’s Edit mode move to the last cell called “Actions”.</li>
  <li>Click the “+” icon on the right of the window to add a new action.</li>
  <li>In the top drop-down menu, choose an <em>On node selected</em> action source.</li>
  <li>Since the example for all the action sources is the “Navigate to new dashboard state” action type, choose it in the drop-down Type menu.</li>
  <li>After choosing an action type, the drop-down menu “Target dashboard state” appears. Select a previously created state you’d like to be transitioned to.</li>
  <li>After configuring all needed settings, click “Add” at the right bottom of the “Add action” window.</li>
  <li>Now you see configured action, so you can double-check action source and action type.</li>
  <li>Apply changes by clicking the orange tick icon in the top right of the window and then close the details window.</li>
  <li>Save applied changes by clicking the orange tick icon “Apply changes” in the bottom right of the screen.</li>
</ol>

<p>To perform an action you should click any of the nodes in the Entities hierarchy.</p>

<div id="0">
  <div itemscope="" itemtype="http://schema.org/ImageGallery" class="images-gallery" style="justify-content: start;">
    <figure itemprop="associatedMedia" itemscope="" itemtype="http://schema.org/ImageObject" style="max-width: min(225px, 100%);
                    max-height: min(225px, 100%);" class="list-item">
<a href="/images/user-guide/ui/widgets/actions/entity-cards/onnode.png" onclick="return false;" itemprop="contentUrl"> <img src="/images/user-guide/ui/widgets/actions/entity-cards/onnode-preview.png" itemprop="thumbnail" alt="image" style="max-width: min(225px, 100%);
                                max-height: min(225px, 100%);" /> </a>       <figcaption itemprop="caption description" style="display: none"></figcaption>
    </figure>
    <figure itemprop="associatedMedia" itemscope="" itemtype="http://schema.org/ImageObject" style="max-width: min(225px, 100%);
                    max-height: min(225px, 100%);" class="list-item">
<a href="/images/user-guide/ui/widgets/actions/entity-cards/onnode-1.png" onclick="return false;" itemprop="contentUrl"> <img src="/images/user-guide/ui/widgets/actions/entity-cards/onnode-1-preview.png" itemprop="thumbnail" alt="image" style="max-width: min(225px, 100%);
                                max-height: min(225px, 100%);" /> </a>       <figcaption itemprop="caption description" style="display: none"></figcaption>
    </figure>
    <figure itemprop="associatedMedia" itemscope="" itemtype="http://schema.org/ImageObject" style="max-width: min(225px, 100%);
                    max-height: min(225px, 100%);" class="list-item">
<a href="/images/user-guide/ui/widgets/actions/entity-cards/onnode-2.png" onclick="return false;" itemprop="contentUrl"> <img src="/images/user-guide/ui/widgets/actions/entity-cards/onnode-2-preview.png" itemprop="thumbnail" alt="image" style="max-width: min(225px, 100%);
                                max-height: min(225px, 100%);" /> </a>       <figcaption itemprop="caption description" style="display: none"></figcaption>
    </figure>
    <figure itemprop="associatedMedia" itemscope="" itemtype="http://schema.org/ImageObject" style="max-width: min(225px, 100%);
                    max-height: min(225px, 100%);" class="list-item">
<a href="/images/user-guide/ui/widgets/actions/entity-cards/onnode-3.png" onclick="return false;" itemprop="contentUrl"> <img src="/images/user-guide/ui/widgets/actions/entity-cards/onnode-3-preview.png" itemprop="thumbnail" alt="image" style="max-width: min(225px, 100%);
                                max-height: min(225px, 100%);" /> </a>       <figcaption itemprop="caption description" style="display: none"></figcaption>
    </figure>
  </div>
</div>

<script>
    window.addEventListener("load", function() {
        window.removeEventListener("load", arguments.callee, false);

        if(!document.getElementsByClassName('pswp').length){
            document.body.insertAdjacentHTML('beforeend',
                '<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">\n' +
                '        <div class="pswp__bg"></div>\n' +
                '        <div class="pswp__scroll-wrap">\n' +
                '            <div class="pswp__container">\n' +
                '                <div class="pswp__item"></div>\n' +
                '                <div class="pswp__item"></div>\n' +
                '                <div class="pswp__item"></div>\n' +
                '            </div>\n' +
                '\n' +
                '            <div class="pswp__ui pswp__ui--hidden">\n' +
                '\n' +
                '                <div class="pswp__top-bar">\n' +
                '                    <div class="pswp__counter"></div>\n' +
                '\n' +
                '                    <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>\n' +
                '\n' +
                '                    <button class="pswp__button pswp__button--share" title="Share"></button>\n' +
                '\n' +
                '                    <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>\n' +
                '\n' +
                '                    <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>\n' +
                '\n' +
                '                    <div class="pswp__preloader">\n' +
                '                        <div class="pswp__preloader__icn">\n' +
                '                            <div class="pswp__preloader__cut">\n' +
                '                                <div class="pswp__preloader__donut"></div>\n' +
                '                            </div>\n' +
                '                        </div>\n' +
                '                    </div>\n' +
                '                </div>\n' +
                '                <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">\n' +
                '                    <div class="pswp__share-tooltip"></div>\n' +
                '                </div>\n' +
                '                <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">\n' +
                '                </button>\n' +
                '                <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">\n' +
                '                </button>\n' +
                '                <div class="pswp__caption">\n' +
                '                    <div class="pswp__caption__center"></div>\n' +
                '                </div>\n' +
                '            </div>\n' +
                '        </div>\n' +
                '    </div>'
            );
        }

        var container = document.getElementById('0');

        var initPhotoSwipeFromDOM = function(gallerySelector) {
            var parseThumbnailElements = function(el) {
                var thumbElements = el.childNodes,
                    numNodes = thumbElements.length,
                    items = [],
                    figureEl,
                    linkEl,
                    size,
                    item;

                for(var i = 0; i < numNodes; i++) {

                    figureEl = thumbElements[i];
                    if(figureEl.nodeType !== 1) {
                        continue;
                    }
                    linkEl = figureEl.children[0];
                    size = linkEl.children[0];
                    item = {
                        src: linkEl.getAttribute('href'),
                        w: 2500,
                        h: 0,
                        sizeLoaded: false
                    };

                    if(figureEl.children.length > 1) {
                        item.title = figureEl.children[1].innerHTML;
                    }
                    if(linkEl.children.length > 0) {
                        item.msrc = linkEl.children[0].getAttribute('src');
                    }
                    if(item.msrc === item.src){
                        item.w = parseInt(size.naturalWidth, 10);
                        item.h = parseInt(size.naturalHeight, 10);
                    }

                    item.el = figureEl;
                    items.push(item);
                }
                return items;
            };

            var closest = function closest(el, fn) {
                return el && ( fn(el) ? el : closest(el.parentNode, fn) );
            };

            var onThumbnailsClick = function(e) {
                e = e || window.event;
                e.preventDefault ? e.preventDefault() : e.returnValue = false;

                var eTarget = e.target || e.srcElement;

                var clickedListItem = closest(eTarget, function(el) {
                    return (el.tagName && el.tagName.toUpperCase() === 'FIGURE');
                });

                if(!clickedListItem) {
                    return;
                }

                var clickedGallery = clickedListItem.parentNode,
                    childNodes = clickedListItem.parentNode.childNodes,
                    numChildNodes = childNodes.length,
                    nodeIndex = 0,
                    index;

                for (var i = 0; i < numChildNodes; i++) {
                    if(childNodes[i].nodeType !== 1) {
                        continue;
                    }

                    if(childNodes[i] === clickedListItem) {
                        index = nodeIndex;
                        break;
                    }
                    nodeIndex++;
                }

                if(index >= 0) {
                    openPhotoSwipe( index, clickedGallery );
                }
                return false;
            };

            var photoswipeParseHash = function() {
                var hash = window.location.hash.substring(1),
                    params = {};

                if(hash.length < 5) {
                    return params;
                }

                var vars = hash.split('&');
                for (var i = 0; i < vars.length; i++) {
                    if(!vars[i]) {
                        continue;
                    }
                    var pair = vars[i].split('=');
                    if(pair.length < 2) {
                        continue;
                    }
                    params[pair[0]] = pair[1];
                }

                if(params.gid) {
                    params.gid = parseInt(params.gid, 10);
                }

                return params;
            };

            var openPhotoSwipe = function(index, galleryElement, disableAnimation, fromURL) {
                var pswpElement = document.querySelectorAll('.pswp')[0],
                    gallery,
                    options,
                    items;

                items = parseThumbnailElements(galleryElement);

                options = {
                    galleryUID: galleryElement.getAttribute('data-pswp-uid'),
                    getThumbBoundsFn: function(index) {
                        var thumbnail = items[index].el.getElementsByTagName('img')[0], // find thumbnail
                            pageYScroll = window.pageYOffset || document.documentElement.scrollTop,
                            rect = thumbnail.getBoundingClientRect();
                        return {x:rect.left, y:rect.top + pageYScroll, w:rect.width};
                    },
                    bgOpacity: 0.8,
                    closeOnScroll: false,
                    shareEl: false,
                    fullscreenEl: false,
                    zoomEl: true,
                    history: false,
                    loop: false
                };

                if(fromURL) {
                    if(options.galleryPIDs) {
                        for(var j = 0; j < items.length; j++) {
                            if(items[j].pid == index) {
                                options.index = j;
                                break;
                            }
                        }
                    } else {
                        options.index = parseInt(index, 10) - 1;
                    }
                } else {
                    options.index = parseInt(index, 10);
                }

                if( isNaN(options.index) ) {
                    return;
                }

                if(disableAnimation) {
                    options.showAnimationDuration = 0;
                }

                gallery = new PhotoSwipe( pswpElement, PhotoSwipeUI_Default, items, options);

                gallery.listen('gettingData', function(index, item) {
                    if (!item.sizeLoaded) {
                        item.sizeLoaded = true;
                        var img = new Image();
                        img.onload = function() {
                            item.w = this.width;
                            item.h = this.height;
                            gallery.updateSize(true);
                        }
                        img.src = item.src;
                    }
                });

                gallery.init();

                var buttonLeft = pswpElement.getElementsByClassName('pswp__button--arrow--left')[0];
                var buttonRight = pswpElement.getElementsByClassName('pswp__button--arrow--right')[0];

                buttonLeft.hidden = gallery.getCurrentIndex() === 0;
                buttonRight.hidden = gallery.getCurrentIndex() + 1 === gallery.items.length;

                gallery.listen('beforeChange', function() {
                        buttonLeft.hidden = gallery.getCurrentIndex() === 0;
                        buttonRight.hidden = gallery.getCurrentIndex() + 1 === gallery.items.length;
                    }
                );
            };

            var galleryElements = container.querySelectorAll( gallerySelector );

            for(var i = 0, l = galleryElements.length; i < l; i++) {
                galleryElements[i].setAttribute('data-pswp-uid', i+1);
                galleryElements[i].onclick = onThumbnailsClick;
            }

            var hashData = photoswipeParseHash();
            if(hashData.pid && hashData.gid) {
                openPhotoSwipe( hashData.pid ,  galleryElements[ hashData.gid - 1 ], true, true );
            }
        };

        initPhotoSwipeFromDOM('.images-gallery');
    }, false)
</script>

<h6 id="6-on-html-element-click-only-in-html-cards-and-value-title-widgets">6. On HTML element click (only in HTML Cards and Value Title widgets)</h6>

<p>ThingsBoard has two widgets that you can configure fully by yourself by customizing an HTML code in their settings. When a code is written, it is possible to input an action source in it.<br />
How to add an action source to HTML Cards and Value Title widgets:</p>

<ul>
  <li>
    <p><strong>HTML Cards widget</strong></p>

    <ol>
      <li>In the widget’s Edit mode move to the last cell called “Actions”.</li>
      <li>Click the “+” icon on the right of the window to add a new action.</li>
      <li>In the top drop-down menu, choose an <em>On HTML element click</em> action source.</li>
      <li>Input the name of the action and be sure to remember it, because the action name will be used while configuring the HTML code.</li>
      <li>Since the example for all the action sources is the “Navigate to new dashboard state” action type, choose it in the drop-down Type menu.</li>
      <li>After choosing an action type, the drop-down menu “Target dashboard state” appears. Select a previously created state you’d like to be transitioned to.</li>
      <li>After configuring all needed settings, click “Add” at the right bottom of the “Add action” window.</li>
      <li>Now you see configured action, so you can double-check action source and action type.</li>
      <li>Now move to the Advanced cell of the widget. There you should see two fields: CSS and HTML.</li>
      <li>In the HTML field enter an ID of the action which is its name. Since the name in the example is <em>test1</em>, the HTML code will look like this:</li>
    </ol>
  </li>
</ul>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre><span class="o">&lt;</span><span class="n">div</span> <span class="nb">id</span><span class="o">=</span><span class="s1">'button'</span> <span class="k">class</span><span class="o">=</span><span class="s1">'card'</span><span class="o">&gt;</span><span class="no">HTML</span> <span class="n">code</span> <span class="n">here</span><span class="o">&lt;</span><span class="sr">/div&gt;
</span></pre></td></tr></tbody></table></code></pre></div></div>

<ul>
  <li>Where <em>button</em> is the name of the action and <em>HTML code here</em> is the text which is going to be shown on the HTML Card widget</li>
</ul>

<p>Then apply changes by clicking the orange tick icon in the top right of the window and then close the details window.<br />
In the Edit mode of the dashboard save applied changes by clicking the orange tick icon “Apply changes” in the bottom right of the screen.</p>

<p>To execute an action click anywhere in the widget.</p>

<div id="0">
  <div itemscope="" itemtype="http://schema.org/ImageGallery" class="images-gallery" style="justify-content: start;">
    <figure itemprop="associatedMedia" itemscope="" itemtype="http://schema.org/ImageObject" style="max-width: min(225px, 100%);
                    max-height: min(225px, 100%);" class="list-item">
<a href="/images/user-guide/ui/widgets/actions/entity-cards/onhtml-1-ce.png" onclick="return false;" itemprop="contentUrl"> <img src="/images/user-guide/ui/widgets/actions/entity-cards/onhtml-1-ce-preview.png" itemprop="thumbnail" alt="image" style="max-width: min(225px, 100%);
                                max-height: min(225px, 100%);" /> </a>       <figcaption itemprop="caption description" style="display: none"></figcaption>
    </figure>
    <figure itemprop="associatedMedia" itemscope="" itemtype="http://schema.org/ImageObject" style="max-width: min(225px, 100%);
                    max-height: min(225px, 100%);" class="list-item">
<a href="/images/user-guide/ui/widgets/actions/entity-cards/onhtml-2-ce.png" onclick="return false;" itemprop="contentUrl"> <img src="/images/user-guide/ui/widgets/actions/entity-cards/onhtml-2-ce-preview.png" itemprop="thumbnail" alt="image" style="max-width: min(225px, 100%);
                                max-height: min(225px, 100%);" /> </a>       <figcaption itemprop="caption description" style="display: none"></figcaption>
    </figure>
    <figure itemprop="associatedMedia" itemscope="" itemtype="http://schema.org/ImageObject" style="max-width: min(225px, 100%);
                    max-height: min(225px, 100%);" class="list-item">
<a href="/images/user-guide/ui/widgets/actions/entity-cards/onhtml-3-ce.png" onclick="return false;" itemprop="contentUrl"> <img src="/images/user-guide/ui/widgets/actions/entity-cards/onhtml-3-ce-preview.png" itemprop="thumbnail" alt="image" style="max-width: min(225px, 100%);
                                max-height: min(225px, 100%);" /> </a>       <figcaption itemprop="caption description" style="display: none"></figcaption>
    </figure>
    <figure itemprop="associatedMedia" itemscope="" itemtype="http://schema.org/ImageObject" style="max-width: min(225px, 100%);
                    max-height: min(225px, 100%);" class="list-item">
<a href="/images/user-guide/ui/widgets/actions/entity-cards/onhtml-4-ce.png" onclick="return false;" itemprop="contentUrl"> <img src="/images/user-guide/ui/widgets/actions/entity-cards/onhtml-4-ce-preview.png" itemprop="thumbnail" alt="image" style="max-width: min(225px, 100%);
                                max-height: min(225px, 100%);" /> </a>       <figcaption itemprop="caption description" style="display: none"></figcaption>
    </figure>
  </div>
</div>

<script>
    window.addEventListener("load", function() {
        window.removeEventListener("load", arguments.callee, false);

        if(!document.getElementsByClassName('pswp').length){
            document.body.insertAdjacentHTML('beforeend',
                '<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">\n' +
                '        <div class="pswp__bg"></div>\n' +
                '        <div class="pswp__scroll-wrap">\n' +
                '            <div class="pswp__container">\n' +
                '                <div class="pswp__item"></div>\n' +
                '                <div class="pswp__item"></div>\n' +
                '                <div class="pswp__item"></div>\n' +
                '            </div>\n' +
                '\n' +
                '            <div class="pswp__ui pswp__ui--hidden">\n' +
                '\n' +
                '                <div class="pswp__top-bar">\n' +
                '                    <div class="pswp__counter"></div>\n' +
                '\n' +
                '                    <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>\n' +
                '\n' +
                '                    <button class="pswp__button pswp__button--share" title="Share"></button>\n' +
                '\n' +
                '                    <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>\n' +
                '\n' +
                '                    <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>\n' +
                '\n' +
                '                    <div class="pswp__preloader">\n' +
                '                        <div class="pswp__preloader__icn">\n' +
                '                            <div class="pswp__preloader__cut">\n' +
                '                                <div class="pswp__preloader__donut"></div>\n' +
                '                            </div>\n' +
                '                        </div>\n' +
                '                    </div>\n' +
                '                </div>\n' +
                '                <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">\n' +
                '                    <div class="pswp__share-tooltip"></div>\n' +
                '                </div>\n' +
                '                <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">\n' +
                '                </button>\n' +
                '                <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">\n' +
                '                </button>\n' +
                '                <div class="pswp__caption">\n' +
                '                    <div class="pswp__caption__center"></div>\n' +
                '                </div>\n' +
                '            </div>\n' +
                '        </div>\n' +
                '    </div>'
            );
        }

        var container = document.getElementById('0');

        var initPhotoSwipeFromDOM = function(gallerySelector) {
            var parseThumbnailElements = function(el) {
                var thumbElements = el.childNodes,
                    numNodes = thumbElements.length,
                    items = [],
                    figureEl,
                    linkEl,
                    size,
                    item;

                for(var i = 0; i < numNodes; i++) {

                    figureEl = thumbElements[i];
                    if(figureEl.nodeType !== 1) {
                        continue;
                    }
                    linkEl = figureEl.children[0];
                    size = linkEl.children[0];
                    item = {
                        src: linkEl.getAttribute('href'),
                        w: 2500,
                        h: 0,
                        sizeLoaded: false
                    };

                    if(figureEl.children.length > 1) {
                        item.title = figureEl.children[1].innerHTML;
                    }
                    if(linkEl.children.length > 0) {
                        item.msrc = linkEl.children[0].getAttribute('src');
                    }
                    if(item.msrc === item.src){
                        item.w = parseInt(size.naturalWidth, 10);
                        item.h = parseInt(size.naturalHeight, 10);
                    }

                    item.el = figureEl;
                    items.push(item);
                }
                return items;
            };

            var closest = function closest(el, fn) {
                return el && ( fn(el) ? el : closest(el.parentNode, fn) );
            };

            var onThumbnailsClick = function(e) {
                e = e || window.event;
                e.preventDefault ? e.preventDefault() : e.returnValue = false;

                var eTarget = e.target || e.srcElement;

                var clickedListItem = closest(eTarget, function(el) {
                    return (el.tagName && el.tagName.toUpperCase() === 'FIGURE');
                });

                if(!clickedListItem) {
                    return;
                }

                var clickedGallery = clickedListItem.parentNode,
                    childNodes = clickedListItem.parentNode.childNodes,
                    numChildNodes = childNodes.length,
                    nodeIndex = 0,
                    index;

                for (var i = 0; i < numChildNodes; i++) {
                    if(childNodes[i].nodeType !== 1) {
                        continue;
                    }

                    if(childNodes[i] === clickedListItem) {
                        index = nodeIndex;
                        break;
                    }
                    nodeIndex++;
                }

                if(index >= 0) {
                    openPhotoSwipe( index, clickedGallery );
                }
                return false;
            };

            var photoswipeParseHash = function() {
                var hash = window.location.hash.substring(1),
                    params = {};

                if(hash.length < 5) {
                    return params;
                }

                var vars = hash.split('&');
                for (var i = 0; i < vars.length; i++) {
                    if(!vars[i]) {
                        continue;
                    }
                    var pair = vars[i].split('=');
                    if(pair.length < 2) {
                        continue;
                    }
                    params[pair[0]] = pair[1];
                }

                if(params.gid) {
                    params.gid = parseInt(params.gid, 10);
                }

                return params;
            };

            var openPhotoSwipe = function(index, galleryElement, disableAnimation, fromURL) {
                var pswpElement = document.querySelectorAll('.pswp')[0],
                    gallery,
                    options,
                    items;

                items = parseThumbnailElements(galleryElement);

                options = {
                    galleryUID: galleryElement.getAttribute('data-pswp-uid'),
                    getThumbBoundsFn: function(index) {
                        var thumbnail = items[index].el.getElementsByTagName('img')[0], // find thumbnail
                            pageYScroll = window.pageYOffset || document.documentElement.scrollTop,
                            rect = thumbnail.getBoundingClientRect();
                        return {x:rect.left, y:rect.top + pageYScroll, w:rect.width};
                    },
                    bgOpacity: 0.8,
                    closeOnScroll: false,
                    shareEl: false,
                    fullscreenEl: false,
                    zoomEl: true,
                    history: false,
                    loop: false
                };

                if(fromURL) {
                    if(options.galleryPIDs) {
                        for(var j = 0; j < items.length; j++) {
                            if(items[j].pid == index) {
                                options.index = j;
                                break;
                            }
                        }
                    } else {
                        options.index = parseInt(index, 10) - 1;
                    }
                } else {
                    options.index = parseInt(index, 10);
                }

                if( isNaN(options.index) ) {
                    return;
                }

                if(disableAnimation) {
                    options.showAnimationDuration = 0;
                }

                gallery = new PhotoSwipe( pswpElement, PhotoSwipeUI_Default, items, options);

                gallery.listen('gettingData', function(index, item) {
                    if (!item.sizeLoaded) {
                        item.sizeLoaded = true;
                        var img = new Image();
                        img.onload = function() {
                            item.w = this.width;
                            item.h = this.height;
                            gallery.updateSize(true);
                        }
                        img.src = item.src;
                    }
                });

                gallery.init();

                var buttonLeft = pswpElement.getElementsByClassName('pswp__button--arrow--left')[0];
                var buttonRight = pswpElement.getElementsByClassName('pswp__button--arrow--right')[0];

                buttonLeft.hidden = gallery.getCurrentIndex() === 0;
                buttonRight.hidden = gallery.getCurrentIndex() + 1 === gallery.items.length;

                gallery.listen('beforeChange', function() {
                        buttonLeft.hidden = gallery.getCurrentIndex() === 0;
                        buttonRight.hidden = gallery.getCurrentIndex() + 1 === gallery.items.length;
                    }
                );
            };

            var galleryElements = container.querySelectorAll( gallerySelector );

            for(var i = 0, l = galleryElements.length; i < l; i++) {
                galleryElements[i].setAttribute('data-pswp-uid', i+1);
                galleryElements[i].onclick = onThumbnailsClick;
            }

            var hashData = photoswipeParseHash();
            if(hashData.pid && hashData.gid) {
                openPhotoSwipe( hashData.pid ,  galleryElements[ hashData.gid - 1 ], true, true );
            }
        };

        initPhotoSwipeFromDOM('.images-gallery');
    }, false)
</script>

<ul>
  <li>
    <p><strong>Value Title widget</strong></p>

    <ol>
      <li>In the widget’s Edit mode, move to the last cell called “Actions”.</li>
      <li>Click the “+” icon on the right of the window to add a new action.</li>
      <li>In the top drop-down menu, choose an <em>On HTML element click</em> action source.</li>
      <li>Input the name of the action and be sure to remember it, because the action name will be used while configuring the HTML code.</li>
      <li>Since the example for all the action sources is the “Navigate to new dashboard state” action type, choose it in the drop-down Type menu.</li>
      <li>After choosing an action type, the drop-down menu “Target dashboard state” appears. Select a previously created state you’d like to be transitioned to.</li>
      <li>After configuring all needed settings, click “Add” at the right bottom of the “Add action” window.</li>
      <li>Now you see configured action, so you can double-check action source and action type.</li>
      <li>Now move to the Advanced cell of the widget. There you should see two fields with already written code: CSS and HTML.</li>
      <li>For example let’s configure an action that executes by clicking the widget’s header. In the HTML field find a header tag and enter an ID of your action there. 
Since the name in the example is <em>test2</em>, the HTML code will look like this:</li>
    </ol>
  </li>
</ul>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre><span class="o">&lt;</span><span class="n">h1</span> <span class="nb">id</span><span class="o">=</span><span class="s1">'button2'</span><span class="o">&gt;</span><span class="no">Value</span> <span class="n">title</span><span class="o">&lt;</span><span class="sr">/h1&gt;
</span></pre></td></tr></tbody></table></code></pre></div></div>

<ul>
  <li>Where <em>button2</em> is the name of the action and <em>Value title</em> is the text that will be shown in the widget’s header.</li>
</ul>

<p>Then apply changes by clicking the orange tick icon in the top right of the window and then close the details window.<br />
In the Edit mode of the dashboard save applied changes by clicking the orange tick icon “Apply changes” in the bottom right of the screen.</p>

<p>To execute an action click the widget’s header.</p>

<div id="0">
  <div itemscope="" itemtype="http://schema.org/ImageGallery" class="images-gallery" style="justify-content: start;">
    <figure itemprop="associatedMedia" itemscope="" itemtype="http://schema.org/ImageObject" style="max-width: min(225px, 100%);
                    max-height: min(225px, 100%);" class="list-item">
<a href="/images/user-guide/ui/widgets/actions/entity-cards/onhtml-title-1-ce.png" onclick="return false;" itemprop="contentUrl"> <img src="/images/user-guide/ui/widgets/actions/entity-cards/onhtml-title-1-ce-preview.png" itemprop="thumbnail" alt="image" style="max-width: min(225px, 100%);
                                max-height: min(225px, 100%);" /> </a>       <figcaption itemprop="caption description" style="display: none"></figcaption>
    </figure>
    <figure itemprop="associatedMedia" itemscope="" itemtype="http://schema.org/ImageObject" style="max-width: min(225px, 100%);
                    max-height: min(225px, 100%);" class="list-item">
<a href="/images/user-guide/ui/widgets/actions/entity-cards/onhtml-title-2-ce.png" onclick="return false;" itemprop="contentUrl"> <img src="/images/user-guide/ui/widgets/actions/entity-cards/onhtml-title-2-ce-preview.png" itemprop="thumbnail" alt="image" style="max-width: min(225px, 100%);
                                max-height: min(225px, 100%);" /> </a>       <figcaption itemprop="caption description" style="display: none"></figcaption>
    </figure>
    <figure itemprop="associatedMedia" itemscope="" itemtype="http://schema.org/ImageObject" style="max-width: min(225px, 100%);
                    max-height: min(225px, 100%);" class="list-item">
<a href="/images/user-guide/ui/widgets/actions/entity-cards/onhtml-title-3-ce.png" onclick="return false;" itemprop="contentUrl"> <img src="/images/user-guide/ui/widgets/actions/entity-cards/onhtml-title-3-ce-preview.png" itemprop="thumbnail" alt="image" style="max-width: min(225px, 100%);
                                max-height: min(225px, 100%);" /> </a>       <figcaption itemprop="caption description" style="display: none"></figcaption>
    </figure>
    <figure itemprop="associatedMedia" itemscope="" itemtype="http://schema.org/ImageObject" style="max-width: min(225px, 100%);
                    max-height: min(225px, 100%);" class="list-item">
<a href="/images/user-guide/ui/widgets/actions/entity-cards/onhtml-title-4-ce.png" onclick="return false;" itemprop="contentUrl"> <img src="/images/user-guide/ui/widgets/actions/entity-cards/onhtml-title-4-ce-preview.png" itemprop="thumbnail" alt="image" style="max-width: min(225px, 100%);
                                max-height: min(225px, 100%);" /> </a>       <figcaption itemprop="caption description" style="display: none"></figcaption>
    </figure>
    <figure itemprop="associatedMedia" itemscope="" itemtype="http://schema.org/ImageObject" style="max-width: min(225px, 100%);
                    max-height: min(225px, 100%);" class="list-item">
<a href="/images/user-guide/ui/widgets/actions/entity-cards/onhtml-title-5-ce.png" onclick="return false;" itemprop="contentUrl"> <img src="/images/user-guide/ui/widgets/actions/entity-cards/onhtml-title-5-ce-preview.png" itemprop="thumbnail" alt="image" style="max-width: min(225px, 100%);
                                max-height: min(225px, 100%);" /> </a>       <figcaption itemprop="caption description" style="display: none"></figcaption>
    </figure>
    <figure itemprop="associatedMedia" itemscope="" itemtype="http://schema.org/ImageObject" style="max-width: min(225px, 100%);
                    max-height: min(225px, 100%);" class="list-item">
<a href="/images/user-guide/ui/widgets/actions/entity-cards/onhtml-title-6-ce.png" onclick="return false;" itemprop="contentUrl"> <img src="/images/user-guide/ui/widgets/actions/entity-cards/onhtml-title-6-ce-preview.png" itemprop="thumbnail" alt="image" style="max-width: min(225px, 100%);
                                max-height: min(225px, 100%);" /> </a>       <figcaption itemprop="caption description" style="display: none"></figcaption>
    </figure>
  </div>
</div>

<script>
    window.addEventListener("load", function() {
        window.removeEventListener("load", arguments.callee, false);

        if(!document.getElementsByClassName('pswp').length){
            document.body.insertAdjacentHTML('beforeend',
                '<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">\n' +
                '        <div class="pswp__bg"></div>\n' +
                '        <div class="pswp__scroll-wrap">\n' +
                '            <div class="pswp__container">\n' +
                '                <div class="pswp__item"></div>\n' +
                '                <div class="pswp__item"></div>\n' +
                '                <div class="pswp__item"></div>\n' +
                '            </div>\n' +
                '\n' +
                '            <div class="pswp__ui pswp__ui--hidden">\n' +
                '\n' +
                '                <div class="pswp__top-bar">\n' +
                '                    <div class="pswp__counter"></div>\n' +
                '\n' +
                '                    <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>\n' +
                '\n' +
                '                    <button class="pswp__button pswp__button--share" title="Share"></button>\n' +
                '\n' +
                '                    <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>\n' +
                '\n' +
                '                    <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>\n' +
                '\n' +
                '                    <div class="pswp__preloader">\n' +
                '                        <div class="pswp__preloader__icn">\n' +
                '                            <div class="pswp__preloader__cut">\n' +
                '                                <div class="pswp__preloader__donut"></div>\n' +
                '                            </div>\n' +
                '                        </div>\n' +
                '                    </div>\n' +
                '                </div>\n' +
                '                <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">\n' +
                '                    <div class="pswp__share-tooltip"></div>\n' +
                '                </div>\n' +
                '                <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">\n' +
                '                </button>\n' +
                '                <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">\n' +
                '                </button>\n' +
                '                <div class="pswp__caption">\n' +
                '                    <div class="pswp__caption__center"></div>\n' +
                '                </div>\n' +
                '            </div>\n' +
                '        </div>\n' +
                '    </div>'
            );
        }

        var container = document.getElementById('0');

        var initPhotoSwipeFromDOM = function(gallerySelector) {
            var parseThumbnailElements = function(el) {
                var thumbElements = el.childNodes,
                    numNodes = thumbElements.length,
                    items = [],
                    figureEl,
                    linkEl,
                    size,
                    item;

                for(var i = 0; i < numNodes; i++) {

                    figureEl = thumbElements[i];
                    if(figureEl.nodeType !== 1) {
                        continue;
                    }
                    linkEl = figureEl.children[0];
                    size = linkEl.children[0];
                    item = {
                        src: linkEl.getAttribute('href'),
                        w: 2500,
                        h: 0,
                        sizeLoaded: false
                    };

                    if(figureEl.children.length > 1) {
                        item.title = figureEl.children[1].innerHTML;
                    }
                    if(linkEl.children.length > 0) {
                        item.msrc = linkEl.children[0].getAttribute('src');
                    }
                    if(item.msrc === item.src){
                        item.w = parseInt(size.naturalWidth, 10);
                        item.h = parseInt(size.naturalHeight, 10);
                    }

                    item.el = figureEl;
                    items.push(item);
                }
                return items;
            };

            var closest = function closest(el, fn) {
                return el && ( fn(el) ? el : closest(el.parentNode, fn) );
            };

            var onThumbnailsClick = function(e) {
                e = e || window.event;
                e.preventDefault ? e.preventDefault() : e.returnValue = false;

                var eTarget = e.target || e.srcElement;

                var clickedListItem = closest(eTarget, function(el) {
                    return (el.tagName && el.tagName.toUpperCase() === 'FIGURE');
                });

                if(!clickedListItem) {
                    return;
                }

                var clickedGallery = clickedListItem.parentNode,
                    childNodes = clickedListItem.parentNode.childNodes,
                    numChildNodes = childNodes.length,
                    nodeIndex = 0,
                    index;

                for (var i = 0; i < numChildNodes; i++) {
                    if(childNodes[i].nodeType !== 1) {
                        continue;
                    }

                    if(childNodes[i] === clickedListItem) {
                        index = nodeIndex;
                        break;
                    }
                    nodeIndex++;
                }

                if(index >= 0) {
                    openPhotoSwipe( index, clickedGallery );
                }
                return false;
            };

            var photoswipeParseHash = function() {
                var hash = window.location.hash.substring(1),
                    params = {};

                if(hash.length < 5) {
                    return params;
                }

                var vars = hash.split('&');
                for (var i = 0; i < vars.length; i++) {
                    if(!vars[i]) {
                        continue;
                    }
                    var pair = vars[i].split('=');
                    if(pair.length < 2) {
                        continue;
                    }
                    params[pair[0]] = pair[1];
                }

                if(params.gid) {
                    params.gid = parseInt(params.gid, 10);
                }

                return params;
            };

            var openPhotoSwipe = function(index, galleryElement, disableAnimation, fromURL) {
                var pswpElement = document.querySelectorAll('.pswp')[0],
                    gallery,
                    options,
                    items;

                items = parseThumbnailElements(galleryElement);

                options = {
                    galleryUID: galleryElement.getAttribute('data-pswp-uid'),
                    getThumbBoundsFn: function(index) {
                        var thumbnail = items[index].el.getElementsByTagName('img')[0], // find thumbnail
                            pageYScroll = window.pageYOffset || document.documentElement.scrollTop,
                            rect = thumbnail.getBoundingClientRect();
                        return {x:rect.left, y:rect.top + pageYScroll, w:rect.width};
                    },
                    bgOpacity: 0.8,
                    closeOnScroll: false,
                    shareEl: false,
                    fullscreenEl: false,
                    zoomEl: true,
                    history: false,
                    loop: false
                };

                if(fromURL) {
                    if(options.galleryPIDs) {
                        for(var j = 0; j < items.length; j++) {
                            if(items[j].pid == index) {
                                options.index = j;
                                break;
                            }
                        }
                    } else {
                        options.index = parseInt(index, 10) - 1;
                    }
                } else {
                    options.index = parseInt(index, 10);
                }

                if( isNaN(options.index) ) {
                    return;
                }

                if(disableAnimation) {
                    options.showAnimationDuration = 0;
                }

                gallery = new PhotoSwipe( pswpElement, PhotoSwipeUI_Default, items, options);

                gallery.listen('gettingData', function(index, item) {
                    if (!item.sizeLoaded) {
                        item.sizeLoaded = true;
                        var img = new Image();
                        img.onload = function() {
                            item.w = this.width;
                            item.h = this.height;
                            gallery.updateSize(true);
                        }
                        img.src = item.src;
                    }
                });

                gallery.init();

                var buttonLeft = pswpElement.getElementsByClassName('pswp__button--arrow--left')[0];
                var buttonRight = pswpElement.getElementsByClassName('pswp__button--arrow--right')[0];

                buttonLeft.hidden = gallery.getCurrentIndex() === 0;
                buttonRight.hidden = gallery.getCurrentIndex() + 1 === gallery.items.length;

                gallery.listen('beforeChange', function() {
                        buttonLeft.hidden = gallery.getCurrentIndex() === 0;
                        buttonRight.hidden = gallery.getCurrentIndex() + 1 === gallery.items.length;
                    }
                );
            };

            var galleryElements = container.querySelectorAll( gallerySelector );

            for(var i = 0, l = galleryElements.length; i < l; i++) {
                galleryElements[i].setAttribute('data-pswp-uid', i+1);
                galleryElements[i].onclick = onThumbnailsClick;
            }

            var hashData = photoswipeParseHash();
            if(hashData.pid && hashData.gid) {
                openPhotoSwipe( hashData.pid ,  galleryElements[ hashData.gid - 1 ], true, true );
            }
        };

        initPhotoSwipeFromDOM('.images-gallery');
    }, false)
</script>

<h4 id="map-widget-action-sources">Map widget action sources</h4>

<p>Map widget has unique action sources that need to be considered separately.</p>

<p>Let’s start by adding a Map widget. Go to the dashboard where your Map will be placed and click a bottom right “Pencil” icon:</p>
<ul>
  <li><strong>If you have an empty new dashboard</strong>, you need to just click the message in the middle “Add a new widget” and in the drop-down menu at the end of the list, choose “Maps”. 
Then, add a Datasource of your widget and click “Add”.</li>
  <li><strong>If some widgets were added before to this dashboard</strong>, click the “Paper” icon (“Create new widget”). 
In the drop-down menu list to the end of the list to choose “Maps”. Finally, add a Datasource of your widget and click “Add”.</li>
</ul>

<div id="0">
  <div itemscope="" itemtype="http://schema.org/ImageGallery" class="images-gallery" style="justify-content: start;">
    <figure itemprop="associatedMedia" itemscope="" itemtype="http://schema.org/ImageObject" style="max-width: min(225px, 100%);
                    max-height: min(225px, 100%);" class="list-item">
<a href="/images/user-guide/ui/widgets/actions/maps/to-create-a-map-1-ce.png" onclick="return false;" itemprop="contentUrl"> <img src="/images/user-guide/ui/widgets/actions/maps/to-create-a-map-1-ce-preview.png" itemprop="thumbnail" alt="image" style="max-width: min(225px, 100%);
                                max-height: min(225px, 100%);" /> </a>       <figcaption itemprop="caption description" style="display: none"></figcaption>
    </figure>
    <figure itemprop="associatedMedia" itemscope="" itemtype="http://schema.org/ImageObject" style="max-width: min(225px, 100%);
                    max-height: min(225px, 100%);" class="list-item">
<a href="/images/user-guide/ui/widgets/actions/maps/to-create-a-map-2-ce.png" onclick="return false;" itemprop="contentUrl"> <img src="/images/user-guide/ui/widgets/actions/maps/to-create-a-map-2-ce-preview.png" itemprop="thumbnail" alt="image" style="max-width: min(225px, 100%);
                                max-height: min(225px, 100%);" /> </a>       <figcaption itemprop="caption description" style="display: none"></figcaption>
    </figure>
    <figure itemprop="associatedMedia" itemscope="" itemtype="http://schema.org/ImageObject" style="max-width: min(225px, 100%);
                    max-height: min(225px, 100%);" class="list-item">
<a href="/images/user-guide/ui/widgets/actions/maps/to-create-a-map-3-ce.png" onclick="return false;" itemprop="contentUrl"> <img src="/images/user-guide/ui/widgets/actions/maps/to-create-a-map-3-ce-preview.png" itemprop="thumbnail" alt="image" style="max-width: min(225px, 100%);
                                max-height: min(225px, 100%);" /> </a>       <figcaption itemprop="caption description" style="display: none"></figcaption>
    </figure>
    <figure itemprop="associatedMedia" itemscope="" itemtype="http://schema.org/ImageObject" style="max-width: min(225px, 100%);
                    max-height: min(225px, 100%);" class="list-item">
<a href="/images/user-guide/ui/widgets/actions/maps/to-create-a-map-4-ce.png" onclick="return false;" itemprop="contentUrl"> <img src="/images/user-guide/ui/widgets/actions/maps/to-create-a-map-4-ce-preview.png" itemprop="thumbnail" alt="image" style="max-width: min(225px, 100%);
                                max-height: min(225px, 100%);" /> </a>       <figcaption itemprop="caption description" style="display: none"></figcaption>
    </figure>
    <figure itemprop="associatedMedia" itemscope="" itemtype="http://schema.org/ImageObject" style="max-width: min(225px, 100%);
                    max-height: min(225px, 100%);" class="list-item">
<a href="/images/user-guide/ui/widgets/actions/maps/to-create-a-map-5-ce.png" onclick="return false;" itemprop="contentUrl"> <img src="/images/user-guide/ui/widgets/actions/maps/to-create-a-map-5-ce-preview.png" itemprop="thumbnail" alt="image" style="max-width: min(225px, 100%);
                                max-height: min(225px, 100%);" /> </a>       <figcaption itemprop="caption description" style="display: none"></figcaption>
    </figure>
    <figure itemprop="associatedMedia" itemscope="" itemtype="http://schema.org/ImageObject" style="max-width: min(225px, 100%);
                    max-height: min(225px, 100%);" class="list-item">
<a href="/images/user-guide/ui/widgets/actions/maps/to-create-a-map-6-ce.png" onclick="return false;" itemprop="contentUrl"> <img src="/images/user-guide/ui/widgets/actions/maps/to-create-a-map-6-ce-preview.png" itemprop="thumbnail" alt="image" style="max-width: min(225px, 100%);
                                max-height: min(225px, 100%);" /> </a>       <figcaption itemprop="caption description" style="display: none"></figcaption>
    </figure>
  </div>
</div>

<script>
    window.addEventListener("load", function() {
        window.removeEventListener("load", arguments.callee, false);

        if(!document.getElementsByClassName('pswp').length){
            document.body.insertAdjacentHTML('beforeend',
                '<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">\n' +
                '        <div class="pswp__bg"></div>\n' +
                '        <div class="pswp__scroll-wrap">\n' +
                '            <div class="pswp__container">\n' +
                '                <div class="pswp__item"></div>\n' +
                '                <div class="pswp__item"></div>\n' +
                '                <div class="pswp__item"></div>\n' +
                '            </div>\n' +
                '\n' +
                '            <div class="pswp__ui pswp__ui--hidden">\n' +
                '\n' +
                '                <div class="pswp__top-bar">\n' +
                '                    <div class="pswp__counter"></div>\n' +
                '\n' +
                '                    <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>\n' +
                '\n' +
                '                    <button class="pswp__button pswp__button--share" title="Share"></button>\n' +
                '\n' +
                '                    <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>\n' +
                '\n' +
                '                    <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>\n' +
                '\n' +
                '                    <div class="pswp__preloader">\n' +
                '                        <div class="pswp__preloader__icn">\n' +
                '                            <div class="pswp__preloader__cut">\n' +
                '                                <div class="pswp__preloader__donut"></div>\n' +
                '                            </div>\n' +
                '                        </div>\n' +
                '                    </div>\n' +
                '                </div>\n' +
                '                <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">\n' +
                '                    <div class="pswp__share-tooltip"></div>\n' +
                '                </div>\n' +
                '                <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">\n' +
                '                </button>\n' +
                '                <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">\n' +
                '                </button>\n' +
                '                <div class="pswp__caption">\n' +
                '                    <div class="pswp__caption__center"></div>\n' +
                '                </div>\n' +
                '            </div>\n' +
                '        </div>\n' +
                '    </div>'
            );
        }

        var container = document.getElementById('0');

        var initPhotoSwipeFromDOM = function(gallerySelector) {
            var parseThumbnailElements = function(el) {
                var thumbElements = el.childNodes,
                    numNodes = thumbElements.length,
                    items = [],
                    figureEl,
                    linkEl,
                    size,
                    item;

                for(var i = 0; i < numNodes; i++) {

                    figureEl = thumbElements[i];
                    if(figureEl.nodeType !== 1) {
                        continue;
                    }
                    linkEl = figureEl.children[0];
                    size = linkEl.children[0];
                    item = {
                        src: linkEl.getAttribute('href'),
                        w: 2500,
                        h: 0,
                        sizeLoaded: false
                    };

                    if(figureEl.children.length > 1) {
                        item.title = figureEl.children[1].innerHTML;
                    }
                    if(linkEl.children.length > 0) {
                        item.msrc = linkEl.children[0].getAttribute('src');
                    }
                    if(item.msrc === item.src){
                        item.w = parseInt(size.naturalWidth, 10);
                        item.h = parseInt(size.naturalHeight, 10);
                    }

                    item.el = figureEl;
                    items.push(item);
                }
                return items;
            };

            var closest = function closest(el, fn) {
                return el && ( fn(el) ? el : closest(el.parentNode, fn) );
            };

            var onThumbnailsClick = function(e) {
                e = e || window.event;
                e.preventDefault ? e.preventDefault() : e.returnValue = false;

                var eTarget = e.target || e.srcElement;

                var clickedListItem = closest(eTarget, function(el) {
                    return (el.tagName && el.tagName.toUpperCase() === 'FIGURE');
                });

                if(!clickedListItem) {
                    return;
                }

                var clickedGallery = clickedListItem.parentNode,
                    childNodes = clickedListItem.parentNode.childNodes,
                    numChildNodes = childNodes.length,
                    nodeIndex = 0,
                    index;

                for (var i = 0; i < numChildNodes; i++) {
                    if(childNodes[i].nodeType !== 1) {
                        continue;
                    }

                    if(childNodes[i] === clickedListItem) {
                        index = nodeIndex;
                        break;
                    }
                    nodeIndex++;
                }

                if(index >= 0) {
                    openPhotoSwipe( index, clickedGallery );
                }
                return false;
            };

            var photoswipeParseHash = function() {
                var hash = window.location.hash.substring(1),
                    params = {};

                if(hash.length < 5) {
                    return params;
                }

                var vars = hash.split('&');
                for (var i = 0; i < vars.length; i++) {
                    if(!vars[i]) {
                        continue;
                    }
                    var pair = vars[i].split('=');
                    if(pair.length < 2) {
                        continue;
                    }
                    params[pair[0]] = pair[1];
                }

                if(params.gid) {
                    params.gid = parseInt(params.gid, 10);
                }

                return params;
            };

            var openPhotoSwipe = function(index, galleryElement, disableAnimation, fromURL) {
                var pswpElement = document.querySelectorAll('.pswp')[0],
                    gallery,
                    options,
                    items;

                items = parseThumbnailElements(galleryElement);

                options = {
                    galleryUID: galleryElement.getAttribute('data-pswp-uid'),
                    getThumbBoundsFn: function(index) {
                        var thumbnail = items[index].el.getElementsByTagName('img')[0], // find thumbnail
                            pageYScroll = window.pageYOffset || document.documentElement.scrollTop,
                            rect = thumbnail.getBoundingClientRect();
                        return {x:rect.left, y:rect.top + pageYScroll, w:rect.width};
                    },
                    bgOpacity: 0.8,
                    closeOnScroll: false,
                    shareEl: false,
                    fullscreenEl: false,
                    zoomEl: true,
                    history: false,
                    loop: false
                };

                if(fromURL) {
                    if(options.galleryPIDs) {
                        for(var j = 0; j < items.length; j++) {
                            if(items[j].pid == index) {
                                options.index = j;
                                break;
                            }
                        }
                    } else {
                        options.index = parseInt(index, 10) - 1;
                    }
                } else {
                    options.index = parseInt(index, 10);
                }

                if( isNaN(options.index) ) {
                    return;
                }

                if(disableAnimation) {
                    options.showAnimationDuration = 0;
                }

                gallery = new PhotoSwipe( pswpElement, PhotoSwipeUI_Default, items, options);

                gallery.listen('gettingData', function(index, item) {
                    if (!item.sizeLoaded) {
                        item.sizeLoaded = true;
                        var img = new Image();
                        img.onload = function() {
                            item.w = this.width;
                            item.h = this.height;
                            gallery.updateSize(true);
                        }
                        img.src = item.src;
                    }
                });

                gallery.init();

                var buttonLeft = pswpElement.getElementsByClassName('pswp__button--arrow--left')[0];
                var buttonRight = pswpElement.getElementsByClassName('pswp__button--arrow--right')[0];

                buttonLeft.hidden = gallery.getCurrentIndex() === 0;
                buttonRight.hidden = gallery.getCurrentIndex() + 1 === gallery.items.length;

                gallery.listen('beforeChange', function() {
                        buttonLeft.hidden = gallery.getCurrentIndex() === 0;
                        buttonRight.hidden = gallery.getCurrentIndex() + 1 === gallery.items.length;
                    }
                );
            };

            var galleryElements = container.querySelectorAll( gallerySelector );

            for(var i = 0, l = galleryElements.length; i < l; i++) {
                galleryElements[i].setAttribute('data-pswp-uid', i+1);
                galleryElements[i].onclick = onThumbnailsClick;
            }

            var hashData = photoswipeParseHash();
            if(hashData.pid && hashData.gid) {
                openPhotoSwipe( hashData.pid ,  galleryElements[ hashData.gid - 1 ], true, true );
            }
        };

        initPhotoSwipeFromDOM('.images-gallery');
    }, false)
</script>

<ul>
  <li>Adding an action to the Map widget</li>
</ul>

<p>Now it’s time to add an action. To do this you should click the “Pencil” icon on the right top of the Map widget to enter the “Edit widget” mode.
Navigate to the “Action” cell and there click the “+” icon in the right of the screen. The “Add action” window will be opened.</p>

<div id="0">
  <div itemscope="" itemtype="http://schema.org/ImageGallery" class="images-gallery" style="justify-content: start;">
    <figure itemprop="associatedMedia" itemscope="" itemtype="http://schema.org/ImageObject" style="max-width: min(225px, 100%);
                    max-height: min(225px, 100%);" class="list-item">
<a href="/images/user-guide/ui/widgets/actions/maps/navigate-to-actions-1-ce.png" onclick="return false;" itemprop="contentUrl"> <img src="/images/user-guide/ui/widgets/actions/maps/navigate-to-actions-1-ce-preview.png" itemprop="thumbnail" alt="image" style="max-width: min(225px, 100%);
                                max-height: min(225px, 100%);" /> </a>       <figcaption itemprop="caption description" style="display: none"></figcaption>
    </figure>
    <figure itemprop="associatedMedia" itemscope="" itemtype="http://schema.org/ImageObject" style="max-width: min(225px, 100%);
                    max-height: min(225px, 100%);" class="list-item">
<a href="/images/user-guide/ui/widgets/actions/maps/navigate-to-actions-2-ce.png" onclick="return false;" itemprop="contentUrl"> <img src="/images/user-guide/ui/widgets/actions/maps/navigate-to-actions-2-ce-preview.png" itemprop="thumbnail" alt="image" style="max-width: min(225px, 100%);
                                max-height: min(225px, 100%);" /> </a>       <figcaption itemprop="caption description" style="display: none"></figcaption>
    </figure>
  </div>
</div>

<script>
    window.addEventListener("load", function() {
        window.removeEventListener("load", arguments.callee, false);

        if(!document.getElementsByClassName('pswp').length){
            document.body.insertAdjacentHTML('beforeend',
                '<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">\n' +
                '        <div class="pswp__bg"></div>\n' +
                '        <div class="pswp__scroll-wrap">\n' +
                '            <div class="pswp__container">\n' +
                '                <div class="pswp__item"></div>\n' +
                '                <div class="pswp__item"></div>\n' +
                '                <div class="pswp__item"></div>\n' +
                '            </div>\n' +
                '\n' +
                '            <div class="pswp__ui pswp__ui--hidden">\n' +
                '\n' +
                '                <div class="pswp__top-bar">\n' +
                '                    <div class="pswp__counter"></div>\n' +
                '\n' +
                '                    <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>\n' +
                '\n' +
                '                    <button class="pswp__button pswp__button--share" title="Share"></button>\n' +
                '\n' +
                '                    <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>\n' +
                '\n' +
                '                    <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>\n' +
                '\n' +
                '                    <div class="pswp__preloader">\n' +
                '                        <div class="pswp__preloader__icn">\n' +
                '                            <div class="pswp__preloader__cut">\n' +
                '                                <div class="pswp__preloader__donut"></div>\n' +
                '                            </div>\n' +
                '                        </div>\n' +
                '                    </div>\n' +
                '                </div>\n' +
                '                <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">\n' +
                '                    <div class="pswp__share-tooltip"></div>\n' +
                '                </div>\n' +
                '                <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">\n' +
                '                </button>\n' +
                '                <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">\n' +
                '                </button>\n' +
                '                <div class="pswp__caption">\n' +
                '                    <div class="pswp__caption__center"></div>\n' +
                '                </div>\n' +
                '            </div>\n' +
                '        </div>\n' +
                '    </div>'
            );
        }

        var container = document.getElementById('0');

        var initPhotoSwipeFromDOM = function(gallerySelector) {
            var parseThumbnailElements = function(el) {
                var thumbElements = el.childNodes,
                    numNodes = thumbElements.length,
                    items = [],
                    figureEl,
                    linkEl,
                    size,
                    item;

                for(var i = 0; i < numNodes; i++) {

                    figureEl = thumbElements[i];
                    if(figureEl.nodeType !== 1) {
                        continue;
                    }
                    linkEl = figureEl.children[0];
                    size = linkEl.children[0];
                    item = {
                        src: linkEl.getAttribute('href'),
                        w: 2500,
                        h: 0,
                        sizeLoaded: false
                    };

                    if(figureEl.children.length > 1) {
                        item.title = figureEl.children[1].innerHTML;
                    }
                    if(linkEl.children.length > 0) {
                        item.msrc = linkEl.children[0].getAttribute('src');
                    }
                    if(item.msrc === item.src){
                        item.w = parseInt(size.naturalWidth, 10);
                        item.h = parseInt(size.naturalHeight, 10);
                    }

                    item.el = figureEl;
                    items.push(item);
                }
                return items;
            };

            var closest = function closest(el, fn) {
                return el && ( fn(el) ? el : closest(el.parentNode, fn) );
            };

            var onThumbnailsClick = function(e) {
                e = e || window.event;
                e.preventDefault ? e.preventDefault() : e.returnValue = false;

                var eTarget = e.target || e.srcElement;

                var clickedListItem = closest(eTarget, function(el) {
                    return (el.tagName && el.tagName.toUpperCase() === 'FIGURE');
                });

                if(!clickedListItem) {
                    return;
                }

                var clickedGallery = clickedListItem.parentNode,
                    childNodes = clickedListItem.parentNode.childNodes,
                    numChildNodes = childNodes.length,
                    nodeIndex = 0,
                    index;

                for (var i = 0; i < numChildNodes; i++) {
                    if(childNodes[i].nodeType !== 1) {
                        continue;
                    }

                    if(childNodes[i] === clickedListItem) {
                        index = nodeIndex;
                        break;
                    }
                    nodeIndex++;
                }

                if(index >= 0) {
                    openPhotoSwipe( index, clickedGallery );
                }
                return false;
            };

            var photoswipeParseHash = function() {
                var hash = window.location.hash.substring(1),
                    params = {};

                if(hash.length < 5) {
                    return params;
                }

                var vars = hash.split('&');
                for (var i = 0; i < vars.length; i++) {
                    if(!vars[i]) {
                        continue;
                    }
                    var pair = vars[i].split('=');
                    if(pair.length < 2) {
                        continue;
                    }
                    params[pair[0]] = pair[1];
                }

                if(params.gid) {
                    params.gid = parseInt(params.gid, 10);
                }

                return params;
            };

            var openPhotoSwipe = function(index, galleryElement, disableAnimation, fromURL) {
                var pswpElement = document.querySelectorAll('.pswp')[0],
                    gallery,
                    options,
                    items;

                items = parseThumbnailElements(galleryElement);

                options = {
                    galleryUID: galleryElement.getAttribute('data-pswp-uid'),
                    getThumbBoundsFn: function(index) {
                        var thumbnail = items[index].el.getElementsByTagName('img')[0], // find thumbnail
                            pageYScroll = window.pageYOffset || document.documentElement.scrollTop,
                            rect = thumbnail.getBoundingClientRect();
                        return {x:rect.left, y:rect.top + pageYScroll, w:rect.width};
                    },
                    bgOpacity: 0.8,
                    closeOnScroll: false,
                    shareEl: false,
                    fullscreenEl: false,
                    zoomEl: true,
                    history: false,
                    loop: false
                };

                if(fromURL) {
                    if(options.galleryPIDs) {
                        for(var j = 0; j < items.length; j++) {
                            if(items[j].pid == index) {
                                options.index = j;
                                break;
                            }
                        }
                    } else {
                        options.index = parseInt(index, 10) - 1;
                    }
                } else {
                    options.index = parseInt(index, 10);
                }

                if( isNaN(options.index) ) {
                    return;
                }

                if(disableAnimation) {
                    options.showAnimationDuration = 0;
                }

                gallery = new PhotoSwipe( pswpElement, PhotoSwipeUI_Default, items, options);

                gallery.listen('gettingData', function(index, item) {
                    if (!item.sizeLoaded) {
                        item.sizeLoaded = true;
                        var img = new Image();
                        img.onload = function() {
                            item.w = this.width;
                            item.h = this.height;
                            gallery.updateSize(true);
                        }
                        img.src = item.src;
                    }
                });

                gallery.init();

                var buttonLeft = pswpElement.getElementsByClassName('pswp__button--arrow--left')[0];
                var buttonRight = pswpElement.getElementsByClassName('pswp__button--arrow--right')[0];

                buttonLeft.hidden = gallery.getCurrentIndex() === 0;
                buttonRight.hidden = gallery.getCurrentIndex() + 1 === gallery.items.length;

                gallery.listen('beforeChange', function() {
                        buttonLeft.hidden = gallery.getCurrentIndex() === 0;
                        buttonRight.hidden = gallery.getCurrentIndex() + 1 === gallery.items.length;
                    }
                );
            };

            var galleryElements = container.querySelectorAll( gallerySelector );

            for(var i = 0, l = galleryElements.length; i < l; i++) {
                galleryElements[i].setAttribute('data-pswp-uid', i+1);
                galleryElements[i].onclick = onThumbnailsClick;
            }

            var hashData = photoswipeParseHash();
            if(hashData.pid && hashData.gid) {
                openPhotoSwipe( hashData.pid ,  galleryElements[ hashData.gid - 1 ], true, true );
            }
        };

        initPhotoSwipeFromDOM('.images-gallery');
    }, false)
</script>

<p><strong>Please note</strong>: all actions explanations assume that you have already added states to your widget. If not, please do so. How to do it <a href="/docs/user-guide/dashboards/#states">read here</a>.</p>

<h5 id="1-on-marker-click">1. On marker click</h5>

<p>Action will be executed by clicking on the red map’s marker.</p>

<ol>
  <li>In the widget’s Edit mode move to the last cell “Actions”.</li>
  <li>Click the “+” icon on the right of the window to add a new action.</li>
  <li>In the top drop-down menu, choose an <em>On marker click</em> action source.</li>
  <li>Since the example for all the action sources is the “Navigate to new dashboard state” action type, choose it in the drop-down Type menu.</li>
  <li>After choosing an action type, the drop-down menu “Target dashboard state” appears. Select a previously created state you’d like to be transitioned to.</li>
  <li>When all needed settings are configured, click “Add” at the right bottom of the “Add action” window.</li>
  <li>Now you see configured action, so you can double-check action source, icon, and action type.</li>
  <li>Apply changes by clicking the orange tick icon in the top right of the window and then close the details window.</li>
  <li>Save applied changes by clicking the orange tick icon “Apply changes” in the bottom right of the screen.</li>
</ol>

<div id="0">
  <div itemscope="" itemtype="http://schema.org/ImageGallery" class="images-gallery" style="justify-content: start;">
    <figure itemprop="associatedMedia" itemscope="" itemtype="http://schema.org/ImageObject" style="max-width: min(225px, 100%);
                    max-height: min(225px, 100%);" class="list-item">
<a href="/images/user-guide/ui/widgets/actions/maps/omc-map-1-ce.png" onclick="return false;" itemprop="contentUrl"> <img src="/images/user-guide/ui/widgets/actions/maps/omc-map-1-ce-preview.png" itemprop="thumbnail" alt="image" style="max-width: min(225px, 100%);
                                max-height: min(225px, 100%);" /> </a>       <figcaption itemprop="caption description" style="display: none"></figcaption>
    </figure>
    <figure itemprop="associatedMedia" itemscope="" itemtype="http://schema.org/ImageObject" style="max-width: min(225px, 100%);
                    max-height: min(225px, 100%);" class="list-item">
<a href="/images/user-guide/ui/widgets/actions/maps/omc-map-2-ce.png" onclick="return false;" itemprop="contentUrl"> <img src="/images/user-guide/ui/widgets/actions/maps/omc-map-2-ce-preview.png" itemprop="thumbnail" alt="image" style="max-width: min(225px, 100%);
                                max-height: min(225px, 100%);" /> </a>       <figcaption itemprop="caption description" style="display: none"></figcaption>
    </figure>
    <figure itemprop="associatedMedia" itemscope="" itemtype="http://schema.org/ImageObject" style="max-width: min(225px, 100%);
                    max-height: min(225px, 100%);" class="list-item">
<a href="/images/user-guide/ui/widgets/actions/maps/omc-map-3-ce.png" onclick="return false;" itemprop="contentUrl"> <img src="/images/user-guide/ui/widgets/actions/maps/omc-map-3-ce-preview.png" itemprop="thumbnail" alt="image" style="max-width: min(225px, 100%);
                                max-height: min(225px, 100%);" /> </a>       <figcaption itemprop="caption description" style="display: none"></figcaption>
    </figure>
    <figure itemprop="associatedMedia" itemscope="" itemtype="http://schema.org/ImageObject" style="max-width: min(225px, 100%);
                    max-height: min(225px, 100%);" class="list-item">
<a href="/images/user-guide/ui/widgets/actions/maps/omc-map-4-ce.png" onclick="return false;" itemprop="contentUrl"> <img src="/images/user-guide/ui/widgets/actions/maps/omc-map-4-ce-preview.png" itemprop="thumbnail" alt="image" style="max-width: min(225px, 100%);
                                max-height: min(225px, 100%);" /> </a>       <figcaption itemprop="caption description" style="display: none"></figcaption>
    </figure>
    <figure itemprop="associatedMedia" itemscope="" itemtype="http://schema.org/ImageObject" style="max-width: min(225px, 100%);
                    max-height: min(225px, 100%);" class="list-item">
<a href="/images/user-guide/ui/widgets/actions/maps/omc-map-5-ce.png" onclick="return false;" itemprop="contentUrl"> <img src="/images/user-guide/ui/widgets/actions/maps/omc-map-5-ce-preview.png" itemprop="thumbnail" alt="image" style="max-width: min(225px, 100%);
                                max-height: min(225px, 100%);" /> </a>       <figcaption itemprop="caption description" style="display: none"></figcaption>
    </figure>
    <figure itemprop="associatedMedia" itemscope="" itemtype="http://schema.org/ImageObject" style="max-width: min(225px, 100%);
                    max-height: min(225px, 100%);" class="list-item">
<a href="/images/user-guide/ui/widgets/actions/maps/omc-map-6-ce.png" onclick="return false;" itemprop="contentUrl"> <img src="/images/user-guide/ui/widgets/actions/maps/omc-map-6-ce-preview.png" itemprop="thumbnail" alt="image" style="max-width: min(225px, 100%);
                                max-height: min(225px, 100%);" /> </a>       <figcaption itemprop="caption description" style="display: none"></figcaption>
    </figure>
  </div>
</div>

<script>
    window.addEventListener("load", function() {
        window.removeEventListener("load", arguments.callee, false);

        if(!document.getElementsByClassName('pswp').length){
            document.body.insertAdjacentHTML('beforeend',
                '<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">\n' +
                '        <div class="pswp__bg"></div>\n' +
                '        <div class="pswp__scroll-wrap">\n' +
                '            <div class="pswp__container">\n' +
                '                <div class="pswp__item"></div>\n' +
                '                <div class="pswp__item"></div>\n' +
                '                <div class="pswp__item"></div>\n' +
                '            </div>\n' +
                '\n' +
                '            <div class="pswp__ui pswp__ui--hidden">\n' +
                '\n' +
                '                <div class="pswp__top-bar">\n' +
                '                    <div class="pswp__counter"></div>\n' +
                '\n' +
                '                    <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>\n' +
                '\n' +
                '                    <button class="pswp__button pswp__button--share" title="Share"></button>\n' +
                '\n' +
                '                    <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>\n' +
                '\n' +
                '                    <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>\n' +
                '\n' +
                '                    <div class="pswp__preloader">\n' +
                '                        <div class="pswp__preloader__icn">\n' +
                '                            <div class="pswp__preloader__cut">\n' +
                '                                <div class="pswp__preloader__donut"></div>\n' +
                '                            </div>\n' +
                '                        </div>\n' +
                '                    </div>\n' +
                '                </div>\n' +
                '                <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">\n' +
                '                    <div class="pswp__share-tooltip"></div>\n' +
                '                </div>\n' +
                '                <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">\n' +
                '                </button>\n' +
                '                <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">\n' +
                '                </button>\n' +
                '                <div class="pswp__caption">\n' +
                '                    <div class="pswp__caption__center"></div>\n' +
                '                </div>\n' +
                '            </div>\n' +
                '        </div>\n' +
                '    </div>'
            );
        }

        var container = document.getElementById('0');

        var initPhotoSwipeFromDOM = function(gallerySelector) {
            var parseThumbnailElements = function(el) {
                var thumbElements = el.childNodes,
                    numNodes = thumbElements.length,
                    items = [],
                    figureEl,
                    linkEl,
                    size,
                    item;

                for(var i = 0; i < numNodes; i++) {

                    figureEl = thumbElements[i];
                    if(figureEl.nodeType !== 1) {
                        continue;
                    }
                    linkEl = figureEl.children[0];
                    size = linkEl.children[0];
                    item = {
                        src: linkEl.getAttribute('href'),
                        w: 2500,
                        h: 0,
                        sizeLoaded: false
                    };

                    if(figureEl.children.length > 1) {
                        item.title = figureEl.children[1].innerHTML;
                    }
                    if(linkEl.children.length > 0) {
                        item.msrc = linkEl.children[0].getAttribute('src');
                    }
                    if(item.msrc === item.src){
                        item.w = parseInt(size.naturalWidth, 10);
                        item.h = parseInt(size.naturalHeight, 10);
                    }

                    item.el = figureEl;
                    items.push(item);
                }
                return items;
            };

            var closest = function closest(el, fn) {
                return el && ( fn(el) ? el : closest(el.parentNode, fn) );
            };

            var onThumbnailsClick = function(e) {
                e = e || window.event;
                e.preventDefault ? e.preventDefault() : e.returnValue = false;

                var eTarget = e.target || e.srcElement;

                var clickedListItem = closest(eTarget, function(el) {
                    return (el.tagName && el.tagName.toUpperCase() === 'FIGURE');
                });

                if(!clickedListItem) {
                    return;
                }

                var clickedGallery = clickedListItem.parentNode,
                    childNodes = clickedListItem.parentNode.childNodes,
                    numChildNodes = childNodes.length,
                    nodeIndex = 0,
                    index;

                for (var i = 0; i < numChildNodes; i++) {
                    if(childNodes[i].nodeType !== 1) {
                        continue;
                    }

                    if(childNodes[i] === clickedListItem) {
                        index = nodeIndex;
                        break;
                    }
                    nodeIndex++;
                }

                if(index >= 0) {
                    openPhotoSwipe( index, clickedGallery );
                }
                return false;
            };

            var photoswipeParseHash = function() {
                var hash = window.location.hash.substring(1),
                    params = {};

                if(hash.length < 5) {
                    return params;
                }

                var vars = hash.split('&');
                for (var i = 0; i < vars.length; i++) {
                    if(!vars[i]) {
                        continue;
                    }
                    var pair = vars[i].split('=');
                    if(pair.length < 2) {
                        continue;
                    }
                    params[pair[0]] = pair[1];
                }

                if(params.gid) {
                    params.gid = parseInt(params.gid, 10);
                }

                return params;
            };

            var openPhotoSwipe = function(index, galleryElement, disableAnimation, fromURL) {
                var pswpElement = document.querySelectorAll('.pswp')[0],
                    gallery,
                    options,
                    items;

                items = parseThumbnailElements(galleryElement);

                options = {
                    galleryUID: galleryElement.getAttribute('data-pswp-uid'),
                    getThumbBoundsFn: function(index) {
                        var thumbnail = items[index].el.getElementsByTagName('img')[0], // find thumbnail
                            pageYScroll = window.pageYOffset || document.documentElement.scrollTop,
                            rect = thumbnail.getBoundingClientRect();
                        return {x:rect.left, y:rect.top + pageYScroll, w:rect.width};
                    },
                    bgOpacity: 0.8,
                    closeOnScroll: false,
                    shareEl: false,
                    fullscreenEl: false,
                    zoomEl: true,
                    history: false,
                    loop: false
                };

                if(fromURL) {
                    if(options.galleryPIDs) {
                        for(var j = 0; j < items.length; j++) {
                            if(items[j].pid == index) {
                                options.index = j;
                                break;
                            }
                        }
                    } else {
                        options.index = parseInt(index, 10) - 1;
                    }
                } else {
                    options.index = parseInt(index, 10);
                }

                if( isNaN(options.index) ) {
                    return;
                }

                if(disableAnimation) {
                    options.showAnimationDuration = 0;
                }

                gallery = new PhotoSwipe( pswpElement, PhotoSwipeUI_Default, items, options);

                gallery.listen('gettingData', function(index, item) {
                    if (!item.sizeLoaded) {
                        item.sizeLoaded = true;
                        var img = new Image();
                        img.onload = function() {
                            item.w = this.width;
                            item.h = this.height;
                            gallery.updateSize(true);
                        }
                        img.src = item.src;
                    }
                });

                gallery.init();

                var buttonLeft = pswpElement.getElementsByClassName('pswp__button--arrow--left')[0];
                var buttonRight = pswpElement.getElementsByClassName('pswp__button--arrow--right')[0];

                buttonLeft.hidden = gallery.getCurrentIndex() === 0;
                buttonRight.hidden = gallery.getCurrentIndex() + 1 === gallery.items.length;

                gallery.listen('beforeChange', function() {
                        buttonLeft.hidden = gallery.getCurrentIndex() === 0;
                        buttonRight.hidden = gallery.getCurrentIndex() + 1 === gallery.items.length;
                    }
                );
            };

            var galleryElements = container.querySelectorAll( gallerySelector );

            for(var i = 0, l = galleryElements.length; i < l; i++) {
                galleryElements[i].setAttribute('data-pswp-uid', i+1);
                galleryElements[i].onclick = onThumbnailsClick;
            }

            var hashData = photoswipeParseHash();
            if(hashData.pid && hashData.gid) {
                openPhotoSwipe( hashData.pid ,  galleryElements[ hashData.gid - 1 ], true, true );
            }
        };

        initPhotoSwipeFromDOM('.images-gallery');
    }, false)
</script>

<h5 id="2-on-polygon-click">2. On polygon click</h5>

<p>Polygon is a plane figure that’s described by a finite number of dots. We use polygon which is based on coordinates that are specified within the device we use, but you can use any other entity.
You may mark your assets and any other entities with a polygon option. For the polygon, we can specify the next settings. Polygon coordinates are being received in a format:</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre><span class="p">[[</span><span class="mi">1</span><span class="no">CoordinateLatitude</span><span class="p">,</span><span class="mi">1</span><span class="no">CoordinateLatitude</span><span class="p">],[</span><span class="mi">2</span><span class="no">CoordinateLatitude</span><span class="p">,</span><span class="mi">2</span><span class="no">CoordinateLatitude</span><span class="p">]</span><span class="o">...</span><span class="p">[</span><span class="n">nCoordinateLatitude</span><span class="p">,</span><span class="n">nCoordinateLatitude</span><span class="p">]]</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>where n - number of coordinates which polygon is described by.</p>

<p>To configure <em>On polygon click</em> action source on the Map widget, you should:</p>

<ol>
  <li>In the widget’s Edit mode move to the cell “Advanced”.</li>
  <li>Scroll to the Polygon Settings, tick the checkbox “Show polygon”.</li>
  <li>Input Polygon key name and remember it, it’s going to be used later.</li>
  <li>Click an orange tick mark on the right top of the window to apply changes.</li>
  <li>Click the right bottom tick icon to save the changes.</li>
  <li>With the main left ThingsBoard menu go to Assets.</li>
  <li>From the assets list select an asset you’d like to add a polygon to and open it.</li>
  <li>In the Assets details window, go to the Attributes cell.</li>
  <li>Click the “+” icon to add a new attribute to the asset.</li>
  <li>In the “Add attribute” window enter a Key - it must be the same Key as the Polygon key name.</li>
  <li>Select Value Type “Strings” and input coordinates of the massive for your polygon. In the example, we use random coordinates
    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre>[[37.758436,  -122.509429],[37.759834, -122.476874],[37.734690, -122.475170],[37.733531, -122.506271]]
</pre></td></tr></tbody></table></code></pre></div>    </div>
  </li>
  <li>In the “Add attribute” window click the right bottom button “Add”.</li>
  <li>Go back to the Dashboard with the Map widget.</li>
  <li>Enter Dashboard’s Edit mode by clicking the bottom right “Pencil” icon.</li>
  <li>Click the “pencil” icon on the right top corner of the Map widget to enter its Edit mode.</li>
  <li>Add in the Datasources a data key that has just been configured. Just start typing its name and it will be shown in the list.</li>
  <li>After adding a new data key, apply changes.</li>
  <li>Move to the last cell “Actions”.</li>
  <li>Click the “+” icon on the right of the window to add a new action.</li>
  <li>In the top drop-down menu, choose an <em>On polygon click</em> action source.</li>
  <li>Since the example for all the action sources is the “Navigate to new dashboard state” action type, choose it in the drop-down Type menu.</li>
  <li>After choosing an action type, the drop-down menu “Target dashboard state” appears. Select a previously created state you’d like to be transitioned to.</li>
  <li>When all needed settings are configured, click “Add” at the right bottom of the “Add action” window.</li>
  <li>Now you see configured action, so you can double-check action source and action type.</li>
  <li>Apply changes by clicking the orange tick icon in the top right of the window and then close the details window.</li>
  <li>Save applied changes by clicking the orange tick icon “Apply changes” in the bottom right of the screen.</li>
</ol>

<p>To execute an action click anywhere inside the polygon.</p>

<div id="0">
  <div itemscope="" itemtype="http://schema.org/ImageGallery" class="images-gallery" style="justify-content: start;">
    <figure itemprop="associatedMedia" itemscope="" itemtype="http://schema.org/ImageObject" style="max-width: min(225px, 100%);
                    max-height: min(225px, 100%);" class="list-item">
<a href="/images/user-guide/ui/widgets/actions/maps/polygon.png" onclick="return false;" itemprop="contentUrl"> <img src="/images/user-guide/ui/widgets/actions/maps/polygon-preview.png" itemprop="thumbnail" alt="image" style="max-width: min(225px, 100%);
                                max-height: min(225px, 100%);" /> </a>       <figcaption itemprop="caption description" style="display: none"></figcaption>
    </figure>
    <figure itemprop="associatedMedia" itemscope="" itemtype="http://schema.org/ImageObject" style="max-width: min(225px, 100%);
                    max-height: min(225px, 100%);" class="list-item">
<a href="/images/user-guide/ui/widgets/actions/maps/polygon-1.png" onclick="return false;" itemprop="contentUrl"> <img src="/images/user-guide/ui/widgets/actions/maps/polygon-1-preview.png" itemprop="thumbnail" alt="image" style="max-width: min(225px, 100%);
                                max-height: min(225px, 100%);" /> </a>       <figcaption itemprop="caption description" style="display: none"></figcaption>
    </figure>
    <figure itemprop="associatedMedia" itemscope="" itemtype="http://schema.org/ImageObject" style="max-width: min(225px, 100%);
                    max-height: min(225px, 100%);" class="list-item">
<a href="/images/user-guide/ui/widgets/actions/maps/polygon-2.png" onclick="return false;" itemprop="contentUrl"> <img src="/images/user-guide/ui/widgets/actions/maps/polygon-2-preview.png" itemprop="thumbnail" alt="image" style="max-width: min(225px, 100%);
                                max-height: min(225px, 100%);" /> </a>       <figcaption itemprop="caption description" style="display: none"></figcaption>
    </figure>
    <figure itemprop="associatedMedia" itemscope="" itemtype="http://schema.org/ImageObject" style="max-width: min(225px, 100%);
                    max-height: min(225px, 100%);" class="list-item">
<a href="/images/user-guide/ui/widgets/actions/maps/polygon-3.png" onclick="return false;" itemprop="contentUrl"> <img src="/images/user-guide/ui/widgets/actions/maps/polygon-3-preview.png" itemprop="thumbnail" alt="image" style="max-width: min(225px, 100%);
                                max-height: min(225px, 100%);" /> </a>       <figcaption itemprop="caption description" style="display: none"></figcaption>
    </figure>
    <figure itemprop="associatedMedia" itemscope="" itemtype="http://schema.org/ImageObject" style="max-width: min(225px, 100%);
                    max-height: min(225px, 100%);" class="list-item">
<a href="/images/user-guide/ui/widgets/actions/maps/polygon-4.png" onclick="return false;" itemprop="contentUrl"> <img src="/images/user-guide/ui/widgets/actions/maps/polygon-4-preview.png" itemprop="thumbnail" alt="image" style="max-width: min(225px, 100%);
                                max-height: min(225px, 100%);" /> </a>       <figcaption itemprop="caption description" style="display: none"></figcaption>
    </figure>
    <figure itemprop="associatedMedia" itemscope="" itemtype="http://schema.org/ImageObject" style="max-width: min(225px, 100%);
                    max-height: min(225px, 100%);" class="list-item">
<a href="/images/user-guide/ui/widgets/actions/maps/polygon-5.png" onclick="return false;" itemprop="contentUrl"> <img src="/images/user-guide/ui/widgets/actions/maps/polygon-5-preview.png" itemprop="thumbnail" alt="image" style="max-width: min(225px, 100%);
                                max-height: min(225px, 100%);" /> </a>       <figcaption itemprop="caption description" style="display: none"></figcaption>
    </figure>
    <figure itemprop="associatedMedia" itemscope="" itemtype="http://schema.org/ImageObject" style="max-width: min(225px, 100%);
                    max-height: min(225px, 100%);" class="list-item">
<a href="/images/user-guide/ui/widgets/actions/maps/polygon-6.png" onclick="return false;" itemprop="contentUrl"> <img src="/images/user-guide/ui/widgets/actions/maps/polygon-6-preview.png" itemprop="thumbnail" alt="image" style="max-width: min(225px, 100%);
                                max-height: min(225px, 100%);" /> </a>       <figcaption itemprop="caption description" style="display: none"></figcaption>
    </figure>
    <figure itemprop="associatedMedia" itemscope="" itemtype="http://schema.org/ImageObject" style="max-width: min(225px, 100%);
                    max-height: min(225px, 100%);" class="list-item">
<a href="/images/user-guide/ui/widgets/actions/maps/polygon-7.png" onclick="return false;" itemprop="contentUrl"> <img src="/images/user-guide/ui/widgets/actions/maps/polygon-7-preview.png" itemprop="thumbnail" alt="image" style="max-width: min(225px, 100%);
                                max-height: min(225px, 100%);" /> </a>       <figcaption itemprop="caption description" style="display: none"></figcaption>
    </figure>
    <figure itemprop="associatedMedia" itemscope="" itemtype="http://schema.org/ImageObject" style="max-width: min(225px, 100%);
                    max-height: min(225px, 100%);" class="list-item">
<a href="/images/user-guide/ui/widgets/actions/maps/polygon-8.png" onclick="return false;" itemprop="contentUrl"> <img src="/images/user-guide/ui/widgets/actions/maps/polygon-8-preview.png" itemprop="thumbnail" alt="image" style="max-width: min(225px, 100%);
                                max-height: min(225px, 100%);" /> </a>       <figcaption itemprop="caption description" style="display: none"></figcaption>
    </figure>
    <figure itemprop="associatedMedia" itemscope="" itemtype="http://schema.org/ImageObject" style="max-width: min(225px, 100%);
                    max-height: min(225px, 100%);" class="list-item">
<a href="/images/user-guide/ui/widgets/actions/maps/polygon-9.png" onclick="return false;" itemprop="contentUrl"> <img src="/images/user-guide/ui/widgets/actions/maps/polygon-9-preview.png" itemprop="thumbnail" alt="image" style="max-width: min(225px, 100%);
                                max-height: min(225px, 100%);" /> </a>       <figcaption itemprop="caption description" style="display: none"></figcaption>
    </figure>
    <figure itemprop="associatedMedia" itemscope="" itemtype="http://schema.org/ImageObject" style="max-width: min(225px, 100%);
                    max-height: min(225px, 100%);" class="list-item">
<a href="/images/user-guide/ui/widgets/actions/maps/polygon-10.png" onclick="return false;" itemprop="contentUrl"> <img src="/images/user-guide/ui/widgets/actions/maps/polygon-10-preview.png" itemprop="thumbnail" alt="image" style="max-width: min(225px, 100%);
                                max-height: min(225px, 100%);" /> </a>       <figcaption itemprop="caption description" style="display: none"></figcaption>
    </figure>
  </div>
</div>

<script>
    window.addEventListener("load", function() {
        window.removeEventListener("load", arguments.callee, false);

        if(!document.getElementsByClassName('pswp').length){
            document.body.insertAdjacentHTML('beforeend',
                '<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">\n' +
                '        <div class="pswp__bg"></div>\n' +
                '        <div class="pswp__scroll-wrap">\n' +
                '            <div class="pswp__container">\n' +
                '                <div class="pswp__item"></div>\n' +
                '                <div class="pswp__item"></div>\n' +
                '                <div class="pswp__item"></div>\n' +
                '            </div>\n' +
                '\n' +
                '            <div class="pswp__ui pswp__ui--hidden">\n' +
                '\n' +
                '                <div class="pswp__top-bar">\n' +
                '                    <div class="pswp__counter"></div>\n' +
                '\n' +
                '                    <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>\n' +
                '\n' +
                '                    <button class="pswp__button pswp__button--share" title="Share"></button>\n' +
                '\n' +
                '                    <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>\n' +
                '\n' +
                '                    <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>\n' +
                '\n' +
                '                    <div class="pswp__preloader">\n' +
                '                        <div class="pswp__preloader__icn">\n' +
                '                            <div class="pswp__preloader__cut">\n' +
                '                                <div class="pswp__preloader__donut"></div>\n' +
                '                            </div>\n' +
                '                        </div>\n' +
                '                    </div>\n' +
                '                </div>\n' +
                '                <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">\n' +
                '                    <div class="pswp__share-tooltip"></div>\n' +
                '                </div>\n' +
                '                <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">\n' +
                '                </button>\n' +
                '                <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">\n' +
                '                </button>\n' +
                '                <div class="pswp__caption">\n' +
                '                    <div class="pswp__caption__center"></div>\n' +
                '                </div>\n' +
                '            </div>\n' +
                '        </div>\n' +
                '    </div>'
            );
        }

        var container = document.getElementById('0');

        var initPhotoSwipeFromDOM = function(gallerySelector) {
            var parseThumbnailElements = function(el) {
                var thumbElements = el.childNodes,
                    numNodes = thumbElements.length,
                    items = [],
                    figureEl,
                    linkEl,
                    size,
                    item;

                for(var i = 0; i < numNodes; i++) {

                    figureEl = thumbElements[i];
                    if(figureEl.nodeType !== 1) {
                        continue;
                    }
                    linkEl = figureEl.children[0];
                    size = linkEl.children[0];
                    item = {
                        src: linkEl.getAttribute('href'),
                        w: 2500,
                        h: 0,
                        sizeLoaded: false
                    };

                    if(figureEl.children.length > 1) {
                        item.title = figureEl.children[1].innerHTML;
                    }
                    if(linkEl.children.length > 0) {
                        item.msrc = linkEl.children[0].getAttribute('src');
                    }
                    if(item.msrc === item.src){
                        item.w = parseInt(size.naturalWidth, 10);
                        item.h = parseInt(size.naturalHeight, 10);
                    }

                    item.el = figureEl;
                    items.push(item);
                }
                return items;
            };

            var closest = function closest(el, fn) {
                return el && ( fn(el) ? el : closest(el.parentNode, fn) );
            };

            var onThumbnailsClick = function(e) {
                e = e || window.event;
                e.preventDefault ? e.preventDefault() : e.returnValue = false;

                var eTarget = e.target || e.srcElement;

                var clickedListItem = closest(eTarget, function(el) {
                    return (el.tagName && el.tagName.toUpperCase() === 'FIGURE');
                });

                if(!clickedListItem) {
                    return;
                }

                var clickedGallery = clickedListItem.parentNode,
                    childNodes = clickedListItem.parentNode.childNodes,
                    numChildNodes = childNodes.length,
                    nodeIndex = 0,
                    index;

                for (var i = 0; i < numChildNodes; i++) {
                    if(childNodes[i].nodeType !== 1) {
                        continue;
                    }

                    if(childNodes[i] === clickedListItem) {
                        index = nodeIndex;
                        break;
                    }
                    nodeIndex++;
                }

                if(index >= 0) {
                    openPhotoSwipe( index, clickedGallery );
                }
                return false;
            };

            var photoswipeParseHash = function() {
                var hash = window.location.hash.substring(1),
                    params = {};

                if(hash.length < 5) {
                    return params;
                }

                var vars = hash.split('&');
                for (var i = 0; i < vars.length; i++) {
                    if(!vars[i]) {
                        continue;
                    }
                    var pair = vars[i].split('=');
                    if(pair.length < 2) {
                        continue;
                    }
                    params[pair[0]] = pair[1];
                }

                if(params.gid) {
                    params.gid = parseInt(params.gid, 10);
                }

                return params;
            };

            var openPhotoSwipe = function(index, galleryElement, disableAnimation, fromURL) {
                var pswpElement = document.querySelectorAll('.pswp')[0],
                    gallery,
                    options,
                    items;

                items = parseThumbnailElements(galleryElement);

                options = {
                    galleryUID: galleryElement.getAttribute('data-pswp-uid'),
                    getThumbBoundsFn: function(index) {
                        var thumbnail = items[index].el.getElementsByTagName('img')[0], // find thumbnail
                            pageYScroll = window.pageYOffset || document.documentElement.scrollTop,
                            rect = thumbnail.getBoundingClientRect();
                        return {x:rect.left, y:rect.top + pageYScroll, w:rect.width};
                    },
                    bgOpacity: 0.8,
                    closeOnScroll: false,
                    shareEl: false,
                    fullscreenEl: false,
                    zoomEl: true,
                    history: false,
                    loop: false
                };

                if(fromURL) {
                    if(options.galleryPIDs) {
                        for(var j = 0; j < items.length; j++) {
                            if(items[j].pid == index) {
                                options.index = j;
                                break;
                            }
                        }
                    } else {
                        options.index = parseInt(index, 10) - 1;
                    }
                } else {
                    options.index = parseInt(index, 10);
                }

                if( isNaN(options.index) ) {
                    return;
                }

                if(disableAnimation) {
                    options.showAnimationDuration = 0;
                }

                gallery = new PhotoSwipe( pswpElement, PhotoSwipeUI_Default, items, options);

                gallery.listen('gettingData', function(index, item) {
                    if (!item.sizeLoaded) {
                        item.sizeLoaded = true;
                        var img = new Image();
                        img.onload = function() {
                            item.w = this.width;
                            item.h = this.height;
                            gallery.updateSize(true);
                        }
                        img.src = item.src;
                    }
                });

                gallery.init();

                var buttonLeft = pswpElement.getElementsByClassName('pswp__button--arrow--left')[0];
                var buttonRight = pswpElement.getElementsByClassName('pswp__button--arrow--right')[0];

                buttonLeft.hidden = gallery.getCurrentIndex() === 0;
                buttonRight.hidden = gallery.getCurrentIndex() + 1 === gallery.items.length;

                gallery.listen('beforeChange', function() {
                        buttonLeft.hidden = gallery.getCurrentIndex() === 0;
                        buttonRight.hidden = gallery.getCurrentIndex() + 1 === gallery.items.length;
                    }
                );
            };

            var galleryElements = container.querySelectorAll( gallerySelector );

            for(var i = 0, l = galleryElements.length; i < l; i++) {
                galleryElements[i].setAttribute('data-pswp-uid', i+1);
                galleryElements[i].onclick = onThumbnailsClick;
            }

            var hashData = photoswipeParseHash();
            if(hashData.pid && hashData.gid) {
                openPhotoSwipe( hashData.pid ,  galleryElements[ hashData.gid - 1 ], true, true );
            }
        };

        initPhotoSwipeFromDOM('.images-gallery');
    }, false)
</script>

<h5 id="3-tooltip-tag-action">3. Tooltip tag action</h5>

<p>When clicking a map’s marker, a tooltip will appear. A tooltip contains a link that executes an action.<br />
Please note, in this manual explained a basic way to use the tooltip tag action source. It is possible to configure several links for various devices/assets that return different values. 
Do it with the tooltip function in the advanced mode of the map widget.</p>

<p>To configure the Tooltip tag action of the Map widget, you should:</p>

<ol>
  <li>In the widget’s Edit mode move to the last cell “Actions”.</li>
  <li>Click the “+” icon on the right of the window to add a new action.</li>
  <li>In the top drop-down menu, choose an <em>On marker click</em> action source.</li>
  <li>Enter a name for the action and make sure to remember it, it’s going to be used later.</li>
  <li>Since the example for all the action sources is the “Navigate to new dashboard state” action type, choose it in the drop-down Type menu.</li>
  <li>After choosing an action type, the drop-down menu “Target dashboard state” appears. Select a previously created state you’d like to be transitioned to.</li>
  <li>When all needed settings are configured, click “Add” at the right bottom of the “Add action” window.</li>
  <li>Now you see configured action, so you can double-check action source, icon, and action type.</li>
  <li>Apply changes by clicking the orange tick icon in the top right of the window and then close the details window.</li>
  <li>Move to the Advanced settings cell.</li>
  <li>Scroll down to the Tooltip configuration and tick the checkbox “Show tooltip”.</li>
  <li>In the Tooltip line find <em>link-act name</em> and input there the action name in a format:</li>
</ol>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre>&lt;link-act name='TooltipTag'&gt;Navigate to the Building A&lt;/link-act&gt;
</pre></td></tr></tbody></table></code></pre></div></div>

<p>where <em>TooltipTag</em> is an action name and <em>Navigate to the Building A</em> is the text that will be shown as a link on a tooltip.</p>

<ol>
  <li>Apply changes by clicking the orange tick icon in the top right of the window and then close the details window.</li>
  <li>Save applied changes by clicking the orange at the right bottom of the screen.</li>
</ol>

<p>Click a map’s marker for a tooltip to appear. To execute an action, click the text of the link at the bottom of the tooltip.</p>

<div id="0">
  <div itemscope="" itemtype="http://schema.org/ImageGallery" class="images-gallery" style="justify-content: start;">
    <figure itemprop="associatedMedia" itemscope="" itemtype="http://schema.org/ImageObject" style="max-width: min(225px, 100%);
                    max-height: min(225px, 100%);" class="list-item">
<a href="/images/user-guide/ui/widgets/actions/maps/tooltiptag-1-ce.png" onclick="return false;" itemprop="contentUrl"> <img src="/images/user-guide/ui/widgets/actions/maps/tooltiptag-1-ce-preview.png" itemprop="thumbnail" alt="image" style="max-width: min(225px, 100%);
                                max-height: min(225px, 100%);" /> </a>       <figcaption itemprop="caption description" style="display: none"></figcaption>
    </figure>
    <figure itemprop="associatedMedia" itemscope="" itemtype="http://schema.org/ImageObject" style="max-width: min(225px, 100%);
                    max-height: min(225px, 100%);" class="list-item">
<a href="/images/user-guide/ui/widgets/actions/maps/tooltiptag-2-ce.png" onclick="return false;" itemprop="contentUrl"> <img src="/images/user-guide/ui/widgets/actions/maps/tooltiptag-2-ce-preview.png" itemprop="thumbnail" alt="image" style="max-width: min(225px, 100%);
                                max-height: min(225px, 100%);" /> </a>       <figcaption itemprop="caption description" style="display: none"></figcaption>
    </figure>
    <figure itemprop="associatedMedia" itemscope="" itemtype="http://schema.org/ImageObject" style="max-width: min(225px, 100%);
                    max-height: min(225px, 100%);" class="list-item">
<a href="/images/user-guide/ui/widgets/actions/maps/tooltiptag-3-ce.png" onclick="return false;" itemprop="contentUrl"> <img src="/images/user-guide/ui/widgets/actions/maps/tooltiptag-3-ce-preview.png" itemprop="thumbnail" alt="image" style="max-width: min(225px, 100%);
                                max-height: min(225px, 100%);" /> </a>       <figcaption itemprop="caption description" style="display: none"></figcaption>
    </figure>
    <figure itemprop="associatedMedia" itemscope="" itemtype="http://schema.org/ImageObject" style="max-width: min(225px, 100%);
                    max-height: min(225px, 100%);" class="list-item">
<a href="/images/user-guide/ui/widgets/actions/maps/tooltiptag-4-ce.png" onclick="return false;" itemprop="contentUrl"> <img src="/images/user-guide/ui/widgets/actions/maps/tooltiptag-4-ce-preview.png" itemprop="thumbnail" alt="image" style="max-width: min(225px, 100%);
                                max-height: min(225px, 100%);" /> </a>       <figcaption itemprop="caption description" style="display: none"></figcaption>
    </figure>
    <figure itemprop="associatedMedia" itemscope="" itemtype="http://schema.org/ImageObject" style="max-width: min(225px, 100%);
                    max-height: min(225px, 100%);" class="list-item">
<a href="/images/user-guide/ui/widgets/actions/maps/tooltiptag-5-ce.png" onclick="return false;" itemprop="contentUrl"> <img src="/images/user-guide/ui/widgets/actions/maps/tooltiptag-5-ce-preview.png" itemprop="thumbnail" alt="image" style="max-width: min(225px, 100%);
                                max-height: min(225px, 100%);" /> </a>       <figcaption itemprop="caption description" style="display: none"></figcaption>
    </figure>
    <figure itemprop="associatedMedia" itemscope="" itemtype="http://schema.org/ImageObject" style="max-width: min(225px, 100%);
                    max-height: min(225px, 100%);" class="list-item">
<a href="/images/user-guide/ui/widgets/actions/maps/tooltiptag-6-ce.png" onclick="return false;" itemprop="contentUrl"> <img src="/images/user-guide/ui/widgets/actions/maps/tooltiptag-6-ce-preview.png" itemprop="thumbnail" alt="image" style="max-width: min(225px, 100%);
                                max-height: min(225px, 100%);" /> </a>       <figcaption itemprop="caption description" style="display: none"></figcaption>
    </figure>
    <figure itemprop="associatedMedia" itemscope="" itemtype="http://schema.org/ImageObject" style="max-width: min(225px, 100%);
                    max-height: min(225px, 100%);" class="list-item">
<a href="/images/user-guide/ui/widgets/actions/maps/tooltiptag-7-ce.png" onclick="return false;" itemprop="contentUrl"> <img src="/images/user-guide/ui/widgets/actions/maps/tooltiptag-7-ce-preview.png" itemprop="thumbnail" alt="image" style="max-width: min(225px, 100%);
                                max-height: min(225px, 100%);" /> </a>       <figcaption itemprop="caption description" style="display: none"></figcaption>
    </figure>
  </div>
</div>

<script>
    window.addEventListener("load", function() {
        window.removeEventListener("load", arguments.callee, false);

        if(!document.getElementsByClassName('pswp').length){
            document.body.insertAdjacentHTML('beforeend',
                '<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">\n' +
                '        <div class="pswp__bg"></div>\n' +
                '        <div class="pswp__scroll-wrap">\n' +
                '            <div class="pswp__container">\n' +
                '                <div class="pswp__item"></div>\n' +
                '                <div class="pswp__item"></div>\n' +
                '                <div class="pswp__item"></div>\n' +
                '            </div>\n' +
                '\n' +
                '            <div class="pswp__ui pswp__ui--hidden">\n' +
                '\n' +
                '                <div class="pswp__top-bar">\n' +
                '                    <div class="pswp__counter"></div>\n' +
                '\n' +
                '                    <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>\n' +
                '\n' +
                '                    <button class="pswp__button pswp__button--share" title="Share"></button>\n' +
                '\n' +
                '                    <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>\n' +
                '\n' +
                '                    <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>\n' +
                '\n' +
                '                    <div class="pswp__preloader">\n' +
                '                        <div class="pswp__preloader__icn">\n' +
                '                            <div class="pswp__preloader__cut">\n' +
                '                                <div class="pswp__preloader__donut"></div>\n' +
                '                            </div>\n' +
                '                        </div>\n' +
                '                    </div>\n' +
                '                </div>\n' +
                '                <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">\n' +
                '                    <div class="pswp__share-tooltip"></div>\n' +
                '                </div>\n' +
                '                <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">\n' +
                '                </button>\n' +
                '                <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">\n' +
                '                </button>\n' +
                '                <div class="pswp__caption">\n' +
                '                    <div class="pswp__caption__center"></div>\n' +
                '                </div>\n' +
                '            </div>\n' +
                '        </div>\n' +
                '    </div>'
            );
        }

        var container = document.getElementById('0');

        var initPhotoSwipeFromDOM = function(gallerySelector) {
            var parseThumbnailElements = function(el) {
                var thumbElements = el.childNodes,
                    numNodes = thumbElements.length,
                    items = [],
                    figureEl,
                    linkEl,
                    size,
                    item;

                for(var i = 0; i < numNodes; i++) {

                    figureEl = thumbElements[i];
                    if(figureEl.nodeType !== 1) {
                        continue;
                    }
                    linkEl = figureEl.children[0];
                    size = linkEl.children[0];
                    item = {
                        src: linkEl.getAttribute('href'),
                        w: 2500,
                        h: 0,
                        sizeLoaded: false
                    };

                    if(figureEl.children.length > 1) {
                        item.title = figureEl.children[1].innerHTML;
                    }
                    if(linkEl.children.length > 0) {
                        item.msrc = linkEl.children[0].getAttribute('src');
                    }
                    if(item.msrc === item.src){
                        item.w = parseInt(size.naturalWidth, 10);
                        item.h = parseInt(size.naturalHeight, 10);
                    }

                    item.el = figureEl;
                    items.push(item);
                }
                return items;
            };

            var closest = function closest(el, fn) {
                return el && ( fn(el) ? el : closest(el.parentNode, fn) );
            };

            var onThumbnailsClick = function(e) {
                e = e || window.event;
                e.preventDefault ? e.preventDefault() : e.returnValue = false;

                var eTarget = e.target || e.srcElement;

                var clickedListItem = closest(eTarget, function(el) {
                    return (el.tagName && el.tagName.toUpperCase() === 'FIGURE');
                });

                if(!clickedListItem) {
                    return;
                }

                var clickedGallery = clickedListItem.parentNode,
                    childNodes = clickedListItem.parentNode.childNodes,
                    numChildNodes = childNodes.length,
                    nodeIndex = 0,
                    index;

                for (var i = 0; i < numChildNodes; i++) {
                    if(childNodes[i].nodeType !== 1) {
                        continue;
                    }

                    if(childNodes[i] === clickedListItem) {
                        index = nodeIndex;
                        break;
                    }
                    nodeIndex++;
                }

                if(index >= 0) {
                    openPhotoSwipe( index, clickedGallery );
                }
                return false;
            };

            var photoswipeParseHash = function() {
                var hash = window.location.hash.substring(1),
                    params = {};

                if(hash.length < 5) {
                    return params;
                }

                var vars = hash.split('&');
                for (var i = 0; i < vars.length; i++) {
                    if(!vars[i]) {
                        continue;
                    }
                    var pair = vars[i].split('=');
                    if(pair.length < 2) {
                        continue;
                    }
                    params[pair[0]] = pair[1];
                }

                if(params.gid) {
                    params.gid = parseInt(params.gid, 10);
                }

                return params;
            };

            var openPhotoSwipe = function(index, galleryElement, disableAnimation, fromURL) {
                var pswpElement = document.querySelectorAll('.pswp')[0],
                    gallery,
                    options,
                    items;

                items = parseThumbnailElements(galleryElement);

                options = {
                    galleryUID: galleryElement.getAttribute('data-pswp-uid'),
                    getThumbBoundsFn: function(index) {
                        var thumbnail = items[index].el.getElementsByTagName('img')[0], // find thumbnail
                            pageYScroll = window.pageYOffset || document.documentElement.scrollTop,
                            rect = thumbnail.getBoundingClientRect();
                        return {x:rect.left, y:rect.top + pageYScroll, w:rect.width};
                    },
                    bgOpacity: 0.8,
                    closeOnScroll: false,
                    shareEl: false,
                    fullscreenEl: false,
                    zoomEl: true,
                    history: false,
                    loop: false
                };

                if(fromURL) {
                    if(options.galleryPIDs) {
                        for(var j = 0; j < items.length; j++) {
                            if(items[j].pid == index) {
                                options.index = j;
                                break;
                            }
                        }
                    } else {
                        options.index = parseInt(index, 10) - 1;
                    }
                } else {
                    options.index = parseInt(index, 10);
                }

                if( isNaN(options.index) ) {
                    return;
                }

                if(disableAnimation) {
                    options.showAnimationDuration = 0;
                }

                gallery = new PhotoSwipe( pswpElement, PhotoSwipeUI_Default, items, options);

                gallery.listen('gettingData', function(index, item) {
                    if (!item.sizeLoaded) {
                        item.sizeLoaded = true;
                        var img = new Image();
                        img.onload = function() {
                            item.w = this.width;
                            item.h = this.height;
                            gallery.updateSize(true);
                        }
                        img.src = item.src;
                    }
                });

                gallery.init();

                var buttonLeft = pswpElement.getElementsByClassName('pswp__button--arrow--left')[0];
                var buttonRight = pswpElement.getElementsByClassName('pswp__button--arrow--right')[0];

                buttonLeft.hidden = gallery.getCurrentIndex() === 0;
                buttonRight.hidden = gallery.getCurrentIndex() + 1 === gallery.items.length;

                gallery.listen('beforeChange', function() {
                        buttonLeft.hidden = gallery.getCurrentIndex() === 0;
                        buttonRight.hidden = gallery.getCurrentIndex() + 1 === gallery.items.length;
                    }
                );
            };

            var galleryElements = container.querySelectorAll( gallerySelector );

            for(var i = 0, l = galleryElements.length; i < l; i++) {
                galleryElements[i].setAttribute('data-pswp-uid', i+1);
                galleryElements[i].onclick = onThumbnailsClick;
            }

            var hashData = photoswipeParseHash();
            if(hashData.pid && hashData.gid) {
                openPhotoSwipe( hashData.pid ,  galleryElements[ hashData.gid - 1 ], true, true );
            }
        };

        initPhotoSwipeFromDOM('.images-gallery');
    }, false)
</script>

<h2 id="special-actions-settings">Special actions settings</h2>

<h4 id="open-right-dashboard-layout-mobile-view">Open right dashboard layout (mobile view)</h4>

<p>Often users need to see updated details of one widget on another widget near it. For example, we have a list of assets in Entity Table widget, and we want to update their details on the Chart widget near.
From the desktop, it’s easily configuring by placing two widgets near each other and choosing an “Update current dashboard” action type, however an adaptive mobile screen automatically places widgets under each other,
so you need to scroll down to see needed information on the second one.</p>

<div id="0">
  <div itemscope="" itemtype="http://schema.org/ImageGallery" class="images-gallery" style="justify-content: start;">
    <figure itemprop="associatedMedia" itemscope="" itemtype="http://schema.org/ImageObject" style="max-width: min(225px, 100%);
                    max-height: min(225px, 100%);" class="list-item">
<a href="/images/user-guide/ui/widgets/actions/settings/mob-layout.png" onclick="return false;" itemprop="contentUrl"> <img src="/images/user-guide/ui/widgets/actions/settings/mob-layout-preview.png" itemprop="thumbnail" alt="image" style="max-width: min(225px, 100%);
                                max-height: min(225px, 100%);" /> </a>       <figcaption itemprop="caption description" style="display: none"></figcaption>
    </figure>
    <figure itemprop="associatedMedia" itemscope="" itemtype="http://schema.org/ImageObject" style="max-width: min(225px, 100%);
                    max-height: min(225px, 100%);" class="list-item">
<a href="/images/user-guide/ui/widgets/actions/settings/mob-layout-1.png" onclick="return false;" itemprop="contentUrl"> <img src="/images/user-guide/ui/widgets/actions/settings/mob-layout-1-preview.png" itemprop="thumbnail" alt="image" style="max-width: min(225px, 100%);
                                max-height: min(225px, 100%);" /> </a>       <figcaption itemprop="caption description" style="display: none"></figcaption>
    </figure>
  </div>
</div>

<script>
    window.addEventListener("load", function() {
        window.removeEventListener("load", arguments.callee, false);

        if(!document.getElementsByClassName('pswp').length){
            document.body.insertAdjacentHTML('beforeend',
                '<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">\n' +
                '        <div class="pswp__bg"></div>\n' +
                '        <div class="pswp__scroll-wrap">\n' +
                '            <div class="pswp__container">\n' +
                '                <div class="pswp__item"></div>\n' +
                '                <div class="pswp__item"></div>\n' +
                '                <div class="pswp__item"></div>\n' +
                '            </div>\n' +
                '\n' +
                '            <div class="pswp__ui pswp__ui--hidden">\n' +
                '\n' +
                '                <div class="pswp__top-bar">\n' +
                '                    <div class="pswp__counter"></div>\n' +
                '\n' +
                '                    <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>\n' +
                '\n' +
                '                    <button class="pswp__button pswp__button--share" title="Share"></button>\n' +
                '\n' +
                '                    <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>\n' +
                '\n' +
                '                    <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>\n' +
                '\n' +
                '                    <div class="pswp__preloader">\n' +
                '                        <div class="pswp__preloader__icn">\n' +
                '                            <div class="pswp__preloader__cut">\n' +
                '                                <div class="pswp__preloader__donut"></div>\n' +
                '                            </div>\n' +
                '                        </div>\n' +
                '                    </div>\n' +
                '                </div>\n' +
                '                <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">\n' +
                '                    <div class="pswp__share-tooltip"></div>\n' +
                '                </div>\n' +
                '                <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">\n' +
                '                </button>\n' +
                '                <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">\n' +
                '                </button>\n' +
                '                <div class="pswp__caption">\n' +
                '                    <div class="pswp__caption__center"></div>\n' +
                '                </div>\n' +
                '            </div>\n' +
                '        </div>\n' +
                '    </div>'
            );
        }

        var container = document.getElementById('0');

        var initPhotoSwipeFromDOM = function(gallerySelector) {
            var parseThumbnailElements = function(el) {
                var thumbElements = el.childNodes,
                    numNodes = thumbElements.length,
                    items = [],
                    figureEl,
                    linkEl,
                    size,
                    item;

                for(var i = 0; i < numNodes; i++) {

                    figureEl = thumbElements[i];
                    if(figureEl.nodeType !== 1) {
                        continue;
                    }
                    linkEl = figureEl.children[0];
                    size = linkEl.children[0];
                    item = {
                        src: linkEl.getAttribute('href'),
                        w: 2500,
                        h: 0,
                        sizeLoaded: false
                    };

                    if(figureEl.children.length > 1) {
                        item.title = figureEl.children[1].innerHTML;
                    }
                    if(linkEl.children.length > 0) {
                        item.msrc = linkEl.children[0].getAttribute('src');
                    }
                    if(item.msrc === item.src){
                        item.w = parseInt(size.naturalWidth, 10);
                        item.h = parseInt(size.naturalHeight, 10);
                    }

                    item.el = figureEl;
                    items.push(item);
                }
                return items;
            };

            var closest = function closest(el, fn) {
                return el && ( fn(el) ? el : closest(el.parentNode, fn) );
            };

            var onThumbnailsClick = function(e) {
                e = e || window.event;
                e.preventDefault ? e.preventDefault() : e.returnValue = false;

                var eTarget = e.target || e.srcElement;

                var clickedListItem = closest(eTarget, function(el) {
                    return (el.tagName && el.tagName.toUpperCase() === 'FIGURE');
                });

                if(!clickedListItem) {
                    return;
                }

                var clickedGallery = clickedListItem.parentNode,
                    childNodes = clickedListItem.parentNode.childNodes,
                    numChildNodes = childNodes.length,
                    nodeIndex = 0,
                    index;

                for (var i = 0; i < numChildNodes; i++) {
                    if(childNodes[i].nodeType !== 1) {
                        continue;
                    }

                    if(childNodes[i] === clickedListItem) {
                        index = nodeIndex;
                        break;
                    }
                    nodeIndex++;
                }

                if(index >= 0) {
                    openPhotoSwipe( index, clickedGallery );
                }
                return false;
            };

            var photoswipeParseHash = function() {
                var hash = window.location.hash.substring(1),
                    params = {};

                if(hash.length < 5) {
                    return params;
                }

                var vars = hash.split('&');
                for (var i = 0; i < vars.length; i++) {
                    if(!vars[i]) {
                        continue;
                    }
                    var pair = vars[i].split('=');
                    if(pair.length < 2) {
                        continue;
                    }
                    params[pair[0]] = pair[1];
                }

                if(params.gid) {
                    params.gid = parseInt(params.gid, 10);
                }

                return params;
            };

            var openPhotoSwipe = function(index, galleryElement, disableAnimation, fromURL) {
                var pswpElement = document.querySelectorAll('.pswp')[0],
                    gallery,
                    options,
                    items;

                items = parseThumbnailElements(galleryElement);

                options = {
                    galleryUID: galleryElement.getAttribute('data-pswp-uid'),
                    getThumbBoundsFn: function(index) {
                        var thumbnail = items[index].el.getElementsByTagName('img')[0], // find thumbnail
                            pageYScroll = window.pageYOffset || document.documentElement.scrollTop,
                            rect = thumbnail.getBoundingClientRect();
                        return {x:rect.left, y:rect.top + pageYScroll, w:rect.width};
                    },
                    bgOpacity: 0.8,
                    closeOnScroll: false,
                    shareEl: false,
                    fullscreenEl: false,
                    zoomEl: true,
                    history: false,
                    loop: false
                };

                if(fromURL) {
                    if(options.galleryPIDs) {
                        for(var j = 0; j < items.length; j++) {
                            if(items[j].pid == index) {
                                options.index = j;
                                break;
                            }
                        }
                    } else {
                        options.index = parseInt(index, 10) - 1;
                    }
                } else {
                    options.index = parseInt(index, 10);
                }

                if( isNaN(options.index) ) {
                    return;
                }

                if(disableAnimation) {
                    options.showAnimationDuration = 0;
                }

                gallery = new PhotoSwipe( pswpElement, PhotoSwipeUI_Default, items, options);

                gallery.listen('gettingData', function(index, item) {
                    if (!item.sizeLoaded) {
                        item.sizeLoaded = true;
                        var img = new Image();
                        img.onload = function() {
                            item.w = this.width;
                            item.h = this.height;
                            gallery.updateSize(true);
                        }
                        img.src = item.src;
                    }
                });

                gallery.init();

                var buttonLeft = pswpElement.getElementsByClassName('pswp__button--arrow--left')[0];
                var buttonRight = pswpElement.getElementsByClassName('pswp__button--arrow--right')[0];

                buttonLeft.hidden = gallery.getCurrentIndex() === 0;
                buttonRight.hidden = gallery.getCurrentIndex() + 1 === gallery.items.length;

                gallery.listen('beforeChange', function() {
                        buttonLeft.hidden = gallery.getCurrentIndex() === 0;
                        buttonRight.hidden = gallery.getCurrentIndex() + 1 === gallery.items.length;
                    }
                );
            };

            var galleryElements = container.querySelectorAll( gallerySelector );

            for(var i = 0, l = galleryElements.length; i < l; i++) {
                galleryElements[i].setAttribute('data-pswp-uid', i+1);
                galleryElements[i].onclick = onThumbnailsClick;
            }

            var hashData = photoswipeParseHash();
            if(hashData.pid && hashData.gid) {
                openPhotoSwipe( hashData.pid ,  galleryElements[ hashData.gid - 1 ], true, true );
            }
        };

        initPhotoSwipeFromDOM('.images-gallery');
    }, false)
</script>

<p><a href="/docs/user-guide/dashboards/#layouts">Layouts</a> feature solves this issue. To configure layouts and move already created widgets, you should:</p>
<ol>
  <li>Enter the Dashboard’s Edit mode by clicking a “Pencil” icon at the right bottom of the page.</li>
  <li>On the left top of the window click “Manage layouts”.</li>
  <li>In the opened “Manage layouts” window, tick the checkbox “Right” and click “Save”. Now we have two layouts.</li>
  <li>Then, we need to transfer the Chart widget to the right layout. Right-click widget and from the appeared menu choose “Copy”.</li>
  <li>Right-click anywhere on the empty layout and from the appeared menu choose “Paste”.</li>
  <li>When we have two copies of the same widget on both layouts, let’s delete the one on the main layout by right-clicking it and choosing “Delete” in the appeared menu.
In the opened dialog confirmation window click “Yes” and the widget will be deleted.</li>
  <li>Adjust widgets’ size by dragging their edges.</li>
</ol>

<div id="0">
  <div itemscope="" itemtype="http://schema.org/ImageGallery" class="images-gallery" style="justify-content: start;">
    <figure itemprop="associatedMedia" itemscope="" itemtype="http://schema.org/ImageObject" style="max-width: min(225px, 100%);
                    max-height: min(225px, 100%);" class="list-item">
<a href="/images/user-guide/ui/widgets/actions/settings/mob-layout-2.png" onclick="return false;" itemprop="contentUrl"> <img src="/images/user-guide/ui/widgets/actions/settings/mob-layout-2-preview.png" itemprop="thumbnail" alt="image" style="max-width: min(225px, 100%);
                                max-height: min(225px, 100%);" /> </a>       <figcaption itemprop="caption description" style="display: none"></figcaption>
    </figure>
    <figure itemprop="associatedMedia" itemscope="" itemtype="http://schema.org/ImageObject" style="max-width: min(225px, 100%);
                    max-height: min(225px, 100%);" class="list-item">
<a href="/images/user-guide/ui/widgets/actions/settings/mob-layout-3.png" onclick="return false;" itemprop="contentUrl"> <img src="/images/user-guide/ui/widgets/actions/settings/mob-layout-3-preview.png" itemprop="thumbnail" alt="image" style="max-width: min(225px, 100%);
                                max-height: min(225px, 100%);" /> </a>       <figcaption itemprop="caption description" style="display: none"></figcaption>
    </figure>
    <figure itemprop="associatedMedia" itemscope="" itemtype="http://schema.org/ImageObject" style="max-width: min(225px, 100%);
                    max-height: min(225px, 100%);" class="list-item">
<a href="/images/user-guide/ui/widgets/actions/settings/mob-layout-4.png" onclick="return false;" itemprop="contentUrl"> <img src="/images/user-guide/ui/widgets/actions/settings/mob-layout-4-preview.png" itemprop="thumbnail" alt="image" style="max-width: min(225px, 100%);
                                max-height: min(225px, 100%);" /> </a>       <figcaption itemprop="caption description" style="display: none"></figcaption>
    </figure>
    <figure itemprop="associatedMedia" itemscope="" itemtype="http://schema.org/ImageObject" style="max-width: min(225px, 100%);
                    max-height: min(225px, 100%);" class="list-item">
<a href="/images/user-guide/ui/widgets/actions/settings/mob-layout-5.png" onclick="return false;" itemprop="contentUrl"> <img src="/images/user-guide/ui/widgets/actions/settings/mob-layout-5-preview.png" itemprop="thumbnail" alt="image" style="max-width: min(225px, 100%);
                                max-height: min(225px, 100%);" /> </a>       <figcaption itemprop="caption description" style="display: none"></figcaption>
    </figure>
    <figure itemprop="associatedMedia" itemscope="" itemtype="http://schema.org/ImageObject" style="max-width: min(225px, 100%);
                    max-height: min(225px, 100%);" class="list-item">
<a href="/images/user-guide/ui/widgets/actions/settings/mob-layout-6.png" onclick="return false;" itemprop="contentUrl"> <img src="/images/user-guide/ui/widgets/actions/settings/mob-layout-6-preview.png" itemprop="thumbnail" alt="image" style="max-width: min(225px, 100%);
                                max-height: min(225px, 100%);" /> </a>       <figcaption itemprop="caption description" style="display: none"></figcaption>
    </figure>
  </div>
</div>

<script>
    window.addEventListener("load", function() {
        window.removeEventListener("load", arguments.callee, false);

        if(!document.getElementsByClassName('pswp').length){
            document.body.insertAdjacentHTML('beforeend',
                '<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">\n' +
                '        <div class="pswp__bg"></div>\n' +
                '        <div class="pswp__scroll-wrap">\n' +
                '            <div class="pswp__container">\n' +
                '                <div class="pswp__item"></div>\n' +
                '                <div class="pswp__item"></div>\n' +
                '                <div class="pswp__item"></div>\n' +
                '            </div>\n' +
                '\n' +
                '            <div class="pswp__ui pswp__ui--hidden">\n' +
                '\n' +
                '                <div class="pswp__top-bar">\n' +
                '                    <div class="pswp__counter"></div>\n' +
                '\n' +
                '                    <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>\n' +
                '\n' +
                '                    <button class="pswp__button pswp__button--share" title="Share"></button>\n' +
                '\n' +
                '                    <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>\n' +
                '\n' +
                '                    <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>\n' +
                '\n' +
                '                    <div class="pswp__preloader">\n' +
                '                        <div class="pswp__preloader__icn">\n' +
                '                            <div class="pswp__preloader__cut">\n' +
                '                                <div class="pswp__preloader__donut"></div>\n' +
                '                            </div>\n' +
                '                        </div>\n' +
                '                    </div>\n' +
                '                </div>\n' +
                '                <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">\n' +
                '                    <div class="pswp__share-tooltip"></div>\n' +
                '                </div>\n' +
                '                <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">\n' +
                '                </button>\n' +
                '                <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">\n' +
                '                </button>\n' +
                '                <div class="pswp__caption">\n' +
                '                    <div class="pswp__caption__center"></div>\n' +
                '                </div>\n' +
                '            </div>\n' +
                '        </div>\n' +
                '    </div>'
            );
        }

        var container = document.getElementById('0');

        var initPhotoSwipeFromDOM = function(gallerySelector) {
            var parseThumbnailElements = function(el) {
                var thumbElements = el.childNodes,
                    numNodes = thumbElements.length,
                    items = [],
                    figureEl,
                    linkEl,
                    size,
                    item;

                for(var i = 0; i < numNodes; i++) {

                    figureEl = thumbElements[i];
                    if(figureEl.nodeType !== 1) {
                        continue;
                    }
                    linkEl = figureEl.children[0];
                    size = linkEl.children[0];
                    item = {
                        src: linkEl.getAttribute('href'),
                        w: 2500,
                        h: 0,
                        sizeLoaded: false
                    };

                    if(figureEl.children.length > 1) {
                        item.title = figureEl.children[1].innerHTML;
                    }
                    if(linkEl.children.length > 0) {
                        item.msrc = linkEl.children[0].getAttribute('src');
                    }
                    if(item.msrc === item.src){
                        item.w = parseInt(size.naturalWidth, 10);
                        item.h = parseInt(size.naturalHeight, 10);
                    }

                    item.el = figureEl;
                    items.push(item);
                }
                return items;
            };

            var closest = function closest(el, fn) {
                return el && ( fn(el) ? el : closest(el.parentNode, fn) );
            };

            var onThumbnailsClick = function(e) {
                e = e || window.event;
                e.preventDefault ? e.preventDefault() : e.returnValue = false;

                var eTarget = e.target || e.srcElement;

                var clickedListItem = closest(eTarget, function(el) {
                    return (el.tagName && el.tagName.toUpperCase() === 'FIGURE');
                });

                if(!clickedListItem) {
                    return;
                }

                var clickedGallery = clickedListItem.parentNode,
                    childNodes = clickedListItem.parentNode.childNodes,
                    numChildNodes = childNodes.length,
                    nodeIndex = 0,
                    index;

                for (var i = 0; i < numChildNodes; i++) {
                    if(childNodes[i].nodeType !== 1) {
                        continue;
                    }

                    if(childNodes[i] === clickedListItem) {
                        index = nodeIndex;
                        break;
                    }
                    nodeIndex++;
                }

                if(index >= 0) {
                    openPhotoSwipe( index, clickedGallery );
                }
                return false;
            };

            var photoswipeParseHash = function() {
                var hash = window.location.hash.substring(1),
                    params = {};

                if(hash.length < 5) {
                    return params;
                }

                var vars = hash.split('&');
                for (var i = 0; i < vars.length; i++) {
                    if(!vars[i]) {
                        continue;
                    }
                    var pair = vars[i].split('=');
                    if(pair.length < 2) {
                        continue;
                    }
                    params[pair[0]] = pair[1];
                }

                if(params.gid) {
                    params.gid = parseInt(params.gid, 10);
                }

                return params;
            };

            var openPhotoSwipe = function(index, galleryElement, disableAnimation, fromURL) {
                var pswpElement = document.querySelectorAll('.pswp')[0],
                    gallery,
                    options,
                    items;

                items = parseThumbnailElements(galleryElement);

                options = {
                    galleryUID: galleryElement.getAttribute('data-pswp-uid'),
                    getThumbBoundsFn: function(index) {
                        var thumbnail = items[index].el.getElementsByTagName('img')[0], // find thumbnail
                            pageYScroll = window.pageYOffset || document.documentElement.scrollTop,
                            rect = thumbnail.getBoundingClientRect();
                        return {x:rect.left, y:rect.top + pageYScroll, w:rect.width};
                    },
                    bgOpacity: 0.8,
                    closeOnScroll: false,
                    shareEl: false,
                    fullscreenEl: false,
                    zoomEl: true,
                    history: false,
                    loop: false
                };

                if(fromURL) {
                    if(options.galleryPIDs) {
                        for(var j = 0; j < items.length; j++) {
                            if(items[j].pid == index) {
                                options.index = j;
                                break;
                            }
                        }
                    } else {
                        options.index = parseInt(index, 10) - 1;
                    }
                } else {
                    options.index = parseInt(index, 10);
                }

                if( isNaN(options.index) ) {
                    return;
                }

                if(disableAnimation) {
                    options.showAnimationDuration = 0;
                }

                gallery = new PhotoSwipe( pswpElement, PhotoSwipeUI_Default, items, options);

                gallery.listen('gettingData', function(index, item) {
                    if (!item.sizeLoaded) {
                        item.sizeLoaded = true;
                        var img = new Image();
                        img.onload = function() {
                            item.w = this.width;
                            item.h = this.height;
                            gallery.updateSize(true);
                        }
                        img.src = item.src;
                    }
                });

                gallery.init();

                var buttonLeft = pswpElement.getElementsByClassName('pswp__button--arrow--left')[0];
                var buttonRight = pswpElement.getElementsByClassName('pswp__button--arrow--right')[0];

                buttonLeft.hidden = gallery.getCurrentIndex() === 0;
                buttonRight.hidden = gallery.getCurrentIndex() + 1 === gallery.items.length;

                gallery.listen('beforeChange', function() {
                        buttonLeft.hidden = gallery.getCurrentIndex() === 0;
                        buttonRight.hidden = gallery.getCurrentIndex() + 1 === gallery.items.length;
                    }
                );
            };

            var galleryElements = container.querySelectorAll( gallerySelector );

            for(var i = 0, l = galleryElements.length; i < l; i++) {
                galleryElements[i].setAttribute('data-pswp-uid', i+1);
                galleryElements[i].onclick = onThumbnailsClick;
            }

            var hashData = photoswipeParseHash();
            if(hashData.pid && hashData.gid) {
                openPhotoSwipe( hashData.pid ,  galleryElements[ hashData.gid - 1 ], true, true );
            }
        };

        initPhotoSwipeFromDOM('.images-gallery');
    }, false)
</script>

<p>Now, to activate an action that allows seeing details of one widget on another one with the one button click and no more movements, you need:</p>

<ol>
  <li>Enter Edit mode of the widget on the main layout by clicking the “Pencil” icon on the right top of the widget.</li>
  <li>Go to the “Actions” cell and click the “+” icon to add a new action.</li>
  <li>Choose the desired action source, in the example, it is going to be the Action cell button.
Give a name for the action, it is going to be visible in the mobile mode. Select an icon representing a button (if needed) by clicking an icon image and choosing from the variety of icons.</li>
  <li>Select an action type “Update current dashboard state”. Select a target dashboard state - it should be the dashboard state where layouts were created.</li>
  <li>Finally, tick a checkbox “Open right dashboard layout (mobile view)”.</li>
  <li>Click “Save” at the right bottom of the dialog window to apply changes.</li>
  <li>In the Dashboard Edit mode, click the orange tick-mark at the right bottom of the page.</li>
</ol>

<p>Now in the mobile mode, by clicking an action button, we will be directly transitioned to the needed widget where we can see the details of the entities of the main widget.</p>

<div id="0">
  <div itemscope="" itemtype="http://schema.org/ImageGallery" class="images-gallery" style="justify-content: start;">
    <figure itemprop="associatedMedia" itemscope="" itemtype="http://schema.org/ImageObject" style="max-width: min(225px, 100%);
                    max-height: min(225px, 100%);" class="list-item">
<a href="/images/user-guide/ui/widgets/actions/settings/mob-layout-7.png" onclick="return false;" itemprop="contentUrl"> <img src="/images/user-guide/ui/widgets/actions/settings/mob-layout-7-preview.png" itemprop="thumbnail" alt="image" style="max-width: min(225px, 100%);
                                max-height: min(225px, 100%);" /> </a>       <figcaption itemprop="caption description" style="display: none"></figcaption>
    </figure>
    <figure itemprop="associatedMedia" itemscope="" itemtype="http://schema.org/ImageObject" style="max-width: min(225px, 100%);
                    max-height: min(225px, 100%);" class="list-item">
<a href="/images/user-guide/ui/widgets/actions/settings/mob-layout-8.png" onclick="return false;" itemprop="contentUrl"> <img src="/images/user-guide/ui/widgets/actions/settings/mob-layout-8-preview.png" itemprop="thumbnail" alt="image" style="max-width: min(225px, 100%);
                                max-height: min(225px, 100%);" /> </a>       <figcaption itemprop="caption description" style="display: none"></figcaption>
    </figure>
    <figure itemprop="associatedMedia" itemscope="" itemtype="http://schema.org/ImageObject" style="max-width: min(225px, 100%);
                    max-height: min(225px, 100%);" class="list-item">
<a href="/images/user-guide/ui/widgets/actions/settings/mob-layout-9.png" onclick="return false;" itemprop="contentUrl"> <img src="/images/user-guide/ui/widgets/actions/settings/mob-layout-9-preview.png" itemprop="thumbnail" alt="image" style="max-width: min(225px, 100%);
                                max-height: min(225px, 100%);" /> </a>       <figcaption itemprop="caption description" style="display: none"></figcaption>
    </figure>
    <figure itemprop="associatedMedia" itemscope="" itemtype="http://schema.org/ImageObject" style="max-width: min(225px, 100%);
                    max-height: min(225px, 100%);" class="list-item">
<a href="/images/user-guide/ui/widgets/actions/settings/mob-layout-10.png" onclick="return false;" itemprop="contentUrl"> <img src="/images/user-guide/ui/widgets/actions/settings/mob-layout-10-preview.png" itemprop="thumbnail" alt="image" style="max-width: min(225px, 100%);
                                max-height: min(225px, 100%);" /> </a>       <figcaption itemprop="caption description" style="display: none"></figcaption>
    </figure>
    <figure itemprop="associatedMedia" itemscope="" itemtype="http://schema.org/ImageObject" style="max-width: min(225px, 100%);
                    max-height: min(225px, 100%);" class="list-item">
<a href="/images/user-guide/ui/widgets/actions/settings/mob-layout-11.png" onclick="return false;" itemprop="contentUrl"> <img src="/images/user-guide/ui/widgets/actions/settings/mob-layout-11-preview.png" itemprop="thumbnail" alt="image" style="max-width: min(225px, 100%);
                                max-height: min(225px, 100%);" /> </a>       <figcaption itemprop="caption description" style="display: none"></figcaption>
    </figure>
  </div>
</div>

<script>
    window.addEventListener("load", function() {
        window.removeEventListener("load", arguments.callee, false);

        if(!document.getElementsByClassName('pswp').length){
            document.body.insertAdjacentHTML('beforeend',
                '<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">\n' +
                '        <div class="pswp__bg"></div>\n' +
                '        <div class="pswp__scroll-wrap">\n' +
                '            <div class="pswp__container">\n' +
                '                <div class="pswp__item"></div>\n' +
                '                <div class="pswp__item"></div>\n' +
                '                <div class="pswp__item"></div>\n' +
                '            </div>\n' +
                '\n' +
                '            <div class="pswp__ui pswp__ui--hidden">\n' +
                '\n' +
                '                <div class="pswp__top-bar">\n' +
                '                    <div class="pswp__counter"></div>\n' +
                '\n' +
                '                    <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>\n' +
                '\n' +
                '                    <button class="pswp__button pswp__button--share" title="Share"></button>\n' +
                '\n' +
                '                    <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>\n' +
                '\n' +
                '                    <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>\n' +
                '\n' +
                '                    <div class="pswp__preloader">\n' +
                '                        <div class="pswp__preloader__icn">\n' +
                '                            <div class="pswp__preloader__cut">\n' +
                '                                <div class="pswp__preloader__donut"></div>\n' +
                '                            </div>\n' +
                '                        </div>\n' +
                '                    </div>\n' +
                '                </div>\n' +
                '                <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">\n' +
                '                    <div class="pswp__share-tooltip"></div>\n' +
                '                </div>\n' +
                '                <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">\n' +
                '                </button>\n' +
                '                <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">\n' +
                '                </button>\n' +
                '                <div class="pswp__caption">\n' +
                '                    <div class="pswp__caption__center"></div>\n' +
                '                </div>\n' +
                '            </div>\n' +
                '        </div>\n' +
                '    </div>'
            );
        }

        var container = document.getElementById('0');

        var initPhotoSwipeFromDOM = function(gallerySelector) {
            var parseThumbnailElements = function(el) {
                var thumbElements = el.childNodes,
                    numNodes = thumbElements.length,
                    items = [],
                    figureEl,
                    linkEl,
                    size,
                    item;

                for(var i = 0; i < numNodes; i++) {

                    figureEl = thumbElements[i];
                    if(figureEl.nodeType !== 1) {
                        continue;
                    }
                    linkEl = figureEl.children[0];
                    size = linkEl.children[0];
                    item = {
                        src: linkEl.getAttribute('href'),
                        w: 2500,
                        h: 0,
                        sizeLoaded: false
                    };

                    if(figureEl.children.length > 1) {
                        item.title = figureEl.children[1].innerHTML;
                    }
                    if(linkEl.children.length > 0) {
                        item.msrc = linkEl.children[0].getAttribute('src');
                    }
                    if(item.msrc === item.src){
                        item.w = parseInt(size.naturalWidth, 10);
                        item.h = parseInt(size.naturalHeight, 10);
                    }

                    item.el = figureEl;
                    items.push(item);
                }
                return items;
            };

            var closest = function closest(el, fn) {
                return el && ( fn(el) ? el : closest(el.parentNode, fn) );
            };

            var onThumbnailsClick = function(e) {
                e = e || window.event;
                e.preventDefault ? e.preventDefault() : e.returnValue = false;

                var eTarget = e.target || e.srcElement;

                var clickedListItem = closest(eTarget, function(el) {
                    return (el.tagName && el.tagName.toUpperCase() === 'FIGURE');
                });

                if(!clickedListItem) {
                    return;
                }

                var clickedGallery = clickedListItem.parentNode,
                    childNodes = clickedListItem.parentNode.childNodes,
                    numChildNodes = childNodes.length,
                    nodeIndex = 0,
                    index;

                for (var i = 0; i < numChildNodes; i++) {
                    if(childNodes[i].nodeType !== 1) {
                        continue;
                    }

                    if(childNodes[i] === clickedListItem) {
                        index = nodeIndex;
                        break;
                    }
                    nodeIndex++;
                }

                if(index >= 0) {
                    openPhotoSwipe( index, clickedGallery );
                }
                return false;
            };

            var photoswipeParseHash = function() {
                var hash = window.location.hash.substring(1),
                    params = {};

                if(hash.length < 5) {
                    return params;
                }

                var vars = hash.split('&');
                for (var i = 0; i < vars.length; i++) {
                    if(!vars[i]) {
                        continue;
                    }
                    var pair = vars[i].split('=');
                    if(pair.length < 2) {
                        continue;
                    }
                    params[pair[0]] = pair[1];
                }

                if(params.gid) {
                    params.gid = parseInt(params.gid, 10);
                }

                return params;
            };

            var openPhotoSwipe = function(index, galleryElement, disableAnimation, fromURL) {
                var pswpElement = document.querySelectorAll('.pswp')[0],
                    gallery,
                    options,
                    items;

                items = parseThumbnailElements(galleryElement);

                options = {
                    galleryUID: galleryElement.getAttribute('data-pswp-uid'),
                    getThumbBoundsFn: function(index) {
                        var thumbnail = items[index].el.getElementsByTagName('img')[0], // find thumbnail
                            pageYScroll = window.pageYOffset || document.documentElement.scrollTop,
                            rect = thumbnail.getBoundingClientRect();
                        return {x:rect.left, y:rect.top + pageYScroll, w:rect.width};
                    },
                    bgOpacity: 0.8,
                    closeOnScroll: false,
                    shareEl: false,
                    fullscreenEl: false,
                    zoomEl: true,
                    history: false,
                    loop: false
                };

                if(fromURL) {
                    if(options.galleryPIDs) {
                        for(var j = 0; j < items.length; j++) {
                            if(items[j].pid == index) {
                                options.index = j;
                                break;
                            }
                        }
                    } else {
                        options.index = parseInt(index, 10) - 1;
                    }
                } else {
                    options.index = parseInt(index, 10);
                }

                if( isNaN(options.index) ) {
                    return;
                }

                if(disableAnimation) {
                    options.showAnimationDuration = 0;
                }

                gallery = new PhotoSwipe( pswpElement, PhotoSwipeUI_Default, items, options);

                gallery.listen('gettingData', function(index, item) {
                    if (!item.sizeLoaded) {
                        item.sizeLoaded = true;
                        var img = new Image();
                        img.onload = function() {
                            item.w = this.width;
                            item.h = this.height;
                            gallery.updateSize(true);
                        }
                        img.src = item.src;
                    }
                });

                gallery.init();

                var buttonLeft = pswpElement.getElementsByClassName('pswp__button--arrow--left')[0];
                var buttonRight = pswpElement.getElementsByClassName('pswp__button--arrow--right')[0];

                buttonLeft.hidden = gallery.getCurrentIndex() === 0;
                buttonRight.hidden = gallery.getCurrentIndex() + 1 === gallery.items.length;

                gallery.listen('beforeChange', function() {
                        buttonLeft.hidden = gallery.getCurrentIndex() === 0;
                        buttonRight.hidden = gallery.getCurrentIndex() + 1 === gallery.items.length;
                    }
                );
            };

            var galleryElements = container.querySelectorAll( gallerySelector );

            for(var i = 0, l = galleryElements.length; i < l; i++) {
                galleryElements[i].setAttribute('data-pswp-uid', i+1);
                galleryElements[i].onclick = onThumbnailsClick;
            }

            var hashData = photoswipeParseHash();
            if(hashData.pid && hashData.gid) {
                openPhotoSwipe( hashData.pid ,  galleryElements[ hashData.gid - 1 ], true, true );
            }
        };

        initPhotoSwipeFromDOM('.images-gallery');
    }, false)
</script>

<h4 id="open-in-a-separate-dialog">Open in a separate dialog</h4>

<p>There are times when it is impractical to move to a separate dashboard state to view the details of a widget, but you just would like to open it on the same dashboard page. 
For these situations, there is an <em>Open in a separate dialog</em> feature that allows opening another <a href="/docs/user-guide/dashboards/#states">state</a> on the same page using a configured action.<br />
To open a state in a separate dialog window on the dashboard you are in, you should:</p>

<ol>
  <li>Enter the Dashboard’s Edit mode by clicking a “Pencil” icon at the right bottom of the page.</li>
  <li>First we need to add a new state, so click the “Manage dashboard states” button on the left top of the dashboard.</li>
  <li>In the opened window, click the “+” icon to add a new state. What is a state and how to configure it, please, learn <a href="/docs/user-guide/dashboards/#states">here</a>.</li>
  <li>After adding a state, click the “Save” button at the right bottom of the “Manage dashboard states” window.</li>
  <li>Now, enter widget Edit mode by clicking the “Pencil” icon on the right top of the widget.</li>
  <li>Go to the “Actions” cell and click the “+” icon to add a new action.</li>
  <li>Choose the desired action source, in the example, it is going to be the Action cell button.
Give a name for the action. Select an icon representing a button by clicking an icon image and choosing from the variety of icons.</li>
  <li>From the drop-down menu select a “Navigate to new dashboard” action type, and a target state, the one that was created in step 3.</li>
  <li>Tick the check box “Open in separate dialog” and give a title to a dialog.</li>
  <li>By default, the checkbox “Hide dashboard toolbar in dialog” is ticked. If you need to see a toolbar in the dialog window, you should uncheck it. 
The toolbar displays entities, time window, dashboard export button, and expand to a fullscreen button.</li>
  <li>It is optional to adjust a dialog width and height in percents. Width is relative to viewport height, and height is relative to width correspondingly.</li>
  <li>When the action has been configured, click on the “Add” button at the right bottom of the “Add action” window.</li>
  <li>When the action has been added, double-check the action source, icon, and action type. If everything is correct, click the orange tick mark on the right top of the page.</li>
</ol>

<div id="0">
  <div itemscope="" itemtype="http://schema.org/ImageGallery" class="images-gallery" style="justify-content: start;">
    <figure itemprop="associatedMedia" itemscope="" itemtype="http://schema.org/ImageObject" style="max-width: min(225px, 100%);
                    max-height: min(225px, 100%);" class="list-item">
<a href="/images/user-guide/ui/widgets/actions/settings/dialog-window.png" onclick="return false;" itemprop="contentUrl"> <img src="/images/user-guide/ui/widgets/actions/settings/dialog-window-preview.png" itemprop="thumbnail" alt="image" style="max-width: min(225px, 100%);
                                max-height: min(225px, 100%);" /> </a>       <figcaption itemprop="caption description" style="display: none"></figcaption>
    </figure>
    <figure itemprop="associatedMedia" itemscope="" itemtype="http://schema.org/ImageObject" style="max-width: min(225px, 100%);
                    max-height: min(225px, 100%);" class="list-item">
<a href="/images/user-guide/ui/widgets/actions/settings/dialog-window-1.png" onclick="return false;" itemprop="contentUrl"> <img src="/images/user-guide/ui/widgets/actions/settings/dialog-window-1-preview.png" itemprop="thumbnail" alt="image" style="max-width: min(225px, 100%);
                                max-height: min(225px, 100%);" /> </a>       <figcaption itemprop="caption description" style="display: none"></figcaption>
    </figure>
    <figure itemprop="associatedMedia" itemscope="" itemtype="http://schema.org/ImageObject" style="max-width: min(225px, 100%);
                    max-height: min(225px, 100%);" class="list-item">
<a href="/images/user-guide/ui/widgets/actions/settings/dialog-window-2.png" onclick="return false;" itemprop="contentUrl"> <img src="/images/user-guide/ui/widgets/actions/settings/dialog-window-2-preview.png" itemprop="thumbnail" alt="image" style="max-width: min(225px, 100%);
                                max-height: min(225px, 100%);" /> </a>       <figcaption itemprop="caption description" style="display: none"></figcaption>
    </figure>
    <figure itemprop="associatedMedia" itemscope="" itemtype="http://schema.org/ImageObject" style="max-width: min(225px, 100%);
                    max-height: min(225px, 100%);" class="list-item">
<a href="/images/user-guide/ui/widgets/actions/settings/dialog-window-3.png" onclick="return false;" itemprop="contentUrl"> <img src="/images/user-guide/ui/widgets/actions/settings/dialog-window-3-preview.png" itemprop="thumbnail" alt="image" style="max-width: min(225px, 100%);
                                max-height: min(225px, 100%);" /> </a>       <figcaption itemprop="caption description" style="display: none"></figcaption>
    </figure>
    <figure itemprop="associatedMedia" itemscope="" itemtype="http://schema.org/ImageObject" style="max-width: min(225px, 100%);
                    max-height: min(225px, 100%);" class="list-item">
<a href="/images/user-guide/ui/widgets/actions/settings/dialog-window-3.5.png" onclick="return false;" itemprop="contentUrl"> <img src="/images/user-guide/ui/widgets/actions/settings/dialog-window-3.5-preview.png" itemprop="thumbnail" alt="image" style="max-width: min(225px, 100%);
                                max-height: min(225px, 100%);" /> </a>       <figcaption itemprop="caption description" style="display: none"></figcaption>
    </figure>
    <figure itemprop="associatedMedia" itemscope="" itemtype="http://schema.org/ImageObject" style="max-width: min(225px, 100%);
                    max-height: min(225px, 100%);" class="list-item">
<a href="/images/user-guide/ui/widgets/actions/settings/dialog-window-4.png" onclick="return false;" itemprop="contentUrl"> <img src="/images/user-guide/ui/widgets/actions/settings/dialog-window-4-preview.png" itemprop="thumbnail" alt="image" style="max-width: min(225px, 100%);
                                max-height: min(225px, 100%);" /> </a>       <figcaption itemprop="caption description" style="display: none"></figcaption>
    </figure>
  </div>
</div>

<script>
    window.addEventListener("load", function() {
        window.removeEventListener("load", arguments.callee, false);

        if(!document.getElementsByClassName('pswp').length){
            document.body.insertAdjacentHTML('beforeend',
                '<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">\n' +
                '        <div class="pswp__bg"></div>\n' +
                '        <div class="pswp__scroll-wrap">\n' +
                '            <div class="pswp__container">\n' +
                '                <div class="pswp__item"></div>\n' +
                '                <div class="pswp__item"></div>\n' +
                '                <div class="pswp__item"></div>\n' +
                '            </div>\n' +
                '\n' +
                '            <div class="pswp__ui pswp__ui--hidden">\n' +
                '\n' +
                '                <div class="pswp__top-bar">\n' +
                '                    <div class="pswp__counter"></div>\n' +
                '\n' +
                '                    <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>\n' +
                '\n' +
                '                    <button class="pswp__button pswp__button--share" title="Share"></button>\n' +
                '\n' +
                '                    <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>\n' +
                '\n' +
                '                    <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>\n' +
                '\n' +
                '                    <div class="pswp__preloader">\n' +
                '                        <div class="pswp__preloader__icn">\n' +
                '                            <div class="pswp__preloader__cut">\n' +
                '                                <div class="pswp__preloader__donut"></div>\n' +
                '                            </div>\n' +
                '                        </div>\n' +
                '                    </div>\n' +
                '                </div>\n' +
                '                <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">\n' +
                '                    <div class="pswp__share-tooltip"></div>\n' +
                '                </div>\n' +
                '                <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">\n' +
                '                </button>\n' +
                '                <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">\n' +
                '                </button>\n' +
                '                <div class="pswp__caption">\n' +
                '                    <div class="pswp__caption__center"></div>\n' +
                '                </div>\n' +
                '            </div>\n' +
                '        </div>\n' +
                '    </div>'
            );
        }

        var container = document.getElementById('0');

        var initPhotoSwipeFromDOM = function(gallerySelector) {
            var parseThumbnailElements = function(el) {
                var thumbElements = el.childNodes,
                    numNodes = thumbElements.length,
                    items = [],
                    figureEl,
                    linkEl,
                    size,
                    item;

                for(var i = 0; i < numNodes; i++) {

                    figureEl = thumbElements[i];
                    if(figureEl.nodeType !== 1) {
                        continue;
                    }
                    linkEl = figureEl.children[0];
                    size = linkEl.children[0];
                    item = {
                        src: linkEl.getAttribute('href'),
                        w: 2500,
                        h: 0,
                        sizeLoaded: false
                    };

                    if(figureEl.children.length > 1) {
                        item.title = figureEl.children[1].innerHTML;
                    }
                    if(linkEl.children.length > 0) {
                        item.msrc = linkEl.children[0].getAttribute('src');
                    }
                    if(item.msrc === item.src){
                        item.w = parseInt(size.naturalWidth, 10);
                        item.h = parseInt(size.naturalHeight, 10);
                    }

                    item.el = figureEl;
                    items.push(item);
                }
                return items;
            };

            var closest = function closest(el, fn) {
                return el && ( fn(el) ? el : closest(el.parentNode, fn) );
            };

            var onThumbnailsClick = function(e) {
                e = e || window.event;
                e.preventDefault ? e.preventDefault() : e.returnValue = false;

                var eTarget = e.target || e.srcElement;

                var clickedListItem = closest(eTarget, function(el) {
                    return (el.tagName && el.tagName.toUpperCase() === 'FIGURE');
                });

                if(!clickedListItem) {
                    return;
                }

                var clickedGallery = clickedListItem.parentNode,
                    childNodes = clickedListItem.parentNode.childNodes,
                    numChildNodes = childNodes.length,
                    nodeIndex = 0,
                    index;

                for (var i = 0; i < numChildNodes; i++) {
                    if(childNodes[i].nodeType !== 1) {
                        continue;
                    }

                    if(childNodes[i] === clickedListItem) {
                        index = nodeIndex;
                        break;
                    }
                    nodeIndex++;
                }

                if(index >= 0) {
                    openPhotoSwipe( index, clickedGallery );
                }
                return false;
            };

            var photoswipeParseHash = function() {
                var hash = window.location.hash.substring(1),
                    params = {};

                if(hash.length < 5) {
                    return params;
                }

                var vars = hash.split('&');
                for (var i = 0; i < vars.length; i++) {
                    if(!vars[i]) {
                        continue;
                    }
                    var pair = vars[i].split('=');
                    if(pair.length < 2) {
                        continue;
                    }
                    params[pair[0]] = pair[1];
                }

                if(params.gid) {
                    params.gid = parseInt(params.gid, 10);
                }

                return params;
            };

            var openPhotoSwipe = function(index, galleryElement, disableAnimation, fromURL) {
                var pswpElement = document.querySelectorAll('.pswp')[0],
                    gallery,
                    options,
                    items;

                items = parseThumbnailElements(galleryElement);

                options = {
                    galleryUID: galleryElement.getAttribute('data-pswp-uid'),
                    getThumbBoundsFn: function(index) {
                        var thumbnail = items[index].el.getElementsByTagName('img')[0], // find thumbnail
                            pageYScroll = window.pageYOffset || document.documentElement.scrollTop,
                            rect = thumbnail.getBoundingClientRect();
                        return {x:rect.left, y:rect.top + pageYScroll, w:rect.width};
                    },
                    bgOpacity: 0.8,
                    closeOnScroll: false,
                    shareEl: false,
                    fullscreenEl: false,
                    zoomEl: true,
                    history: false,
                    loop: false
                };

                if(fromURL) {
                    if(options.galleryPIDs) {
                        for(var j = 0; j < items.length; j++) {
                            if(items[j].pid == index) {
                                options.index = j;
                                break;
                            }
                        }
                    } else {
                        options.index = parseInt(index, 10) - 1;
                    }
                } else {
                    options.index = parseInt(index, 10);
                }

                if( isNaN(options.index) ) {
                    return;
                }

                if(disableAnimation) {
                    options.showAnimationDuration = 0;
                }

                gallery = new PhotoSwipe( pswpElement, PhotoSwipeUI_Default, items, options);

                gallery.listen('gettingData', function(index, item) {
                    if (!item.sizeLoaded) {
                        item.sizeLoaded = true;
                        var img = new Image();
                        img.onload = function() {
                            item.w = this.width;
                            item.h = this.height;
                            gallery.updateSize(true);
                        }
                        img.src = item.src;
                    }
                });

                gallery.init();

                var buttonLeft = pswpElement.getElementsByClassName('pswp__button--arrow--left')[0];
                var buttonRight = pswpElement.getElementsByClassName('pswp__button--arrow--right')[0];

                buttonLeft.hidden = gallery.getCurrentIndex() === 0;
                buttonRight.hidden = gallery.getCurrentIndex() + 1 === gallery.items.length;

                gallery.listen('beforeChange', function() {
                        buttonLeft.hidden = gallery.getCurrentIndex() === 0;
                        buttonRight.hidden = gallery.getCurrentIndex() + 1 === gallery.items.length;
                    }
                );
            };

            var galleryElements = container.querySelectorAll( gallerySelector );

            for(var i = 0, l = galleryElements.length; i < l; i++) {
                galleryElements[i].setAttribute('data-pswp-uid', i+1);
                galleryElements[i].onclick = onThumbnailsClick;
            }

            var hashData = photoswipeParseHash();
            if(hashData.pid && hashData.gid) {
                openPhotoSwipe( hashData.pid ,  galleryElements[ hashData.gid - 1 ], true, true );
            }
        };

        initPhotoSwipeFromDOM('.images-gallery');
    }, false)
</script>

<p>Now it is time to add a widget to another state and execute an action. To do it, you should:</p>
<ol>
  <li>Go to a newly created yet empty state and click “Add new widget” in the middle of the screen.</li>
  <li>From the drop-down menu “Current bundle”, select the desired widget, in our example, it is going to be map widget “OpenStreetMap”.</li>
  <li>Add data sources and click “Add”.</li>
  <li>A widget has been added on the dashboard state, drag its edges to adjust the size.</li>
  <li>When adjusted, click the orange tick at the left bottom of the screen to save applied changes.</li>
</ol>

<p>To perform an action and open a dialog window with the state, click a cell button opposite entity names.</p>

<div id="0">
  <div itemscope="" itemtype="http://schema.org/ImageGallery" class="images-gallery" style="justify-content: start;">
    <figure itemprop="associatedMedia" itemscope="" itemtype="http://schema.org/ImageObject" style="max-width: min(225px, 100%);
                    max-height: min(225px, 100%);" class="list-item">
<a href="/images/user-guide/ui/widgets/actions/settings/dialog-window-5.png" onclick="return false;" itemprop="contentUrl"> <img src="/images/user-guide/ui/widgets/actions/settings/dialog-window-5-preview.png" itemprop="thumbnail" alt="image" style="max-width: min(225px, 100%);
                                max-height: min(225px, 100%);" /> </a>       <figcaption itemprop="caption description" style="display: none"></figcaption>
    </figure>
    <figure itemprop="associatedMedia" itemscope="" itemtype="http://schema.org/ImageObject" style="max-width: min(225px, 100%);
                    max-height: min(225px, 100%);" class="list-item">
<a href="/images/user-guide/ui/widgets/actions/settings/dialog-window-6.png" onclick="return false;" itemprop="contentUrl"> <img src="/images/user-guide/ui/widgets/actions/settings/dialog-window-6-preview.png" itemprop="thumbnail" alt="image" style="max-width: min(225px, 100%);
                                max-height: min(225px, 100%);" /> </a>       <figcaption itemprop="caption description" style="display: none"></figcaption>
    </figure>
    <figure itemprop="associatedMedia" itemscope="" itemtype="http://schema.org/ImageObject" style="max-width: min(225px, 100%);
                    max-height: min(225px, 100%);" class="list-item">
<a href="/images/user-guide/ui/widgets/actions/settings/dialog-window-7.png" onclick="return false;" itemprop="contentUrl"> <img src="/images/user-guide/ui/widgets/actions/settings/dialog-window-7-preview.png" itemprop="thumbnail" alt="image" style="max-width: min(225px, 100%);
                                max-height: min(225px, 100%);" /> </a>       <figcaption itemprop="caption description" style="display: none"></figcaption>
    </figure>
    <figure itemprop="associatedMedia" itemscope="" itemtype="http://schema.org/ImageObject" style="max-width: min(225px, 100%);
                    max-height: min(225px, 100%);" class="list-item">
<a href="/images/user-guide/ui/widgets/actions/settings/dialog-window-8.png" onclick="return false;" itemprop="contentUrl"> <img src="/images/user-guide/ui/widgets/actions/settings/dialog-window-8-preview.png" itemprop="thumbnail" alt="image" style="max-width: min(225px, 100%);
                                max-height: min(225px, 100%);" /> </a>       <figcaption itemprop="caption description" style="display: none"></figcaption>
    </figure>
    <figure itemprop="associatedMedia" itemscope="" itemtype="http://schema.org/ImageObject" style="max-width: min(225px, 100%);
                    max-height: min(225px, 100%);" class="list-item">
<a href="/images/user-guide/ui/widgets/actions/settings/dialog-window-9.png" onclick="return false;" itemprop="contentUrl"> <img src="/images/user-guide/ui/widgets/actions/settings/dialog-window-9-preview.png" itemprop="thumbnail" alt="image" style="max-width: min(225px, 100%);
                                max-height: min(225px, 100%);" /> </a>       <figcaption itemprop="caption description" style="display: none"></figcaption>
    </figure>
    <figure itemprop="associatedMedia" itemscope="" itemtype="http://schema.org/ImageObject" style="max-width: min(225px, 100%);
                    max-height: min(225px, 100%);" class="list-item">
<a href="/images/user-guide/ui/widgets/actions/settings/dialog-window-10.png" onclick="return false;" itemprop="contentUrl"> <img src="/images/user-guide/ui/widgets/actions/settings/dialog-window-10-preview.png" itemprop="thumbnail" alt="image" style="max-width: min(225px, 100%);
                                max-height: min(225px, 100%);" /> </a>       <figcaption itemprop="caption description" style="display: none"></figcaption>
    </figure>
  </div>
</div>

<script>
    window.addEventListener("load", function() {
        window.removeEventListener("load", arguments.callee, false);

        if(!document.getElementsByClassName('pswp').length){
            document.body.insertAdjacentHTML('beforeend',
                '<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">\n' +
                '        <div class="pswp__bg"></div>\n' +
                '        <div class="pswp__scroll-wrap">\n' +
                '            <div class="pswp__container">\n' +
                '                <div class="pswp__item"></div>\n' +
                '                <div class="pswp__item"></div>\n' +
                '                <div class="pswp__item"></div>\n' +
                '            </div>\n' +
                '\n' +
                '            <div class="pswp__ui pswp__ui--hidden">\n' +
                '\n' +
                '                <div class="pswp__top-bar">\n' +
                '                    <div class="pswp__counter"></div>\n' +
                '\n' +
                '                    <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>\n' +
                '\n' +
                '                    <button class="pswp__button pswp__button--share" title="Share"></button>\n' +
                '\n' +
                '                    <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>\n' +
                '\n' +
                '                    <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>\n' +
                '\n' +
                '                    <div class="pswp__preloader">\n' +
                '                        <div class="pswp__preloader__icn">\n' +
                '                            <div class="pswp__preloader__cut">\n' +
                '                                <div class="pswp__preloader__donut"></div>\n' +
                '                            </div>\n' +
                '                        </div>\n' +
                '                    </div>\n' +
                '                </div>\n' +
                '                <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">\n' +
                '                    <div class="pswp__share-tooltip"></div>\n' +
                '                </div>\n' +
                '                <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">\n' +
                '                </button>\n' +
                '                <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">\n' +
                '                </button>\n' +
                '                <div class="pswp__caption">\n' +
                '                    <div class="pswp__caption__center"></div>\n' +
                '                </div>\n' +
                '            </div>\n' +
                '        </div>\n' +
                '    </div>'
            );
        }

        var container = document.getElementById('0');

        var initPhotoSwipeFromDOM = function(gallerySelector) {
            var parseThumbnailElements = function(el) {
                var thumbElements = el.childNodes,
                    numNodes = thumbElements.length,
                    items = [],
                    figureEl,
                    linkEl,
                    size,
                    item;

                for(var i = 0; i < numNodes; i++) {

                    figureEl = thumbElements[i];
                    if(figureEl.nodeType !== 1) {
                        continue;
                    }
                    linkEl = figureEl.children[0];
                    size = linkEl.children[0];
                    item = {
                        src: linkEl.getAttribute('href'),
                        w: 2500,
                        h: 0,
                        sizeLoaded: false
                    };

                    if(figureEl.children.length > 1) {
                        item.title = figureEl.children[1].innerHTML;
                    }
                    if(linkEl.children.length > 0) {
                        item.msrc = linkEl.children[0].getAttribute('src');
                    }
                    if(item.msrc === item.src){
                        item.w = parseInt(size.naturalWidth, 10);
                        item.h = parseInt(size.naturalHeight, 10);
                    }

                    item.el = figureEl;
                    items.push(item);
                }
                return items;
            };

            var closest = function closest(el, fn) {
                return el && ( fn(el) ? el : closest(el.parentNode, fn) );
            };

            var onThumbnailsClick = function(e) {
                e = e || window.event;
                e.preventDefault ? e.preventDefault() : e.returnValue = false;

                var eTarget = e.target || e.srcElement;

                var clickedListItem = closest(eTarget, function(el) {
                    return (el.tagName && el.tagName.toUpperCase() === 'FIGURE');
                });

                if(!clickedListItem) {
                    return;
                }

                var clickedGallery = clickedListItem.parentNode,
                    childNodes = clickedListItem.parentNode.childNodes,
                    numChildNodes = childNodes.length,
                    nodeIndex = 0,
                    index;

                for (var i = 0; i < numChildNodes; i++) {
                    if(childNodes[i].nodeType !== 1) {
                        continue;
                    }

                    if(childNodes[i] === clickedListItem) {
                        index = nodeIndex;
                        break;
                    }
                    nodeIndex++;
                }

                if(index >= 0) {
                    openPhotoSwipe( index, clickedGallery );
                }
                return false;
            };

            var photoswipeParseHash = function() {
                var hash = window.location.hash.substring(1),
                    params = {};

                if(hash.length < 5) {
                    return params;
                }

                var vars = hash.split('&');
                for (var i = 0; i < vars.length; i++) {
                    if(!vars[i]) {
                        continue;
                    }
                    var pair = vars[i].split('=');
                    if(pair.length < 2) {
                        continue;
                    }
                    params[pair[0]] = pair[1];
                }

                if(params.gid) {
                    params.gid = parseInt(params.gid, 10);
                }

                return params;
            };

            var openPhotoSwipe = function(index, galleryElement, disableAnimation, fromURL) {
                var pswpElement = document.querySelectorAll('.pswp')[0],
                    gallery,
                    options,
                    items;

                items = parseThumbnailElements(galleryElement);

                options = {
                    galleryUID: galleryElement.getAttribute('data-pswp-uid'),
                    getThumbBoundsFn: function(index) {
                        var thumbnail = items[index].el.getElementsByTagName('img')[0], // find thumbnail
                            pageYScroll = window.pageYOffset || document.documentElement.scrollTop,
                            rect = thumbnail.getBoundingClientRect();
                        return {x:rect.left, y:rect.top + pageYScroll, w:rect.width};
                    },
                    bgOpacity: 0.8,
                    closeOnScroll: false,
                    shareEl: false,
                    fullscreenEl: false,
                    zoomEl: true,
                    history: false,
                    loop: false
                };

                if(fromURL) {
                    if(options.galleryPIDs) {
                        for(var j = 0; j < items.length; j++) {
                            if(items[j].pid == index) {
                                options.index = j;
                                break;
                            }
                        }
                    } else {
                        options.index = parseInt(index, 10) - 1;
                    }
                } else {
                    options.index = parseInt(index, 10);
                }

                if( isNaN(options.index) ) {
                    return;
                }

                if(disableAnimation) {
                    options.showAnimationDuration = 0;
                }

                gallery = new PhotoSwipe( pswpElement, PhotoSwipeUI_Default, items, options);

                gallery.listen('gettingData', function(index, item) {
                    if (!item.sizeLoaded) {
                        item.sizeLoaded = true;
                        var img = new Image();
                        img.onload = function() {
                            item.w = this.width;
                            item.h = this.height;
                            gallery.updateSize(true);
                        }
                        img.src = item.src;
                    }
                });

                gallery.init();

                var buttonLeft = pswpElement.getElementsByClassName('pswp__button--arrow--left')[0];
                var buttonRight = pswpElement.getElementsByClassName('pswp__button--arrow--right')[0];

                buttonLeft.hidden = gallery.getCurrentIndex() === 0;
                buttonRight.hidden = gallery.getCurrentIndex() + 1 === gallery.items.length;

                gallery.listen('beforeChange', function() {
                        buttonLeft.hidden = gallery.getCurrentIndex() === 0;
                        buttonRight.hidden = gallery.getCurrentIndex() + 1 === gallery.items.length;
                    }
                );
            };

            var galleryElements = container.querySelectorAll( gallerySelector );

            for(var i = 0, l = galleryElements.length; i < l; i++) {
                galleryElements[i].setAttribute('data-pswp-uid', i+1);
                galleryElements[i].onclick = onThumbnailsClick;
            }

            var hashData = photoswipeParseHash();
            if(hashData.pid && hashData.gid) {
                openPhotoSwipe( hashData.pid ,  galleryElements[ hashData.gid - 1 ], true, true );
            }
        };

        initPhotoSwipeFromDOM('.images-gallery');
    }, false)
</script>

<h4 id="set-entity-from-widget">Set entity from widget</h4>

<p><em>Set entity from widget</em> checkbox is responsible for adding specific entity from the widget to the state. This allows you to use the entity in the target dashboard state by creating the “<a href="/docs/user-guide/ui/aliases/#entity-from-dashboard-state">Entity from dashboard state</a>” or other aliases. For example, if you have a list of devices in the table widget and would like to show specific device details when you click on the table row.</p>

<p>Sometimes you need to store more then one entity in the state. For example, you would like to navigate to customer list, then to devices of the customer and finally to specific device details. In such case, you may have three states: “Main”, “Customer Devices” and “Device Details”.
You may use two different state entity parameters to reference current customer (e.g. “currentCustomer”) and current device (e.g. “currentDevice”) on the “Device Details” state.</p>

<div id="0">
  <div itemscope="" itemtype="http://schema.org/ImageGallery" class="images-gallery" style="justify-content: start;">
    <figure itemprop="associatedMedia" itemscope="" itemtype="http://schema.org/ImageObject" style="max-width: min(225px, 100%);
                    max-height: min(225px, 100%);">
<a href="/images/user-guide/ui/widgets/actions/settings/entityfromwidget.png" onclick="return false;" itemprop="contentUrl"> <img src="/images/user-guide/ui/widgets/actions/settings/entityfromwidget-preview.png" itemprop="thumbnail" alt="image" style="max-width: min(225px, 100%);
                                max-height: min(225px, 100%);" /> </a>       <figcaption itemprop="caption description" style="display: none"></figcaption>
    </figure>
  </div>
</div>

<script>
    window.addEventListener("load", function() {
        window.removeEventListener("load", arguments.callee, false);

        if(!document.getElementsByClassName('pswp').length){
            document.body.insertAdjacentHTML('beforeend',
                '<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">\n' +
                '        <div class="pswp__bg"></div>\n' +
                '        <div class="pswp__scroll-wrap">\n' +
                '            <div class="pswp__container">\n' +
                '                <div class="pswp__item"></div>\n' +
                '                <div class="pswp__item"></div>\n' +
                '                <div class="pswp__item"></div>\n' +
                '            </div>\n' +
                '\n' +
                '            <div class="pswp__ui pswp__ui--hidden">\n' +
                '\n' +
                '                <div class="pswp__top-bar">\n' +
                '                    <div class="pswp__counter"></div>\n' +
                '\n' +
                '                    <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>\n' +
                '\n' +
                '                    <button class="pswp__button pswp__button--share" title="Share"></button>\n' +
                '\n' +
                '                    <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>\n' +
                '\n' +
                '                    <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>\n' +
                '\n' +
                '                    <div class="pswp__preloader">\n' +
                '                        <div class="pswp__preloader__icn">\n' +
                '                            <div class="pswp__preloader__cut">\n' +
                '                                <div class="pswp__preloader__donut"></div>\n' +
                '                            </div>\n' +
                '                        </div>\n' +
                '                    </div>\n' +
                '                </div>\n' +
                '                <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">\n' +
                '                    <div class="pswp__share-tooltip"></div>\n' +
                '                </div>\n' +
                '                <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">\n' +
                '                </button>\n' +
                '                <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">\n' +
                '                </button>\n' +
                '                <div class="pswp__caption">\n' +
                '                    <div class="pswp__caption__center"></div>\n' +
                '                </div>\n' +
                '            </div>\n' +
                '        </div>\n' +
                '    </div>'
            );
        }

        var container = document.getElementById('0');

        var initPhotoSwipeFromDOM = function(gallerySelector) {
            var parseThumbnailElements = function(el) {
                var thumbElements = el.childNodes,
                    numNodes = thumbElements.length,
                    items = [],
                    figureEl,
                    linkEl,
                    size,
                    item;

                for(var i = 0; i < numNodes; i++) {

                    figureEl = thumbElements[i];
                    if(figureEl.nodeType !== 1) {
                        continue;
                    }
                    linkEl = figureEl.children[0];
                    size = linkEl.children[0];
                    item = {
                        src: linkEl.getAttribute('href'),
                        w: 2500,
                        h: 0,
                        sizeLoaded: false
                    };

                    if(figureEl.children.length > 1) {
                        item.title = figureEl.children[1].innerHTML;
                    }
                    if(linkEl.children.length > 0) {
                        item.msrc = linkEl.children[0].getAttribute('src');
                    }
                    if(item.msrc === item.src){
                        item.w = parseInt(size.naturalWidth, 10);
                        item.h = parseInt(size.naturalHeight, 10);
                    }

                    item.el = figureEl;
                    items.push(item);
                }
                return items;
            };

            var closest = function closest(el, fn) {
                return el && ( fn(el) ? el : closest(el.parentNode, fn) );
            };

            var onThumbnailsClick = function(e) {
                e = e || window.event;
                e.preventDefault ? e.preventDefault() : e.returnValue = false;

                var eTarget = e.target || e.srcElement;

                var clickedListItem = closest(eTarget, function(el) {
                    return (el.tagName && el.tagName.toUpperCase() === 'FIGURE');
                });

                if(!clickedListItem) {
                    return;
                }

                var clickedGallery = clickedListItem.parentNode,
                    childNodes = clickedListItem.parentNode.childNodes,
                    numChildNodes = childNodes.length,
                    nodeIndex = 0,
                    index;

                for (var i = 0; i < numChildNodes; i++) {
                    if(childNodes[i].nodeType !== 1) {
                        continue;
                    }

                    if(childNodes[i] === clickedListItem) {
                        index = nodeIndex;
                        break;
                    }
                    nodeIndex++;
                }

                if(index >= 0) {
                    openPhotoSwipe( index, clickedGallery );
                }
                return false;
            };

            var photoswipeParseHash = function() {
                var hash = window.location.hash.substring(1),
                    params = {};

                if(hash.length < 5) {
                    return params;
                }

                var vars = hash.split('&');
                for (var i = 0; i < vars.length; i++) {
                    if(!vars[i]) {
                        continue;
                    }
                    var pair = vars[i].split('=');
                    if(pair.length < 2) {
                        continue;
                    }
                    params[pair[0]] = pair[1];
                }

                if(params.gid) {
                    params.gid = parseInt(params.gid, 10);
                }

                return params;
            };

            var openPhotoSwipe = function(index, galleryElement, disableAnimation, fromURL) {
                var pswpElement = document.querySelectorAll('.pswp')[0],
                    gallery,
                    options,
                    items;

                items = parseThumbnailElements(galleryElement);

                options = {
                    galleryUID: galleryElement.getAttribute('data-pswp-uid'),
                    getThumbBoundsFn: function(index) {
                        var thumbnail = items[index].el.getElementsByTagName('img')[0], // find thumbnail
                            pageYScroll = window.pageYOffset || document.documentElement.scrollTop,
                            rect = thumbnail.getBoundingClientRect();
                        return {x:rect.left, y:rect.top + pageYScroll, w:rect.width};
                    },
                    bgOpacity: 0.8,
                    closeOnScroll: false,
                    shareEl: false,
                    fullscreenEl: false,
                    zoomEl: true,
                    history: false,
                    loop: false
                };

                if(fromURL) {
                    if(options.galleryPIDs) {
                        for(var j = 0; j < items.length; j++) {
                            if(items[j].pid == index) {
                                options.index = j;
                                break;
                            }
                        }
                    } else {
                        options.index = parseInt(index, 10) - 1;
                    }
                } else {
                    options.index = parseInt(index, 10);
                }

                if( isNaN(options.index) ) {
                    return;
                }

                if(disableAnimation) {
                    options.showAnimationDuration = 0;
                }

                gallery = new PhotoSwipe( pswpElement, PhotoSwipeUI_Default, items, options);

                gallery.listen('gettingData', function(index, item) {
                    if (!item.sizeLoaded) {
                        item.sizeLoaded = true;
                        var img = new Image();
                        img.onload = function() {
                            item.w = this.width;
                            item.h = this.height;
                            gallery.updateSize(true);
                        }
                        img.src = item.src;
                    }
                });

                gallery.init();

                var buttonLeft = pswpElement.getElementsByClassName('pswp__button--arrow--left')[0];
                var buttonRight = pswpElement.getElementsByClassName('pswp__button--arrow--right')[0];

                buttonLeft.hidden = gallery.getCurrentIndex() === 0;
                buttonRight.hidden = gallery.getCurrentIndex() + 1 === gallery.items.length;

                gallery.listen('beforeChange', function() {
                        buttonLeft.hidden = gallery.getCurrentIndex() === 0;
                        buttonRight.hidden = gallery.getCurrentIndex() + 1 === gallery.items.length;
                    }
                );
            };

            var galleryElements = container.querySelectorAll( gallerySelector );

            for(var i = 0, l = galleryElements.length; i < l; i++) {
                galleryElements[i].setAttribute('data-pswp-uid', i+1);
                galleryElements[i].onclick = onThumbnailsClick;
            }

            var hashData = photoswipeParseHash();
            if(hashData.pid && hashData.gid) {
                openPhotoSwipe( hashData.pid ,  galleryElements[ hashData.gid - 1 ], true, true );
            }
        };

        initPhotoSwipeFromDOM('.images-gallery');
    }, false)
</script>


      </div>
      <footer>
	<main class="light-text">
		<div class="newsletterSubsContainer">
            <script type="text/javascript">
                function subscribeForNewsletter(event) {
                    event.stopPropagation();
                    var script_tag = document.createElement('script');
                    script_tag.setAttribute("type", "text/javascript");
                    script_tag.setAttribute("src", "https://static.mailerlite.com/js/w/webforms.min.js?v28bf44f740701752bfc6767bc7e171d4");
                    document.getElementsByTagName("head")[0].appendChild(script_tag);
                    $(event.target).css('display', 'none');
                    $('#mlb2-7341216').css('display', 'block');
                }
            </script>
            <button class="n-button price subscribe" onClick="subscribeForNewsletter(event)">Sign up for ThingsBoard news</button>
            <div id="mlb2-7341216" class="ml-subscribe-form ml-subscribe-form-7341216" style="display: none;">
<!--            <div id="mlb2-7341216" class="ml-subscribe-form ml-subscribe-form-7341216" style="display: block;">-->
                <div class="ml-vertical-align-center">
                    <div class="subscribe-form ml-block-success" style="display: none;">
                        <div class="form-section">
                            <p>Thank you for your interest in ThingsBoard!<br/>Have a great day!</p>
                        </div>
                    </div>
                    <form class="ml-block-form" action="https://static.mailerlite.com/webforms/submit/r9r9x7" data-id="708170" data-code="r9r9x7" method="POST" target="_blank">
                        <div class="subscribe-form horizontal">
                            <div class="form-section horizontal">
                                <div class="form-group ml-field-email ml-validate-required ml-validate-email">
                                    <input type="email" name="fields[email]" class="form-control" placeholder="Email address*" value="" autocomplete="email" x-autocompletetype="email" spellcheck="false" autocapitalize="off" autocorrect="off">
                                </div>
                            </div>
                            <input type="hidden" name="ml-submit" value="1">
                            <div class="form-section horizontal ml-button-position">
                                <button class="primary n-button price subscribe" type="submit">
                                    Subscribe
                                </button>
                                <button disabled="disabled" style="display: none;" type="button" class="n-button loading">
                                    <img src="https://static.mailerlite.com/images/rolling@2x.gif" width="20" height="20" style="width: 20px; height: 20px;">
                                </button>
                            </div>
                            <p>By subscribing you agree to receive newsletters from ThingsBoard, Inc.</p>
                        </div>
                    </form>
                </div>
            </div>
		</div>

        <hr>

        <div class="deeper">
            <a href="/" class="footer-logo"></a>
            <nav>
                <a href="/docs/getting-started-guides/helloworld/">Get Started</a>
                <a href="/docs/">Documentation</a>
                <a href="/iot-use-cases/">Use cases</a>
                <a href="https://blog.thingsboard.io/">Blog</a>
                <a href="/docs/services/">Services</a>
                <a href="/docs/contact-us/">Contact us</a>
            </nav>
        </div>

        <div class="deepmost">
            <div class="copyright">&copy; 2021 The ThingsBoard Authors</div>
            <div class="social">
                <a href="https://github.com/thingsboard/thingsboard" class="github"></a>
                <a href="https://gitter.im/thingsboard/chat" class="gitter"></a>
                <a href="https://www.youtube.com/thingsboard" class="youtube"></a>
                <a href="http://stackoverflow.com/questions/tagged/thingsboard" class="stack-overflow"></a>
                <a href="https://groups.google.com/forum/#!forum/thingsboard" class="mailing-list"></a>
                <a href="https://www.facebook.com/thingsboard" class="facebook"></a>
                <a href="https://twitter.com/thingsboard" class="twitter"></a>
            </div>
        </div>
	</main>
</footer>

  </div>
</section>

<style>
  .cse .gsc-control-cse, .gsc-control-cse {
    padding: 0;
  }
  .gsc-control-cse table, .gsc-control-cse-en table {
    margin:0px !important;
  }
  .gsc-above-wrapper-area {
    border-bottom: 0;
  }
</style>
<script>
    jqueryDefer(function () {
        $(document).on('selectionchange',function() {
        // $(document).mouseup(function () {
            $('.clipboard-btn').removeClass('noChars');
            var selectedChars = getSelectedText();
            // $('#numberChars').html(selectedChars.length);
            if (selectedChars == 0) {
                $('.clipboard-btn').addClass('noChars');
            }
        });
    });
    function getSelectedText() {
        var text;
        if (window.getSelection) {
            text = window.getSelection().toString();
        } else if (document.getSelection) {
            text = document.getSelection();
        } else if (document.selection) {
            text = document.selection.createRange().text;
        }
        return text;
    }
</script>
<script>
    jqueryDefer(function () {
        $(document).ready(function () {
            var allCodeBlocksElements = $(".copy-code");
            allCodeBlocksElements.each(function (i) {
                var codeBlock = $(this);
                if (!codeBlock.hasClass('highlighter-rouge')) {
                    codeBlock = codeBlock.find('.highlighter-rouge');
                }
                codeBlock.each(function () {
                    var block = codeBlock.find('pre.highlight > code .rouge-code');
                    var currentId = "codeblock" + (i + 1);
                    block.attr('id', currentId);
                    var clipButton = $('<button class="clipboard-btn" data-clipboard-target="#' + currentId + '"><p>Copy to clipboard</p><div><img src="/images/copy-code-icon.svg" alt="Copy to clipboard"></div></button>');
                    $(this).append(clipButton);
                    var troyan = codeBlock.find('pre.highlight');
                    var Tooltip = $('<div class="customTooltip"><div class="tooltipText">Copied!</div></div>');
                    troyan.append(Tooltip);
                    troyan.addClass('clipboard-btn');
                    troyan.attr('data-clipboard-target', "#" + currentId);
                    troyan.on('mouseleave', clearTooltip);
                    troyan.on('blur', clearTooltip);
                    troyan.on('click', function(e) {
                        var el = $(e.currentTarget);
                        if (el.hasClass('showTool')) {
                            clearTooltip(e);
                            troyan.attr('data-skip-tooltip', "true");
                        }
                    });
                });
            });

            var clipboard = new Clipboard('.noChars');
            clipboard.on('success', function (e) {
                $('.clipboard-btn').removeClass('noChars');
                e.clearSelection();
                var trigger = e.trigger;
                if (!$(trigger).attr('data-skip-tooltip')) {
                    showTooltip(e.trigger, 'Copied!');
                } else {
                    $(trigger).removeAttr('data-skip-tooltip');
                }
            });

            $('#search').focus(
                function(){
                    $(this).parent('#searchBox').addClass('focused');
                }).blur(
                function(){
                    $(this).parent('#searchBox').removeClass('focused');
                });

            $('#searchBox .searchButton').click(function () {
                var value = $('#search').val();
                window.location.replace('/docs/search/?q=' + value);
            });

            $('#docsBreadcrumbs').click(function () {
                if ($(this).hasClass('active')) {
                    $(this).removeClass('active');
                    $('#docsNav').removeClass('active');
                    $('#searchBox').removeClass('visible');
                } else {
                    $(this).addClass('active');
                    $('#docsNav').addClass('active');
                    $('#searchBox').addClass('visible');
                }
            });
        });

        function clearTooltip(e) {
            var el = $(e.currentTarget);
            el.removeClass('showTool');
            el.attr('aria-label', null);
        }

        function showTooltip(elem, msg) {
            var el = $(elem);
            el.addClass('showTool');
            el.attr('aria-label', msg);
        }
    });
</script>

<script>
    jqueryDefer(function () {
        var markdownTocs = null;
        var contentAnchors = [];
        var activeAnchor = null;
        var firstAnchor = null;
        var lastAnchor = null;

        function updatePositions() {
            contentAnchors = [];
            markdownTocs.each(function (i) {
                var tocAnchor = $(this).children('a');
                var href = tocAnchor.attr('href');
                var contentAnchor = $('div#content ' + href);
                var top = Math.floor(contentAnchor.offset().top);
                var bottom;
                if (i < markdownTocs.length - 1) {
                    var nextHref = $(markdownTocs[i + 1]).children('a').attr('href');
                    var nextContentAnchor = $('div#content ' + nextHref);
                    bottom = Math.floor(nextContentAnchor.offset().top);
                } else {
                    bottom = $('div#content').offset().top + $('div#content').innerHeight();
                }
                var contentAnchorInfo = {anchor: contentAnchor, toc: $(this), top: top, bottom: bottom, href: href};
                contentAnchors.push(contentAnchorInfo);
                if (i === 0) {
                    firstAnchor = contentAnchorInfo;
                }
                if (i === markdownTocs.length - 1) {
                    lastAnchor = contentAnchorInfo;
                }
            });
        }

        function findActiveContentToc() {
            var top = $(window).scrollTop();
            var bottom = top + $(window).height();
            if (bottom === $('#encyclopedia').offset().top + $('#encyclopedia').innerHeight()) {
                return lastAnchor;
            } else {
                bottom -= 154;
                for (var i = 0; i < contentAnchors.length; i++) {
                    var contentAnchor = contentAnchors[i];
                    if (contentAnchor.top <= bottom &&
                        contentAnchor.bottom > top) {
                        return contentAnchor;
                    }
                }
            }
            return firstAnchor;
        }

        function updateActiveToc(init) {
            updatePositions();
            var newActiveAnchor = findActiveContentToc();
            if (!activeAnchor || newActiveAnchor.href !== activeAnchor.href) {
                activeAnchor = newActiveAnchor;
                markdownTocs.removeClass('active');
                activeAnchor.toc.addClass('active');
                var tocTop = $('#table-of-contents').scrollTop() + 100;
                var tocBottom = tocTop + $('#table-of-contents').innerHeight() - 200;
                var activeTocTop = activeAnchor.toc.position().top;
                var activeTocBottom = activeTocTop + activeAnchor.toc.children(':first').height();
                if (tocTop > activeTocTop) {
                    activeAnchor.toc[0].scrollIntoView();
                    $('#table-of-contents')[0].scrollTop -= 100;
                } else if (tocBottom < activeTocBottom) {
                    activeAnchor.toc[0].scrollIntoView();
                    $('#table-of-contents')[0].scrollTop += init ? -100 : 100;
                }
            }
        }
        $( document ).ready(function() {
            var tocs = $('#content > ul#markdown-toc');
            var tableOfContents = $('#table-of-contents');
            tableOfContents.append(tocs);
            markdownTocs = $('#table-of-contents ul#markdown-toc li').filter(function() {
                var tocAnchor = $(this).children('a');
                var href = tocAnchor.attr('href');
                if (!href.startsWith('#')) {
                    return false;
                } else {
                    var contentAnchor = $('div#content ' + href);
                    return contentAnchor.length > 0;
                }
            });
            updateActiveToc(true);
        });

        $(document).on("scroll", function() {
            updateActiveToc(false);
        });

    });
</script>

</body>
</html>

