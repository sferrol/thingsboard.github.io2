







<!Doctype html>
<html id="docs" class="Installation">







<head>
    <meta charset="utf-8">
    <meta name="cf-2fa-verify" content="a08672380de15e9">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    
    <title>Installing ThingsBoard on Windows | ThingsBoard Community Edition</title>
    <!-- Begin Jekyll SEO tag v2.7.1 -->
<meta name="generator" content="Jekyll v3.9.0" />
<meta property="og:title" content="Installing ThingsBoard on Windows" />
<meta name="author" content="thingsboard" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Installing ThingsBoard on Windows" />
<meta property="og:description" content="Installing ThingsBoard on Windows" />
<link rel="canonical" href="http://0.0.0.0:4002/docs/user-guide/install/windows/" />
<meta property="og:url" content="http://0.0.0.0:4002/docs/user-guide/install/windows/" />
<meta property="og:site_name" content="ThingsBoard" />
<meta property="og:image" content="http://0.0.0.0:4002/images/thingsboard_logo.png" />
<meta name="twitter:card" content="summary_large_image" />
<meta property="twitter:image" content="http://0.0.0.0:4002/images/thingsboard_logo.png" />
<meta property="twitter:title" content="Installing ThingsBoard on Windows" />
<meta name="twitter:site" content="@thingsboard" />
<meta name="twitter:creator" content="@thingsboard" />
<script type="application/ld+json">
{"url":"http://0.0.0.0:4002/docs/user-guide/install/windows/","publisher":{"@type":"Organization","logo":{"@type":"ImageObject","url":"http://0.0.0.0:4002/images/thingsboard_logo.png"},"name":"thingsboard"},"author":{"@type":"Person","name":"thingsboard"},"image":{"twitter":"/images/thingsboard_logo.png","facebook":"/images/thingsboard_logo.png","url":"http://0.0.0.0:4002/images/thingsboard_logo.png","@type":"imageObject"},"description":"Installing ThingsBoard on Windows","@type":"WebPage","headline":"Installing ThingsBoard on Windows","@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->

    
    
    <meta name="twitter:description" content="Installing ThingsBoard on Windows"/>
    
    
    <link rel="shortcut icon" type="image/png" href="/images/favicon.png">
    <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Poppins:300,400,500,600,700" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.5.2/animate.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
          integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    <link rel="stylesheet" href="/css/styles.css">
    <script async defer src="https://buttons.github.io/buttons.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/qs/6.7.0/qs.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gifffer/1.5.0/gifffer.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/clipboard@1/dist/clipboard.min.js"></script>
    <script type="text/javascript">
        window.onload = function() {
            Gifffer();
        }
    </script>
    <script type="text/javascript">
        /*! loadCSS. [c]2017 Filament Group, Inc. MIT License */
        !function (a) {
            "use strict";
            var b = function (b, c, d) {
                function e(a) {
                    return h.body ? a() : void setTimeout(function () {
                        e(a)
                    })
                }

                function f() {
                    i.addEventListener && i.removeEventListener("load", f), i.media = d || "all"
                }

                var g, h = a.document, i = h.createElement("link");
                if (c) g = c; else {
                    var j = (h.body || h.getElementsByTagName("head")[0]).childNodes;
                    g = j[j.length - 1]
                }
                var k = h.styleSheets;
                i.rel = "stylesheet", i.href = b, i.media = "only x", e(function () {
                    g.parentNode.insertBefore(i, c ? g : g.nextSibling)
                });
                var l = function (a) {
                    for (var b = i.href, c = k.length; c--;) if (k[c].href === b) return a();
                    setTimeout(function () {
                        l(a)
                    })
                };
                return i.addEventListener && i.addEventListener("load", f), i.onloadcssdefined = l, l(f), i
            };
            "undefined" != typeof exports ? exports.loadCSS = b : a.loadCSS = b
        }("undefined" != typeof global ? global : this);

        /*! onloadCSS. (onload callback for loadCSS) [c]2017 Filament Group, Inc. MIT License */
        function onloadCSS(a, b) {
            function c() {
                !d && b && (d = !0, b.call(a))
            }

            var d;
            a.addEventListener && a.addEventListener("load", c), a.attachEvent && a.attachEvent("onload", c), "isApplicationInstalled" in navigator && "onloadcssdefined" in a && a.onloadcssdefined(c)
        }
    </script>
    <script type="text/javascript">

        function jqueryDefer(method) {
            if (window.jQuery) {
                method();
            } else {
                setTimeout(function () {
                    jqueryDefer(method)
                }, 50);
            }
        }

        function jqueryUiDefer(method) {
            if (window.jQuery && window.jQuery.ui) {
                method();
            } else {
                setTimeout(function () {
                    jqueryUiDefer(method)
                }, 50);
            }
        }

        window.vis = (function () {
            var stateKey,
                eventKey,
                keys = {
                    hidden: "visibilitychange",
                    webkitHidden: "webkitvisibilitychange",
                    mozHidden: "mozvisibilitychange",
                    msHidden: "msvisibilitychange"
                };
            for (stateKey in keys) {
                if (stateKey in document) {
                    eventKey = keys[stateKey];
                    break;
                }
            }
            return function (c) {
                if (c) document.addEventListener(eventKey, c);
                return !document[stateKey];
            }
        })();

        function loadScript(src, callback) {
            var s, r, t;
            r = false;
            s = document.createElement('script');
            s.type = 'text/javascript';
            s.src = src;
            s.onload = s.onreadystatechange = function () {
                if (!r && (!this.readyState || this.readyState == 'complete')) {
                    r = true;
                    if (callback) {
                        callback();
                    }
                }
            };
            t = document.getElementsByTagName('script')[0];
            t.parentNode.insertBefore(s, t);
        }

        function loadCssAsync(src, callback) {
            var stylesheet = loadCSS(src);
            if (callback) {
                onloadCSS(stylesheet, callback);
            }
        }

        function loadNextScript(index, scriptsList, completeCallback) {
            if (index < scriptsList.length) {
                var script = scriptsList[index];
                if (script.type === 'script') {
                    loadScript(script.src, function () {
                        if (script.callback) {
                            script.callback();
                        }
                        index++;
                        loadNextScript(index, scriptsList, completeCallback);
                    });
                } else if (script.type === 'css') {
                    loadCssAsync(script.src, function () {
                        index++;
                        loadNextScript(index, scriptsList, completeCallback);
                    });
                }
            } else if (completeCallback) {
                completeCallback();
            }
        }

        var initialScriptsList = [
            {src: '/js/jquery-2.2.0.min.js', type: 'script'},
            {src: '/css/jquery-ui.min.css', type: 'css'},
            {src: '/js/jquery-ui.min.js', type: 'script'},
            {src: '/js/jquery.vide.js', type: 'script'},
            {src: '/js/script.js', type: 'script'},
            {src: '/css/photoswipe.css', type: 'css'},
            {src: '/css/default-skin/default-skin.css', type: 'css'},
            {src: '/js/photoswipe.min.js', type: 'script'},
            {src: '/js/photoswipe-ui-default.min.js', type: 'script'}
        ];

        loadNextScript(0, initialScriptsList);

        jqueryDefer(function () {
            (function ($, win) {
                $.fn.inViewport = function (cb) {
                    return this.each(function (i, el) {
                        function visPx() {
                            var H = $(this).height(),
                                r = el.getBoundingClientRect(), t = r.top, b = r.bottom;
                            var result = cb.call(el, Math.max(0, t > 0 ? H - t : (b < H ? b : H)));
                            if (result) {
                                $(win).off("resize scroll", visPx);
                            }
                        }

                        visPx();
                        $(win).on("resize scroll", visPx);
                    });
                };
            }(jQuery, window));
        });

        function inViewportDefer(method) {
            if (window.jQuery && $.fn.inViewport) {
                method();
            } else {
                setTimeout(function () {
                    inViewportDefer(method)
                }, 50);
            }
        }

    </script>
    <script type="text/javascript">
        function _gaLt(event) {
            /* If GA is blocked or not loaded, or not main|middle|touch click then don't track */
            if (!ga.hasOwnProperty("loaded") || ga.loaded != true || (event.which != 1 && event.which != 2)) {
                return;
            }
            var el = event.srcElement || event.target;

            while (el && (typeof el.tagName == 'undefined' || el.tagName.toLowerCase() != 'a' || !el.href)) {
                el = el.parentNode;
            }
            if (el && el.href) {
                var link = el.href;
                if ((link.indexOf(location.host) == -1 || link.indexOf('.' + location.host) > 0) && !link.match(/^javascript\:/i)) {
                    var target = (el.target && !el.target.match(/^_(self|parent|top)$/i)) ? el.target : false;
                    if (event.ctrlKey || event.shiftKey || event.metaKey || event.which == 2) {
                        target = "_blank";
                    }

                    var hbrun = false; // tracker has not yet run
                    var hitBack = function () {
                        if (hbrun) return;
                        hbrun = true;
                        window.location.href = link;
                    };

                    if (target) {
                        ga(
                            "send", "event", "Outgoing Links", link,
                            document.location.pathname + document.location.search
                        );
                    } else {
                        event.preventDefault ? event.preventDefault() : event.returnValue = !1;
                        ga(
                            "send", "event", "Outgoing Links", link,
                            document.location.pathname + document.location.search, {
                                "hitCallback": hitBack
                            }
                        );

                        setTimeout(hitBack, 1000);
                    }
                }
            }
        }

        var _w = window;
        var _gaLtEvt = ("ontouchstart" in _w) ? "click" : "mousedown";
        _w.addEventListener ? _w.addEventListener("load", function () {
                document.body.addEventListener(_gaLtEvt, _gaLt, !1)
            }, !1)
            : _w.attachEvent && _w.attachEvent("onload", function () {
            document.body.attachEvent("on" + _gaLtEvt, _gaLt)
        });
    </script>
    <script>
        (function (i, s, o, g, r, a, m) {
            i['GoogleAnalyticsObject'] = r;
            i[r] = i[r] || function () {
                (i[r].q = i[r].q || []).push(arguments)
            }, i[r].l = 1 * new Date();
            a = s.createElement(o),
                m = s.getElementsByTagName(o)[0];
            a.async = 1;
            a.src = g;
            m.parentNode.insertBefore(a, m)
        })(window, document, 'script', '//www.google-analytics.com/analytics.js', 'ga');

        ga('create', 'UA-88383331-1', 'auto');
        ga('send', 'pageview');
    </script>
    <script>
        function Burger() {
            var header = $('header');
            var body = $('body');
            if (header.hasClass('opened-burger')) {
                header.removeClass('opened-burger');
                let subMenus = $('nav.head-menu > ul > li > div.centered-sub > ul.sub-menu');
                subMenus.removeClass('open-sub');
                body.css('overflow', '');
            } else {
                header.addClass('opened-burger');
                body.css('overflow', 'hidden');
            }
        }
    </script>
    <script>

        jqueryDefer(function () {
            let menuElement = $('nav.head-menu > ul');
            let submenuContainer = $('nav.head-menu > div.sub-menu-container');
            let menuItems = $('nav.head-menu > ul > li');
            let indicator = $('nav.head-menu > ul > div.indicator');
            let subMenuActive = false;
            menuElement.on('mouseleave', function (event) {
                if (!$(event.relatedTarget).parents('div.sub-menu-container').length) {
                    subMenuActive = false;
                    submenuContainer.removeClass('active bounds-transition');
                    menuItems.removeClass('active');
                    indicator.removeClass('left-transition');
                }
            });
            submenuContainer.on('mouseleave', function (event) {
                if (!$(event.relatedTarget).parents('nav.head-menu > ul').length) {
                    subMenuActive = false;
                    submenuContainer.removeClass('active bounds-transition');
                    menuItems.removeClass('active');
                    indicator.removeClass('left-transition');
                }
            });
            menuItems.each(function() {
                let item = $( this );
                let subMenuId = item.attr('data-submenu-id');
                item.on('mouseenter', function () {
                    let submenus = $('nav.head-menu > div.sub-menu-container > div');
                    submenus.css('display', 'none');
                    menuItems.removeClass('active');
                    item.addClass('active');
                    let targetSubMenu = $('nav.head-menu > div.sub-menu-container > div#'+subMenuId);
                    targetSubMenu.css('display', 'block');
                    submenuContainer.css('overflow', 'visible');
                    let left = item.position().left + (item.outerWidth() - targetSubMenu.outerWidth()) / 2;
                    submenuContainer.css('left', left + 'px');
                    if (!subMenuActive) {
                        submenuContainer.addClass('active');
                        subMenuActive = true;
                    } else {
                        submenuContainer.addClass('bounds-transition');
                        indicator.addClass('left-transition');
                    }
                    indicator.css('left', item.position().left);
                    indicator.css('width', item.outerWidth());
                    submenuContainer.css('height', targetSubMenu.outerHeight() + 'px');
                    submenuContainer.css('width', targetSubMenu.outerWidth() + 'px');
                    submenuContainer.css('overflow', 'hidden');
                });
            });

            let isMobile = $('button.burger').css('display') === 'block';
            if (isMobile) {
                initMobileSubmenu();
            }

            $(window).resize(function(){
                let newIsMobile = $('button.burger').css('display') === 'block';
                if (isMobile !== newIsMobile) {
                    isMobile = newIsMobile;
                    if (isMobile) {
                        initMobileSubmenu();
                    } else {
                        restoreDesktopSubmenu();
                    }
                }
            });

            // Products selector

            
            let productsSelector = $('.products-selector');
            $(window).click(function(e) {
                if (productsSelector[0].contains(e.target)) {
                    if (productsSelector.hasClass('active')) {
                        productsSelector.removeClass('active');
                    } else {
                        productsSelector.addClass('active');
                    }
                } else {
                    productsSelector.removeClass('active');
                }
            });
            

            // Rogue line numbers fix (don't show line numbers for 1 row)
            $( document ).ready(function() {
                $('.rouge-gutter.gl').each(function() {
                    var lineNumbers = $(this).children('.lineno');
                    if (lineNumbers.text() === '1\n') {
                        $(this).css('display', 'none');
                    }
                });
            });
        });

        function initMobileSubmenu() {

            var header = $('header');
            if (header.hasClass('opened-burger')) {
                var body = $('body');
                body.css('overflow', 'hidden');
            }

            let targetSubMenus = $('nav.head-menu > div.sub-menu-container > div');
            targetSubMenus.css('display', 'block');
            let submenuContainer = $('nav.head-menu > div.sub-menu-container');
            submenuContainer.removeClass('active');
            submenuContainer.css('display', 'none');

            targetSubMenus.each(function() {
                let subMenu = $( this );
                let subMenuId = subMenu.attr('id');
                let parent = $('nav.head-menu > ul > li.'+subMenuId);
                parent.append(subMenu);
            });
        }

        function restoreDesktopSubmenu() {
            var body = $('body');
            body.css('overflow', '');
            let targetSubMenus = $('nav.head-menu > ul > li > div');
            let submenuContainer = $('nav.head-menu > div.sub-menu-container');
            submenuContainer.removeClass('active');
            submenuContainer.css('display', 'block');
            let menuItems = $('nav.head-menu > ul > li');
            menuItems.removeClass('active');
            targetSubMenus.each(function() {
                let subMenu = $( this );
                submenuContainer.append(subMenu);
            });
        }

        function listburg(subMenuId) {
            let isMobile = $('button.burger').css('display') === 'block';
            if (isMobile) {
                let targetSubMenu = $('nav.head-menu > ul > li > div.centered-sub#'+subMenuId+' > ul.sub-menu');
                let isOpen = targetSubMenu.hasClass('open-sub');
                let subMenus = $('nav.head-menu > ul > li > div.centered-sub > ul.sub-menu');
                subMenus.removeClass('open-sub');
                if (!isOpen) {
                    targetSubMenu.addClass('open-sub');
                }
            }
        }
    </script>
</head>
<body>

<div class="products-selector">
    <img src="/images/thingsboard-cm-icon.svg"/>
    <div class="product-info">
        <div class="product-title">
            Community Edition
        </div>
        <div class="product-description">
            ThingsBoard Documentation
        </div>
    </div>
    <div class="products">
        
        

    
        
        


        
    


        <a href="/docs/paas/" class="product">Cloud</a>
        
        

    
        
        


        
    


        <a href="/docs/pe/" class="product">Professional Edition</a>
        
        

    
        
        


        
            
        
    


        <a href="/docs/user-guide/install/windows/" class="product active">Community Edition</a>
        
        

    


        <a href="/docs/edge/" class="product">Edge</a>
        
        

    


        <a href="/docs/iot-gateway/" class="product">IoT Gateway</a>
        
        

    


        <a href="/products/license-server/" class="product">License Server</a>
        
        

    


        <a href="/docs/trendz/" class="product">Trendz Analytics</a>
        
    </div>
</div>

<header>
    <div class="logo-burger">
        
        <button onclick="Burger()" class="burger"></button>
        <div id="githubButtonContainer">
            <a class="github-button" href="https://github.com/thingsboard/thingsboard" data-show-count="true"
               aria-label="Star thingsboard/thingsboard on GitHub">Star</a>
        </div>
    </div>
    <nav class="head-menu">
        <ul>
            <li class="nav-products" data-submenu-id="nav-products">
                <a onclick="listburg('nav-products')">Products</a>
            </li>
            <li class="nav-services" data-submenu-id="nav-services">
                <a onclick="listburg('nav-services')">Services</a>
            </li>
            
            <li class="nav-cases" data-submenu-id="nav-cases">
                <a onclick="listburg('nav-cases')">Use Cases</a>
            </li>
            <li class="nav-customers" data-submenu-id="nav-customers">
                <a onclick="listburg('nav-customers')">Customers</a>
            </li>
            <li class="nav-company" data-submenu-id="nav-company">
                <a onclick="listburg('nav-company')">Company</a>
            </li>
            <div class="indicator"><div class="head-arrow"></div><div class="line"></div><div class="sub-background"></div></div>
        </ul>
        <div class="sub-menu-container">
            <div id="nav-products" class="centered-sub">
                <ul class="sub-menu products">
                    <div class="sub-groups">
                        <div class="group">
                            <p class="group-name">IoT platforms</p>
                            <a class="cloud-lnk" href="/products/paas/">
                                <img src="/images/thingsboard-c-icon.svg">
                                <div class="sub-text">
                                    <h1>Cloud</h1>
                                    <p>Platform as a service</p>
                                </div>
                            </a>
                            <a class="prof-lnk" href="/products/thingsboard-pe/">
                                <img src="/images/thingsboard-p-icon.svg">
                                <div class="sub-text">
                                    <h1>Professional Edition</h1>
                                    <p>Advanced IoT platform</p>
                                </div>
                            </a>
                            <a class="com-lnk" href="/">
                                <img src="/images/thingsboard-cm-icon.svg">
                                <div class="sub-text">
                                    <h1>Community Edition</h1>
                                    <p>Open source platform</p>
                                </div>
                            </a>
                        </div>
                        <div class="group">
                            <p class="group-name">Product ecosystem</p>
                            <a class="edge-lnk" href="/products/thingsboard-edge/">
                                <img src="/images/thingsboard-e-icon.svg">
                                <div class="sub-text">
                                    <h1>Edge</h1>
                                    <p>Edge computing</p>
                                </div>
                            </a>
                            <a class="gateway-lnk" href="/docs/iot-gateway/what-is-iot-gateway/">
                                <img src="/images/gateway-icon.svg">
                                <div class="sub-text">
                                    <h1>IoT Gateway</h1>
                                    <p>Connect legacy protocols</p>
                                </div>
                            </a>
                            <a class="license-lnk" href="/products/license-server/">
                                <img src="/images/license-icon.svg">
                                <div class="sub-text">
                                    <h1>License Server</h1>
                                    <p>Billing solution</p>
                                </div>
                            </a>
                            <a class="trendz-lnk" href="/products/trendz/">
                                <img src="/images/trendz-icon.svg">
                                <div class="sub-text">
                                    <h1>Trendz Analytics</h1>
                                    <p>Data analytics and Prediction</p>
                                </div>
                            </a>
                        </div>
                    </div>
                </ul>
            </div>
            <div id="nav-services" class="centered-sub">
                <ul class="sub-menu services">
                    <a href="/docs/services/support/">
                        <img src="/images/support-icon.svg">
                        <div class="sub-text">
                            <h1>Support</h1>
                            <p>Support packages</p>
                        </div>
                    </a>
                    <a href="/docs/services/trainings/">
                        <img src="/images/train-icon.svg">
                        <div class="sub-text">
                            <h1>Trainings</h1>
                            <p>ThingsBoard education courses</p>
                        </div>
                    </a>
                    <a href="/docs/services/consulting/">
                        <img src="/images/prof-icon.svg">
                        <div class="sub-text">
                            <h1>Professional services</h1>
                            <p>Development of solutions by the ThingsBoard team</p>
                        </div>
                    </a>
                </ul>
            </div>
            
            <div id="nav-cases" class="centered-sub">
                <ul class="sub-menu cases">
                    <a href="/smart-metering/">
                        <img src="/images/case-met-icon.svg">
                        <div class="sub-text">
                            <h1>Smart Metering</h1>
                            <p>Collection, analysis and visualization of data from meters</p>
                        </div>
                    </a>
                    <a href="/smart-energy/">
                        <img src="/images/case-eng-icon.svg">
                        <div class="sub-text">
                            <h1>Smart Energy</h1>
                            <p>Energy monitoring and efficiency analysis</p>
                        </div>
                    </a>
                    <a href="/smart-farming/">
                        <img src="/images/case-fam-icon.svg">
                        <div class="sub-text">
                            <h1>Smart Farming</h1>
                            <p>Monitoring of indoor conditions and plant growth characteristics</p>
                        </div>
                    </a>
                    <a href="/fleet-tracking/">
                        <img src="/images/case-trk-icon.svg">
                        <div class="sub-text">
                            <h1>Fleet Tracking</h1>
                            <p>Fleet tracking and fleet management</p>
                        </div>
                    </a>
                </ul>
            </div>
            <div id="nav-customers" class="centered-sub">
                <ul class="sub-menu customers">
                    <div class="sub-groups">
                        <div class="group">
                            <a class="small-link" href="/industries/smart-energy/">
                                <img src="/images/se-s-icon.svg">
                                <div class="sub-text">
                                    <h1>Smart Energy</h1>
                                </div>
                            </a>
                            <a class="small-link" href="/industries/agriculture/">
                                <img src="/images/agr-s-icon.svg">
                                <div class="sub-text">
                                    <h1>Agriculture</h1>
                                </div>
                            </a>
                            <a class="small-link" href="/industries/smart-buildings/">
                                <img src="/images/sb-s-icon.svg">
                                <div class="sub-text">
                                    <h1>Smart Buildings</h1>
                                </div>
                            </a>
                        </div>
                        <div class="group">
                            <a class="small-link" href="/industries/smart-city/">
                                <img src="/images/sc-s-icon.svg">
                                <div class="sub-text">
                                    <h1>Smart City</h1>
                                </div>
                            </a>
                            <a class="small-link" href="/industries/telecom/">
                                <img src="/images/tel-s-icon.svg">
                                <div class="sub-text">
                                    <h1>Telecom</h1>
                                </div>
                            </a>
                            <a class="small-link" href="/industries/industry40/">
                                <img src="/images/in-s-icon.svg">
                                <div class="sub-text">
                                    <h1>Industry 4.0</h1>
                                </div>
                            </a>
                        </div>
                    </div>
                </ul>
            </div>
            <div id="nav-company" class="centered-sub">
                <ul class="sub-menu about">
                    <div class="sub-groups">
                        <div class="group">
                            <a class="small-link" href="/company/">
                                <img src="/images/about-s-icon.svg">
                                <div class="sub-text">
                                    <h1>Our Company</h1>
                                </div>
                            </a>
                            <a class="small-link" href="/docs/contact-us/">
                                <img src="/images/contact-s-icon.svg">
                                <div class="sub-text">
                                    <h1>Contact Us</h1>
                                </div>
                            </a>
                            <a class="small-link" href="/careers/">
                                <img src="/images/careers-s-icon.svg">
                                <div class="sub-text">
                                    <h1>Careers</h1>
                                </div>
                            </a>
                        </div>
                        <div class="group">
                            <a class="small-link" href="/mediakit/">
                                <img src="/images/media-s-icon.svg">
                                <div class="sub-text">
                                    <h1>Media Kit</h1>
                                </div>
                            </a>
                            <a class="small-link" href="https://blog.thingsboard.io/">
                                <img src="/images/blog-s-icon.svg">
                                <div class="sub-text">
                                    <h1>Blog</h1>
                                </div>
                            </a>
                        </div>
                    </div>
                    <div class="bottom-group">
                        <a class="small-link" href="/partners/hardware/">
                            <img src="/images/hard-s-icon.svg">
                            <div class="sub-text">
                                <h1>Hardware partners</h1>
                            </div>
                        </a>
                        <a class="small-link" href="/partners/distributors/">
                            <img src="/images/dis-s-icon.svg">
                            <div class="sub-text">
                                <h1>Distributors</h1>
                            </div>
                        </a>
                    </div>
                </ul>
            </div>
        </div>
    </nav>
    <div>
        <a href="/installations/" class="n-button try">Try it now</a>
        <a href="/pricing/" class="n-button price">Pricing</a>
    </div>
</header>


<div id="searchBox">
    <input type="text" id="search" placeholder="Search" onkeydown="if (event.keyCode==13) window.location.replace('/docs/search/?q=' + this.value)">
    <button class="searchButton"></button>
</div>

<!--  HERO  -->
<section id="hero">
  <div id="hero-content">
    <div id="vendorStrip">
      <div id="docsList">
          <ul>
            
              
              
              
              <li>
                  <a href="/docs/getting-started-guides/helloworld/" >Getting Started</a>
                  
              </li>
            
              
              
              
              <li>
                  <a href="/docs/" >Documentation</a>
                  
              </li>
            
              
              
              
              <li>
                  <a href="/docs/guides/" >Guides</a>
                  
              </li>
            
              
              
              
              <li>
                  <a href="/docs/user-guide/install/installation-options/" class="YAH">Installation</a>
                  
                     <div class="indicator"><div class="head-arrow"></div><div class="line"></div><div class="sub-background"></div></div>
                  
              </li>
            
              
              
              
              <li>
                  <a href="/docs/reference/" >Architecture</a>
                  
              </li>
            
              
              
              
              <li>
                  <a href="/docs/api/" >API</a>
                  
              </li>
            
              
              
              
              <li>
                  <a href="/docs/faq/" >FAQ</a>
                  
              </li>
            
          </ul>
          <div id="docsBreadcrumbs">
              
                  
                  
                  
                  
                      
                  
                      
                         
                         
                         
    

    

    
        
        
        

                         
                            
                  
                    <span class="item">Installation</span>
                    
                        <span class="divider">></span>
                    
                  
                    <span class="item">On premise</span>
                    
                        <span class="divider">></span>
                    
                  
                    <span class="item">Windows</span>
                    
                  
              
          </div>
      </div>
    </div>
  </div>
</section>
<div id="docsNav">
    <div class="docItems">
        
            
            
                <a class="toc" href="/docs/getting-started-guides/helloworld/" >Getting Started</a>
            
        
            
            
                <a class="toc" href="/docs/" >Documentation</a>
            
        
            
            
                <a class="toc" href="/docs/guides/" >Guides</a>
            
        
            
            
                <div class="pi-accordion">
                    


<a class="item" data-title="Installation options" href="/docs/user-guide/install/installation-options/"></a>


<div class="item" data-title="On premise">
  <div class="container">


<a class="item" data-title="Ubuntu Server" href="/docs/user-guide/install/ubuntu/"></a>


<a class="item" data-title="CentOS/RHEL Server" href="/docs/user-guide/install/rhel/"></a>


<a class="item" data-title="Windows" href="/docs/user-guide/install/windows/"></a>


<a class="item" data-title="Raspberry Pi 3" href="/docs/user-guide/install/rpi/"></a>


<a class="item" data-title="Docker (Windows)" href="/docs/user-guide/install/docker-windows/"></a>


<a class="item" data-title="Docker (Linux or Mac OS)" href="/docs/user-guide/install/docker/"></a>


<a class="item" data-title="Building from sources" href="/docs/user-guide/install/building-from-source/"></a>


<a class="item" data-title="Cluster setup" href="/docs/user-guide/install/cluster-setup/"></a>
  </div>
</div>


<div class="item" data-title="Cloud">
  <div class="container">


<a class="item" data-title="AWS" href="/docs/user-guide/install/aws/"></a>


<a class="item" data-title="DigitalOcean" href="/docs/user-guide/install/digital-ocean/"></a>


<a class="item" data-title="Google Cloud Platform" href="/docs/user-guide/install/gcp/"></a>


<a class="item" data-title="Azure" href="/docs/user-guide/install/azure/"></a>
  </div>
</div>


<a class="item" data-title="Upgrade instructions" href="/docs/user-guide/install/upgrade-instructions/"></a>


<a class="item" data-title="Configuration" href="/docs/user-guide/install/config/"></a>
                </div>
            
        
            
            
                <a class="toc" href="/docs/reference/" >Architecture</a>
            
        
            
            
                <a class="toc" href="/docs/api/" >API</a>
            
        
            
            
                <a class="toc" href="/docs/faq/" >FAQ</a>
            
        
    </div>
</div>








<section id="encyclopedia">
  
  <div id="docsToc">
        <div class="pi-accordion">
        


<a class="item" data-title="Installation options" href="/docs/user-guide/install/installation-options/"></a>


<div class="item" data-title="On premise">
  <div class="container">


<a class="item" data-title="Ubuntu Server" href="/docs/user-guide/install/ubuntu/"></a>


<a class="item" data-title="CentOS/RHEL Server" href="/docs/user-guide/install/rhel/"></a>


<a class="item" data-title="Windows" href="/docs/user-guide/install/windows/"></a>


<a class="item" data-title="Raspberry Pi 3" href="/docs/user-guide/install/rpi/"></a>


<a class="item" data-title="Docker (Windows)" href="/docs/user-guide/install/docker-windows/"></a>


<a class="item" data-title="Docker (Linux or Mac OS)" href="/docs/user-guide/install/docker/"></a>


<a class="item" data-title="Building from sources" href="/docs/user-guide/install/building-from-source/"></a>


<a class="item" data-title="Cluster setup" href="/docs/user-guide/install/cluster-setup/"></a>
  </div>
</div>


<div class="item" data-title="Cloud">
  <div class="container">


<a class="item" data-title="AWS" href="/docs/user-guide/install/aws/"></a>


<a class="item" data-title="DigitalOcean" href="/docs/user-guide/install/digital-ocean/"></a>


<a class="item" data-title="Google Cloud Platform" href="/docs/user-guide/install/gcp/"></a>


<a class="item" data-title="Azure" href="/docs/user-guide/install/azure/"></a>
  </div>
</div>


<a class="item" data-title="Upgrade instructions" href="/docs/user-guide/install/upgrade-instructions/"></a>


<a class="item" data-title="Configuration" href="/docs/user-guide/install/config/"></a>
        </div> <!-- /pi-accordion -->
  </div> <!-- /docsToc -->
  
  <div id="docsContent" class=" hasTocContent">
      <div id="table-of-contents">
          
              <h4>On this page</h4>
          
      </div>
      <div id="top-spacer"></div>
      <h1>Installing ThingsBoard on Windows</h1>
      <div id="content">
          
<div class="info-banner">
<img src="/images/doc-info-icon.svg" />   <div>
    <div class="info-title">
ThingsBoard Cloud
    </div>
    <p>We recommend to use <a href="https://thingsboard.cloud/signup"><strong>ThingsBoard Cloud</strong></a> - fully managed, scalable and fault-tolerant platform for your IoT applications<br /> ThingsBoard Cloud is for everyone who would like to use ThingsBoard but don’t want to host their own instance of the platform.</p>
  </div>
</div>

<ul id="markdown-toc">
  <li><a href="#prerequisites" id="markdown-toc-prerequisites">Prerequisites</a></li>
  <li><a href="#step-1-install-java-11-openjdk" id="markdown-toc-step-1-install-java-11-openjdk">Step 1. Install Java 11 (OpenJDK)</a></li>
  <li><a href="#step-2-thingsboard-service-installation" id="markdown-toc-step-2-thingsboard-service-installation">Step 2. ThingsBoard service installation</a></li>
  <li><a href="#step-3-configure-thingsboard-database" id="markdown-toc-step-3-configure-thingsboard-database">Step 3. Configure ThingsBoard database</a></li>
  <li><a href="#step-4-choose-thingsboard-queue-service" id="markdown-toc-step-4-choose-thingsboard-queue-service">Step 4. Choose ThingsBoard queue service</a></li>
  <li><a href="#step-5-optional-memory-update-for-slow-machines-1gb-of-ram" id="markdown-toc-step-5-optional-memory-update-for-slow-machines-1gb-of-ram">Step 5. [Optional] Memory update for slow machines (1GB of RAM)</a></li>
  <li><a href="#step-6-run-installation-script" id="markdown-toc-step-6-run-installation-script">Step 6. Run installation script</a></li>
  <li><a href="#step-7-start-thingsboard-service" id="markdown-toc-step-7-start-thingsboard-service">Step 7. Start ThingsBoard service</a></li>
  <li><a href="#troubleshooting" id="markdown-toc-troubleshooting">Troubleshooting</a></li>
  <li><a href="#windows-firewall-settings" id="markdown-toc-windows-firewall-settings">Windows firewall settings</a></li>
  <li><a href="#next-steps" id="markdown-toc-next-steps">Next steps</a></li>
</ul>

<h3 id="prerequisites">Prerequisites</h3>

<p>This guide describes how to install ThingsBoard on a Windows machine.
Instructions below are provided for Windows 10/8.1/8/7 32-bit/64-bit. 
Hardware requirements depend on chosen database and amount of devices connected to the system. 
To run ThingsBoard and PostgreSQL on a single machine you will need at least 2Gb of RAM.
To run ThingsBoard and Cassandra on a single machine you will need at least 8Gb of RAM.</p>

<h3 id="step-1-install-java-11-openjdk">Step 1. Install Java 11 (OpenJDK)</h3>

<p>ThingsBoard service is running on Java 11. Follow this instructions to install OpenJDK 11.</p>

<ul>
  <li>Visit <a href="https://adoptopenjdk.net/index.html">Open JDK Download Page</a> to download latest <strong>OpenJDK 11 (LTS)</strong> MSI package.</li>
  <li>Run the downloaded MSI package and follow the instructions. 
 Make sure you have selected “<strong>Add to PATH</strong>” and “<strong>Set JAVA_HOME variable</strong>” options to “Will be installed on local hard drive” state.</li>
  <li>Visit <a href="https://jdbc.postgresql.org/download.html">PostgreSQL JDBC Download Page</a> to download PostgreSQL JDBC Driver</li>
  <li>Copy downloaded file to <strong>C:\Program Files\AdoptOpenJDK\jdk-11.0.10.9-hotspot\jre\lib\ext</strong> and add a global variable named <strong>CLASSPATH</strong> with value <strong>.;”C:\Program Files\AdoptOpenJDK\jdk-11.0.10.9-hotspot\jre\lib\ext\postgresql-42.2.18.jar”</strong> to your system (right click on “My Computer”, scroll down, “Advanced System Settings”, “Advanced”, “Environmental variables…”, under “System variables” click “Create…”).</li>
  <li>If the <strong>jre</strong> folder does not exists under <strong>“C:\Program Files\AdoptOpenJDK\jdk-11.0.10.9-hotspot”</strong> path, create this folder and all required sub-folders</li>
</ul>

<p>You can check the installation using the following command (using Command Prompt):</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre>java <span class="nt">-version</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>Expected command output is:</p>

<div class="language-text highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre></td><td class="rouge-code"><pre>C:\Users\User&gt;java -version
openjdk version "11.0.xx"
OpenJDK Runtime Environment (AdoptOpenJDK)(...)
OpenJDK 64-Bit Server VM (AdoptOpenJDK)(...)
</pre></td></tr></tbody></table></code></pre></div></div>

<h3 id="step-2-thingsboard-service-installation">Step 2. ThingsBoard service installation</h3>

<p>Download and extract the package.</p>

<div class="language-bash copy-code highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre>https://github.com/thingsboard/thingsboard/releases/download/v3.3.1/thingsboard-windows-3.3.1.zip
</pre></td></tr></tbody></table></code></pre></div></div>

<p><strong>Note:</strong> We assume you have extracted ThingsBoard package to default location: <em>C:\Program Files (x86)\thingsboard</em></p>

<h3 id="step-3-configure-thingsboard-database">Step 3. Configure ThingsBoard database</h3>

<p>ThingsBoard is able to use SQL or hybrid database approach. See corresponding architecture <a href="/docs/reference/#sql-vs-nosql-vs-hybrid-database-approach">page</a> for more details.</p>

<div class="tb-content-toggle" id="ubuntuThingsboardDatabase">
  <div class="panel panel-default">
    <div class="panel-heading">
<a class="content-toggle-button" data-target="#postgresql">
                <div class="content-toggle-button-text">
                    PostgreSQL <small>(recommended for &lt; 5K msg/sec)</small>
                </div>
            </a> <a class="content-toggle-button" data-target="#hybrid">
                <div class="content-toggle-button-text">
                    Hybrid <br />PostgreSQL+Cassandra<br /><small>(recommended for &gt; 5K msg/sec)</small>
                </div>
            </a> <a class="content-toggle-button" data-target="#timescale">
                <div class="content-toggle-button-text">
                    Hybrid <br />PostgreSQL+TimescaleDB<br /><small>(for TimescaleDB professionals)</small>
                </div>
            </a>
    </div>
    <div id="postgresql" class="panel-collapse collapse">
      <div class="panel-body">
        <table><tr><td>
<div class="info-banner">
<img src="/images/doc-info-icon.svg" />   <div>
    <p>ThingsBoard team recommends to use PostgreSQL for development and production environments with reasonable load (&lt; 5000 msg/sec). Many cloud vendors support managed PostgreSQL servers which is a cost-effective solution for most of ThingsBoard instances.</p>
  </div>
</div>

<h5 class="no_toc" id="postgresql-installation">PostgreSQL Installation</h5>

<p>Download the installation file (PostgreSQL 11.7 or newer releases) <a href="https://www.enterprisedb.com/downloads/postgres-postgresql-downloads#windows">here</a> and follow the installation instructions.</p>

<p>During PostgreSQL installation, you will be prompted for superuser (postgres) password.
Don’t forget this password. It will be used later. For simplicity, we will substitute it with “postgres”.</p>

<h5 class="no_toc" id="create-thingsboard-database">Create ThingsBoard Database</h5>

<p>Once installed, launch the “pgAdmin” software and login as superuser (postgres). 
Open your server and create database “thingsboard” with owner “postgres”.</p>

<h5 class="no_toc" id="thingsboard-configuration">ThingsBoard Configuration</h5>

<p>In case you have specified the PostgreSQL superuser password as “postgres”, you can skip this step.</p>

<p>Open the Notepad or other editor as administrator user (right click on the app icon and select “Run as administrator”).<br />
Open the following file for editing (select “All Files” instead of “Text Documents” in file choosing dialog, the encoding is UTF-8):</p>

<div class="language-text copy-code highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre>C:\Program Files (x86)\thingsboard\conf\thingsboard.yml
</pre></td></tr></tbody></table></code></pre></div></div>

<p>and locate “# SQL DAO Configuration” block. Don’t forget to replace “postgres” with your real postgres user password:</p>

<div class="language-yml copy-code highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
</pre></td><td class="rouge-code"><pre><span class="c1"># SQL DAO Configuration</span>
<span class="na">spring</span><span class="pi">:</span>
  <span class="na">data</span><span class="pi">:</span>
    <span class="na">jpa</span><span class="pi">:</span>
      <span class="na">repositories</span><span class="pi">:</span>
        <span class="na">enabled</span><span class="pi">:</span> <span class="s2">"</span><span class="s">true"</span>
  <span class="na">jpa</span><span class="pi">:</span>
    <span class="na">open-in-view</span><span class="pi">:</span> <span class="s2">"</span><span class="s">false"</span>
    <span class="na">hibernate</span><span class="pi">:</span>
      <span class="na">ddl-auto</span><span class="pi">:</span> <span class="s2">"</span><span class="s">none"</span>
    <span class="na">database-platform</span><span class="pi">:</span> <span class="s2">"</span><span class="s">${SPRING_JPA_DATABASE_PLATFORM:org.hibernate.dialect.PostgreSQLDialect}"</span>
  <span class="na">datasource</span><span class="pi">:</span>
    <span class="na">driverClassName</span><span class="pi">:</span> <span class="s2">"</span><span class="s">${SPRING_DRIVER_CLASS_NAME:org.postgresql.Driver}"</span>
    <span class="na">url</span><span class="pi">:</span> <span class="s2">"</span><span class="s">${SPRING_DATASOURCE_URL:jdbc:postgresql://localhost:5432/thingsboard}"</span>
    <span class="na">username</span><span class="pi">:</span> <span class="s2">"</span><span class="s">${SPRING_DATASOURCE_USERNAME:postgres}"</span>
    <span class="na">password</span><span class="pi">:</span> <span class="s2">"</span><span class="s">${SPRING_DATASOURCE_PASSWORD:YOUR_POSTGRES_PASSWORD_HERE}"</span>
    <span class="na">hikari</span><span class="pi">:</span>
      <span class="na">maximumPoolSize</span><span class="pi">:</span> <span class="s2">"</span><span class="s">${SPRING_DATASOURCE_MAXIMUM_POOL_SIZE:5}"</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>locate “SQL_POSTGRES_TS_KV_PARTITIONING” parameter in order to override the default value for timestamp key-value storage partitioning size:</p>

<div class="language-yml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre></td><td class="rouge-code"><pre>    <span class="na">sql</span><span class="pi">:</span>
      <span class="na">postgres</span><span class="pi">:</span>
        <span class="c1"># Specify partitioning size for timestamp key-value storage. Example: DAYS, MONTHS, YEARS, INDEFINITE.</span>
        <span class="na">ts_key_value_partitioning</span><span class="pi">:</span> <span class="s2">"</span><span class="s">${SQL_POSTGRES_TS_KV_PARTITIONING:MONTHS}"</span>
</pre></td></tr></tbody></table></code></pre></div></div>

</td></tr></table>
      </div>
    </div>
    <div id="hybrid" class="panel-collapse collapse">
      <div class="panel-body">
        <table><tr><td>
<div class="info-banner">
<img src="/images/doc-info-icon.svg" />   <div>
    <p>ThingsBoard team recommends to use Hybrid database approach if you do plan to have 1M+ devices in production or high data ingestion rate (&gt; 5000 msg/sec). In this case, ThingsBoard will be storing timeseries data in Cassandra while continue to use PostgreSQL for main entities (devices/assets/dashboards/customers).</p>
  </div>
</div>

<div class="info-banner">
<img src="/images/doc-info-icon.svg" />   <div>
    <p>Please note that Cassandra 4.x is still in beta. ThingsBoard is compatible with Cassandra 3.x as well. However, since ThingsBoard 3.2.2+ requires Java 11 and Cassandra 3.x is <a href="https://cassandra.apache.org/doc/latest/new/java11.html">not compatible</a> with Java 8, you <strong>can’t launch ThingsBoard 3.2.2+ and Cassandra 3.x on the same machine without separate docker containers for both.</strong>.</p>
    <p>Please consider using <a href="/docs/user-guide/install/cluster/docker-compose-setup/">docker compose</a> or other <a href="/docs/user-guide/install/cluster-setup/">cluster setup</a> to avoid issues with beta version of Cassandra.</p>
  </div>
</div>

<h5 class="no_toc" id="postgresql-installation">PostgreSQL Installation</h5>

<p>Download the installation file (PostgreSQL 11.7 or newer releases) <a href="https://www.enterprisedb.com/downloads/postgres-postgresql-downloads#windows">here</a> and follow the installation instructions.</p>

<p>During PostgreSQL installation, you will be prompted for superuser (postgres) password.
Don’t forget this password. It will be used later. For simplicity, we will substitute it with “postgres”.</p>

<h5 class="no_toc" id="create-thingsboard-database">Create ThingsBoard Database</h5>

<p>Once installed, launch the “pgAdmin” software and login as superuser (postgres). 
Open your server and create database “thingsboard” with owner “postgres”.</p>

<h5 class="no_toc" id="cassandra-installation">Cassandra Installation</h5>

<p>Instructions listed below will help you to install Cassandra.</p>

<ul>
  <li>Download DataStax Community Edition v3.0.9
    <ul>
      <li><a href="http://downloads.datastax.com/community/datastax-community-32bit_3.0.9.msi">MSI Installer (32-bit)</a></li>
      <li><a href="http://downloads.datastax.com/community/datastax-community-64bit_3.0.9.msi">MSI Installer (64-bit)</a></li>
    </ul>
  </li>
  <li>Run downloaded MSI package. You are first presented with an initial welcome panel that identifies your installation package:</li>
</ul>

<p><img src="/images/user-guide/install/windows/windows-cassandra-1.png" alt="image" /></p>

<ul>
  <li>Clicking next takes you to the end user license agreement:</li>
</ul>

<p><img src="/images/user-guide/install/windows/windows-cassandra-2.png" alt="image" /></p>

<ul>
  <li>The next panel allows you to specify where the software is to be installed:</li>
</ul>

<p><img src="/images/user-guide/install/windows/windows-cassandra-3.png" alt="image" /></p>

<ul>
  <li>Once the installation directory has been set, the installer will ask how you want to handle the service that will be installed:</li>
</ul>

<p><img src="/images/user-guide/install/windows/windows-cassandra-4.png" alt="image" /></p>

<ul>
  <li>The next panel initiates the installation process:</li>
</ul>

<p><img src="/images/user-guide/install/windows/windows-cassandra-5.png" alt="image" /></p>

<p><img src="/images/user-guide/install/windows/windows-cassandra-6.png" alt="image" /></p>

<ul>
  <li>The final panel asks if you would like to register to be updated when new versions of the software become available:</li>
</ul>

<p><img src="/images/user-guide/install/windows/windows-cassandra-7.png" alt="image" /></p>

<ul>
  <li>You can find installed interfaces in “DataStax Community Edition” program group that the installer creates for you:</li>
</ul>

<p><img src="/images/user-guide/install/windows/windows-cassandra-8.png" alt="image" /></p>

<ul>
  <li>The primary interface into Cassandra is the CQL (Cassandra Query Language) shell utility, which can be used to execute CQL commands for the new Cassandra server.</li>
</ul>

<h5 class="no_toc" id="thingsboard-configuration">ThingsBoard Configuration</h5>

<p>Open the Notepad or other editor as administrator user (right click on the app icon and select “Run as administrator”).<br />
Open the following file for editing (select “All Files” instead of “Text Documents” in file choosing dialog, the encoding is UTF-8):</p>

<div class="language-text copy-code highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre>C:\Program Files (x86)\thingsboard\conf\thingsboard.yml
</pre></td></tr></tbody></table></code></pre></div></div>

<p>and locate “# SQL DAO Configuration” block. Don’t forget to replace “postgres” with your real postgres user password:</p>

<div class="language-yml copy-code highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
</pre></td><td class="rouge-code"><pre><span class="c1"># SQL DAO Configuration</span>
<span class="na">spring</span><span class="pi">:</span>
  <span class="na">data</span><span class="pi">:</span>
    <span class="na">jpa</span><span class="pi">:</span>
      <span class="na">repositories</span><span class="pi">:</span>
        <span class="na">enabled</span><span class="pi">:</span> <span class="s2">"</span><span class="s">true"</span>
  <span class="na">jpa</span><span class="pi">:</span>
    <span class="na">open-in-view</span><span class="pi">:</span> <span class="s2">"</span><span class="s">false"</span>
    <span class="na">hibernate</span><span class="pi">:</span>
      <span class="na">ddl-auto</span><span class="pi">:</span> <span class="s2">"</span><span class="s">none"</span>
    <span class="na">database-platform</span><span class="pi">:</span> <span class="s2">"</span><span class="s">${SPRING_JPA_DATABASE_PLATFORM:org.hibernate.dialect.PostgreSQLDialect}"</span>
  <span class="na">datasource</span><span class="pi">:</span>
    <span class="na">driverClassName</span><span class="pi">:</span> <span class="s2">"</span><span class="s">${SPRING_DRIVER_CLASS_NAME:org.postgresql.Driver}"</span>
    <span class="na">url</span><span class="pi">:</span> <span class="s2">"</span><span class="s">${SPRING_DATASOURCE_URL:jdbc:postgresql://localhost:5432/thingsboard}"</span>
    <span class="na">username</span><span class="pi">:</span> <span class="s2">"</span><span class="s">${SPRING_DATASOURCE_USERNAME:postgres}"</span>
    <span class="na">password</span><span class="pi">:</span> <span class="s2">"</span><span class="s">${SPRING_DATASOURCE_PASSWORD:YOUR_POSTGRES_PASSWORD_HERE}"</span>
    <span class="na">hikari</span><span class="pi">:</span>
      <span class="na">maximumPoolSize</span><span class="pi">:</span> <span class="s2">"</span><span class="s">${SPRING_DATASOURCE_MAXIMUM_POOL_SIZE:5}"</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>locate “DATABASE_TS_TYPE” parameter. Replace “sql” with “cassandra”.</p>

<div class="language-yml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre>    <span class="na">type</span><span class="pi">:</span> <span class="s2">"</span><span class="s">${DATABASE_TS_TYPE:cassandra}"</span> <span class="c1"># cassandra OR sql (for hybrid mode, only this value should be cassandra)</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>You can optionally tune parameters inside “cassandra” configuration block.</p>

<div class="language-yml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
</pre></td><td class="rouge-code"><pre><span class="c1"># Cassandra driver configuration parameters</span>
<span class="na">cassandra</span><span class="pi">:</span>
  <span class="c1"># Thingsboard cluster name</span>
  <span class="na">cluster_name</span><span class="pi">:</span> <span class="s2">"</span><span class="s">${CASSANDRA_CLUSTER_NAME:Thingsboard</span><span class="nv"> </span><span class="s">Cluster}"</span>
  <span class="c1"># Thingsboard keyspace name</span>
  <span class="na">keyspace_name</span><span class="pi">:</span> <span class="s2">"</span><span class="s">${CASSANDRA_KEYSPACE_NAME:thingsboard}"</span>
  <span class="c1"># Specify node list</span>
  <span class="na">url</span><span class="pi">:</span> <span class="s2">"</span><span class="s">${CASSANDRA_URL:127.0.0.1:9042}"</span>
  <span class="c1"># Enable/disable secure connection</span>
  <span class="na">ssl</span><span class="pi">:</span> <span class="s2">"</span><span class="s">${CASSANDRA_USE_SSL:false}"</span>
  <span class="c1"># Enable/disable JMX</span>
  <span class="na">jmx</span><span class="pi">:</span> <span class="s2">"</span><span class="s">${CASSANDRA_USE_JMX:true}"</span>
  <span class="c1"># Enable/disable metrics collection.</span>
  <span class="na">metrics</span><span class="pi">:</span> <span class="s2">"</span><span class="s">${CASSANDRA_DISABLE_METRICS:true}"</span>
  <span class="c1"># NONE SNAPPY LZ4</span>
  <span class="na">compression</span><span class="pi">:</span> <span class="s2">"</span><span class="s">${CASSANDRA_COMPRESSION:none}"</span>
  <span class="c1"># Specify cassandra cluster initialization timeout in milliseconds (if no hosts available during startup)</span>
  <span class="na">init_timeout_ms</span><span class="pi">:</span> <span class="s2">"</span><span class="s">${CASSANDRA_CLUSTER_INIT_TIMEOUT_MS:300000}"</span>
  <span class="c1"># Specify cassandra claster initialization retry interval (if no hosts available during startup)</span>
  <span class="na">init_retry_interval_ms</span><span class="pi">:</span> <span class="s2">"</span><span class="s">${CASSANDRA_CLUSTER_INIT_RETRY_INTERVAL_MS:3000}"</span>
  <span class="na">max_requests_per_connection_local</span><span class="pi">:</span> <span class="s2">"</span><span class="s">${CASSANDRA_MAX_REQUESTS_PER_CONNECTION_LOCAL:32768}"</span>
  <span class="na">max_requests_per_connection_remote</span><span class="pi">:</span> <span class="s2">"</span><span class="s">${CASSANDRA_MAX_REQUESTS_PER_CONNECTION_REMOTE:32768}"</span>
  <span class="c1"># Credential parameters #</span>
  <span class="na">credentials</span><span class="pi">:</span> <span class="s2">"</span><span class="s">${CASSANDRA_USE_CREDENTIALS:false}"</span>
  <span class="c1"># Specify your username</span>
  <span class="na">username</span><span class="pi">:</span> <span class="s2">"</span><span class="s">${CASSANDRA_USERNAME:}"</span>
  <span class="c1"># Specify your password</span>
  <span class="na">password</span><span class="pi">:</span> <span class="s2">"</span><span class="s">${CASSANDRA_PASSWORD:}"</span>
</pre></td></tr></tbody></table></code></pre></div></div>

</td></tr></table>
      </div>
    </div>
    <div id="timescale" class="panel-collapse collapse">
      <div class="panel-body">
        <table><tr><td>
<div class="info-banner">
<img src="/images/doc-info-icon.svg" />   <div>
    <p>ThingsBoard team recommends using Timescale database only for companies that already use TimescaleDB in production. In this case, ThingsBoard will be storing timeseries data in TimescaleDB Hypertable while continue to use PostgreSQL for main entities (devices/assets/dashboards/customers).</p>
  </div>
</div>

<h5 class="no_toc" id="postgresql-installation">PostgreSQL Installation</h5>

<p>Download the installation file (PostgreSQL 11.7 or newer releases) <a href="https://www.enterprisedb.com/downloads/postgres-postgresql-downloads#windows">here</a> and follow the installation instructions.</p>

<p>During PostgreSQL installation, you will be prompted for superuser (postgres) password.
Don’t forget this password. It will be used later. For simplicity, we will substitute it with “postgres”.</p>

<h5 class="no_toc" id="create-thingsboard-database">Create ThingsBoard Database</h5>

<p>Once installed, launch the “pgAdmin” software and login as superuser (postgres). 
Open your server and create database “thingsboard” with owner “postgres”.</p>

<h5 class="no_toc" id="timescaledb-installation">TimescaleDB Installation</h5>

<p>Please refer to the official <a href="https://docs.timescale.com/latest/getting-started/installation/windows/installation-windows">TimescaleDB installation page</a> on Windows and follow the instructions in accordance with your installed PostgreSQL version.</p>

<p>After package installation, you need to create TimescaleDB extension in your ThingsBoard database:</p>
<ol>
  <li>Run PSQL console: Start Menu → PostgreSQL → SQL Shell (psql);</li>
  <li>Login to your “thingsboard” database;</li>
  <li>Run the command:
    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre>CREATE EXTENSION IF NOT EXISTS timescaledb<span class="p">;</span>
</pre></td></tr></tbody></table></code></pre></div>    </div>
  </li>
</ol>

<h5 class="no_toc" id="thingsboard-configuration">ThingsBoard Configuration</h5>

<p>Open the Notepad or other editor as administrator user (right click on the app icon and select “Run as administrator”).<br />
Open the following file for editing (select “All Files” instead of “Text Documents” in file choosing dialog, the encoding is UTF-8):</p>

<div class="language-text copy-code highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre>C:\Program Files (x86)\thingsboard\conf\thingsboard.yml
</pre></td></tr></tbody></table></code></pre></div></div>

<p>and locate “# SQL DAO Configuration” block. Don’t forget to replace “postgres” with your real postgres user password:</p>

<div class="language-yml copy-code highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
</pre></td><td class="rouge-code"><pre><span class="c1"># SQL DAO Configuration</span>
<span class="na">spring</span><span class="pi">:</span>
  <span class="na">data</span><span class="pi">:</span>
    <span class="na">jpa</span><span class="pi">:</span>
      <span class="na">repositories</span><span class="pi">:</span>
        <span class="na">enabled</span><span class="pi">:</span> <span class="s2">"</span><span class="s">true"</span>
  <span class="na">jpa</span><span class="pi">:</span>
    <span class="na">open-in-view</span><span class="pi">:</span> <span class="s2">"</span><span class="s">false"</span>
    <span class="na">hibernate</span><span class="pi">:</span>
      <span class="na">ddl-auto</span><span class="pi">:</span> <span class="s2">"</span><span class="s">none"</span>
    <span class="na">database-platform</span><span class="pi">:</span> <span class="s2">"</span><span class="s">${SPRING_JPA_DATABASE_PLATFORM:org.hibernate.dialect.PostgreSQLDialect}"</span>
  <span class="na">datasource</span><span class="pi">:</span>
    <span class="na">driverClassName</span><span class="pi">:</span> <span class="s2">"</span><span class="s">${SPRING_DRIVER_CLASS_NAME:org.postgresql.Driver}"</span>
    <span class="na">url</span><span class="pi">:</span> <span class="s2">"</span><span class="s">${SPRING_DATASOURCE_URL:jdbc:postgresql://localhost:5432/thingsboard}"</span>
    <span class="na">username</span><span class="pi">:</span> <span class="s2">"</span><span class="s">${SPRING_DATASOURCE_USERNAME:postgres}"</span>
    <span class="na">password</span><span class="pi">:</span> <span class="s2">"</span><span class="s">${SPRING_DATASOURCE_PASSWORD:YOUR_POSTGRES_PASSWORD_HERE}"</span>
    <span class="na">hikari</span><span class="pi">:</span>
      <span class="na">maximumPoolSize</span><span class="pi">:</span> <span class="s2">"</span><span class="s">${SPRING_DATASOURCE_MAXIMUM_POOL_SIZE:5}"</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>locate “DATABASE_TS_TYPE” parameter. Replace “sql” with “timescale”.</p>

<div class="language-yml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre></td><td class="rouge-code"><pre>      <span class="na">ts</span><span class="pi">:</span>
        <span class="na">type</span><span class="pi">:</span> <span class="s2">"</span><span class="s">${DATABASE_TS_TYPE:sql}"</span> <span class="c1"># cassandra, sql, or timescale (for hybrid mode, DATABASE_TS_TYPE value should be cassandra, or timescale)</span>
    
    <span class="c1"># note: timescale works only with postgreSQL database for DATABASE_ENTITIES_TYPE.</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>You can optionally tune parameters that refer to the Timescale DB configuration: “timescale” configuration block inside “sql” configuration block.</p>

<div class="language-yml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre></td><td class="rouge-code"><pre><span class="c1"># SQL configuration parameters</span>
<span class="na">sql</span><span class="pi">:</span>
    <span class="na">timescale</span><span class="pi">:</span>
      <span class="c1"># Specify Interval size for new data chunks storage.</span>
      <span class="na">chunk_time_interval</span><span class="pi">:</span> <span class="s2">"</span><span class="s">${SQL_TIMESCALE_CHUNK_TIME_INTERVAL:604800000}"</span>
</pre></td></tr></tbody></table></code></pre></div></div>

</td></tr></table>
      </div>
    </div>
  </div>
</div>

<script>
    jqueryUiDefer(initContentToggleubuntuThingsboardDatabase);
    function initContentToggleubuntuThingsboardDatabase() {
        $(function(){

            window.addEventListener('popstate', onPopStateubuntuThingsboardDatabase);

            onPopStateubuntuThingsboardDatabase();

            $('.tb-content-toggle#ubuntuThingsboardDatabase a.content-toggle-button').click(function(event) {
                event.preventDefault();
                var id = $(this).attr("data-target").substring(1);
                var param = 'ubuntuThingsboardDatabase';
                var params = Qs.parse(window.location.search, { ignoreQueryPrefix: true });
                params[param] = id;

                var newurl = window.location.protocol + "//" + window.location.host + window.location.pathname + '?' + Qs.stringify(params);
                if (window.location.hash) {
                    newurl += window.location.hash;
                }
                window.history.pushState({ path: newurl }, '', newurl);
                selectTargetubuntuThingsboardDatabase(id);
            });
        });
    }

    function onPopStateubuntuThingsboardDatabase() {
        var params = Qs.parse(window.location.search, { ignoreQueryPrefix: true });
        var targetId = params['ubuntuThingsboardDatabase'];
        if (!targetId) {
            targetId = 'postgresql';
        }
        selectTargetubuntuThingsboardDatabase(targetId);
    }

    function selectTargetubuntuThingsboardDatabase(targetId) {
        $(".tb-content-toggle#ubuntuThingsboardDatabase a.content-toggle-button").removeClass("active");
        $(".tb-content-toggle#ubuntuThingsboardDatabase a.content-toggle-button[data-target='#"+targetId+"']").addClass("active");
        $('.tb-content-toggle#ubuntuThingsboardDatabase .panel-collapse').removeClass("show");
        $('.tb-content-toggle#ubuntuThingsboardDatabase .panel-collapse#'+targetId).addClass("show");
    }

</script>

<h3 id="step-4-choose-thingsboard-queue-service">Step 4. Choose ThingsBoard queue service</h3>

<p>ThingsBoard is able to use various messaging systems/brokers for storing the messages and communication between ThingsBoard services. How to choose the right queue implementation?</p>

<ul>
  <li>
    <p><strong>In Memory</strong> queue implementation is built-in and default. 
It is useful for development(PoC) environments and is not suitable for production deployments or any sort of cluster deployments.</p>
  </li>
  <li>
    <p><strong>Kafka</strong> is recommended for production deployments. This queue is used on the most of ThingsBoard production environments now. 
It is useful for both on-prem and private cloud deployments. It is also useful if you like to stay independent from your cloud provider.
However, some providers also have managed services for Kafka. See AWS <a href="https://aws.amazon.com/msk/">MSK</a> for example.</p>
  </li>
  <li>
    <p><strong>RabbitMQ</strong> is recommended if you don’t have much load and you already have experience with this messaging system.</p>
  </li>
  <li>
    <p><strong>AWS SQS</strong> is a fully managed message queuing service from AWS. Useful if you plan to deploy ThingsBoard on AWS.</p>
  </li>
  <li>
    <p><strong>Google Pub/Sub</strong> is a fully managed message queuing service from Google. Useful if you plan to deploy ThingsBoard on Google Cloud.</p>
  </li>
  <li>
    <p><strong>Azure Service Bus</strong> is a fully managed message queuing service from Azure. Useful if you plan to deploy ThingsBoard on Azure.</p>
  </li>
  <li>
    <p><strong>Confluent Cloud</strong> is a fully managed streaming platform based on Kafka. Useful for a cloud agnostic deployments.</p>
  </li>
</ul>

<p>See corresponding architecture <a href="/docs/reference/#message-queues-are-awesome">page</a> and rule engine <a href="/docs/user-guide/rule-engine-2-0/overview/#rule-engine-queue">page</a> for more details.</p>

<div class="tb-content-toggle" id="windowsThingsboardQueue">
  <div class="panel panel-default">
    <div class="panel-heading">
<a class="content-toggle-button" data-target="#inmemory">
                <div class="content-toggle-button-text">
                    In Memory <small>(built-in and default)</small>
                </div>
            </a> <a class="content-toggle-button" data-target="#kafka">
                <div class="content-toggle-button-text">
                    Kafka <small>(recommended for on-prem, production installations)</small>
                </div>
            </a> <a class="content-toggle-button" data-target="#aws-sqs">
                <div class="content-toggle-button-text">
                    AWS SQS <small>(managed service from AWS)</small>
                </div>
            </a> <a class="content-toggle-button" data-target="#pubsub">
                <div class="content-toggle-button-text">
                    Google Pub/Sub <small>(managed service from Google)</small>
                </div>
            </a> <a class="content-toggle-button" data-target="#service-bus">
                <div class="content-toggle-button-text">
                    Azure Service Bus <small>(managed service from Azure)</small>
                </div>
            </a> <a class="content-toggle-button" data-target="#rabbitmq">
                <div class="content-toggle-button-text">
                    RabbitMQ <small>(for small on-prem installations)</small>
                </div>
            </a> <a class="content-toggle-button" data-target="#confluent-cloud">
                <div class="content-toggle-button-text">
                    Confluent Cloud <small>(Event Streaming Platform based on Kafka)</small>
                </div>
            </a>
    </div>
    <div id="inmemory" class="panel-collapse collapse">
      <div class="panel-body">
        <table><tr><td>
<p>In Memory queue is built-in and enabled by default. No additional configuration steps required.</p>

</td></tr></table>
      </div>
    </div>
    <div id="kafka" class="panel-collapse collapse">
      <div class="panel-body">
        <table><tr><td>
<h4 class="no_toc" id="kafka-installation">Kafka Installation</h4>

<p><a href="https://kafka.apache.org/">Apache Kafka</a> is an open-source stream-processing software platform.</p>

<h5 class="no_toc" id="install-kafka">Install Kafka</h5>

<p>Use this <a href="https://github.com/wurstmeister/kafka-docker">instruction</a> for installing Kafka in Docker container.</p>

<h5 class="no_toc" id="thingsboard-configuration">ThingsBoard Configuration</h5>

<p>Open the Notepad or other editor as administrator user (right click on the app icon and select “Run as administrator”).<br />
Open the following file for editing (select “All Files” instead of “Text Documents” in file choosing dialog, the encoding is UTF-8):</p>

<div class="language-text copy-code highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre>C:\Program Files (x86)\thingsboard\conf\thingsboard.yml
</pre></td></tr></tbody></table></code></pre></div></div>

<p>and locate “queue:” block. Make sure the queue type is “kafka”, and <strong>don’t forget</strong> to replace “localhost:9092” with your real Kafka bootstrap servers:</p>

<div class="language-yml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
</pre></td><td class="rouge-code"><pre><span class="na">queue</span><span class="pi">:</span>
  <span class="na">type</span><span class="pi">:</span> <span class="s2">"</span><span class="s">${TB_QUEUE_TYPE:kafka}"</span>
<span class="nn">...</span>
  <span class="na">kafka</span><span class="pi">:</span>
    <span class="s">bootstrap.servers</span><span class="pi">:</span> <span class="s2">"</span><span class="s">${TB_KAFKA_SERVERS:localhost:9092}"</span>
    <span class="na">acks</span><span class="pi">:</span> <span class="s2">"</span><span class="s">${TB_KAFKA_ACKS:all}"</span>
    <span class="na">retries</span><span class="pi">:</span> <span class="s2">"</span><span class="s">${TB_KAFKA_RETRIES:1}"</span>
    <span class="s">batch.size</span><span class="pi">:</span> <span class="s2">"</span><span class="s">${TB_KAFKA_BATCH_SIZE:16384}"</span>
    <span class="s">linger.ms</span><span class="pi">:</span> <span class="s2">"</span><span class="s">${TB_KAFKA_LINGER_MS:1}"</span>
    <span class="s">buffer.memory</span><span class="pi">:</span> <span class="s2">"</span><span class="s">${TB_BUFFER_MEMORY:33554432}"</span>
    <span class="na">replication_factor</span><span class="pi">:</span> <span class="s2">"</span><span class="s">${TB_QUEUE_KAFKA_REPLICATION_FACTOR:1}"</span>
</pre></td></tr></tbody></table></code></pre></div></div>

</td></tr></table>
      </div>
    </div>
    <div id="aws-sqs" class="panel-collapse collapse">
      <div class="panel-body">
        <table><tr><td>
<h4 class="no_toc" id="aws-sqs-configuration">AWS SQS Configuration</h4>

<p>To access AWS SQS service, you first need to create an <a href="https://aws.amazon.com/sqs/">AWS account</a>.</p>

<p>To work with AWS SQS service you will need to create your next credentials using <a href="https://docs.aws.amazon.com/AWSSimpleQueueService/latest/SQSDeveloperGuide/sqs-setting-up.html">this instruction</a>:</p>
<ul>
  <li>Access key ID</li>
  <li>Secret access key</li>
</ul>

<h5 class="no_toc" id="thingsboard-configuration">ThingsBoard Configuration</h5>

<p>Open the Notepad or other editor as administrator user (right click on the app icon and select “Run as administrator”).<br />
Open the following file for editing (select “All Files” instead of “Text Documents” in file choosing dialog, the encoding is UTF-8):</p>

<div class="language-text copy-code highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre>C:\Program Files (x86)\thingsboard\conf\thingsboard.yml
</pre></td></tr></tbody></table></code></pre></div></div>

<p>and locate “queue:” block. Make sure the queue type is “aws-sqs”, and don’t forget to replace “YOUR_KEY”, “YOUR_SECRET” with your <strong>real AWS SQS IAM user credentials</strong> and “YOUR_REGION” with your <strong>real AWS SQS account region:</strong></p>

<div class="language-yml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
</pre></td><td class="rouge-code"><pre><span class="na">queue</span><span class="pi">:</span>
  <span class="na">type</span><span class="pi">:</span> <span class="s2">"</span><span class="s">${TB_QUEUE_TYPE:aws-sqs}"</span>
<span class="nn">...</span>
  <span class="na">aws_sqs</span><span class="pi">:</span>
    <span class="na">access_key_id</span><span class="pi">:</span> <span class="s2">"</span><span class="s">${TB_QUEUE_AWS_SQS_ACCESS_KEY_ID:YOUR_KEY}"</span>
    <span class="na">secret_access_key</span><span class="pi">:</span> <span class="s2">"</span><span class="s">${TB_QUEUE_AWS_SQS_SECRET_ACCESS_KEY:YOUR_SECRET}"</span>
    <span class="na">region</span><span class="pi">:</span> <span class="s2">"</span><span class="s">${TB_QUEUE_AWS_SQS_REGION:YOUR_REGION}"</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p><strong>These params affect the number of requests per second from each partitions per each queue.</strong></p>

<p>Number of requests to particular Message Queue calculated based on the formula:</p>

<p>((Number of Rule Engine and Core Queues) * (Number of partitions per Queue) + 
(Number of transport queues) + (Number of microservices) + (Number of JS executors)) * 1000 / POLL_INTERVAL_MS</p>

<p>For example, number of requests based on default parameters is:</p>

<p>Rule Engine queues:</p>

<p>Main <strong>10</strong> partitions + HighPriority <strong>10</strong> partitions + SequentialByOriginator <strong>10</strong> partitions = <strong>30</strong></p>

<p>Core queue <strong>10</strong> partitions</p>

<p>Transport request Queue + response Queue = <strong>2</strong></p>

<p>Rule Engine Transport notifications Queue + Core Transport notifications Queue = <strong>2</strong></p>

<p>Total = <strong>44</strong></p>

<p>Number of requests per second = <strong>44 * 1000 / 25 = 1760</strong> requests</p>

<p>Based on the use case, you can compromise latency and decrease number of partitions/requests to the queue, if the message load is low.</p>

<p>Sample parameters to fit into <strong>10</strong> requests per second on a “monolith” deployment:</p>

<div class="language-yml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
</pre></td><td class="rouge-code"><pre><span class="na">queue</span><span class="pi">:</span>
<span class="nn">...</span>
  <span class="na">transport_api</span><span class="pi">:</span>
    <span class="na">request_poll_interval</span><span class="pi">:</span> <span class="s2">"</span><span class="s">${TB_QUEUE_TRANSPORT_REQUEST_POLL_INTERVAL_MS:1000}"</span>
    <span class="na">response_poll_interval</span><span class="pi">:</span> <span class="s2">"</span><span class="s">${TB_QUEUE_TRANSPORT_RESPONSE_POLL_INTERVAL_MS:1000}"</span>
<span class="nn">...</span>
  <span class="na">core</span><span class="pi">:</span>
    <span class="na">poll-interval</span><span class="pi">:</span> <span class="s2">"</span><span class="s">${TB_QUEUE_CORE_POLL_INTERVAL_MS:1000}"</span>
    <span class="na">partitions</span><span class="pi">:</span> <span class="s2">"</span><span class="s">${TB_QUEUE_CORE_PARTITIONS:2}"</span>
<span class="nn">...</span>
  <span class="na">js</span><span class="pi">:</span>
    <span class="na">response_poll_interval</span><span class="pi">:</span> <span class="s2">"</span><span class="s">${REMOTE_JS_RESPONSE_POLL_INTERVAL_MS:1000}"</span>
<span class="nn">...</span>
  <span class="na">rule-engine</span><span class="pi">:</span>
    <span class="na">poll-interval</span><span class="pi">:</span> <span class="s2">"</span><span class="s">${TB_QUEUE_RULE_ENGINE_POLL_INTERVAL_MS:1000}"</span>
<span class="nn">...</span>
    <span class="na">queues</span><span class="pi">:</span>
        <span class="na">poll-interval</span><span class="pi">:</span> <span class="s2">"</span><span class="s">${TB_QUEUE_RE_MAIN_POLL_INTERVAL_MS:1000}"</span>
        <span class="na">partitions</span><span class="pi">:</span> <span class="s2">"</span><span class="s">${TB_QUEUE_RE_MAIN_PARTITIONS:2}"</span>
<span class="nn">...</span>
        <span class="na">poll-interval</span><span class="pi">:</span> <span class="s2">"</span><span class="s">${TB_QUEUE_RE_HP_POLL_INTERVAL_MS:1000}"</span>
        <span class="na">partitions</span><span class="pi">:</span> <span class="s2">"</span><span class="s">${TB_QUEUE_RE_HP_PARTITIONS:1}"</span>
<span class="nn">...</span>
        <span class="na">poll-interval</span><span class="pi">:</span> <span class="s2">"</span><span class="s">${TB_QUEUE_RE_SQ_POLL_INTERVAL_MS:1000}"</span>
        <span class="na">partitions</span><span class="pi">:</span> <span class="s2">"</span><span class="s">${TB_QUEUE_RE_SQ_PARTITIONS:1}"</span>
<span class="nn">...</span>
  <span class="na">transport</span><span class="pi">:</span>
    <span class="na">poll_interval</span><span class="pi">:</span> <span class="s2">"</span><span class="s">${TB_QUEUE_TRANSPORT_NOTIFICATIONS_POLL_INTERVAL_MS:1000}"</span>
</pre></td></tr></tbody></table></code></pre></div></div>

</td></tr></table>
      </div>
    </div>
    <div id="pubsub" class="panel-collapse collapse">
      <div class="panel-body">
        <table><tr><td>
<h4 class="no_toc" id="google-pubsub-configuration">Google Pub/Sub Configuration</h4>

<p>To access Pub/Sub service, you first need to create an <a href="https://cloud.google.com/">Google cloud account</a>.</p>

<p>To work with Pub/Sub service you will need to create a project using <a href="https://cloud.google.com/resource-manager/docs/creating-managing-projects">this instruction</a>.</p>

<p>Create service account credentials with the <strong>role “Editor” or “Admin”</strong> using <a href="https://cloud.google.com/pubsub/docs/quickstart-py-mac#create_service_account_credentials">this instruction</a>,
and save json file with your service account credentials step 9 <a href="https://cloud.google.com/pubsub/docs/quickstart-py-mac#create_service_account_credentials">here</a>.</p>

<h5 class="no_toc" id="thingsboard-configuration">ThingsBoard Configuration</h5>

<p>Open the Notepad or other editor as administrator user (right click on the app icon and select “Run as administrator”).<br />
Open the following file for editing (select “All Files” instead of “Text Documents” in file choosing dialog, the encoding is UTF-8):</p>

<div class="language-text copy-code highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre>C:\Program Files (x86)\thingsboard\conf\thingsboard.yml
</pre></td></tr></tbody></table></code></pre></div></div>

<p>and locate “queue:” block. Make sure the queue type is “pubsub”, and don’t forget to replace “YOUR_PROJECT_ID”, “YOUR_SERVICE_ACCOUNT” with your <strong>real Pub/Sub project id, and service account (it is whole data from json file):</strong></p>

<div class="language-yml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
</pre></td><td class="rouge-code"><pre><span class="na">queue</span><span class="pi">:</span>
  <span class="na">type</span><span class="pi">:</span> <span class="s2">"</span><span class="s">${TB_QUEUE_TYPE:pubsub}"</span>
<span class="nn">...</span>
  <span class="na">pubsub</span><span class="pi">:</span>
    <span class="na">project_id</span><span class="pi">:</span> <span class="s2">"</span><span class="s">${TB_QUEUE_PUBSUB_PROJECT_ID:YOUR_PROJECT_ID}"</span>
    <span class="na">service_account</span><span class="pi">:</span> <span class="s2">"</span><span class="s">${TB_QUEUE_PUBSUB_SERVICE_ACCOUNT:YOUR_SERVICE_ACCOUNT}"</span>
    <span class="na">max_msg_size</span><span class="pi">:</span> <span class="s2">"</span><span class="s">${TB_QUEUE_PUBSUB_MAX_MSG_SIZE:1048576}"</span> <span class="c1">#in bytes</span>
    <span class="na">max_messages</span><span class="pi">:</span> <span class="s2">"</span><span class="s">${TB_QUEUE_PUBSUB_MAX_MESSAGES:1000}"</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p><strong>These params affect the number of requests per second from each partitions per each queue.</strong></p>

<p>Number of requests to particular Message Queue calculated based on the formula:</p>

<p>((Number of Rule Engine and Core Queues) * (Number of partitions per Queue) + 
(Number of transport queues) + (Number of microservices) + (Number of JS executors)) * 1000 / POLL_INTERVAL_MS</p>

<p>For example, number of requests based on default parameters is:</p>

<p>Rule Engine queues:</p>

<p>Main <strong>10</strong> partitions + HighPriority <strong>10</strong> partitions + SequentialByOriginator <strong>10</strong> partitions = <strong>30</strong></p>

<p>Core queue <strong>10</strong> partitions</p>

<p>Transport request Queue + response Queue = <strong>2</strong></p>

<p>Rule Engine Transport notifications Queue + Core Transport notifications Queue = <strong>2</strong></p>

<p>Total = <strong>44</strong></p>

<p>Number of requests per second = <strong>44 * 1000 / 25 = 1760</strong> requests</p>

<p>Based on the use case, you can compromise latency and decrease number of partitions/requests to the queue, if the message load is low.</p>

<p>Sample parameters to fit into <strong>10</strong> requests per second on a “monolith” deployment:</p>

<div class="language-yml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
</pre></td><td class="rouge-code"><pre><span class="na">queue</span><span class="pi">:</span>
<span class="nn">...</span>
  <span class="na">transport_api</span><span class="pi">:</span>
    <span class="na">request_poll_interval</span><span class="pi">:</span> <span class="s2">"</span><span class="s">${TB_QUEUE_TRANSPORT_REQUEST_POLL_INTERVAL_MS:1000}"</span>
    <span class="na">response_poll_interval</span><span class="pi">:</span> <span class="s2">"</span><span class="s">${TB_QUEUE_TRANSPORT_RESPONSE_POLL_INTERVAL_MS:1000}"</span>
<span class="nn">...</span>
  <span class="na">core</span><span class="pi">:</span>
    <span class="na">poll-interval</span><span class="pi">:</span> <span class="s2">"</span><span class="s">${TB_QUEUE_CORE_POLL_INTERVAL_MS:1000}"</span>
    <span class="na">partitions</span><span class="pi">:</span> <span class="s2">"</span><span class="s">${TB_QUEUE_CORE_PARTITIONS:2}"</span>
<span class="nn">...</span>
  <span class="na">js</span><span class="pi">:</span>
    <span class="na">response_poll_interval</span><span class="pi">:</span> <span class="s2">"</span><span class="s">${REMOTE_JS_RESPONSE_POLL_INTERVAL_MS:1000}"</span>
<span class="nn">...</span>
  <span class="na">rule-engine</span><span class="pi">:</span>
    <span class="na">poll-interval</span><span class="pi">:</span> <span class="s2">"</span><span class="s">${TB_QUEUE_RULE_ENGINE_POLL_INTERVAL_MS:1000}"</span>
<span class="nn">...</span>
    <span class="na">queues</span><span class="pi">:</span>
        <span class="na">poll-interval</span><span class="pi">:</span> <span class="s2">"</span><span class="s">${TB_QUEUE_RE_MAIN_POLL_INTERVAL_MS:1000}"</span>
        <span class="na">partitions</span><span class="pi">:</span> <span class="s2">"</span><span class="s">${TB_QUEUE_RE_MAIN_PARTITIONS:2}"</span>
<span class="nn">...</span>
        <span class="na">poll-interval</span><span class="pi">:</span> <span class="s2">"</span><span class="s">${TB_QUEUE_RE_HP_POLL_INTERVAL_MS:1000}"</span>
        <span class="na">partitions</span><span class="pi">:</span> <span class="s2">"</span><span class="s">${TB_QUEUE_RE_HP_PARTITIONS:1}"</span>
<span class="nn">...</span>
        <span class="na">poll-interval</span><span class="pi">:</span> <span class="s2">"</span><span class="s">${TB_QUEUE_RE_SQ_POLL_INTERVAL_MS:1000}"</span>
        <span class="na">partitions</span><span class="pi">:</span> <span class="s2">"</span><span class="s">${TB_QUEUE_RE_SQ_PARTITIONS:1}"</span>
<span class="nn">...</span>
  <span class="na">transport</span><span class="pi">:</span>
    <span class="na">poll_interval</span><span class="pi">:</span> <span class="s2">"</span><span class="s">${TB_QUEUE_TRANSPORT_NOTIFICATIONS_POLL_INTERVAL_MS:1000}"</span>
</pre></td></tr></tbody></table></code></pre></div></div>

</td></tr></table>
      </div>
    </div>
    <div id="service-bus" class="panel-collapse collapse">
      <div class="panel-body">
        <table><tr><td>
<h4 class="no_toc" id="azure-service-bus-configuration">Azure Service Bus Configuration</h4>

<p>To access Azure Service Bus, you first need to create an <a href="https://azure.microsoft.com/">Azure account</a>.</p>

<p>To work with Service Bus service you will need to create a Service Bus Namespace using <a href="https://docs.microsoft.com/en-us/azure/service-bus-messaging/service-bus-create-namespace-portal">this instruction</a>.</p>

<p>Create Shared Access Signature using <a href="https://docs.microsoft.com/en-us/azure/service-bus-messaging/service-bus-create-namespace-portal#get-the-connection-string">this instruction</a>.</p>

<h5 class="no_toc" id="thingsboard-configuration">ThingsBoard Configuration</h5>

<p>Open the Notepad or other editor as administrator user (right click on the app icon and select “Run as administrator”).<br />
Open the following file for editing (select “All Files” instead of “Text Documents” in file choosing dialog, the encoding is UTF-8):</p>

<div class="language-text copy-code highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre>C:\Program Files (x86)\thingsboard\conf\thingsboard.yml
</pre></td></tr></tbody></table></code></pre></div></div>

<p>and locate “queue:” block. Make sure the queue type is “service-bus”, and don’t forget to replace “YOUR_NAMESPACE_NAME” with your <strong>real Service Bus namespace name</strong>, and “YOUR_SAS_KEY_NAME”, “YOUR_SAS_KEY” with your <strong>real Service Bus credentials. Note: “YOUR_SAS_KEY_NAME” it is “SAS Policy”, “YOUR_SAS_KEY” it is “SAS Policy Primary Key”:</strong></p>

<div class="language-yml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
</pre></td><td class="rouge-code"><pre><span class="na">queue</span><span class="pi">:</span>
  <span class="na">type</span><span class="pi">:</span> <span class="s2">"</span><span class="s">${TB_QUEUE_TYPE:service-bus}"</span>
<span class="nn">...</span>
  <span class="na">service_bus</span><span class="pi">:</span>
    <span class="na">namespace_name</span><span class="pi">:</span> <span class="s2">"</span><span class="s">${TB_QUEUE_SERVICE_BUS_NAMESPACE_NAME:YOUR_NAMESPACE_NAME}"</span>
    <span class="na">sas_key_name</span><span class="pi">:</span> <span class="s2">"</span><span class="s">${TB_QUEUE_SERVICE_BUS_SAS_KEY_NAME:YOUR_SAS_KEY_NAME}"</span>
    <span class="na">sas_key</span><span class="pi">:</span> <span class="s2">"</span><span class="s">${TB_QUEUE_SERVICE_BUS_SAS_KEY:YOUR_SAS_KEY}"</span>
    <span class="na">max_messages</span><span class="pi">:</span> <span class="s2">"</span><span class="s">${TB_QUEUE_SERVICE_BUS_MAX_MESSAGES:1000}"</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p><strong>These params affect the number of requests per second from each partitions per each queue.</strong></p>

<p>Number of requests to particular Message Queue calculated based on the formula:</p>

<p>((Number of Rule Engine and Core Queues) * (Number of partitions per Queue) + 
(Number of transport queues) + (Number of microservices) + (Number of JS executors)) * 1000 / POLL_INTERVAL_MS</p>

<p>For example, number of requests based on default parameters is:</p>

<p>Rule Engine queues:</p>

<p>Main <strong>10</strong> partitions + HighPriority <strong>10</strong> partitions + SequentialByOriginator <strong>10</strong> partitions = <strong>30</strong></p>

<p>Core queue <strong>10</strong> partitions</p>

<p>Transport request Queue + response Queue = <strong>2</strong></p>

<p>Rule Engine Transport notifications Queue + Core Transport notifications Queue = <strong>2</strong></p>

<p>Total = <strong>44</strong></p>

<p>Number of requests per second = <strong>44 * 1000 / 25 = 1760</strong> requests</p>

<p>Based on the use case, you can compromise latency and decrease number of partitions/requests to the queue, if the message load is low.</p>

<p>Sample parameters to fit into <strong>10</strong> requests per second on a “monolith” deployment:</p>

<div class="language-yml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
</pre></td><td class="rouge-code"><pre><span class="na">queue</span><span class="pi">:</span>
<span class="nn">...</span>
  <span class="na">transport_api</span><span class="pi">:</span>
    <span class="na">request_poll_interval</span><span class="pi">:</span> <span class="s2">"</span><span class="s">${TB_QUEUE_TRANSPORT_REQUEST_POLL_INTERVAL_MS:1000}"</span>
    <span class="na">response_poll_interval</span><span class="pi">:</span> <span class="s2">"</span><span class="s">${TB_QUEUE_TRANSPORT_RESPONSE_POLL_INTERVAL_MS:1000}"</span>
<span class="nn">...</span>
  <span class="na">core</span><span class="pi">:</span>
    <span class="na">poll-interval</span><span class="pi">:</span> <span class="s2">"</span><span class="s">${TB_QUEUE_CORE_POLL_INTERVAL_MS:1000}"</span>
    <span class="na">partitions</span><span class="pi">:</span> <span class="s2">"</span><span class="s">${TB_QUEUE_CORE_PARTITIONS:2}"</span>
<span class="nn">...</span>
  <span class="na">js</span><span class="pi">:</span>
    <span class="na">response_poll_interval</span><span class="pi">:</span> <span class="s2">"</span><span class="s">${REMOTE_JS_RESPONSE_POLL_INTERVAL_MS:1000}"</span>
<span class="nn">...</span>
  <span class="na">rule-engine</span><span class="pi">:</span>
    <span class="na">poll-interval</span><span class="pi">:</span> <span class="s2">"</span><span class="s">${TB_QUEUE_RULE_ENGINE_POLL_INTERVAL_MS:1000}"</span>
<span class="nn">...</span>
    <span class="na">queues</span><span class="pi">:</span>
        <span class="na">poll-interval</span><span class="pi">:</span> <span class="s2">"</span><span class="s">${TB_QUEUE_RE_MAIN_POLL_INTERVAL_MS:1000}"</span>
        <span class="na">partitions</span><span class="pi">:</span> <span class="s2">"</span><span class="s">${TB_QUEUE_RE_MAIN_PARTITIONS:2}"</span>
<span class="nn">...</span>
        <span class="na">poll-interval</span><span class="pi">:</span> <span class="s2">"</span><span class="s">${TB_QUEUE_RE_HP_POLL_INTERVAL_MS:1000}"</span>
        <span class="na">partitions</span><span class="pi">:</span> <span class="s2">"</span><span class="s">${TB_QUEUE_RE_HP_PARTITIONS:1}"</span>
<span class="nn">...</span>
        <span class="na">poll-interval</span><span class="pi">:</span> <span class="s2">"</span><span class="s">${TB_QUEUE_RE_SQ_POLL_INTERVAL_MS:1000}"</span>
        <span class="na">partitions</span><span class="pi">:</span> <span class="s2">"</span><span class="s">${TB_QUEUE_RE_SQ_PARTITIONS:1}"</span>
<span class="nn">...</span>
  <span class="na">transport</span><span class="pi">:</span>
    <span class="na">poll_interval</span><span class="pi">:</span> <span class="s2">"</span><span class="s">${TB_QUEUE_TRANSPORT_NOTIFICATIONS_POLL_INTERVAL_MS:1000}"</span>
</pre></td></tr></tbody></table></code></pre></div></div>

</td></tr></table>
      </div>
    </div>
    <div id="rabbitmq" class="panel-collapse collapse">
      <div class="panel-body">
        <table><tr><td>
<h4 class="no_toc" id="rabbitmq-installation">RabbitMQ Installation</h4>

<p>For installing RabbitMQ use this <a href="https://www.rabbitmq.com/install-windows.html">instruction</a>.</p>

<h5 class="no_toc" id="thingsboard-configuration">ThingsBoard Configuration</h5>

<p>Open the Notepad or other editor as administrator user (right click on the app icon and select “Run as administrator”).<br />
Open the following file for editing (select “All Files” instead of “Text Documents” in file choosing dialog, the encoding is UTF-8):</p>

<div class="language-text copy-code highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre>C:\Program Files (x86)\thingsboard\conf\thingsboard.yml
</pre></td></tr></tbody></table></code></pre></div></div>

<p>and locate “queue:” block. Make sure the queue type is “rabbitmq” and don’t forget to replace “YOUR_USERNAME” and “YOUR_PASSWORD” with your <strong>real user credentials</strong>, “localhost” and “5672” with your <strong>real RabbitMQ host and port</strong>:</p>

<div class="language-yml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
</pre></td><td class="rouge-code"><pre><span class="na">queue</span><span class="pi">:</span>
  <span class="na">type</span><span class="pi">:</span> <span class="s2">"</span><span class="s">${TB_QUEUE_TYPE:rabbitmq}"</span>
<span class="nn">...</span>
  <span class="na">rabbitmq</span><span class="pi">:</span>
    <span class="na">exchange_name</span><span class="pi">:</span> <span class="s2">"</span><span class="s">${TB_QUEUE_RABBIT_MQ_EXCHANGE_NAME:}"</span>
    <span class="na">host</span><span class="pi">:</span> <span class="s2">"</span><span class="s">${TB_QUEUE_RABBIT_MQ_HOST:localhost}"</span>
    <span class="na">port</span><span class="pi">:</span> <span class="s2">"</span><span class="s">${TB_QUEUE_RABBIT_MQ_PORT:5672}"</span>
    <span class="na">virtual_host</span><span class="pi">:</span> <span class="s2">"</span><span class="s">${TB_QUEUE_RABBIT_MQ_VIRTUAL_HOST:/}"</span>
    <span class="na">username</span><span class="pi">:</span> <span class="s2">"</span><span class="s">${TB_QUEUE_RABBIT_MQ_USERNAME:YOUR_USERNAME}"</span>
    <span class="na">password</span><span class="pi">:</span> <span class="s2">"</span><span class="s">${TB_QUEUE_RABBIT_MQ_PASSWORD:YOUR_PASSWORD}"</span>
    <span class="na">automatic_recovery_enabled</span><span class="pi">:</span> <span class="s2">"</span><span class="s">${TB_QUEUE_RABBIT_MQ_AUTOMATIC_RECOVERY_ENABLED:false}"</span>
    <span class="na">connection_timeout</span><span class="pi">:</span> <span class="s2">"</span><span class="s">${TB_QUEUE_RABBIT_MQ_CONNECTION_TIMEOUT:60000}"</span>
    <span class="na">handshake_timeout</span><span class="pi">:</span> <span class="s2">"</span><span class="s">${TB_QUEUE_RABBIT_MQ_HANDSHAKE_TIMEOUT:10000}"</span>
    <span class="na">queue-properties</span><span class="pi">:</span>
</pre></td></tr></tbody></table></code></pre></div></div>

</td></tr></table>
      </div>
    </div>
    <div id="confluent-cloud" class="panel-collapse collapse">
      <div class="panel-body">
        <table><tr><td>
<h4 class="no_toc" id="confluent-cloud-configuration">Confluent Cloud Configuration</h4>

<p>To access <a href="https://docs.confluent.io/current/platform.html#what-is-cp">Confluent Cloud</a> 
you should first create an <a href="https://confluent.cloud/login">account</a>, 
then create a <a href="https://docs.confluent.io/current/quickstart/cloud-quickstart/index.html#step-1-create-a-ak-cluster-in-ccloud">Kafka cluster</a> 
and get your <a href="https://docs.confluent.io/current/quickstart/cloud-quickstart/index.html#step-4-create-an-api-key">API Key</a>.</p>

<h5 class="no_toc" id="thingsboard-configuration">ThingsBoard Configuration</h5>

<p>Open the Notepad or other editor as administrator user (right click on the app icon and select “Run as administrator”).<br />
Open the following file for editing (select “All Files” instead of “Text Documents” in file choosing dialog, the encoding is UTF-8):</p>

<div class="language-text copy-code highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre>C:\Program Files (x86)\thingsboard\conf\thingsboard.yml
</pre></td></tr></tbody></table></code></pre></div></div>

<p>and locate “queue:” block. Make sure the queue type is “kafka”, replication factor is “3” and use confluent cloud is “true”.</p>

<p><strong>Don’t forget</strong> to replace “CLUSTER_API_KEY”, “CLUSTER_API_SECRET” and “localhost:9092” with your real Confluent Cloud bootstrap servers:</p>

<div class="language-yml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
</pre></td><td class="rouge-code"><pre><span class="na">queue</span><span class="pi">:</span>
  <span class="na">type</span><span class="pi">:</span> <span class="s2">"</span><span class="s">${TB_QUEUE_TYPE:kafka}"</span>
<span class="nn">...</span>
  <span class="na">kafka</span><span class="pi">:</span>
    <span class="s">bootstrap.servers</span><span class="pi">:</span> <span class="s2">"</span><span class="s">${TB_KAFKA_SERVERS:localhost:9092}"</span>
<span class="nn">...</span>
    <span class="na">replication_factor</span><span class="pi">:</span> <span class="s2">"</span><span class="s">${TB_QUEUE_KAFKA_REPLICATION_FACTOR:3}"</span>
<span class="nn">...</span>
    <span class="na">use_confluent_cloud</span><span class="pi">:</span> <span class="s2">"</span><span class="s">${TB_QUEUE_KAFKA_USE_CONFLUENT_CLOUD:true}"</span>
<span class="nn">...</span>
      <span class="s">sasl.config</span><span class="pi">:</span> <span class="s2">"</span><span class="s">${TB_QUEUE_KAFKA_CONFLUENT_SASL_JAAS_CONFIG:org.apache.kafka.common.security.plain.PlainLoginModule</span><span class="nv"> </span><span class="s">required</span><span class="nv"> </span><span class="s">username=</span><span class="se">\"</span><span class="s">CLUSTER_API_KEY</span><span class="se">\"</span><span class="nv"> </span><span class="s">password=</span><span class="se">\"</span><span class="s">CLUSTER_API_SECRET</span><span class="se">\"</span><span class="s">;}"</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p><strong>These params affect the number of requests per second from each partitions per each queue.</strong></p>

<p>Number of requests to particular Message Queue calculated based on the formula:</p>

<p>((Number of Rule Engine and Core Queues) * (Number of partitions per Queue) + 
(Number of transport queues) + (Number of microservices) + (Number of JS executors)) * 1000 / POLL_INTERVAL_MS</p>

<p>For example, number of requests based on default parameters is:</p>

<p>Rule Engine queues:</p>

<p>Main <strong>10</strong> partitions + HighPriority <strong>10</strong> partitions + SequentialByOriginator <strong>10</strong> partitions = <strong>30</strong></p>

<p>Core queue <strong>10</strong> partitions</p>

<p>Transport request Queue + response Queue = <strong>2</strong></p>

<p>Rule Engine Transport notifications Queue + Core Transport notifications Queue = <strong>2</strong></p>

<p>Total = <strong>44</strong></p>

<p>Number of requests per second = <strong>44 * 1000 / 25 = 1760</strong> requests</p>

<p>Based on the use case, you can compromise latency and decrease number of partitions/requests to the queue, if the message load is low.</p>

<p>Sample parameters to fit into <strong>10</strong> requests per second on a “monolith” deployment:</p>

<div class="language-yml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
</pre></td><td class="rouge-code"><pre><span class="na">queue</span><span class="pi">:</span>
<span class="nn">...</span>
  <span class="na">transport_api</span><span class="pi">:</span>
    <span class="na">request_poll_interval</span><span class="pi">:</span> <span class="s2">"</span><span class="s">${TB_QUEUE_TRANSPORT_REQUEST_POLL_INTERVAL_MS:1000}"</span>
    <span class="na">response_poll_interval</span><span class="pi">:</span> <span class="s2">"</span><span class="s">${TB_QUEUE_TRANSPORT_RESPONSE_POLL_INTERVAL_MS:1000}"</span>
<span class="nn">...</span>
  <span class="na">core</span><span class="pi">:</span>
    <span class="na">poll-interval</span><span class="pi">:</span> <span class="s2">"</span><span class="s">${TB_QUEUE_CORE_POLL_INTERVAL_MS:1000}"</span>
    <span class="na">partitions</span><span class="pi">:</span> <span class="s2">"</span><span class="s">${TB_QUEUE_CORE_PARTITIONS:2}"</span>
<span class="nn">...</span>
  <span class="na">js</span><span class="pi">:</span>
    <span class="na">response_poll_interval</span><span class="pi">:</span> <span class="s2">"</span><span class="s">${REMOTE_JS_RESPONSE_POLL_INTERVAL_MS:1000}"</span>
<span class="nn">...</span>
  <span class="na">rule-engine</span><span class="pi">:</span>
    <span class="na">poll-interval</span><span class="pi">:</span> <span class="s2">"</span><span class="s">${TB_QUEUE_RULE_ENGINE_POLL_INTERVAL_MS:1000}"</span>
<span class="nn">...</span>
    <span class="na">queues</span><span class="pi">:</span>
        <span class="na">poll-interval</span><span class="pi">:</span> <span class="s2">"</span><span class="s">${TB_QUEUE_RE_MAIN_POLL_INTERVAL_MS:1000}"</span>
        <span class="na">partitions</span><span class="pi">:</span> <span class="s2">"</span><span class="s">${TB_QUEUE_RE_MAIN_PARTITIONS:2}"</span>
<span class="nn">...</span>
        <span class="na">poll-interval</span><span class="pi">:</span> <span class="s2">"</span><span class="s">${TB_QUEUE_RE_HP_POLL_INTERVAL_MS:1000}"</span>
        <span class="na">partitions</span><span class="pi">:</span> <span class="s2">"</span><span class="s">${TB_QUEUE_RE_HP_PARTITIONS:1}"</span>
<span class="nn">...</span>
        <span class="na">poll-interval</span><span class="pi">:</span> <span class="s2">"</span><span class="s">${TB_QUEUE_RE_SQ_POLL_INTERVAL_MS:1000}"</span>
        <span class="na">partitions</span><span class="pi">:</span> <span class="s2">"</span><span class="s">${TB_QUEUE_RE_SQ_PARTITIONS:1}"</span>
<span class="nn">...</span>
  <span class="na">transport</span><span class="pi">:</span>
    <span class="na">poll_interval</span><span class="pi">:</span> <span class="s2">"</span><span class="s">${TB_QUEUE_TRANSPORT_NOTIFICATIONS_POLL_INTERVAL_MS:1000}"</span>
</pre></td></tr></tbody></table></code></pre></div></div>

</td></tr></table>
      </div>
    </div>
  </div>
</div>

<script>
    jqueryUiDefer(initContentTogglewindowsThingsboardQueue);
    function initContentTogglewindowsThingsboardQueue() {
        $(function(){

            window.addEventListener('popstate', onPopStatewindowsThingsboardQueue);

            onPopStatewindowsThingsboardQueue();

            $('.tb-content-toggle#windowsThingsboardQueue a.content-toggle-button').click(function(event) {
                event.preventDefault();
                var id = $(this).attr("data-target").substring(1);
                var param = 'windowsThingsboardQueue';
                var params = Qs.parse(window.location.search, { ignoreQueryPrefix: true });
                params[param] = id;

                var newurl = window.location.protocol + "//" + window.location.host + window.location.pathname + '?' + Qs.stringify(params);
                if (window.location.hash) {
                    newurl += window.location.hash;
                }
                window.history.pushState({ path: newurl }, '', newurl);
                selectTargetwindowsThingsboardQueue(id);
            });
        });
    }

    function onPopStatewindowsThingsboardQueue() {
        var params = Qs.parse(window.location.search, { ignoreQueryPrefix: true });
        var targetId = params['windowsThingsboardQueue'];
        if (!targetId) {
            targetId = 'inmemory';
        }
        selectTargetwindowsThingsboardQueue(targetId);
    }

    function selectTargetwindowsThingsboardQueue(targetId) {
        $(".tb-content-toggle#windowsThingsboardQueue a.content-toggle-button").removeClass("active");
        $(".tb-content-toggle#windowsThingsboardQueue a.content-toggle-button[data-target='#"+targetId+"']").addClass("active");
        $('.tb-content-toggle#windowsThingsboardQueue .panel-collapse').removeClass("show");
        $('.tb-content-toggle#windowsThingsboardQueue .panel-collapse#'+targetId).addClass("show");
    }

</script>

<h3 id="step-5-optional-memory-update-for-slow-machines-1gb-of-ram">Step 5. [Optional] Memory update for slow machines (1GB of RAM)</h3>

<p>Open the Notepad or other editor as administrator user (right click on the app icon and select “Run as administrator”).<br />
Open the following file for editing (select “All Files” instead of “Text Documents” in file choosing dialog, the encoding is UTF-8):</p>

<div class="language-text copy-code highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre>C:\Program Files (x86)\thingsboard\thingsboard.xml
</pre></td></tr></tbody></table></code></pre></div></div>

<p>Locate the following lines to the configuration file.</p>

<div class="language-xml copy-code highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre></td><td class="rouge-code"><pre>    <span class="nt">&lt;startargument&gt;</span>-Xms512m<span class="nt">&lt;/startargument&gt;</span>
    <span class="nt">&lt;startargument&gt;</span>-Xmx1024m<span class="nt">&lt;/startargument&gt;</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>and change them to</p>

<div class="language-xml copy-code highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre></td><td class="rouge-code"><pre>    <span class="nt">&lt;startargument&gt;</span>-Xms256m<span class="nt">&lt;/startargument&gt;</span>
    <span class="nt">&lt;startargument&gt;</span>-Xmx256m<span class="nt">&lt;/startargument&gt;</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<h3 id="step-6-run-installation-script">Step 6. Run installation script</h3>

<p>Launch windows shell (Command Prompt) as Administrator. Change directory to your ThingsBoard installation directory.</p>

<p>Execute <strong>install.bat</strong> script to install ThingsBoard as a Windows service (or run <strong>“install.bat –loadDemo”</strong> to install and add demo data).
This means it will be automatically started on system startup. 
Similar, <strong>uninstall.bat</strong> will remove ThingsBoard from Windows services.
The output should be similar to this one:</p>

<div class="language-text highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
</pre></td><td class="rouge-code"><pre>C:\Program Files (x86)\thingsboard&gt;install.bat --loadDemo
Detecting Java version installed.
CurrentVersion 110
Java 11 found!
Installing thingsboard ...
...
ThingsBoard installed successfully!
</pre></td></tr></tbody></table></code></pre></div></div>

<h3 id="step-7-start-thingsboard-service">Step 7. Start ThingsBoard service</h3>

<p>Now let’s start the ThingsBoard service!
Open the command prompt as an Administrator and execute the following command:</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre>net start thingsboard
</pre></td></tr></tbody></table></code></pre></div></div>

<p>Expected output:</p>

<div class="language-text highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre></td><td class="rouge-code"><pre>The ThingsBoard Server Application service is starting.
The ThingsBoard Server Application service was started successfully.
</pre></td></tr></tbody></table></code></pre></div></div>

<p>In order to restart the ThingsBoard service you can execute following commands:</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre></td><td class="rouge-code"><pre>net stop thingsboard
net start thingsboard
</pre></td></tr></tbody></table></code></pre></div></div>

<p>Once started, you will be able to open Web UI using the following link:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre>http://localhost:8080/
</pre></td></tr></tbody></table></code></pre></div></div>

<p>The following default credentials are available if you have specified <em>–loadDemo</em> during execution of the installation script:</p>

<ul>
  <li><strong>System Administrator</strong>: sysadmin@thingsboard.org / sysadmin</li>
  <li><strong>Tenant Administrator</strong>: tenant@thingsboard.org / tenant</li>
  <li><strong>Customer User</strong>: customer@thingsboard.org / customer</li>
</ul>

<p>You can always change passwords for each account in account profile page.</p>

<div class="info-banner">
<img src="/images/doc-info-icon.svg" />   <div>
    <p>Please allow up to 90 seconds for the Web UI to start. This is applicable only for slow machines with 1-2 CPUs or 1-2 GB RAM.</p>
  </div>
</div>

<h3 id="troubleshooting">Troubleshooting</h3>

<p>The log files are located in <strong>logs</strong> folder (“C:\Program Files (x86)\thingsboard\logs” in our case).</p>

<p>The <strong>thingsboard.log</strong> file should contain following line:</p>

<div class="language-text highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre></td><td class="rouge-code"><pre>YYYY-MM-DD HH:mm:ss,sss [main] INFO  o.t.s.ThingsboardServerApplication - Started ThingsboardServerApplication in x.xxx seconds (JVM running for x.xxx)

</pre></td></tr></tbody></table></code></pre></div></div>

<p>In case of any unclear errors, use general <a href="/docs/user-guide/troubleshooting/#getting-help">troubleshooting guide</a> or <a href="/docs/contact-us/">contact us</a>.</p>

<h3 id="windows-firewall-settings">Windows firewall settings</h3>

<p>In order to have external access to ThingsBoard Web UI and device connectivity (HTTP, MQTT, CoAP)
you need to create a new inbound rule with Windows Firewall with Advanced Security.</p>

<ul>
  <li>Open “Windows Firewall” from “Control Panel”:</li>
</ul>

<p><img src="/images/user-guide/install/windows/windows7-firewall-1.png" alt="image" /></p>

<ul>
  <li>Click “Advanced settings” on the left panel:</li>
</ul>

<p><img src="/images/user-guide/install/windows/windows7-firewall-2.png" alt="image" /></p>

<ul>
  <li>Select “Inbound Rules” on the left panel, then click “New Rule…” on the right “Actions” panel:</li>
</ul>

<p><img src="/images/user-guide/install/windows/windows7-firewall-3.png" alt="image" /></p>

<ul>
  <li>Now new “New Inbound Rule Wizard” window will open. On the first step “Rule Type” select “Port” option:</li>
</ul>

<p><img src="/images/user-guide/install/windows/windows7-firewall-4.png" alt="image" /></p>

<ul>
  <li>On the “Protocol and Ports” step select “TCP” protocol and enter port list <strong>8080, 1883, 5683</strong> in the “Specific local ports” field:</li>
</ul>

<p><img src="/images/user-guide/install/windows/windows7-firewall-5.png" alt="image" /></p>

<ul>
  <li>On the “Action” step leave “Allow the connection” option selected:</li>
</ul>

<p><img src="/images/user-guide/install/windows/windows7-firewall-6.png" alt="image" /></p>

<ul>
  <li>On the “Profile” step select Windows network profiles when to apply this rule:</li>
</ul>

<p><img src="/images/user-guide/install/windows/windows7-firewall-7.png" alt="image" /></p>

<ul>
  <li>Finally, give the name to this rule (for ex. “ThingsBoard Service Networking”) and click “Finish”.</li>
</ul>

<p><img src="/images/user-guide/install/windows/windows7-firewall-8.png" alt="image" /></p>

<h2 id="next-steps">Next steps</h2>

<ul>
  <li>
    <p><a href="/docs/guides#AnchorIDGettingStartedGuides">Getting started guides</a> - These guides provide quick overview of main ThingsBoard features. Designed to be completed in 15-30 minutes.</p>
  </li>
  <li>
    <p><a href="/docs/guides#AnchorIDConnectYourDevice">Connect your device</a> - Learn how to connect devices based on your connectivity technology or solution.</p>
  </li>
  <li>
    <p><a href="/docs/guides#AnchorIDDataVisualization">Data visualization</a> - These guides contain instructions how to configure complex ThingsBoard dashboards.</p>
  </li>
  <li>
    <p><a href="/docs/guides#AnchorIDDataProcessing">Data processing &amp; actions</a> - Learn how to use ThingsBoard Rule Engine.</p>
  </li>
  <li>
    <p><a href="/docs/guides#AnchorIDDataAnalytics">IoT Data analytics</a> - Learn how to use rule engine to perform basic analytics tasks.</p>
  </li>
  <li>
    <p><a href="/docs/guides#AnchorIDHardwareSamples">Hardware samples</a> - Learn how to connect various hardware platforms to ThingsBoard.</p>
  </li>
  <li>
    <p><a href="/docs/guides#AnchorIDAdvancedFeatures">Advanced features</a> - Learn about advanced ThingsBoard features.</p>
  </li>
  <li>
    <p><a href="/docs/guides#AnchorIDContribution">Contribution and Development</a> - Learn about contribution and development in ThingsBoard.</p>
  </li>
</ul>

<p><br /></p>


      </div>
      <footer>
	<main class="light-text">
		<div class="newsletterSubsContainer">
            <script type="text/javascript">
                function subscribeForNewsletter(event) {
                    event.stopPropagation();
                    var script_tag = document.createElement('script');
                    script_tag.setAttribute("type", "text/javascript");
                    script_tag.setAttribute("src", "https://static.mailerlite.com/js/w/webforms.min.js?v28bf44f740701752bfc6767bc7e171d4");
                    document.getElementsByTagName("head")[0].appendChild(script_tag);
                    $(event.target).css('display', 'none');
                    $('#mlb2-7341216').css('display', 'block');
                }
            </script>
            <button class="n-button price subscribe" onClick="subscribeForNewsletter(event)">Sign up for ThingsBoard news</button>
            <div id="mlb2-7341216" class="ml-subscribe-form ml-subscribe-form-7341216" style="display: none;">
<!--            <div id="mlb2-7341216" class="ml-subscribe-form ml-subscribe-form-7341216" style="display: block;">-->
                <div class="ml-vertical-align-center">
                    <div class="subscribe-form ml-block-success" style="display: none;">
                        <div class="form-section">
                            <p>Thank you for your interest in ThingsBoard!<br/>Have a great day!</p>
                        </div>
                    </div>
                    <form class="ml-block-form" action="https://static.mailerlite.com/webforms/submit/r9r9x7" data-id="708170" data-code="r9r9x7" method="POST" target="_blank">
                        <div class="subscribe-form horizontal">
                            <div class="form-section horizontal">
                                <div class="form-group ml-field-email ml-validate-required ml-validate-email">
                                    <input type="email" name="fields[email]" class="form-control" placeholder="Email address*" value="" autocomplete="email" x-autocompletetype="email" spellcheck="false" autocapitalize="off" autocorrect="off">
                                </div>
                            </div>
                            <input type="hidden" name="ml-submit" value="1">
                            <div class="form-section horizontal ml-button-position">
                                <button class="primary n-button price subscribe" type="submit">
                                    Subscribe
                                </button>
                                <button disabled="disabled" style="display: none;" type="button" class="n-button loading">
                                    <img src="https://static.mailerlite.com/images/rolling@2x.gif" width="20" height="20" style="width: 20px; height: 20px;">
                                </button>
                            </div>
                            <p>By subscribing you agree to receive newsletters from ThingsBoard, Inc.</p>
                        </div>
                    </form>
                </div>
            </div>
		</div>

        <hr>

        <div class="deeper">
            <a href="/" class="footer-logo"></a>
            <nav>
                <a href="/docs/getting-started-guides/helloworld/">Get Started</a>
                <a href="/docs/">Documentation</a>
                <a href="/iot-use-cases/">Use cases</a>
                <a href="https://blog.thingsboard.io/">Blog</a>
                <a href="/docs/services/">Services</a>
                <a href="/docs/contact-us/">Contact us</a>
            </nav>
        </div>

        <div class="deepmost">
            <div class="copyright">&copy; 2021 The ThingsBoard Authors</div>
            <div class="social">
                <a href="https://github.com/thingsboard/thingsboard" class="github"></a>
                <a href="https://gitter.im/thingsboard/chat" class="gitter"></a>
                <a href="https://www.youtube.com/thingsboard" class="youtube"></a>
                <a href="http://stackoverflow.com/questions/tagged/thingsboard" class="stack-overflow"></a>
                <a href="https://groups.google.com/forum/#!forum/thingsboard" class="mailing-list"></a>
                <a href="https://www.facebook.com/thingsboard" class="facebook"></a>
                <a href="https://twitter.com/thingsboard" class="twitter"></a>
            </div>
        </div>
	</main>
</footer>

  </div>
</section>

<style>
  .cse .gsc-control-cse, .gsc-control-cse {
    padding: 0;
  }
  .gsc-control-cse table, .gsc-control-cse-en table {
    margin:0px !important;
  }
  .gsc-above-wrapper-area {
    border-bottom: 0;
  }
</style>
<script>
    jqueryDefer(function () {
        $(document).on('selectionchange',function() {
        // $(document).mouseup(function () {
            $('.clipboard-btn').removeClass('noChars');
            var selectedChars = getSelectedText();
            // $('#numberChars').html(selectedChars.length);
            if (selectedChars == 0) {
                $('.clipboard-btn').addClass('noChars');
            }
        });
    });
    function getSelectedText() {
        var text;
        if (window.getSelection) {
            text = window.getSelection().toString();
        } else if (document.getSelection) {
            text = document.getSelection();
        } else if (document.selection) {
            text = document.selection.createRange().text;
        }
        return text;
    }
</script>
<script>
    jqueryDefer(function () {
        $(document).ready(function () {
            var allCodeBlocksElements = $(".copy-code");
            allCodeBlocksElements.each(function (i) {
                var codeBlock = $(this);
                if (!codeBlock.hasClass('highlighter-rouge')) {
                    codeBlock = codeBlock.find('.highlighter-rouge');
                }
                codeBlock.each(function () {
                    var block = codeBlock.find('pre.highlight > code .rouge-code');
                    var currentId = "codeblock" + (i + 1);
                    block.attr('id', currentId);
                    var clipButton = $('<button class="clipboard-btn" data-clipboard-target="#' + currentId + '"><p>Copy to clipboard</p><div><img src="/images/copy-code-icon.svg" alt="Copy to clipboard"></div></button>');
                    $(this).append(clipButton);
                    var troyan = codeBlock.find('pre.highlight');
                    var Tooltip = $('<div class="customTooltip"><div class="tooltipText">Copied!</div></div>');
                    troyan.append(Tooltip);
                    troyan.addClass('clipboard-btn');
                    troyan.attr('data-clipboard-target', "#" + currentId);
                    troyan.on('mouseleave', clearTooltip);
                    troyan.on('blur', clearTooltip);
                    troyan.on('click', function(e) {
                        var el = $(e.currentTarget);
                        if (el.hasClass('showTool')) {
                            clearTooltip(e);
                            troyan.attr('data-skip-tooltip', "true");
                        }
                    });
                });
            });

            var clipboard = new Clipboard('.noChars');
            clipboard.on('success', function (e) {
                $('.clipboard-btn').removeClass('noChars');
                e.clearSelection();
                var trigger = e.trigger;
                if (!$(trigger).attr('data-skip-tooltip')) {
                    showTooltip(e.trigger, 'Copied!');
                } else {
                    $(trigger).removeAttr('data-skip-tooltip');
                }
            });

            $('#search').focus(
                function(){
                    $(this).parent('#searchBox').addClass('focused');
                }).blur(
                function(){
                    $(this).parent('#searchBox').removeClass('focused');
                });

            $('#searchBox .searchButton').click(function () {
                var value = $('#search').val();
                window.location.replace('/docs/search/?q=' + value);
            });

            $('#docsBreadcrumbs').click(function () {
                if ($(this).hasClass('active')) {
                    $(this).removeClass('active');
                    $('#docsNav').removeClass('active');
                    $('#searchBox').removeClass('visible');
                } else {
                    $(this).addClass('active');
                    $('#docsNav').addClass('active');
                    $('#searchBox').addClass('visible');
                }
            });
        });

        function clearTooltip(e) {
            var el = $(e.currentTarget);
            el.removeClass('showTool');
            el.attr('aria-label', null);
        }

        function showTooltip(elem, msg) {
            var el = $(elem);
            el.addClass('showTool');
            el.attr('aria-label', msg);
        }
    });
</script>

<script>
    jqueryDefer(function () {
        var markdownTocs = null;
        var contentAnchors = [];
        var activeAnchor = null;
        var firstAnchor = null;
        var lastAnchor = null;

        function updatePositions() {
            contentAnchors = [];
            markdownTocs.each(function (i) {
                var tocAnchor = $(this).children('a');
                var href = tocAnchor.attr('href');
                var contentAnchor = $('div#content ' + href);
                var top = Math.floor(contentAnchor.offset().top);
                var bottom;
                if (i < markdownTocs.length - 1) {
                    var nextHref = $(markdownTocs[i + 1]).children('a').attr('href');
                    var nextContentAnchor = $('div#content ' + nextHref);
                    bottom = Math.floor(nextContentAnchor.offset().top);
                } else {
                    bottom = $('div#content').offset().top + $('div#content').innerHeight();
                }
                var contentAnchorInfo = {anchor: contentAnchor, toc: $(this), top: top, bottom: bottom, href: href};
                contentAnchors.push(contentAnchorInfo);
                if (i === 0) {
                    firstAnchor = contentAnchorInfo;
                }
                if (i === markdownTocs.length - 1) {
                    lastAnchor = contentAnchorInfo;
                }
            });
        }

        function findActiveContentToc() {
            var top = $(window).scrollTop();
            var bottom = top + $(window).height();
            if (bottom === $('#encyclopedia').offset().top + $('#encyclopedia').innerHeight()) {
                return lastAnchor;
            } else {
                bottom -= 154;
                for (var i = 0; i < contentAnchors.length; i++) {
                    var contentAnchor = contentAnchors[i];
                    if (contentAnchor.top <= bottom &&
                        contentAnchor.bottom > top) {
                        return contentAnchor;
                    }
                }
            }
            return firstAnchor;
        }

        function updateActiveToc(init) {
            updatePositions();
            var newActiveAnchor = findActiveContentToc();
            if (!activeAnchor || newActiveAnchor.href !== activeAnchor.href) {
                activeAnchor = newActiveAnchor;
                markdownTocs.removeClass('active');
                activeAnchor.toc.addClass('active');
                var tocTop = $('#table-of-contents').scrollTop() + 100;
                var tocBottom = tocTop + $('#table-of-contents').innerHeight() - 200;
                var activeTocTop = activeAnchor.toc.position().top;
                var activeTocBottom = activeTocTop + activeAnchor.toc.children(':first').height();
                if (tocTop > activeTocTop) {
                    activeAnchor.toc[0].scrollIntoView();
                    $('#table-of-contents')[0].scrollTop -= 100;
                } else if (tocBottom < activeTocBottom) {
                    activeAnchor.toc[0].scrollIntoView();
                    $('#table-of-contents')[0].scrollTop += init ? -100 : 100;
                }
            }
        }
        $( document ).ready(function() {
            var tocs = $('#content > ul#markdown-toc');
            var tableOfContents = $('#table-of-contents');
            tableOfContents.append(tocs);
            markdownTocs = $('#table-of-contents ul#markdown-toc li').filter(function() {
                var tocAnchor = $(this).children('a');
                var href = tocAnchor.attr('href');
                if (!href.startsWith('#')) {
                    return false;
                } else {
                    var contentAnchor = $('div#content ' + href);
                    return contentAnchor.length > 0;
                }
            });
            updateActiveToc(true);
        });

        $(document).on("scroll", function() {
            updateActiveToc(false);
        });

    });
</script>

</body>
</html>

